2024-10-25 10:46:13,405 - INFO - Logging initiated.
2024-10-25 10:46:25,625 - INFO - Logging initiated.
2024-10-25 10:46:32,410 - INFO - Logging initiated.
2024-10-25 10:46:32,410 - INFO - Pipeline started.
2024-10-25 10:46:32,410 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 10:46:32,867 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 10:46:32,868 - INFO - Denoised image not found. Performing denoising.
2024-10-25 10:46:33,124 - INFO - Slice 0: Estimated noise sigma = 0.0017195463651570062
2024-10-25 10:46:33,633 - INFO - Slice 0: Denoising complete.
2024-10-25 10:46:33,638 - INFO - Slice 1: Estimated noise sigma = 0.001648268383139434
2024-10-25 10:46:34,116 - INFO - Slice 1: Denoising complete.
2024-10-25 10:46:34,121 - INFO - Slice 2: Estimated noise sigma = 0.0016221781825501928
2024-10-25 10:46:34,613 - INFO - Slice 2: Denoising complete.
2024-10-25 10:46:34,618 - INFO - Slice 3: Estimated noise sigma = 0.0017195465377546205
2024-10-25 10:46:35,112 - INFO - Slice 3: Denoising complete.
2024-10-25 10:46:35,117 - INFO - Slice 4: Estimated noise sigma = 0.0016221783551478072
2024-10-25 10:46:35,600 - INFO - Slice 4: Denoising complete.
2024-10-25 10:46:35,605 - INFO - Slice 5: Estimated noise sigma = 0.0016221783551478072
2024-10-25 10:46:36,091 - INFO - Slice 5: Denoising complete.
2024-10-25 10:46:36,097 - INFO - Slice 6: Estimated noise sigma = 0.0013561636627213796
2024-10-25 10:46:36,578 - INFO - Slice 6: Denoising complete.
2024-10-25 10:46:36,583 - INFO - Slice 7: Estimated noise sigma = 0.001161427470105367
2024-10-25 10:46:37,071 - INFO - Slice 7: Denoising complete.
2024-10-25 10:46:37,076 - INFO - Slice 8: Estimated noise sigma = 0.0011614272975077526
2024-10-25 10:46:37,558 - INFO - Slice 8: Denoising complete.
2024-10-25 10:46:37,563 - INFO - Slice 9: Estimated noise sigma = 0.0011544373530206237
2024-10-25 10:46:38,034 - INFO - Slice 9: Denoising complete.
2024-10-25 10:46:38,039 - INFO - Slice 10: Estimated noise sigma = 0.0011875172392005725
2024-10-25 10:46:38,523 - INFO - Slice 10: Denoising complete.
2024-10-25 10:46:38,528 - INFO - Slice 11: Estimated noise sigma = 0.0012848852492097715
2024-10-25 10:46:39,012 - INFO - Slice 11: Denoising complete.
2024-10-25 10:46:39,018 - INFO - Slice 12: Estimated noise sigma = 0.001258795825309795
2024-10-25 10:46:39,507 - INFO - Slice 12: Denoising complete.
2024-10-25 10:46:39,512 - INFO - Slice 13: Estimated noise sigma = 0.001356163403824958
2024-10-25 10:46:39,991 - INFO - Slice 13: Denoising complete.
2024-10-25 10:46:39,996 - INFO - Slice 14: Estimated noise sigma = 0.001356163403824958
2024-10-25 10:46:40,475 - INFO - Slice 14: Denoising complete.
2024-10-25 10:46:40,481 - INFO - Slice 15: Estimated noise sigma = 0.0013918032578218158
2024-10-25 10:46:40,958 - INFO - Slice 15: Denoising complete.
2024-10-25 10:46:40,962 - INFO - Slice 16: Estimated noise sigma = 0.0015248098273457648
2024-10-25 10:46:41,441 - INFO - Slice 16: Denoising complete.
2024-10-25 10:46:41,446 - INFO - Slice 17: Estimated noise sigma = 0.001550899855337392
2024-10-25 10:46:41,931 - INFO - Slice 17: Denoising complete.
2024-10-25 10:46:41,937 - INFO - Slice 18: Estimated noise sigma = 0.001550899855337392
2024-10-25 10:46:42,411 - INFO - Slice 18: Denoising complete.
2024-10-25 10:46:42,416 - INFO - Slice 19: Estimated noise sigma = 0.001680411927261216
2024-10-25 10:46:42,891 - INFO - Slice 19: Denoising complete.
2024-10-25 10:46:42,896 - INFO - Slice 20: Estimated noise sigma = 0.0016221783551478072
2024-10-25 10:46:43,369 - INFO - Slice 20: Denoising complete.
2024-10-25 10:46:43,375 - INFO - Slice 21: Estimated noise sigma = 0.0016221783551478072
2024-10-25 10:46:43,865 - INFO - Slice 21: Denoising complete.
2024-10-25 10:46:43,870 - INFO - Slice 22: Estimated noise sigma = 0.0017195465377546205
2024-10-25 10:46:44,343 - INFO - Slice 22: Denoising complete.
2024-10-25 10:46:44,348 - INFO - Slice 23: Estimated noise sigma = 0.00174563587535579
2024-10-25 10:46:44,821 - INFO - Slice 23: Denoising complete.
2024-10-25 10:46:44,826 - INFO - Slice 24: Estimated noise sigma = 0.001888192702379006
2024-10-25 10:46:45,297 - INFO - Slice 24: Denoising complete.
2024-10-25 10:46:45,302 - INFO - Slice 25: Estimated noise sigma = 0.001888193220171849
2024-10-25 10:46:45,772 - INFO - Slice 25: Denoising complete.
2024-10-25 10:46:45,778 - INFO - Slice 26: Estimated noise sigma = 0.0018134187556815866
2024-10-25 10:46:46,256 - INFO - Slice 26: Denoising complete.
2024-10-25 10:46:46,261 - INFO - Slice 27: Estimated noise sigma = 0.0018881930475742347
2024-10-25 10:46:46,740 - INFO - Slice 27: Denoising complete.
2024-10-25 10:46:46,745 - INFO - Slice 28: Estimated noise sigma = 0.001985561230181048
2024-10-25 10:46:47,232 - INFO - Slice 28: Denoising complete.
2024-10-25 10:46:47,238 - INFO - Slice 29: Estimated noise sigma = 0.001914283593358705
2024-10-25 10:46:47,806 - INFO - Slice 29: Denoising complete.
2024-10-25 10:46:47,812 - INFO - Slice 30: Estimated noise sigma = 0.001985561575376277
2024-10-25 10:46:48,368 - INFO - Slice 30: Denoising complete.
2024-10-25 10:46:48,374 - INFO - Slice 31: Estimated noise sigma = 0.0020829294127878615
2024-10-25 10:46:48,901 - INFO - Slice 31: Denoising complete.
2024-10-25 10:46:48,906 - INFO - Slice 32: Estimated noise sigma = 0.0021542084303911198
2024-10-25 10:46:49,392 - INFO - Slice 32: Denoising complete.
2024-10-25 10:46:49,397 - INFO - Slice 33: Estimated noise sigma = 0.002180297595394675
2024-10-25 10:46:49,869 - INFO - Slice 33: Denoising complete.
2024-10-25 10:46:49,874 - INFO - Slice 34: Estimated noise sigma = 0.0021802977679922894
2024-10-25 10:46:50,457 - INFO - Slice 34: Denoising complete.
2024-10-25 10:46:50,468 - INFO - Slice 35: Estimated noise sigma = 0.0026149586250431025
2024-10-25 10:46:51,175 - INFO - Slice 35: Denoising complete.
2024-10-25 10:46:51,183 - INFO - Slice 36: Estimated noise sigma = 0.0026149591428359454
2024-10-25 10:46:51,815 - INFO - Slice 36: Denoising complete.
2024-10-25 10:46:51,830 - INFO - Slice 37: Estimated noise sigma = 0.002491500414444662
2024-10-25 10:46:52,386 - INFO - Slice 37: Denoising complete.
2024-10-25 10:46:52,395 - INFO - Slice 38: Estimated noise sigma = 0.0024463131508091745
2024-10-25 10:46:52,969 - INFO - Slice 38: Denoising complete.
2024-10-25 10:46:52,975 - INFO - Slice 39: Estimated noise sigma = 0.0024463134960044032
2024-10-25 10:46:53,510 - INFO - Slice 39: Denoising complete.
2024-10-25 10:46:53,518 - INFO - Slice 40: Estimated noise sigma = 0.002543680470427916
2024-10-25 10:46:54,079 - INFO - Slice 40: Denoising complete.
2024-10-25 10:46:54,088 - INFO - Slice 41: Estimated noise sigma = 0.002712327670637988
2024-10-25 10:46:54,577 - INFO - Slice 41: Denoising complete.
2024-10-25 10:46:54,585 - INFO - Slice 42: Estimated noise sigma = 0.002783606170448403
2024-10-25 10:46:55,066 - INFO - Slice 42: Denoising complete.
2024-10-25 10:46:55,074 - INFO - Slice 43: Estimated noise sigma = 0.00286187452844714
2024-10-25 10:46:55,607 - INFO - Slice 43: Denoising complete.
2024-10-25 10:46:55,616 - INFO - Slice 44: Estimated noise sigma = 0.002880973662664759
2024-10-25 10:46:56,174 - INFO - Slice 44: Denoising complete.
2024-10-25 10:46:56,182 - INFO - Slice 45: Estimated noise sigma = 0.002907063000265928
2024-10-25 10:46:56,755 - INFO - Slice 45: Denoising complete.
2024-10-25 10:46:56,763 - INFO - Slice 46: Estimated noise sigma = 0.0029401478917766947
2024-10-25 10:46:57,268 - INFO - Slice 46: Denoising complete.
2024-10-25 10:46:57,276 - INFO - Slice 47: Estimated noise sigma = 0.002907063345461157
2024-10-25 10:46:57,815 - INFO - Slice 47: Denoising complete.
2024-10-25 10:46:57,823 - INFO - Slice 48: Estimated noise sigma = 0.002757515624663933
2024-10-25 10:46:58,310 - INFO - Slice 48: Denoising complete.
2024-10-25 10:46:58,318 - INFO - Slice 49: Estimated noise sigma = 0.0027123274980403733
2024-10-25 10:46:58,810 - INFO - Slice 49: Denoising complete.
2024-10-25 10:46:58,817 - INFO - Slice 50: Estimated noise sigma = 0.0027123254268690005
2024-10-25 10:46:59,302 - INFO - Slice 50: Denoising complete.
2024-10-25 10:46:59,309 - INFO - Slice 51: Estimated noise sigma = 0.00268623643446306
2024-10-25 10:46:59,806 - INFO - Slice 51: Denoising complete.
2024-10-25 10:46:59,813 - INFO - Slice 52: Estimated noise sigma = 0.002809694990256729
2024-10-25 10:47:00,306 - INFO - Slice 52: Denoising complete.
2024-10-25 10:47:00,313 - INFO - Slice 53: Estimated noise sigma = 0.0028357843278578984
2024-10-25 10:47:00,835 - INFO - Slice 53: Denoising complete.
2024-10-25 10:47:00,845 - INFO - Slice 54: Estimated noise sigma = 0.0028096955080495725
2024-10-25 10:47:01,391 - INFO - Slice 54: Denoising complete.
2024-10-25 10:47:01,401 - INFO - Slice 55: Estimated noise sigma = 0.0026149594880311745
2024-10-25 10:47:01,919 - INFO - Slice 55: Denoising complete.
2024-10-25 10:47:01,927 - INFO - Slice 56: Estimated noise sigma = 0.0026410488256323437
2024-10-25 10:47:02,490 - INFO - Slice 56: Denoising complete.
2024-10-25 10:47:02,498 - INFO - Slice 57: Estimated noise sigma = 0.002641048653034729
2024-10-25 10:47:03,051 - INFO - Slice 57: Denoising complete.
2024-10-25 10:47:03,060 - INFO - Slice 58: Estimated noise sigma = 0.002712326807649916
2024-10-25 10:47:03,632 - INFO - Slice 58: Denoising complete.
2024-10-25 10:47:03,640 - INFO - Slice 59: Estimated noise sigma = 0.002641048480437115
2024-10-25 10:47:04,210 - INFO - Slice 59: Denoising complete.
2024-10-25 10:47:04,219 - INFO - Slice 60: Estimated noise sigma = 0.002686237297451132
2024-10-25 10:47:04,739 - INFO - Slice 60: Denoising complete.
2024-10-25 10:47:04,746 - INFO - Slice 61: Estimated noise sigma = 0.002641048653034729
2024-10-25 10:47:05,250 - INFO - Slice 61: Denoising complete.
2024-10-25 10:47:05,257 - INFO - Slice 62: Estimated noise sigma = 0.0026410483078395004
2024-10-25 10:47:05,755 - INFO - Slice 62: Denoising complete.
2024-10-25 10:47:05,762 - INFO - Slice 63: Estimated noise sigma = 0.002712326807649916
2024-10-25 10:47:06,246 - INFO - Slice 63: Denoising complete.
2024-10-25 10:47:06,253 - INFO - Slice 64: Estimated noise sigma = 0.0026601479598499624
2024-10-25 10:47:06,773 - INFO - Slice 64: Denoising complete.
2024-10-25 10:47:06,781 - INFO - Slice 65: Estimated noise sigma = 0.002686236607060674
2024-10-25 10:47:07,292 - INFO - Slice 65: Denoising complete.
2024-10-25 10:47:07,300 - INFO - Slice 66: Estimated noise sigma = 0.0026862367796582887
2024-10-25 10:47:07,801 - INFO - Slice 66: Denoising complete.
2024-10-25 10:47:07,808 - INFO - Slice 67: Estimated noise sigma = 0.0027123242186856997
2024-10-25 10:47:08,329 - INFO - Slice 67: Denoising complete.
2024-10-25 10:47:08,340 - INFO - Slice 68: Estimated noise sigma = 0.0026862371248535175
2024-10-25 10:47:08,885 - INFO - Slice 68: Denoising complete.
2024-10-25 10:47:08,893 - INFO - Slice 69: Estimated noise sigma = 0.002738415972653471
2024-10-25 10:47:09,395 - INFO - Slice 69: Denoising complete.
2024-10-25 10:47:09,403 - INFO - Slice 70: Estimated noise sigma = 0.00271232698024753
2024-10-25 10:47:09,897 - INFO - Slice 70: Denoising complete.
2024-10-25 10:47:09,905 - INFO - Slice 71: Estimated noise sigma = 0.00271232698024753
2024-10-25 10:47:10,401 - INFO - Slice 71: Denoising complete.
2024-10-25 10:47:10,409 - INFO - Slice 72: Estimated noise sigma = 0.0027123266350523013
2024-10-25 10:47:10,942 - INFO - Slice 72: Denoising complete.
2024-10-25 10:47:10,950 - INFO - Slice 73: Estimated noise sigma = 0.00271232698024753
2024-10-25 10:47:11,438 - INFO - Slice 73: Denoising complete.
2024-10-25 10:47:11,446 - INFO - Slice 74: Estimated noise sigma = 0.0027123266350523013
2024-10-25 10:47:11,992 - INFO - Slice 74: Denoising complete.
2024-10-25 10:47:12,001 - INFO - Slice 75: Estimated noise sigma = 0.002712327325442759
2024-10-25 10:47:12,503 - INFO - Slice 75: Denoising complete.
2024-10-25 10:47:12,510 - INFO - Slice 76: Estimated noise sigma = 0.0026862371248535175
2024-10-25 10:47:12,998 - INFO - Slice 76: Denoising complete.
2024-10-25 10:47:13,005 - INFO - Slice 77: Estimated noise sigma = 0.00271232698024753
2024-10-25 10:47:13,500 - INFO - Slice 77: Denoising complete.
2024-10-25 10:47:13,508 - INFO - Slice 78: Estimated noise sigma = 0.0026862367796582887
2024-10-25 10:47:13,997 - INFO - Slice 78: Denoising complete.
2024-10-25 10:47:14,005 - INFO - Slice 79: Estimated noise sigma = 0.002712326807649916
2024-10-25 10:47:14,571 - INFO - Slice 79: Denoising complete.
2024-10-25 10:47:14,579 - INFO - Slice 80: Estimated noise sigma = 0.0026410488256323437
2024-10-25 10:47:15,107 - INFO - Slice 80: Denoising complete.
2024-10-25 10:47:15,114 - INFO - Slice 81: Estimated noise sigma = 0.0027123262898570725
2024-10-25 10:47:15,624 - INFO - Slice 81: Denoising complete.
2024-10-25 10:47:15,632 - INFO - Slice 82: Estimated noise sigma = 0.0028096955080495725
2024-10-25 10:47:16,166 - INFO - Slice 82: Denoising complete.
2024-10-25 10:47:16,175 - INFO - Slice 83: Estimated noise sigma = 0.0027836051348627167
2024-10-25 10:47:16,674 - INFO - Slice 83: Denoising complete.
2024-10-25 10:47:16,681 - INFO - Slice 84: Estimated noise sigma = 0.0027836059978507887
2024-10-25 10:47:17,181 - INFO - Slice 84: Denoising complete.
2024-10-25 10:47:17,188 - INFO - Slice 85: Estimated noise sigma = 0.002907063345461157
2024-10-25 10:47:17,686 - INFO - Slice 85: Denoising complete.
2024-10-25 10:47:17,693 - INFO - Slice 86: Estimated noise sigma = 0.002854890883772937
2024-10-25 10:47:18,187 - INFO - Slice 86: Denoising complete.
2024-10-25 10:47:18,194 - INFO - Slice 87: Estimated noise sigma = 0.00288097331746953
2024-10-25 10:47:18,684 - INFO - Slice 87: Denoising complete.
2024-10-25 10:47:18,692 - INFO - Slice 88: Estimated noise sigma = 0.0028096958532448013
2024-10-25 10:47:19,185 - INFO - Slice 88: Denoising complete.
2024-10-25 10:47:19,192 - INFO - Slice 89: Estimated noise sigma = 0.0028096958532448013
2024-10-25 10:47:19,694 - INFO - Slice 89: Denoising complete.
2024-10-25 10:47:19,703 - INFO - Slice 90: Estimated noise sigma = 0.0028096955080495725
2024-10-25 10:47:20,210 - INFO - Slice 90: Denoising complete.
2024-10-25 10:47:20,218 - INFO - Slice 91: Estimated noise sigma = 0.0027645075540236276
2024-10-25 10:47:20,743 - INFO - Slice 91: Denoising complete.
2024-10-25 10:47:20,752 - INFO - Slice 92: Estimated noise sigma = 0.0027836054800579454
2024-10-25 10:47:21,287 - INFO - Slice 92: Denoising complete.
2024-10-25 10:47:21,295 - INFO - Slice 93: Estimated noise sigma = 0.002907063690656386
2024-10-25 10:47:21,823 - INFO - Slice 93: Denoising complete.
2024-10-25 10:47:21,830 - INFO - Slice 94: Estimated noise sigma = 0.002880973662664759
2024-10-25 10:47:22,337 - INFO - Slice 94: Denoising complete.
2024-10-25 10:47:22,344 - INFO - Slice 95: Estimated noise sigma = 0.002790596891624797
2024-10-25 10:47:22,877 - INFO - Slice 95: Denoising complete.
2024-10-25 10:47:22,885 - INFO - Slice 96: Estimated noise sigma = 0.002809694990256729
2024-10-25 10:47:23,471 - INFO - Slice 96: Denoising complete.
2024-10-25 10:47:23,478 - INFO - Slice 97: Estimated noise sigma = 0.0027836054800579454
2024-10-25 10:47:24,017 - INFO - Slice 97: Denoising complete.
2024-10-25 10:47:24,025 - INFO - Slice 98: Estimated noise sigma = 0.002952252507670403
2024-10-25 10:47:24,557 - INFO - Slice 98: Denoising complete.
2024-10-25 10:47:24,565 - INFO - Slice 99: Estimated noise sigma = 0.0028809738352623734
2024-10-25 10:47:25,067 - INFO - Slice 99: Denoising complete.
2024-10-25 10:47:25,075 - INFO - Slice 100: Estimated noise sigma = 0.0029783416726739576
2024-10-25 10:47:25,579 - INFO - Slice 100: Denoising complete.
2024-10-25 10:47:25,587 - INFO - Slice 101: Estimated noise sigma = 0.0029783416726739576
2024-10-25 10:47:26,091 - INFO - Slice 101: Denoising complete.
2024-10-25 10:47:26,098 - INFO - Slice 102: Estimated noise sigma = 0.003030520693071525
2024-10-25 10:47:26,606 - INFO - Slice 102: Denoising complete.
2024-10-25 10:47:26,614 - INFO - Slice 103: Estimated noise sigma = 0.0029070640358516146
2024-10-25 10:47:27,124 - INFO - Slice 103: Denoising complete.
2024-10-25 10:47:27,134 - INFO - Slice 104: Estimated noise sigma = 0.0030044311828727414
2024-10-25 10:47:27,724 - INFO - Slice 104: Denoising complete.
2024-10-25 10:47:27,733 - INFO - Slice 105: Estimated noise sigma = 0.0029783427082596442
2024-10-25 10:47:28,265 - INFO - Slice 105: Denoising complete.
2024-10-25 10:47:28,273 - INFO - Slice 106: Estimated noise sigma = 0.0029783416726739576
2024-10-25 10:47:28,787 - INFO - Slice 106: Denoising complete.
2024-10-25 10:47:28,794 - INFO - Slice 107: Estimated noise sigma = 0.002926163342666848
2024-10-25 10:47:29,303 - INFO - Slice 107: Denoising complete.
2024-10-25 10:47:29,310 - INFO - Slice 108: Estimated noise sigma = 0.002839280810330589
2024-10-25 10:47:29,822 - INFO - Slice 108: Denoising complete.
2024-10-25 10:47:29,829 - INFO - Slice 109: Estimated noise sigma = 0.0028096948176591146
2024-10-25 10:47:30,339 - INFO - Slice 109: Denoising complete.
2024-10-25 10:47:30,346 - INFO - Slice 110: Estimated noise sigma = 0.0028096955080495725
2024-10-25 10:47:30,844 - INFO - Slice 110: Denoising complete.
2024-10-25 10:47:30,851 - INFO - Slice 111: Estimated noise sigma = 0.002835784673053127
2024-10-25 10:47:31,374 - INFO - Slice 111: Denoising complete.
2024-10-25 10:47:31,381 - INFO - Slice 112: Estimated noise sigma = 0.002738416490446314
2024-10-25 10:47:31,882 - INFO - Slice 112: Denoising complete.
2024-10-25 10:47:31,890 - INFO - Slice 113: Estimated noise sigma = 0.002783604962265102
2024-10-25 10:47:32,395 - INFO - Slice 113: Denoising complete.
2024-10-25 10:47:32,403 - INFO - Slice 114: Estimated noise sigma = 0.002712327325442759
2024-10-25 10:47:32,900 - INFO - Slice 114: Denoising complete.
2024-10-25 10:47:32,907 - INFO - Slice 115: Estimated noise sigma = 0.002472403006203187
2024-10-25 10:47:33,413 - INFO - Slice 115: Denoising complete.
2024-10-25 10:47:33,420 - INFO - Slice 116: Estimated noise sigma = 0.0024463122878211024
2024-10-25 10:47:33,939 - INFO - Slice 116: Denoising complete.
2024-10-25 10:47:33,946 - INFO - Slice 117: Estimated noise sigma = 0.002446312460418717
2024-10-25 10:47:34,462 - INFO - Slice 117: Denoising complete.
2024-10-25 10:47:34,468 - INFO - Slice 118: Estimated noise sigma = 0.002446312633016331
2024-10-25 10:47:34,980 - INFO - Slice 118: Denoising complete.
2024-10-25 10:47:34,987 - INFO - Slice 119: Estimated noise sigma = 0.002493379657270343
2024-10-25 10:47:35,492 - INFO - Slice 119: Denoising complete.
2024-10-25 10:47:35,498 - INFO - Slice 120: Estimated noise sigma = 0.002543680125232687
2024-10-25 10:47:36,005 - INFO - Slice 120: Denoising complete.
2024-10-25 10:47:36,011 - INFO - Slice 121: Estimated noise sigma = 0.0017195468829498493
2024-10-25 10:47:36,593 - INFO - Slice 121: Denoising complete.
2024-10-25 10:47:36,600 - INFO - Slice 122: Estimated noise sigma = 0.0017195465377546205
2024-10-25 10:47:37,158 - INFO - Slice 122: Denoising complete.
2024-10-25 10:47:37,164 - INFO - Slice 123: Estimated noise sigma = 0.0017195461925593918
2024-10-25 10:47:37,730 - INFO - Slice 123: Denoising complete.
2024-10-25 10:47:37,736 - INFO - Slice 124: Estimated noise sigma = 0.0016221785277454215
2024-10-25 10:47:38,292 - INFO - Slice 124: Denoising complete.
2024-10-25 10:47:38,299 - INFO - Slice 125: Estimated noise sigma = 0.0015769895381337901
2024-10-25 10:47:38,857 - INFO - Slice 125: Denoising complete.
2024-10-25 10:47:38,863 - INFO - Slice 126: Estimated noise sigma = 0.0016221783551478072
2024-10-25 10:47:39,419 - INFO - Slice 126: Denoising complete.
2024-10-25 10:47:39,425 - INFO - Slice 127: Estimated noise sigma = 0.001550899855337392
2024-10-25 10:47:39,972 - INFO - Slice 127: Denoising complete.
2024-10-25 10:47:39,978 - INFO - Slice 128: Estimated noise sigma = 0.00155089899234932
2024-10-25 10:47:40,531 - INFO - Slice 128: Denoising complete.
2024-10-25 10:47:40,538 - INFO - Slice 129: Estimated noise sigma = 0.0014535316727305786
2024-10-25 10:47:41,090 - INFO - Slice 129: Denoising complete.
2024-10-25 10:47:41,096 - INFO - Slice 130: Estimated noise sigma = 0.001427440609153265
2024-10-25 10:47:41,659 - INFO - Slice 130: Denoising complete.
2024-10-25 10:47:41,666 - INFO - Slice 131: Estimated noise sigma = 0.0013822516195416336
2024-10-25 10:47:42,244 - INFO - Slice 131: Denoising complete.
2024-10-25 10:47:42,251 - INFO - Slice 132: Estimated noise sigma = 0.0013561635764225723
2024-10-25 10:47:42,829 - INFO - Slice 132: Denoising complete.
2024-10-25 10:47:42,836 - INFO - Slice 133: Estimated noise sigma = 0.0013561633175261506
2024-10-25 10:47:43,402 - INFO - Slice 133: Denoising complete.
2024-10-25 10:47:43,408 - INFO - Slice 134: Estimated noise sigma = 0.001258795393815759
2024-10-25 10:47:43,987 - INFO - Slice 134: Denoising complete.
2024-10-25 10:47:43,993 - INFO - Slice 135: Estimated noise sigma = 0.001258795825309795
2024-10-25 10:47:44,570 - INFO - Slice 135: Denoising complete.
2024-10-25 10:47:44,576 - INFO - Slice 136: Estimated noise sigma = 0.001258795480114566
2024-10-25 10:47:45,128 - INFO - Slice 136: Denoising complete.
2024-10-25 10:47:45,135 - INFO - Slice 137: Estimated noise sigma = 0.0012587952212181445
2024-10-25 10:47:45,699 - INFO - Slice 137: Denoising complete.
2024-10-25 10:47:45,705 - INFO - Slice 138: Estimated noise sigma = 0.001258795393815759
2024-10-25 10:47:46,265 - INFO - Slice 138: Denoising complete.
2024-10-25 10:47:46,271 - INFO - Slice 139: Estimated noise sigma = 0.0014796201473436757
2024-10-25 10:47:46,828 - INFO - Slice 139: Denoising complete.
2024-10-25 10:47:46,835 - INFO - Slice 140: Estimated noise sigma = 0.0017195465377546205
2024-10-25 10:47:47,406 - INFO - Slice 140: Denoising complete.
2024-10-25 10:47:47,412 - INFO - Slice 141: Estimated noise sigma = 0.0018169148929590483
2024-10-25 10:47:47,985 - INFO - Slice 141: Denoising complete.
2024-10-25 10:47:47,991 - INFO - Slice 142: Estimated noise sigma = 0.0017456360479534043
2024-10-25 10:47:48,545 - INFO - Slice 142: Denoising complete.
2024-10-25 10:47:48,551 - INFO - Slice 143: Estimated noise sigma = 0.0018169150655566626
2024-10-25 10:47:49,128 - INFO - Slice 143: Denoising complete.
2024-10-25 10:47:49,129 - INFO - Saving image to 'mri_data/denoised_nl_2.tif'.
2024-10-25 10:47:49,329 - INFO - Image saved.
2024-10-25 10:47:49,336 - INFO - Current memory usage: 526.50 MB
2024-10-25 10:47:49,336 - INFO - Starting intensity normalization.
2024-10-25 10:47:50,337 - INFO - Intensity normalization complete.
2024-10-25 10:47:50,337 - INFO - Current memory usage: 762.69 MB
2024-10-25 10:47:50,338 - INFO - Computing neighborhood mean.
2024-10-25 10:53:32,700 - INFO - Logging initiated.
2024-10-25 10:53:32,700 - INFO - Pipeline started.
2024-10-25 10:53:32,700 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 10:53:32,959 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 10:53:33,096 - INFO - Denoised image loaded.
2024-10-25 10:53:33,097 - INFO - Current memory usage: 515.42 MB
2024-10-25 10:53:33,097 - INFO - Starting intensity normalization.
2024-10-25 10:53:33,945 - INFO - Intensity normalization complete.
2024-10-25 10:53:33,945 - INFO - Current memory usage: 760.64 MB
2024-10-25 10:53:33,950 - INFO - Computing neighborhood mean.
2024-10-25 10:53:34,469 - INFO - Computing neighborhood mean of squares.
2024-10-25 10:53:35,117 - INFO - Computing neighborhood variance.
2024-10-25 10:53:35,359 - INFO - Neighborhood statistics computed.
2024-10-25 10:53:35,359 - INFO - Current memory usage: 978.71 MB
2024-10-25 10:53:35,367 - INFO - Preparing features for K-Means clustering.
2024-10-25 10:53:36,722 - INFO - Features shape: (28566720, 3)
2024-10-25 10:53:36,723 - INFO - Current memory usage: 1509.60 MB
2024-10-25 10:53:36,723 - INFO - Plotting feature distributions.
2024-10-25 10:53:46,688 - INFO - Feature distributions plotted.
2024-10-25 10:53:46,716 - INFO - Analyzing enhanced feature distributions with a sampled subset.
2024-10-25 10:54:30,574 - INFO - Pairwise feature relationships plotted.
2024-10-25 10:54:30,622 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000.
2024-10-25 10:54:41,656 - INFO - Clustering complete.
2024-10-25 10:54:41,657 - INFO - Current memory usage: 1955.76 MB
2024-10-25 10:54:41,657 - INFO - Cluster labels reshaped to image dimensions.
2024-10-25 10:54:41,657 - INFO - Current memory usage: 1955.76 MB
2024-10-25 10:54:41,692 - INFO - Processing Cluster 0.
2024-10-25 10:54:41,770 - INFO - Cluster 0: Initial voxel count = 465048.
2024-10-25 10:54:41,771 - INFO - Applying morphological opening to remove small objects.
2024-10-25 10:54:43,470 - INFO - Applying morphological closing to fill small holes.
2024-10-25 10:54:45,223 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 10:54:46,105 - INFO - Cluster 0: Refined voxel count = 196375.
2024-10-25 10:54:46,152 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-10-25 10:54:46,475 - INFO - Cluster 0: Mean Intensity = 1.06806480884552
2024-10-25 10:54:46,475 - INFO - Processing Cluster 1.
2024-10-25 10:54:46,527 - INFO - Cluster 1: Initial voxel count = 9965259.
2024-10-25 10:54:46,527 - INFO - Applying morphological opening to remove small objects.
2024-10-25 10:54:48,139 - INFO - Applying morphological closing to fill small holes.
2024-10-25 10:54:49,714 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 10:54:50,640 - INFO - Cluster 1: Refined voxel count = 9870606.
2024-10-25 10:54:50,661 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-10-25 10:54:50,975 - INFO - Cluster 1: Mean Intensity = -0.23838038742542267
2024-10-25 10:54:50,976 - INFO - Processing Cluster 2.
2024-10-25 10:54:51,020 - INFO - Cluster 2: Initial voxel count = 11557371.
2024-10-25 10:54:51,021 - INFO - Applying morphological opening to remove small objects.
2024-10-25 10:54:52,579 - INFO - Applying morphological closing to fill small holes.
2024-10-25 10:54:54,124 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 10:54:55,119 - INFO - Cluster 2: Refined voxel count = 10717714.
2024-10-25 10:54:55,142 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-10-25 10:54:55,507 - INFO - Cluster 2: Mean Intensity = -0.14162421226501465
2024-10-25 10:54:55,507 - INFO - Processing Cluster 3.
2024-10-25 10:54:55,546 - INFO - Cluster 3: Initial voxel count = 6099220.
2024-10-25 10:54:55,546 - INFO - Applying morphological opening to remove small objects.
2024-10-25 10:54:57,120 - INFO - Applying morphological closing to fill small holes.
2024-10-25 10:54:58,631 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 10:54:59,587 - INFO - Cluster 3: Refined voxel count = 5190238.
2024-10-25 10:54:59,609 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-10-25 10:54:59,920 - INFO - Cluster 3: Mean Intensity = 0.05911420285701752
2024-10-25 10:54:59,921 - INFO - Processing Cluster 4.
2024-10-25 10:54:59,961 - INFO - Cluster 4: Initial voxel count = 479822.
2024-10-25 10:54:59,961 - INFO - Applying morphological opening to remove small objects.
2024-10-25 10:55:01,535 - INFO - Applying morphological closing to fill small holes.
2024-10-25 10:55:03,031 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 10:55:03,840 - INFO - Cluster 4: Refined voxel count = 453480.
2024-10-25 10:55:03,862 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-10-25 10:55:04,183 - INFO - Cluster 4: Mean Intensity = 6.575509071350098
2024-10-25 10:55:04,183 - INFO - CSF is identified as cluster 1.
2024-10-25 10:55:04,409 - INFO - Saved slice 90 overlay as 'slice_90_cluster_0_overlay.png'.
2024-10-25 10:55:04,636 - INFO - Saved slice 90 overlay as 'slice_90_cluster_1_overlay.png'.
2024-10-25 10:55:04,812 - INFO - Saved slice 90 overlay as 'slice_90_cluster_2_overlay.png'.
2024-10-25 10:55:04,988 - INFO - Saved slice 90 overlay as 'slice_90_cluster_3_overlay.png'.
2024-10-25 10:55:05,177 - INFO - Saved slice 90 overlay as 'slice_90_cluster_4_overlay.png'.
2024-10-25 10:55:05,177 - INFO - Pipeline completed successfully.
2024-10-25 10:55:05,178 - INFO - Current memory usage: 2112.27 MB
2024-10-25 11:00:54,725 - INFO - Logging initiated.
2024-10-25 11:00:54,725 - INFO - Pipeline started.
2024-10-25 11:00:54,725 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 11:00:54,961 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 11:00:55,056 - INFO - Denoised image loaded.
2024-10-25 11:00:55,057 - INFO - Current memory usage: 514.55 MB
2024-10-25 11:00:55,057 - INFO - Starting intensity normalization.
2024-10-25 11:00:55,932 - INFO - Intensity normalization complete.
2024-10-25 11:00:55,933 - INFO - Current memory usage: 759.77 MB
2024-10-25 11:00:55,937 - INFO - Computing neighborhood mean.
2024-10-25 11:00:56,489 - INFO - Computing neighborhood mean of squares.
2024-10-25 11:00:57,189 - INFO - Computing neighborhood variance.
2024-10-25 11:00:57,418 - INFO - Neighborhood statistics computed.
2024-10-25 11:00:57,419 - INFO - Current memory usage: 977.80 MB
2024-10-25 11:00:57,427 - INFO - Preparing features for K-Means clustering.
2024-10-25 11:00:58,746 - INFO - Features shape: (28566720, 3)
2024-10-25 11:00:58,746 - INFO - Current memory usage: 1510.50 MB
2024-10-25 11:00:58,746 - INFO - Plotting feature distributions.
2024-10-25 11:01:09,287 - INFO - Feature distributions plotted.
2024-10-25 11:01:09,326 - INFO - Analyzing enhanced feature distributions with a sampled subset.
2024-10-25 11:01:45,004 - INFO - Pairwise feature relationships plotted.
2024-10-25 11:01:45,023 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000.
2024-10-25 11:02:00,472 - INFO - Clustering complete.
2024-10-25 11:02:00,472 - INFO - Current memory usage: 1936.13 MB
2024-10-25 11:02:00,473 - INFO - Cluster labels reshaped to image dimensions.
2024-10-25 11:02:00,473 - INFO - Current memory usage: 1936.13 MB
2024-10-25 11:02:00,473 - INFO - Processing Cluster 0.
2024-10-25 11:02:00,525 - INFO - Cluster 0: Initial voxel count = 465048.
2024-10-25 11:02:00,526 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:02:02,306 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:02:03,983 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:02:04,951 - INFO - Cluster 0: Refined voxel count = 196375.
2024-10-25 11:02:05,018 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-10-25 11:02:05,426 - INFO - Cluster 0: Mean Intensity = 1.06806480884552
2024-10-25 11:02:05,427 - INFO - Processing Cluster 1.
2024-10-25 11:02:05,477 - INFO - Cluster 1: Initial voxel count = 9965259.
2024-10-25 11:02:05,478 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:02:07,063 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:02:08,556 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:02:09,549 - INFO - Cluster 1: Refined voxel count = 9870606.
2024-10-25 11:02:09,601 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-10-25 11:02:10,017 - INFO - Cluster 1: Mean Intensity = -0.23838038742542267
2024-10-25 11:02:10,018 - INFO - Processing Cluster 2.
2024-10-25 11:02:10,058 - INFO - Cluster 2: Initial voxel count = 11557371.
2024-10-25 11:02:10,058 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:02:11,592 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:02:13,184 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:02:14,237 - INFO - Cluster 2: Refined voxel count = 10717714.
2024-10-25 11:02:14,345 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-10-25 11:02:14,815 - INFO - Cluster 2: Mean Intensity = -0.14162421226501465
2024-10-25 11:02:14,815 - INFO - Processing Cluster 3.
2024-10-25 11:02:14,855 - INFO - Cluster 3: Initial voxel count = 6099220.
2024-10-25 11:02:14,855 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:02:16,464 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:02:18,084 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:02:19,075 - INFO - Cluster 3: Refined voxel count = 5190238.
2024-10-25 11:02:19,126 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-10-25 11:02:19,467 - INFO - Cluster 3: Mean Intensity = 0.05911420285701752
2024-10-25 11:02:19,467 - INFO - Processing Cluster 4.
2024-10-25 11:02:19,510 - INFO - Cluster 4: Initial voxel count = 479822.
2024-10-25 11:02:19,510 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:02:21,115 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:02:22,664 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:02:23,483 - INFO - Cluster 4: Refined voxel count = 453480.
2024-10-25 11:02:23,572 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-10-25 11:02:23,912 - INFO - Cluster 4: Mean Intensity = 6.575509071350098
2024-10-25 11:02:23,912 - INFO - CSF is identified as cluster 1.
2024-10-25 11:02:23,912 - INFO - Selected slice indices for saving: [90]
2024-10-25 11:02:24,181 - INFO - Saved slice 90 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_0_overlay.png'.
2024-10-25 11:02:24,355 - INFO - Saved slice 90 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_1_overlay.png'.
2024-10-25 11:02:24,528 - INFO - Saved slice 90 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_2_overlay.png'.
2024-10-25 11:02:24,705 - INFO - Saved slice 90 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_3_overlay.png'.
2024-10-25 11:02:24,875 - INFO - Saved slice 90 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_4_overlay.png'.
2024-10-25 11:03:37,270 - INFO - Logging initiated.
2024-10-25 11:03:37,270 - INFO - Pipeline started.
2024-10-25 11:03:37,270 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 11:03:37,622 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 11:03:37,716 - INFO - Denoised image loaded.
2024-10-25 11:03:37,716 - INFO - Current memory usage: 514.53 MB
2024-10-25 11:03:37,716 - INFO - Starting intensity normalization.
2024-10-25 11:03:38,612 - INFO - Intensity normalization complete.
2024-10-25 11:03:38,613 - INFO - Current memory usage: 759.76 MB
2024-10-25 11:03:38,614 - INFO - Computing neighborhood mean.
2024-10-25 11:03:39,131 - INFO - Computing neighborhood mean of squares.
2024-10-25 11:03:40,017 - INFO - Computing neighborhood variance.
2024-10-25 11:03:40,381 - INFO - Neighborhood statistics computed.
2024-10-25 11:03:40,382 - INFO - Current memory usage: 977.83 MB
2024-10-25 11:03:40,391 - INFO - Preparing features for K-Means clustering.
2024-10-25 11:03:41,751 - INFO - Features shape: (28566720, 3)
2024-10-25 11:03:41,752 - INFO - Current memory usage: 1522.67 MB
2024-10-25 11:03:41,752 - INFO - Plotting feature distributions.
2024-10-25 11:03:49,901 - INFO - Feature distributions plotted.
2024-10-25 11:03:49,956 - INFO - Analyzing enhanced feature distributions with a sampled subset.
2024-10-25 11:04:18,516 - INFO - Pairwise feature relationships plotted.
2024-10-25 11:04:18,530 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000.
2024-10-25 11:04:29,298 - INFO - Clustering complete.
2024-10-25 11:04:29,298 - INFO - Current memory usage: 1932.29 MB
2024-10-25 11:04:29,299 - INFO - Cluster labels reshaped to image dimensions.
2024-10-25 11:04:29,299 - INFO - Current memory usage: 1932.29 MB
2024-10-25 11:04:29,299 - INFO - Processing Cluster 0.
2024-10-25 11:04:29,346 - INFO - Cluster 0: Initial voxel count = 465048.
2024-10-25 11:04:29,347 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:04:30,968 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:04:32,543 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:04:33,509 - INFO - Cluster 0: Refined voxel count = 196375.
2024-10-25 11:04:33,737 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-10-25 11:04:34,047 - INFO - Cluster 0: Mean Intensity = 1.06806480884552
2024-10-25 11:04:34,047 - INFO - Processing Cluster 1.
2024-10-25 11:04:34,089 - INFO - Cluster 1: Initial voxel count = 9965259.
2024-10-25 11:04:34,089 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:04:35,683 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:04:37,281 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:04:38,558 - INFO - Cluster 1: Refined voxel count = 9870606.
2024-10-25 11:04:38,615 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-10-25 11:04:39,075 - INFO - Cluster 1: Mean Intensity = -0.23838038742542267
2024-10-25 11:04:39,075 - INFO - Processing Cluster 2.
2024-10-25 11:04:39,117 - INFO - Cluster 2: Initial voxel count = 11557371.
2024-10-25 11:04:39,118 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:04:40,895 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:04:43,062 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:04:44,169 - INFO - Cluster 2: Refined voxel count = 10717714.
2024-10-25 11:04:44,229 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-10-25 11:04:44,742 - INFO - Cluster 2: Mean Intensity = -0.14162421226501465
2024-10-25 11:04:44,742 - INFO - Processing Cluster 3.
2024-10-25 11:04:44,798 - INFO - Cluster 3: Initial voxel count = 6099220.
2024-10-25 11:04:44,798 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:04:46,405 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:04:48,077 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:04:49,077 - INFO - Cluster 3: Refined voxel count = 5190238.
2024-10-25 11:04:49,127 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-10-25 11:04:49,498 - INFO - Cluster 3: Mean Intensity = 0.05911420285701752
2024-10-25 11:04:49,499 - INFO - Processing Cluster 4.
2024-10-25 11:04:49,546 - INFO - Cluster 4: Initial voxel count = 479822.
2024-10-25 11:04:49,547 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:04:51,198 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:04:52,910 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:04:53,800 - INFO - Cluster 4: Refined voxel count = 453480.
2024-10-25 11:04:53,863 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-10-25 11:04:54,218 - INFO - Cluster 4: Mean Intensity = 6.575509071350098
2024-10-25 11:04:54,219 - INFO - CSF is identified as cluster 1.
2024-10-25 11:04:54,219 - INFO - Selected slice indices for saving: [30, 60, 90, 120, 150]
2024-10-25 11:04:54,413 - INFO - Saved slice 30 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_30_cluster_0_overlay.png'.
2024-10-25 11:04:54,496 - INFO - Saved slice 30 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_30_cluster_1_overlay.png'.
2024-10-25 11:04:54,581 - INFO - Saved slice 30 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_30_cluster_2_overlay.png'.
2024-10-25 11:04:54,709 - INFO - Saved slice 30 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_30_cluster_3_overlay.png'.
2024-10-25 11:04:54,839 - INFO - Saved slice 30 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_30_cluster_4_overlay.png'.
2024-10-25 11:04:54,921 - INFO - Saved slice 60 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_0_overlay.png'.
2024-10-25 11:04:55,008 - INFO - Saved slice 60 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_1_overlay.png'.
2024-10-25 11:04:55,095 - INFO - Saved slice 60 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_2_overlay.png'.
2024-10-25 11:04:55,182 - INFO - Saved slice 60 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_3_overlay.png'.
2024-10-25 11:04:55,273 - INFO - Saved slice 60 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_4_overlay.png'.
2024-10-25 11:04:55,368 - INFO - Saved slice 90 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_0_overlay.png'.
2024-10-25 11:04:55,453 - INFO - Saved slice 90 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_1_overlay.png'.
2024-10-25 11:04:55,536 - INFO - Saved slice 90 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_2_overlay.png'.
2024-10-25 11:04:55,655 - INFO - Saved slice 90 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_3_overlay.png'.
2024-10-25 11:04:55,759 - INFO - Saved slice 90 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_4_overlay.png'.
2024-10-25 11:04:55,853 - INFO - Saved slice 120 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_0_overlay.png'.
2024-10-25 11:04:55,966 - INFO - Saved slice 120 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_1_overlay.png'.
2024-10-25 11:04:56,053 - INFO - Saved slice 120 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_2_overlay.png'.
2024-10-25 11:04:56,137 - INFO - Saved slice 120 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_3_overlay.png'.
2024-10-25 11:04:56,234 - INFO - Saved slice 120 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_4_overlay.png'.
2024-10-25 11:04:56,234 - WARNING - Slice index 150 is out of bounds for the denoised image.
2024-10-25 11:06:07,956 - INFO - Logging initiated.
2024-10-25 11:06:07,956 - INFO - Pipeline started.
2024-10-25 11:06:07,957 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 11:06:08,677 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 11:06:08,886 - INFO - Denoised image loaded.
2024-10-25 11:06:08,886 - INFO - Current memory usage: 515.37 MB
2024-10-25 11:06:08,886 - INFO - Starting intensity normalization.
2024-10-25 11:06:09,927 - INFO - Intensity normalization complete.
2024-10-25 11:06:09,927 - INFO - Current memory usage: 760.80 MB
2024-10-25 11:06:09,932 - INFO - Computing neighborhood mean.
2024-10-25 11:06:10,442 - INFO - Computing neighborhood mean of squares.
2024-10-25 11:06:11,119 - INFO - Computing neighborhood variance.
2024-10-25 11:06:11,508 - INFO - Neighborhood statistics computed.
2024-10-25 11:06:11,508 - INFO - Current memory usage: 978.80 MB
2024-10-25 11:06:11,516 - INFO - Preparing features for K-Means clustering.
2024-10-25 11:06:12,740 - INFO - Features shape: (28566720, 3)
2024-10-25 11:06:12,740 - INFO - Current memory usage: 1523.59 MB
2024-10-25 11:06:12,740 - INFO - Plotting feature distributions.
2024-10-25 11:06:22,537 - INFO - Feature distributions plotted.
2024-10-25 11:06:22,596 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000.
2024-10-25 11:06:34,632 - INFO - Clustering complete.
2024-10-25 11:06:34,633 - INFO - Current memory usage: 1771.58 MB
2024-10-25 11:06:34,633 - INFO - Cluster labels reshaped to image dimensions.
2024-10-25 11:06:34,634 - INFO - Current memory usage: 1771.58 MB
2024-10-25 11:06:34,634 - INFO - Processing Cluster 0.
2024-10-25 11:06:34,682 - INFO - Cluster 0: Initial voxel count = 465048.
2024-10-25 11:06:34,682 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:06:36,346 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:06:37,864 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:06:38,726 - INFO - Cluster 0: Refined voxel count = 196375.
2024-10-25 11:06:38,868 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-10-25 11:06:39,142 - INFO - Cluster 0: Mean Intensity = 1.06806480884552
2024-10-25 11:06:39,142 - INFO - Processing Cluster 1.
2024-10-25 11:06:39,184 - INFO - Cluster 1: Initial voxel count = 9965259.
2024-10-25 11:06:39,185 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:06:40,829 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:06:42,433 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:06:43,394 - INFO - Cluster 1: Refined voxel count = 9870606.
2024-10-25 11:06:43,453 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-10-25 11:06:43,781 - INFO - Cluster 1: Mean Intensity = -0.23838038742542267
2024-10-25 11:06:43,781 - INFO - Processing Cluster 2.
2024-10-25 11:06:43,822 - INFO - Cluster 2: Initial voxel count = 11557371.
2024-10-25 11:06:43,822 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:06:45,441 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:06:47,185 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:06:48,510 - INFO - Cluster 2: Refined voxel count = 10717714.
2024-10-25 11:06:48,602 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-10-25 11:06:49,082 - INFO - Cluster 2: Mean Intensity = -0.14162421226501465
2024-10-25 11:06:49,082 - INFO - Processing Cluster 3.
2024-10-25 11:06:49,123 - INFO - Cluster 3: Initial voxel count = 6099220.
2024-10-25 11:06:49,123 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:06:50,713 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:06:52,389 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:06:53,292 - INFO - Cluster 3: Refined voxel count = 5190238.
2024-10-25 11:06:53,342 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-10-25 11:06:53,653 - INFO - Cluster 3: Mean Intensity = 0.05911420285701752
2024-10-25 11:06:53,653 - INFO - Processing Cluster 4.
2024-10-25 11:06:53,698 - INFO - Cluster 4: Initial voxel count = 479822.
2024-10-25 11:06:53,698 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:06:55,266 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:06:56,854 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:06:57,709 - INFO - Cluster 4: Refined voxel count = 453480.
2024-10-25 11:06:57,763 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-10-25 11:06:58,053 - INFO - Cluster 4: Mean Intensity = 6.575509071350098
2024-10-25 11:06:58,053 - INFO - CSF is identified as cluster 1.
2024-10-25 11:06:58,053 - INFO - Selected slice indices for saving: [60, 90, 105, 120, 150]
2024-10-25 11:06:58,160 - INFO - Saved slice 60 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_0_overlay.png'.
2024-10-25 11:06:58,253 - INFO - Saved slice 60 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_1_overlay.png'.
2024-10-25 11:06:58,341 - INFO - Saved slice 60 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_2_overlay.png'.
2024-10-25 11:06:58,421 - INFO - Saved slice 60 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_3_overlay.png'.
2024-10-25 11:06:58,500 - INFO - Saved slice 60 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_4_overlay.png'.
2024-10-25 11:06:58,581 - INFO - Saved slice 90 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_0_overlay.png'.
2024-10-25 11:06:58,666 - INFO - Saved slice 90 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_1_overlay.png'.
2024-10-25 11:06:58,745 - INFO - Saved slice 90 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_2_overlay.png'.
2024-10-25 11:06:58,831 - INFO - Saved slice 90 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_3_overlay.png'.
2024-10-25 11:06:58,932 - INFO - Saved slice 90 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_4_overlay.png'.
2024-10-25 11:06:59,017 - INFO - Saved slice 105 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_105_cluster_0_overlay.png'.
2024-10-25 11:06:59,098 - INFO - Saved slice 105 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_105_cluster_1_overlay.png'.
2024-10-25 11:06:59,183 - INFO - Saved slice 105 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_105_cluster_2_overlay.png'.
2024-10-25 11:06:59,262 - INFO - Saved slice 105 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_105_cluster_3_overlay.png'.
2024-10-25 11:06:59,346 - INFO - Saved slice 105 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_105_cluster_4_overlay.png'.
2024-10-25 11:06:59,440 - INFO - Saved slice 120 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_0_overlay.png'.
2024-10-25 11:06:59,532 - INFO - Saved slice 120 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_1_overlay.png'.
2024-10-25 11:06:59,614 - INFO - Saved slice 120 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_2_overlay.png'.
2024-10-25 11:06:59,696 - INFO - Saved slice 120 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_3_overlay.png'.
2024-10-25 11:06:59,777 - INFO - Saved slice 120 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_4_overlay.png'.
2024-10-25 11:06:59,778 - WARNING - Slice index 150 is out of bounds for the denoised image.
2024-10-25 11:06:59,778 - INFO - Pipeline completed successfully.
2024-10-25 11:06:59,778 - INFO - Current memory usage: 1955.78 MB
2024-10-25 11:08:24,717 - INFO - Logging initiated.
2024-10-25 11:08:24,717 - INFO - Pipeline started.
2024-10-25 11:08:24,717 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 11:08:25,078 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 11:08:25,149 - INFO - Denoised image loaded.
2024-10-25 11:08:25,149 - INFO - Current memory usage: 514.98 MB
2024-10-25 11:08:25,149 - INFO - Starting intensity normalization.
2024-10-25 11:08:26,378 - INFO - Intensity normalization complete.
2024-10-25 11:08:26,378 - INFO - Current memory usage: 760.21 MB
2024-10-25 11:08:26,385 - INFO - Computing neighborhood mean.
2024-10-25 11:08:26,959 - INFO - Computing neighborhood mean of squares.
2024-10-25 11:08:27,917 - INFO - Computing neighborhood variance.
2024-10-25 11:08:28,357 - INFO - Neighborhood statistics computed.
2024-10-25 11:08:28,357 - INFO - Current memory usage: 978.28 MB
2024-10-25 11:08:28,367 - INFO - Preparing features for K-Means clustering.
2024-10-25 11:08:29,860 - INFO - Features shape: (28566720, 3)
2024-10-25 11:08:29,861 - INFO - Current memory usage: 1523.14 MB
2024-10-25 11:08:29,861 - INFO - Plotting feature distributions.
2024-10-25 11:08:38,010 - INFO - Feature distributions plotted.
2024-10-25 11:08:38,061 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000.
2024-10-25 11:08:49,157 - INFO - Clustering complete.
2024-10-25 11:08:49,158 - INFO - Current memory usage: 1767.78 MB
2024-10-25 11:08:49,158 - INFO - Cluster labels reshaped to image dimensions.
2024-10-25 11:08:49,159 - INFO - Current memory usage: 1767.78 MB
2024-10-25 11:08:49,159 - INFO - Processing Cluster 0.
2024-10-25 11:08:49,211 - INFO - Cluster 0: Initial voxel count = 465048.
2024-10-25 11:08:49,212 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:08:50,990 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:08:52,617 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:08:53,742 - INFO - Cluster 0: Refined voxel count = 196375.
2024-10-25 11:08:53,922 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-10-25 11:08:54,238 - INFO - Cluster 0: Mean Intensity = 1.06806480884552
2024-10-25 11:08:54,238 - INFO - Processing Cluster 1.
2024-10-25 11:08:54,283 - INFO - Cluster 1: Initial voxel count = 9965259.
2024-10-25 11:08:54,283 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:08:55,957 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:08:57,521 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:08:58,433 - INFO - Cluster 1: Refined voxel count = 9870606.
2024-10-25 11:08:58,491 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-10-25 11:08:58,814 - INFO - Cluster 1: Mean Intensity = -0.23838038742542267
2024-10-25 11:08:58,814 - INFO - Processing Cluster 2.
2024-10-25 11:08:58,857 - INFO - Cluster 2: Initial voxel count = 11557371.
2024-10-25 11:08:58,858 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:09:00,387 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:09:01,975 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:09:02,920 - INFO - Cluster 2: Refined voxel count = 10717714.
2024-10-25 11:09:02,981 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-10-25 11:09:03,329 - INFO - Cluster 2: Mean Intensity = -0.14162421226501465
2024-10-25 11:09:03,329 - INFO - Processing Cluster 3.
2024-10-25 11:09:03,373 - INFO - Cluster 3: Initial voxel count = 6099220.
2024-10-25 11:09:03,373 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:09:05,035 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:09:06,924 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:09:07,998 - INFO - Cluster 3: Refined voxel count = 5190238.
2024-10-25 11:09:08,036 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-10-25 11:09:08,334 - INFO - Cluster 3: Mean Intensity = 0.05911420285701752
2024-10-25 11:09:08,334 - INFO - Processing Cluster 4.
2024-10-25 11:09:08,377 - INFO - Cluster 4: Initial voxel count = 479822.
2024-10-25 11:09:08,377 - INFO - Applying morphological opening to remove small objects.
2024-10-25 11:09:10,048 - INFO - Applying morphological closing to fill small holes.
2024-10-25 11:09:11,705 - INFO - Removing objects smaller than 64 voxels.
2024-10-25 11:09:12,596 - INFO - Cluster 4: Refined voxel count = 453480.
2024-10-25 11:09:12,637 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-10-25 11:09:12,887 - INFO - Cluster 4: Mean Intensity = 6.575509071350098
2024-10-25 11:09:12,887 - INFO - CSF is identified as cluster 1.
2024-10-25 11:09:12,887 - INFO - Selected slice indices for saving: [60, 90, 105, 120, 150]
2024-10-25 11:09:13,109 - INFO - Saved slice 60 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_0_overlay.png'.
2024-10-25 11:09:13,341 - INFO - Saved slice 60 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_1_overlay.png'.
2024-10-25 11:09:13,526 - INFO - Saved slice 60 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_2_overlay.png'.
2024-10-25 11:09:13,734 - INFO - Saved slice 60 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_3_overlay.png'.
2024-10-25 11:09:13,941 - INFO - Saved slice 60 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_4_overlay.png'.
2024-10-25 11:09:14,181 - INFO - Saved slice 90 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_0_overlay.png'.
2024-10-25 11:09:14,479 - INFO - Saved slice 90 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_1_overlay.png'.
2024-10-25 11:09:14,739 - INFO - Saved slice 90 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_2_overlay.png'.
2024-10-25 11:09:14,992 - INFO - Saved slice 90 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_3_overlay.png'.
2024-10-25 11:09:15,269 - INFO - Saved slice 90 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_4_overlay.png'.
2024-10-25 11:09:15,468 - INFO - Saved slice 105 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_105_cluster_0_overlay.png'.
2024-10-25 11:09:15,708 - INFO - Saved slice 105 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_105_cluster_1_overlay.png'.
2024-10-25 11:09:15,965 - INFO - Saved slice 105 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_105_cluster_2_overlay.png'.
2024-10-25 11:09:16,208 - INFO - Saved slice 105 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_105_cluster_3_overlay.png'.
2024-10-25 11:09:16,448 - INFO - Saved slice 105 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_105_cluster_4_overlay.png'.
2024-10-25 11:09:16,681 - INFO - Saved slice 120 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_0_overlay.png'.
2024-10-25 11:09:16,909 - INFO - Saved slice 120 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_1_overlay.png'.
2024-10-25 11:09:17,148 - INFO - Saved slice 120 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_2_overlay.png'.
2024-10-25 11:09:17,396 - INFO - Saved slice 120 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_3_overlay.png'.
2024-10-25 11:09:17,623 - INFO - Saved slice 120 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_4_overlay.png'.
2024-10-25 11:09:17,623 - WARNING - Slice index 150 is out of bounds for the denoised image.
2024-10-25 11:09:17,623 - INFO - Pipeline completed successfully.
2024-10-25 11:09:17,623 - INFO - Current memory usage: 1975.06 MB
2024-10-25 14:43:43,977 - INFO - Logging initiated.
2024-10-25 14:43:43,978 - INFO - Pipeline started.
2024-10-25 14:43:43,978 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 14:43:44,244 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 14:43:44,432 - INFO - Denoised image loaded.
2024-10-25 14:43:44,432 - INFO - Current memory usage: 452.53 MB
2024-10-25 14:43:44,432 - INFO - Starting intensity normalization.
2024-10-25 14:43:45,198 - INFO - Intensity normalization complete.
2024-10-25 14:43:45,215 - INFO - Current memory usage: 626.82 MB
2024-10-25 14:43:45,221 - INFO - Computing neighborhood mean.
2024-10-25 14:43:45,643 - INFO - Computing neighborhood mean of squares.
2024-10-25 14:43:46,068 - INFO - Computing neighborhood variance.
2024-10-25 14:43:46,308 - INFO - Neighborhood statistics computed.
2024-10-25 14:43:46,309 - INFO - Current memory usage: 843.59 MB
2024-10-25 14:43:46,315 - INFO - Preparing features for K-Means clustering.
2024-10-25 14:43:48,883 - INFO - Features shape: (28566720, 3)
2024-10-25 14:43:48,888 - INFO - Current memory usage: 1389.05 MB
2024-10-25 14:43:48,888 - INFO - Plotting feature distributions.
2024-10-25 14:44:18,915 - INFO - Logging initiated.
2024-10-25 14:44:18,916 - INFO - Pipeline started.
2024-10-25 14:44:18,917 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 14:44:19,708 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 14:44:19,936 - INFO - Denoised image loaded.
2024-10-25 14:44:19,937 - INFO - Current memory usage: 514.94 MB
2024-10-25 14:44:19,937 - INFO - Starting intensity normalization.
2024-10-25 14:44:21,769 - INFO - Intensity normalization complete.
2024-10-25 14:44:21,769 - INFO - Current memory usage: 759.99 MB
2024-10-25 14:44:21,780 - INFO - Computing neighborhood mean.
2024-10-25 14:44:22,702 - INFO - Computing neighborhood mean of squares.
2024-10-25 14:44:23,871 - INFO - Computing neighborhood variance.
2024-10-25 14:44:24,323 - INFO - Neighborhood statistics computed.
2024-10-25 14:44:24,324 - INFO - Current memory usage: 967.00 MB
2024-10-25 14:44:24,345 - INFO - Preparing features for K-Means clustering.
2024-10-25 14:44:27,772 - INFO - Features shape: (28566720, 3)
2024-10-25 14:44:27,775 - INFO - Current memory usage: 1399.70 MB
2024-10-25 14:44:27,776 - INFO - Plotting feature distributions.
2024-10-25 14:44:44,057 - INFO - Feature distributions plotted.
2024-10-25 14:44:44,103 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000.
2024-10-25 14:45:08,097 - INFO - Clustering complete.
2024-10-25 14:45:08,100 - INFO - Current memory usage: 1529.96 MB
2024-10-25 14:45:08,101 - INFO - Cluster labels reshaped to image dimensions.
2024-10-25 14:45:08,101 - INFO - Current memory usage: 1529.96 MB
2024-10-25 14:45:08,104 - INFO - Processing Cluster 0.
2024-10-25 14:45:08,208 - INFO - Cluster 0: Initial voxel count = 465048.
2024-10-25 14:45:08,208 - INFO - Applying morphological opening to remove small objects.
2024-10-25 14:45:10,382 - INFO - Applying morphological closing to fill small holes.
2024-10-25 14:45:12,437 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 14:45:14,025 - INFO - Cluster 0: Refined voxel count = 212004.
2024-10-25 14:45:14,129 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-10-25 14:45:14,868 - INFO - Cluster 0: Mean Intensity = 1.06806480884552
2024-10-25 14:45:14,868 - INFO - Processing Cluster 1.
2024-10-25 14:45:14,932 - INFO - Cluster 1: Initial voxel count = 9965259.
2024-10-25 14:45:14,932 - INFO - Applying morphological opening to remove small objects.
2024-10-25 14:45:17,048 - INFO - Applying morphological closing to fill small holes.
2024-10-25 14:45:19,110 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 14:45:20,707 - INFO - Cluster 1: Refined voxel count = 9872790.
2024-10-25 14:45:20,781 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-10-25 14:45:21,462 - INFO - Cluster 1: Mean Intensity = -0.23838038742542267
2024-10-25 14:45:21,462 - INFO - Processing Cluster 2.
2024-10-25 14:45:21,527 - INFO - Cluster 2: Initial voxel count = 11557371.
2024-10-25 14:45:21,527 - INFO - Applying morphological opening to remove small objects.
2024-10-25 14:45:23,615 - INFO - Applying morphological closing to fill small holes.
2024-10-25 14:45:25,684 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 14:45:27,130 - INFO - Cluster 2: Refined voxel count = 10752991.
2024-10-25 14:45:27,188 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-10-25 14:45:27,848 - INFO - Cluster 2: Mean Intensity = -0.14162421226501465
2024-10-25 14:45:27,848 - INFO - Processing Cluster 3.
2024-10-25 14:45:27,903 - INFO - Cluster 3: Initial voxel count = 6099220.
2024-10-25 14:45:27,903 - INFO - Applying morphological opening to remove small objects.
2024-10-25 14:45:29,945 - INFO - Applying morphological closing to fill small holes.
2024-10-25 14:45:32,062 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 14:45:33,656 - INFO - Cluster 3: Refined voxel count = 5238379.
2024-10-25 14:45:33,718 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-10-25 14:45:34,415 - INFO - Cluster 3: Mean Intensity = 0.05911420285701752
2024-10-25 14:45:34,416 - INFO - Processing Cluster 4.
2024-10-25 14:45:34,470 - INFO - Cluster 4: Initial voxel count = 479822.
2024-10-25 14:45:34,470 - INFO - Applying morphological opening to remove small objects.
2024-10-25 14:45:36,634 - INFO - Applying morphological closing to fill small holes.
2024-10-25 14:45:38,661 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 14:45:40,565 - INFO - Cluster 4: Refined voxel count = 455618.
2024-10-25 14:45:40,629 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-10-25 14:45:41,073 - INFO - Cluster 4: Mean Intensity = 6.575509071350098
2024-10-25 14:45:41,074 - INFO - CSF is identified as cluster 1.
2024-10-25 14:45:41,074 - INFO - Starting visualization with PyVista.
2024-10-25 14:45:41,888 - INFO - Adding Original MRI volume.
2024-10-25 14:45:43,868 - INFO - Adding Denoised MRI volume.
2024-10-25 14:45:46,820 - INFO - Adding Mask 0 mesh to visualization.
2024-10-25 14:45:48,674 - INFO - Initial mesh has 61317 points and 121866 faces.
2024-10-25 14:45:48,676 - INFO - Current memory usage: 2160.11 MB
2024-10-25 14:45:50,073 - INFO - Decimated mesh has 30882 points and 60932 faces.
2024-10-25 14:45:50,078 - INFO - Current memory usage: 2174.66 MB
2024-10-25 14:45:50,295 - INFO - Adding Mask 1 mesh to visualization.
2024-10-25 14:45:51,729 - INFO - Initial mesh has 151832 points and 300640 faces.
2024-10-25 14:45:51,734 - INFO - Current memory usage: 2218.41 MB
2024-10-25 14:46:00,520 - INFO - Decimated mesh has 76198 points and 150320 faces.
2024-10-25 14:46:00,530 - INFO - Current memory usage: 2265.41 MB
2024-10-25 14:46:00,968 - INFO - Adding Mask 2 mesh to visualization.
2024-10-25 14:46:04,148 - INFO - Initial mesh has 534144 points and 1074646 faces.
2024-10-25 14:46:04,160 - INFO - Current memory usage: 2344.41 MB
2024-10-25 14:48:51,496 - INFO - Logging initiated.
2024-10-25 14:48:51,496 - INFO - Pipeline started.
2024-10-25 14:48:51,497 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 14:48:52,268 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 14:48:52,542 - INFO - Denoised image loaded.
2024-10-25 14:48:52,542 - INFO - Current memory usage: 514.96 MB
2024-10-25 14:48:52,542 - INFO - Starting intensity normalization.
2024-10-25 14:48:53,535 - INFO - Intensity normalization complete.
2024-10-25 14:48:53,535 - INFO - Current memory usage: 760.19 MB
2024-10-25 14:48:53,538 - INFO - Computing neighborhood mean.
2024-10-25 14:48:53,843 - INFO - Computing neighborhood mean of squares.
2024-10-25 14:48:54,306 - INFO - Computing neighborhood variance.
2024-10-25 14:48:54,677 - INFO - Neighborhood statistics computed.
2024-10-25 14:48:54,678 - INFO - Current memory usage: 978.26 MB
2024-10-25 14:48:54,682 - INFO - Preparing features for K-Means clustering.
2024-10-25 14:48:55,970 - INFO - Features shape: (28566720, 3)
2024-10-25 14:48:55,971 - INFO - Current memory usage: 1523.14 MB
2024-10-25 14:48:55,971 - INFO - Plotting feature distributions.
2024-10-25 14:49:02,884 - INFO - Feature distributions plotted.
2024-10-25 14:49:02,906 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000.
2024-10-25 14:49:09,791 - INFO - Clustering complete.
2024-10-25 14:49:09,792 - INFO - Current memory usage: 1753.57 MB
2024-10-25 14:49:09,792 - INFO - Cluster labels reshaped to image dimensions.
2024-10-25 14:49:09,792 - INFO - Current memory usage: 1753.57 MB
2024-10-25 14:49:09,792 - INFO - Processing Cluster 0.
2024-10-25 14:49:09,843 - INFO - Cluster 0: Initial voxel count = 465048.
2024-10-25 14:49:09,844 - INFO - Applying morphological opening to remove small objects.
2024-10-25 14:49:11,219 - INFO - Applying morphological closing to fill small holes.
2024-10-25 14:49:12,394 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 14:49:13,084 - INFO - Cluster 0: Refined voxel count = 212004.
2024-10-25 14:49:13,187 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-10-25 14:49:13,449 - INFO - Cluster 0: Mean Intensity = 1.06806480884552
2024-10-25 14:49:13,449 - INFO - Processing Cluster 1.
2024-10-25 14:49:13,479 - INFO - Cluster 1: Initial voxel count = 9965259.
2024-10-25 14:49:13,479 - INFO - Applying morphological opening to remove small objects.
2024-10-25 14:49:14,574 - INFO - Applying morphological closing to fill small holes.
2024-10-25 14:49:15,679 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 14:49:16,391 - INFO - Cluster 1: Refined voxel count = 9872790.
2024-10-25 14:49:16,456 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-10-25 14:49:16,750 - INFO - Cluster 1: Mean Intensity = -0.23838038742542267
2024-10-25 14:49:16,750 - INFO - Processing Cluster 2.
2024-10-25 14:49:16,778 - INFO - Cluster 2: Initial voxel count = 11557371.
2024-10-25 14:49:16,778 - INFO - Applying morphological opening to remove small objects.
2024-10-25 14:49:17,738 - INFO - Applying morphological closing to fill small holes.
2024-10-25 14:49:18,838 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 14:49:19,611 - INFO - Cluster 2: Refined voxel count = 10752991.
2024-10-25 14:49:19,663 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-10-25 14:49:20,058 - INFO - Cluster 2: Mean Intensity = -0.14162421226501465
2024-10-25 14:49:20,058 - INFO - Processing Cluster 3.
2024-10-25 14:49:20,084 - INFO - Cluster 3: Initial voxel count = 6099220.
2024-10-25 14:49:20,084 - INFO - Applying morphological opening to remove small objects.
2024-10-25 14:49:21,070 - INFO - Applying morphological closing to fill small holes.
2024-10-25 14:49:22,305 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 14:49:23,149 - INFO - Cluster 3: Refined voxel count = 5238379.
2024-10-25 14:49:23,199 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-10-25 14:49:23,523 - INFO - Cluster 3: Mean Intensity = 0.05911420285701752
2024-10-25 14:49:23,523 - INFO - Processing Cluster 4.
2024-10-25 14:49:23,550 - INFO - Cluster 4: Initial voxel count = 479822.
2024-10-25 14:49:23,550 - INFO - Applying morphological opening to remove small objects.
2024-10-25 14:49:24,543 - INFO - Applying morphological closing to fill small holes.
2024-10-25 14:49:25,630 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 14:49:26,502 - INFO - Cluster 4: Refined voxel count = 455618.
2024-10-25 14:49:26,540 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-10-25 14:49:26,872 - INFO - Cluster 4: Mean Intensity = 6.575509071350098
2024-10-25 14:49:26,872 - INFO - CSF is identified as cluster 1.
2024-10-25 14:49:26,872 - INFO - Starting visualization with PyVista.
2024-10-25 14:49:27,206 - INFO - Adding Original MRI volume.
2024-10-25 14:49:28,539 - INFO - Adding Denoised MRI volume.
2024-10-25 14:49:29,661 - INFO - Adding Mask 0 mesh to visualization.
2024-10-25 14:49:29,927 - INFO - Initial mesh has 61317 points and 121866 faces.
2024-10-25 14:49:29,927 - INFO - Current memory usage: 2426.13 MB
2024-10-25 14:49:30,398 - INFO - Decimated mesh has 30882 points and 60932 faces.
2024-10-25 14:49:30,399 - INFO - Current memory usage: 2445.01 MB
2024-10-25 14:49:30,408 - INFO - Adding Mask 1 mesh to visualization.
2024-10-25 14:49:30,696 - INFO - Initial mesh has 151832 points and 300640 faces.
2024-10-25 14:49:30,696 - INFO - Current memory usage: 2488.59 MB
2024-10-25 14:49:32,866 - INFO - Decimated mesh has 76198 points and 150320 faces.
2024-10-25 14:49:32,867 - INFO - Current memory usage: 2539.18 MB
2024-10-25 14:49:32,873 - INFO - Adding Mask 2 mesh to visualization.
2024-10-25 14:49:33,738 - INFO - Initial mesh has 534144 points and 1074646 faces.
2024-10-25 14:49:33,739 - INFO - Current memory usage: 2618.14 MB
2024-10-25 14:49:39,298 - INFO - Decimated mesh has 264242 points and 537322 faces.
2024-10-25 14:49:39,298 - INFO - Current memory usage: 2861.98 MB
2024-10-25 14:49:39,305 - INFO - Adding Mask 3 mesh to visualization.
2024-10-25 14:49:39,846 - INFO - Initial mesh has 526242 points and 1070428 faces.
2024-10-25 14:49:39,846 - INFO - Current memory usage: 2837.38 MB
2024-10-25 14:49:45,226 - INFO - Decimated mesh has 258537 points and 535213 faces.
2024-10-25 14:49:45,227 - INFO - Current memory usage: 2983.95 MB
2024-10-25 14:49:45,233 - INFO - Adding Mask 4 mesh to visualization.
2024-10-25 14:49:45,580 - INFO - Initial mesh has 74882 points and 151352 faces.
2024-10-25 14:49:45,581 - INFO - Current memory usage: 2983.95 MB
2024-10-25 14:49:46,146 - INFO - Decimated mesh has 37044 points and 75676 faces.
2024-10-25 14:49:46,147 - INFO - Current memory usage: 2983.95 MB
2024-10-25 14:49:46,157 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2.html'.
2024-10-25 14:49:46,390 - INFO - Translator(prefix=None)
2024-10-25 14:49:46,442 - INFO - awaiting runner setup
2024-10-25 14:49:46,443 - INFO - awaiting site startup
2024-10-25 14:49:46,443 - INFO - Print WSLINK_READY_MSG
2024-10-25 14:49:46,443 - INFO - Schedule auto shutdown with timout 0
2024-10-25 14:49:46,443 - INFO - awaiting running future
2024-10-25 14:50:14,393 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2.html'.
2024-10-25 14:50:14,426 - INFO - Current memory usage: 2831.77 MB
2024-10-25 14:50:14,441 - INFO - Pipeline completed successfully.
2024-10-25 14:50:14,442 - INFO - Current memory usage: 2833.02 MB
2024-10-25 15:01:19,289 - INFO - Logging initiated.
2024-10-25 15:01:19,289 - INFO - Pipeline started.
2024-10-25 15:01:19,289 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 15:01:19,705 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 15:01:19,790 - INFO - Denoised image loaded.
2024-10-25 15:01:19,790 - INFO - Current memory usage: 515.29 MB
2024-10-25 15:01:19,790 - INFO - Starting intensity normalization.
2024-10-25 15:01:20,302 - INFO - Intensity normalization complete.
2024-10-25 15:01:20,303 - INFO - Current memory usage: 760.52 MB
2024-10-25 15:01:20,306 - INFO - Computing neighborhood mean.
2024-10-25 15:01:20,595 - INFO - Computing neighborhood mean of squares.
2024-10-25 15:01:20,968 - INFO - Computing neighborhood variance.
2024-10-25 15:01:21,107 - INFO - Neighborhood statistics computed.
2024-10-25 15:01:21,107 - INFO - Current memory usage: 978.60 MB
2024-10-25 15:01:21,111 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-10-25 15:01:21,816 - INFO - Features shape: (28566720, 3)
2024-10-25 15:01:21,817 - INFO - Current memory usage: 1523.47 MB
2024-10-25 15:01:21,817 - INFO - Plotting feature distributions.
2024-10-25 15:01:28,035 - INFO - Feature distributions plotted.
2024-10-25 15:01:28,069 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-10-25 15:01:34,993 - INFO - Features shape after adding spatial connectivity: (28566720, 6)
2024-10-25 15:04:47,020 - INFO - Logging initiated.
2024-10-25 15:04:47,021 - INFO - Pipeline started.
2024-10-25 15:04:47,021 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 15:04:47,315 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 15:04:47,465 - INFO - Denoised image loaded.
2024-10-25 15:04:47,465 - INFO - Current memory usage: 486.93 MB
2024-10-25 15:04:47,465 - INFO - Starting intensity normalization.
2024-10-25 15:04:48,022 - INFO - Intensity normalization complete.
2024-10-25 15:04:48,022 - INFO - Current memory usage: 732.18 MB
2024-10-25 15:04:48,030 - INFO - Computing neighborhood mean.
2024-10-25 15:04:48,667 - INFO - Computing neighborhood mean of squares.
2024-10-25 15:04:49,453 - INFO - Computing neighborhood variance.
2024-10-25 15:04:49,658 - INFO - Neighborhood statistics computed.
2024-10-25 15:04:49,658 - INFO - Current memory usage: 950.45 MB
2024-10-25 15:04:49,672 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-10-25 15:04:51,456 - INFO - Features shape: (28566720, 3)
2024-10-25 15:04:51,456 - INFO - Current memory usage: 1495.28 MB
2024-10-25 15:04:51,456 - INFO - Plotting feature distributions.
2024-10-25 15:04:58,741 - INFO - Feature distributions plotted.
2024-10-25 15:04:58,748 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-10-25 15:05:11,414 - INFO - Features shape after adding spatial connectivity: (28566720, 6)
2024-10-25 15:05:30,452 - INFO - Clustering complete with spatial connectivity.
2024-10-25 15:05:30,457 - INFO - Current memory usage: 4353.39 MB
2024-10-25 15:05:30,711 - INFO - Cluster labels reshaped to image dimensions.
2024-10-25 15:05:30,712 - INFO - Current memory usage: 1222.37 MB
2024-10-25 15:05:30,715 - INFO - Processing Cluster 0.
2024-10-25 15:05:30,769 - INFO - Cluster 0: Initial voxel count = 503035.
2024-10-25 15:05:30,770 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:05:32,249 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:05:33,386 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:05:33,764 - INFO - Cluster 0: Refined voxel count = 240656.
2024-10-25 15:05:33,811 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-10-25 15:05:33,988 - INFO - Cluster 0: Mean Intensity = 1.043959140777588
2024-10-25 15:05:33,988 - INFO - Processing Cluster 1.
2024-10-25 15:05:34,023 - INFO - Cluster 1: Initial voxel count = 8381858.
2024-10-25 15:05:34,023 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:05:34,938 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:05:35,990 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:05:36,396 - INFO - Cluster 1: Refined voxel count = 8223540.
2024-10-25 15:05:36,430 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-10-25 15:05:36,527 - INFO - Cluster 1: Mean Intensity = -0.21929247677326202
2024-10-25 15:05:36,528 - INFO - Processing Cluster 2.
2024-10-25 15:05:36,576 - INFO - Cluster 2: Initial voxel count = 10355354.
2024-10-25 15:05:36,576 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:05:37,504 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:05:38,536 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:05:38,959 - INFO - Cluster 2: Refined voxel count = 9921179.
2024-10-25 15:05:39,012 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-10-25 15:05:39,124 - INFO - Cluster 2: Mean Intensity = -0.17907392978668213
2024-10-25 15:05:39,124 - INFO - Processing Cluster 3.
2024-10-25 15:05:39,155 - INFO - Cluster 3: Initial voxel count = 475492.
2024-10-25 15:05:39,155 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:05:40,079 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:05:41,115 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:05:41,481 - INFO - Cluster 3: Refined voxel count = 450860.
2024-10-25 15:05:41,513 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-10-25 15:05:41,602 - INFO - Cluster 3: Mean Intensity = 6.61531400680542
2024-10-25 15:05:41,602 - INFO - Processing Cluster 4.
2024-10-25 15:05:41,646 - INFO - Cluster 4: Initial voxel count = 8850981.
2024-10-25 15:05:41,646 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:05:42,590 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:05:43,660 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:05:44,082 - INFO - Cluster 4: Refined voxel count = 8424626.
2024-10-25 15:05:44,116 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-10-25 15:05:44,273 - INFO - Cluster 4: Mean Intensity = 0.0024615107104182243
2024-10-25 15:05:44,274 - INFO - CSF is identified as cluster 1.
2024-10-25 15:05:44,275 - INFO - Selected slice indices for saving: [60, 90, 105, 120, 150]
2024-10-25 15:05:44,867 - INFO - Saved slice 60 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_0_overlay.png'.
2024-10-25 15:05:44,975 - INFO - Saved slice 60 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_1_overlay.png'.
2024-10-25 15:05:45,066 - INFO - Saved slice 60 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_2_overlay.png'.
2024-10-25 15:05:45,152 - INFO - Saved slice 60 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_3_overlay.png'.
2024-10-25 15:05:45,243 - INFO - Saved slice 60 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_60_cluster_4_overlay.png'.
2024-10-25 15:05:45,335 - INFO - Saved slice 90 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_0_overlay.png'.
2024-10-25 15:05:45,432 - INFO - Saved slice 90 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_1_overlay.png'.
2024-10-25 15:05:45,530 - INFO - Saved slice 90 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_2_overlay.png'.
2024-10-25 15:05:45,623 - INFO - Saved slice 90 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_3_overlay.png'.
2024-10-25 15:05:45,726 - INFO - Saved slice 90 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_90_cluster_4_overlay.png'.
2024-10-25 15:05:45,832 - INFO - Saved slice 105 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_105_cluster_0_overlay.png'.
2024-10-25 15:05:45,937 - INFO - Saved slice 105 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_105_cluster_1_overlay.png'.
2024-10-25 15:05:46,064 - INFO - Saved slice 105 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_105_cluster_2_overlay.png'.
2024-10-25 15:05:46,172 - INFO - Saved slice 105 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_105_cluster_3_overlay.png'.
2024-10-25 15:05:46,288 - INFO - Saved slice 105 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_105_cluster_4_overlay.png'.
2024-10-25 15:05:46,392 - INFO - Saved slice 120 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_0_overlay.png'.
2024-10-25 15:05:46,497 - INFO - Saved slice 120 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_1_overlay.png'.
2024-10-25 15:05:46,605 - INFO - Saved slice 120 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_2_overlay.png'.
2024-10-25 15:05:46,707 - INFO - Saved slice 120 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_3_overlay.png'.
2024-10-25 15:05:46,816 - INFO - Saved slice 120 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_120_cluster_4_overlay.png'.
2024-10-25 15:05:46,816 - WARNING - Slice index 150 is out of bounds for the denoised image.
2024-10-25 15:05:46,816 - INFO - Pipeline completed successfully.
2024-10-25 15:05:46,816 - INFO - Current memory usage: 1503.36 MB
2024-10-25 15:10:53,926 - INFO - Logging initiated.
2024-10-25 15:10:53,926 - INFO - Pipeline started.
2024-10-25 15:10:53,926 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 15:10:54,221 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 15:10:54,331 - INFO - Denoised image loaded.
2024-10-25 15:10:54,332 - INFO - Current memory usage: 515.82 MB
2024-10-25 15:10:54,332 - INFO - Starting intensity normalization.
2024-10-25 15:10:54,760 - INFO - Intensity normalization complete.
2024-10-25 15:10:54,761 - INFO - Current memory usage: 761.08 MB
2024-10-25 15:10:54,763 - INFO - Computing neighborhood mean.
2024-10-25 15:10:55,036 - INFO - Computing neighborhood mean of squares.
2024-10-25 15:10:55,390 - INFO - Computing neighborhood variance.
2024-10-25 15:10:55,529 - INFO - Neighborhood statistics computed.
2024-10-25 15:10:55,529 - INFO - Current memory usage: 979.15 MB
2024-10-25 15:10:55,535 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-10-25 15:10:56,292 - INFO - Features shape: (28566720, 3)
2024-10-25 15:10:56,292 - INFO - Current memory usage: 1480.67 MB
2024-10-25 15:10:56,292 - INFO - Plotting feature distributions.
2024-10-25 15:11:02,719 - INFO - Feature distributions plotted.
2024-10-25 15:11:02,738 - INFO - Performing MiniBatch K-Means clustering with k=8, batch_size=10000, connectivity_weight=0.1.
2024-10-25 15:11:37,457 - INFO - Logging initiated.
2024-10-25 15:11:37,457 - INFO - Pipeline started.
2024-10-25 15:11:37,457 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 15:11:37,547 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 15:11:37,643 - INFO - Denoised image loaded.
2024-10-25 15:11:37,644 - INFO - Current memory usage: 515.10 MB
2024-10-25 15:11:37,644 - INFO - Starting intensity normalization.
2024-10-25 15:11:37,954 - INFO - Intensity normalization complete.
2024-10-25 15:11:37,955 - INFO - Current memory usage: 760.33 MB
2024-10-25 15:11:37,955 - INFO - Computing neighborhood mean.
2024-10-25 15:11:38,285 - INFO - Computing neighborhood mean of squares.
2024-10-25 15:11:38,626 - INFO - Computing neighborhood variance.
2024-10-25 15:11:38,691 - INFO - Neighborhood statistics computed.
2024-10-25 15:11:38,692 - INFO - Current memory usage: 978.41 MB
2024-10-25 15:11:38,692 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-10-25 15:11:39,318 - INFO - Features shape: (28566720, 3)
2024-10-25 15:11:39,319 - INFO - Current memory usage: 1523.40 MB
2024-10-25 15:11:39,319 - INFO - Plotting feature distributions.
2024-10-25 15:11:44,914 - INFO - Feature distributions plotted.
2024-10-25 15:11:44,915 - INFO - Performing MiniBatch K-Means clustering with k=8, batch_size=10000, connectivity_weight=0.1.
2024-10-25 15:11:58,458 - INFO - Features shape after adding spatial connectivity: (28566720, 6)
2024-10-25 15:14:17,170 - INFO - Logging initiated.
2024-10-25 15:14:17,170 - INFO - Pipeline started.
2024-10-25 15:14:17,170 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 15:14:17,597 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 15:14:17,808 - INFO - Denoised image loaded.
2024-10-25 15:14:17,808 - INFO - Current memory usage: 514.46 MB
2024-10-25 15:14:17,808 - INFO - Starting intensity normalization.
2024-10-25 15:14:18,372 - INFO - Intensity normalization complete.
2024-10-25 15:14:18,373 - INFO - Current memory usage: 650.80 MB
2024-10-25 15:14:18,373 - INFO - Computing neighborhood statistics.
2024-10-25 15:14:19,234 - INFO - Neighborhood statistics computed.
2024-10-25 15:14:19,234 - INFO - Current memory usage: 868.77 MB
2024-10-25 15:14:19,234 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-10-25 15:14:19,914 - INFO - Features shape: (28566720, 3)
2024-10-25 15:14:19,915 - INFO - Current memory usage: 1470.06 MB
2024-10-25 15:14:19,915 - INFO - Plotting feature distributions.
2024-10-25 15:14:25,480 - INFO - Feature distributions plotted.
2024-10-25 15:14:25,503 - INFO - Performing MiniBatch K-Means clustering with k=8, batch_size=10000, connectivity_weight=0.1.
2024-10-25 15:14:49,016 - INFO - Logging initiated.
2024-10-25 15:14:49,016 - INFO - Pipeline started.
2024-10-25 15:14:49,016 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 15:14:49,263 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 15:14:49,329 - INFO - Denoised image loaded.
2024-10-25 15:14:49,330 - INFO - Current memory usage: 514.81 MB
2024-10-25 15:14:49,330 - INFO - Starting intensity normalization.
2024-10-25 15:14:49,661 - INFO - Intensity normalization complete.
2024-10-25 15:14:49,661 - INFO - Current memory usage: 651.16 MB
2024-10-25 15:14:49,661 - INFO - Computing neighborhood statistics.
2024-10-25 15:14:50,331 - INFO - Neighborhood statistics computed.
2024-10-25 15:14:50,331 - INFO - Current memory usage: 869.11 MB
2024-10-25 15:14:50,331 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-10-25 15:14:51,160 - INFO - Features shape: (28566720, 3)
2024-10-25 15:14:51,160 - INFO - Current memory usage: 1523.02 MB
2024-10-25 15:14:51,160 - INFO - Plotting feature distributions.
2024-10-25 15:14:57,875 - INFO - Feature distributions plotted.
2024-10-25 15:14:57,917 - INFO - Performing MiniBatch K-Means clustering with k=8, batch_size=10000, connectivity_weight=0.1.
2024-10-25 15:18:15,673 - INFO - Logging initiated.
2024-10-25 15:18:15,673 - INFO - Pipeline started.
2024-10-25 15:18:15,673 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 15:18:15,782 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 15:18:15,872 - INFO - Denoised image loaded.
2024-10-25 15:18:15,873 - INFO - Current memory usage: 514.91 MB
2024-10-25 15:18:15,874 - INFO - Starting intensity normalization.
2024-10-25 15:18:16,221 - INFO - Intensity normalization complete.
2024-10-25 15:18:16,221 - INFO - Current memory usage: 542.28 MB
2024-10-25 15:18:16,222 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-10-25 15:18:16,222 - INFO - Computing neighborhood statistics.
2024-10-25 15:18:16,499 - INFO - Neighborhood statistics computed.
2024-10-25 15:18:16,499 - INFO - Current memory usage: 542.16 MB
2024-10-25 15:18:16,499 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-10-25 15:18:16,779 - INFO - Features shape: (14264640, 3)
2024-10-25 15:18:16,779 - INFO - Current memory usage: 759.82 MB
2024-10-25 15:18:16,779 - INFO - Plotting feature distributions.
2024-10-25 15:18:20,872 - INFO - Feature distributions plotted.
2024-10-25 15:18:20,900 - INFO - Performing MiniBatch K-Means clustering with k=8, batch_size=10000, connectivity_weight=0.1.
2024-10-25 15:18:24,094 - INFO - Features shape after adding spatial connectivity: (14264640, 6)
2024-10-25 15:18:30,378 - INFO - Clustering complete with spatial connectivity.
2024-10-25 15:18:30,379 - INFO - Current memory usage: 1591.13 MB
2024-10-25 15:18:30,409 - INFO - Cluster labels reshaped to image dimensions.
2024-10-25 15:18:30,409 - INFO - Current memory usage: 938.15 MB
2024-10-25 15:18:30,419 - INFO - Processing Cluster 0.
2024-10-25 15:18:30,440 - INFO - Cluster 0: Initial voxel count = 3111352.
2024-10-25 15:18:30,440 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:18:30,987 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:18:31,507 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:18:31,777 - INFO - Cluster 0: Refined voxel count = 2715827.
2024-10-25 15:18:31,803 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-10-25 15:18:31,893 - INFO - Cluster 0: Mean Intensity = 0.13155721127986908
2024-10-25 15:18:31,893 - INFO - Processing Cluster 1.
2024-10-25 15:18:31,908 - INFO - Cluster 1: Initial voxel count = 2537111.
2024-10-25 15:18:31,908 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:18:32,458 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:18:32,984 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:18:33,237 - INFO - Cluster 1: Refined voxel count = 2450471.
2024-10-25 15:18:33,265 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-10-25 15:18:33,314 - INFO - Cluster 1: Mean Intensity = -0.18564118444919586
2024-10-25 15:18:33,314 - INFO - Processing Cluster 2.
2024-10-25 15:18:33,333 - INFO - Cluster 2: Initial voxel count = 3085993.
2024-10-25 15:18:33,333 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:18:33,846 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:18:34,351 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:18:34,602 - INFO - Cluster 2: Refined voxel count = 3020712.
2024-10-25 15:18:34,627 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-10-25 15:18:34,674 - INFO - Cluster 2: Mean Intensity = -0.1807822287082672
2024-10-25 15:18:34,674 - INFO - Processing Cluster 3.
2024-10-25 15:18:34,694 - INFO - Cluster 3: Initial voxel count = 2504825.
2024-10-25 15:18:34,694 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:18:35,203 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:18:35,714 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:18:35,968 - INFO - Cluster 3: Refined voxel count = 2304267.
2024-10-25 15:18:35,989 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-10-25 15:18:36,038 - INFO - Cluster 3: Mean Intensity = -0.15270018577575684
2024-10-25 15:18:36,039 - INFO - Processing Cluster 4.
2024-10-25 15:18:36,053 - INFO - Cluster 4: Initial voxel count = 274210.
2024-10-25 15:18:36,054 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:18:36,581 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:18:37,239 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:18:37,573 - INFO - Cluster 4: Refined voxel count = 128416.
2024-10-25 15:18:37,601 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-10-25 15:18:37,657 - INFO - Cluster 4: Mean Intensity = 4.168433666229248
2024-10-25 15:18:37,657 - INFO - Processing Cluster 5.
2024-10-25 15:18:37,681 - INFO - Cluster 5: Initial voxel count = 211519.
2024-10-25 15:18:37,681 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:18:38,384 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:18:39,087 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:18:39,437 - INFO - Cluster 5: Refined voxel count = 174246.
2024-10-25 15:18:39,447 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-10-25 15:18:39,495 - INFO - Cluster 5: Mean Intensity = 9.270941734313965
2024-10-25 15:18:39,495 - INFO - Processing Cluster 6.
2024-10-25 15:18:39,518 - INFO - Cluster 6: Initial voxel count = 2232282.
2024-10-25 15:18:39,518 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:18:40,113 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:18:40,765 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:18:41,076 - INFO - Cluster 6: Refined voxel count = 2138262.
2024-10-25 15:18:41,085 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-10-25 15:18:41,121 - INFO - Cluster 6: Mean Intensity = -0.18137593567371368
2024-10-25 15:18:41,121 - INFO - Processing Cluster 7.
2024-10-25 15:18:41,136 - INFO - Cluster 7: Initial voxel count = 307348.
2024-10-25 15:18:41,136 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:18:41,905 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:18:42,668 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:18:42,918 - INFO - Cluster 7: Refined voxel count = 110495.
2024-10-25 15:18:42,927 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-10-25 15:18:42,962 - INFO - Cluster 7: Mean Intensity = 1.009087085723877
2024-10-25 15:18:42,962 - INFO - CSF is identified as cluster 1.
2024-10-25 15:18:42,962 - INFO - Selected slice indices for saving: [0, 35, 71, 107, 143]
2024-10-25 15:18:43,119 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-10-25 15:19:33,733 - INFO - Logging initiated.
2024-10-25 15:19:33,733 - INFO - Pipeline started.
2024-10-25 15:19:33,733 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 15:19:33,924 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 15:19:34,005 - INFO - Denoised image loaded.
2024-10-25 15:19:34,006 - INFO - Current memory usage: 515.11 MB
2024-10-25 15:19:34,011 - INFO - Starting intensity normalization.
2024-10-25 15:19:34,397 - INFO - Intensity normalization complete.
2024-10-25 15:19:34,397 - INFO - Current memory usage: 542.48 MB
2024-10-25 15:19:34,398 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-10-25 15:19:34,398 - INFO - Computing neighborhood statistics.
2024-10-25 15:19:34,732 - INFO - Neighborhood statistics computed.
2024-10-25 15:19:34,732 - INFO - Current memory usage: 542.36 MB
2024-10-25 15:19:34,733 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-10-25 15:19:35,165 - INFO - Features shape: (14264640, 3)
2024-10-25 15:19:35,166 - INFO - Current memory usage: 760.02 MB
2024-10-25 15:19:35,166 - INFO - Plotting feature distributions.
2024-10-25 15:19:40,480 - INFO - Feature distributions plotted.
2024-10-25 15:19:40,502 - INFO - Performing MiniBatch K-Means clustering with k=8, batch_size=10000, connectivity_weight=0.1.
2024-10-25 15:19:43,764 - INFO - Features shape after adding spatial connectivity: (14264640, 6)
2024-10-25 15:19:49,674 - INFO - Clustering complete with spatial connectivity.
2024-10-25 15:19:49,674 - INFO - Current memory usage: 1595.50 MB
2024-10-25 15:19:49,711 - INFO - Cluster labels reshaped to image dimensions.
2024-10-25 15:19:49,712 - INFO - Current memory usage: 942.52 MB
2024-10-25 15:19:49,723 - INFO - Processing Cluster 0.
2024-10-25 15:19:49,742 - INFO - Cluster 0: Initial voxel count = 3111352.
2024-10-25 15:19:49,742 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:19:50,348 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:19:50,872 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:19:51,136 - INFO - Cluster 0: Refined voxel count = 2715827.
2024-10-25 15:19:51,161 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-10-25 15:19:51,213 - INFO - Cluster 0: Mean Intensity = 0.13155721127986908
2024-10-25 15:19:51,213 - INFO - Processing Cluster 1.
2024-10-25 15:19:51,228 - INFO - Cluster 1: Initial voxel count = 2537111.
2024-10-25 15:19:51,229 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:19:51,726 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:19:52,260 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:19:52,508 - INFO - Cluster 1: Refined voxel count = 2450471.
2024-10-25 15:19:52,524 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-10-25 15:19:52,569 - INFO - Cluster 1: Mean Intensity = -0.18564118444919586
2024-10-25 15:19:52,569 - INFO - Processing Cluster 2.
2024-10-25 15:19:52,586 - INFO - Cluster 2: Initial voxel count = 3085993.
2024-10-25 15:19:52,586 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:19:53,083 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:19:53,570 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:19:53,808 - INFO - Cluster 2: Refined voxel count = 3020712.
2024-10-25 15:19:53,831 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-10-25 15:19:53,877 - INFO - Cluster 2: Mean Intensity = -0.1807822287082672
2024-10-25 15:19:53,877 - INFO - Processing Cluster 3.
2024-10-25 15:19:53,893 - INFO - Cluster 3: Initial voxel count = 2504825.
2024-10-25 15:19:53,894 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:19:54,382 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:19:54,867 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:19:55,102 - INFO - Cluster 3: Refined voxel count = 2304267.
2024-10-25 15:19:55,127 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-10-25 15:19:55,174 - INFO - Cluster 3: Mean Intensity = -0.15270018577575684
2024-10-25 15:19:55,174 - INFO - Processing Cluster 4.
2024-10-25 15:19:55,188 - INFO - Cluster 4: Initial voxel count = 274210.
2024-10-25 15:19:55,189 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:19:55,678 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:19:56,146 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:19:56,345 - INFO - Cluster 4: Refined voxel count = 128416.
2024-10-25 15:19:56,368 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-10-25 15:19:56,401 - INFO - Cluster 4: Mean Intensity = 4.168433666229248
2024-10-25 15:19:56,402 - INFO - Processing Cluster 5.
2024-10-25 15:19:56,416 - INFO - Cluster 5: Initial voxel count = 211519.
2024-10-25 15:19:56,416 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:19:56,879 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:19:57,431 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:19:57,679 - INFO - Cluster 5: Refined voxel count = 174246.
2024-10-25 15:19:57,704 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-10-25 15:19:57,749 - INFO - Cluster 5: Mean Intensity = 9.270941734313965
2024-10-25 15:19:57,749 - INFO - Processing Cluster 6.
2024-10-25 15:19:57,772 - INFO - Cluster 6: Initial voxel count = 2232282.
2024-10-25 15:19:57,772 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:19:58,299 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:19:58,849 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:19:59,193 - INFO - Cluster 6: Refined voxel count = 2138262.
2024-10-25 15:19:59,217 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-10-25 15:19:59,284 - INFO - Cluster 6: Mean Intensity = -0.18137593567371368
2024-10-25 15:19:59,284 - INFO - Processing Cluster 7.
2024-10-25 15:19:59,312 - INFO - Cluster 7: Initial voxel count = 307348.
2024-10-25 15:19:59,312 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:19:59,947 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:20:00,526 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:20:00,769 - INFO - Cluster 7: Refined voxel count = 110495.
2024-10-25 15:20:00,795 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-10-25 15:20:00,845 - INFO - Cluster 7: Mean Intensity = 1.009087085723877
2024-10-25 15:20:00,845 - INFO - CSF is identified as cluster 1.
2024-10-25 15:20:00,846 - INFO - Selected slice indices for saving: [0, 35, 71, 107, 143]
2024-10-25 15:20:01,015 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-10-25 15:20:07,028 - INFO - Logging initiated.
2024-10-25 15:20:07,029 - INFO - Pipeline started.
2024-10-25 15:20:07,029 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 15:20:07,099 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 15:20:07,148 - INFO - Denoised image loaded.
2024-10-25 15:20:07,149 - INFO - Current memory usage: 514.31 MB
2024-10-25 15:20:07,149 - INFO - Starting intensity normalization.
2024-10-25 15:20:07,422 - INFO - Intensity normalization complete.
2024-10-25 15:20:07,422 - INFO - Current memory usage: 541.68 MB
2024-10-25 15:20:07,422 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-10-25 15:20:07,422 - INFO - Computing neighborhood statistics.
2024-10-25 15:20:07,702 - INFO - Neighborhood statistics computed.
2024-10-25 15:20:07,703 - INFO - Current memory usage: 541.56 MB
2024-10-25 15:20:07,703 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-10-25 15:20:07,838 - INFO - Features shape: (14264640, 3)
2024-10-25 15:20:07,838 - INFO - Current memory usage: 759.23 MB
2024-10-25 15:20:07,838 - INFO - Plotting feature distributions.
2024-10-25 15:20:12,234 - INFO - Feature distributions plotted.
2024-10-25 15:20:12,255 - INFO - Performing MiniBatch K-Means clustering with k=8, batch_size=10000, connectivity_weight=0.1.
2024-10-25 15:20:15,435 - INFO - Features shape after adding spatial connectivity: (14264640, 6)
2024-10-25 15:20:22,818 - INFO - Clustering complete with spatial connectivity.
2024-10-25 15:20:22,819 - INFO - Current memory usage: 1598.31 MB
2024-10-25 15:20:22,866 - INFO - Cluster labels reshaped to image dimensions.
2024-10-25 15:20:22,867 - INFO - Current memory usage: 945.33 MB
2024-10-25 15:20:22,868 - INFO - Processing Cluster 0.
2024-10-25 15:20:22,890 - INFO - Cluster 0: Initial voxel count = 3111352.
2024-10-25 15:20:22,890 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:20:23,538 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:20:24,100 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:20:24,381 - INFO - Cluster 0: Refined voxel count = 2715827.
2024-10-25 15:20:24,409 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-10-25 15:20:24,500 - INFO - Cluster 0: Mean Intensity = 0.13155721127986908
2024-10-25 15:20:24,500 - INFO - Processing Cluster 1.
2024-10-25 15:20:24,524 - INFO - Cluster 1: Initial voxel count = 2537111.
2024-10-25 15:20:24,525 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:20:25,086 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:20:25,648 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:20:25,905 - INFO - Cluster 1: Refined voxel count = 2450471.
2024-10-25 15:20:25,933 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-10-25 15:20:25,985 - INFO - Cluster 1: Mean Intensity = -0.18564118444919586
2024-10-25 15:20:25,985 - INFO - Processing Cluster 2.
2024-10-25 15:20:26,006 - INFO - Cluster 2: Initial voxel count = 3085993.
2024-10-25 15:20:26,006 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:20:26,518 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:20:27,016 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:20:27,265 - INFO - Cluster 2: Refined voxel count = 3020712.
2024-10-25 15:20:27,289 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-10-25 15:20:27,338 - INFO - Cluster 2: Mean Intensity = -0.1807822287082672
2024-10-25 15:20:27,338 - INFO - Processing Cluster 3.
2024-10-25 15:20:27,361 - INFO - Cluster 3: Initial voxel count = 2504825.
2024-10-25 15:20:27,361 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:20:27,919 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:20:28,423 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:20:28,658 - INFO - Cluster 3: Refined voxel count = 2304267.
2024-10-25 15:20:28,682 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-10-25 15:20:28,737 - INFO - Cluster 3: Mean Intensity = -0.15270018577575684
2024-10-25 15:20:28,737 - INFO - Processing Cluster 4.
2024-10-25 15:20:28,759 - INFO - Cluster 4: Initial voxel count = 274210.
2024-10-25 15:20:28,759 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:20:29,290 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:20:29,794 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:20:30,026 - INFO - Cluster 4: Refined voxel count = 128416.
2024-10-25 15:20:30,042 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-10-25 15:20:30,087 - INFO - Cluster 4: Mean Intensity = 4.168433666229248
2024-10-25 15:20:30,087 - INFO - Processing Cluster 5.
2024-10-25 15:20:30,105 - INFO - Cluster 5: Initial voxel count = 211519.
2024-10-25 15:20:30,106 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:20:30,623 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:20:31,115 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:20:31,337 - INFO - Cluster 5: Refined voxel count = 174246.
2024-10-25 15:20:31,362 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-10-25 15:20:31,401 - INFO - Cluster 5: Mean Intensity = 9.270941734313965
2024-10-25 15:20:31,401 - INFO - Processing Cluster 6.
2024-10-25 15:20:31,418 - INFO - Cluster 6: Initial voxel count = 2232282.
2024-10-25 15:20:31,418 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:20:31,922 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:20:32,413 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:20:32,649 - INFO - Cluster 6: Refined voxel count = 2138262.
2024-10-25 15:20:32,679 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-10-25 15:20:32,737 - INFO - Cluster 6: Mean Intensity = -0.18137593567371368
2024-10-25 15:20:32,737 - INFO - Processing Cluster 7.
2024-10-25 15:20:32,757 - INFO - Cluster 7: Initial voxel count = 307348.
2024-10-25 15:20:32,757 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:20:33,252 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:20:33,762 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:20:33,994 - INFO - Cluster 7: Refined voxel count = 110495.
2024-10-25 15:20:34,023 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-10-25 15:20:34,082 - INFO - Cluster 7: Mean Intensity = 1.009087085723877
2024-10-25 15:20:34,083 - INFO - CSF is identified as cluster 1.
2024-10-25 15:20:34,084 - INFO - Selected slice indices for saving: [0, 35, 71, 107, 143]
2024-10-25 15:20:34,243 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-10-25 15:20:34,419 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-10-25 15:20:34,567 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-10-25 15:20:34,711 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-10-25 15:20:34,848 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-10-25 15:20:34,988 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-10-25 15:20:35,148 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-10-25 15:20:35,293 - INFO - Saved slice 0 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_7_overlay.png'.
2024-10-25 15:20:35,440 - INFO - Saved slice 35 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_0_overlay.png'.
2024-10-25 15:20:35,582 - INFO - Saved slice 35 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_1_overlay.png'.
2024-10-25 15:20:35,724 - INFO - Saved slice 35 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_2_overlay.png'.
2024-10-25 15:20:35,865 - INFO - Saved slice 35 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_3_overlay.png'.
2024-10-25 15:20:35,998 - INFO - Saved slice 35 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_4_overlay.png'.
2024-10-25 15:20:36,131 - INFO - Saved slice 35 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_5_overlay.png'.
2024-10-25 15:20:36,287 - INFO - Saved slice 35 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_6_overlay.png'.
2024-10-25 15:20:36,446 - INFO - Saved slice 35 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_7_overlay.png'.
2024-10-25 15:20:36,635 - INFO - Saved slice 71 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_0_overlay.png'.
2024-10-25 15:20:36,802 - INFO - Saved slice 71 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_1_overlay.png'.
2024-10-25 15:20:36,967 - INFO - Saved slice 71 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_2_overlay.png'.
2024-10-25 15:20:37,129 - INFO - Saved slice 71 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_3_overlay.png'.
2024-10-25 15:20:37,283 - INFO - Saved slice 71 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_4_overlay.png'.
2024-10-25 15:20:37,454 - INFO - Saved slice 71 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_5_overlay.png'.
2024-10-25 15:20:37,625 - INFO - Saved slice 71 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_6_overlay.png'.
2024-10-25 15:20:37,784 - INFO - Saved slice 71 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_7_overlay.png'.
2024-10-25 15:20:37,938 - INFO - Saved slice 107 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_0_overlay.png'.
2024-10-25 15:20:38,112 - INFO - Saved slice 107 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_1_overlay.png'.
2024-10-25 15:20:38,297 - INFO - Saved slice 107 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_2_overlay.png'.
2024-10-25 15:20:38,480 - INFO - Saved slice 107 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_3_overlay.png'.
2024-10-25 15:20:38,667 - INFO - Saved slice 107 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_4_overlay.png'.
2024-10-25 15:20:38,839 - INFO - Saved slice 107 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_5_overlay.png'.
2024-10-25 15:20:39,007 - INFO - Saved slice 107 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_6_overlay.png'.
2024-10-25 15:20:39,223 - INFO - Saved slice 107 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_7_overlay.png'.
2024-10-25 15:20:39,394 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-10-25 15:20:39,557 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-10-25 15:20:39,707 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-10-25 15:20:39,854 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-10-25 15:20:39,993 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-10-25 15:20:40,163 - INFO - Saved slice 143 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_5_overlay.png'.
2024-10-25 15:20:40,339 - INFO - Saved slice 143 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_6_overlay.png'.
2024-10-25 15:20:40,497 - INFO - Saved slice 143 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_7_overlay.png'.
2024-10-25 15:20:40,503 - INFO - Pipeline completed successfully.
2024-10-25 15:20:40,504 - INFO - Current memory usage: 916.11 MB
2024-10-25 15:21:42,601 - INFO - Logging initiated.
2024-10-25 15:21:42,601 - INFO - Pipeline started.
2024-10-25 15:21:42,601 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 15:21:42,689 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 15:21:42,745 - INFO - Denoised image loaded.
2024-10-25 15:21:42,745 - INFO - Current memory usage: 515.54 MB
2024-10-25 15:21:42,746 - INFO - Starting intensity normalization.
2024-10-25 15:21:43,013 - INFO - Intensity normalization complete.
2024-10-25 15:21:43,013 - INFO - Current memory usage: 542.91 MB
2024-10-25 15:21:43,013 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-10-25 15:21:43,013 - INFO - Computing neighborhood statistics.
2024-10-25 15:21:43,291 - INFO - Neighborhood statistics computed.
2024-10-25 15:21:43,292 - INFO - Current memory usage: 542.79 MB
2024-10-25 15:21:43,292 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-10-25 15:21:43,440 - INFO - Features shape: (14264640, 3)
2024-10-25 15:21:43,440 - INFO - Current memory usage: 760.46 MB
2024-10-25 15:21:43,440 - INFO - Plotting feature distributions.
2024-10-25 15:21:47,682 - INFO - Feature distributions plotted.
2024-10-25 15:21:47,707 - INFO - Performing MiniBatch K-Means clustering with k=8, batch_size=10000, connectivity_weight=0.1.
2024-10-25 15:21:51,543 - INFO - Features shape after adding spatial connectivity: (14264640, 6)
2024-10-25 15:21:58,877 - INFO - Clustering complete with spatial connectivity.
2024-10-25 15:21:58,877 - INFO - Current memory usage: 1584.07 MB
2024-10-25 15:21:58,952 - INFO - Cluster labels reshaped to image dimensions.
2024-10-25 15:21:58,952 - INFO - Current memory usage: 931.08 MB
2024-10-25 15:21:58,967 - INFO - Processing Cluster 0.
2024-10-25 15:21:58,994 - INFO - Cluster 0: Initial voxel count = 3111352.
2024-10-25 15:21:58,994 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:21:59,680 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:22:00,277 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:22:00,551 - INFO - Cluster 0: Refined voxel count = 2715827.
2024-10-25 15:22:00,575 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-10-25 15:22:00,636 - INFO - Cluster 0: Mean Intensity = 0.13155721127986908
2024-10-25 15:22:00,637 - INFO - Processing Cluster 1.
2024-10-25 15:22:00,655 - INFO - Cluster 1: Initial voxel count = 2537111.
2024-10-25 15:22:00,655 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:22:01,310 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:22:02,145 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:22:02,496 - INFO - Cluster 1: Refined voxel count = 2450471.
2024-10-25 15:22:02,514 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-10-25 15:22:02,582 - INFO - Cluster 1: Mean Intensity = -0.18564118444919586
2024-10-25 15:22:02,582 - INFO - Processing Cluster 2.
2024-10-25 15:22:02,608 - INFO - Cluster 2: Initial voxel count = 3085993.
2024-10-25 15:22:02,608 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:22:03,319 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:22:04,025 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:22:04,342 - INFO - Cluster 2: Refined voxel count = 3020712.
2024-10-25 15:22:04,359 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-10-25 15:22:04,412 - INFO - Cluster 2: Mean Intensity = -0.1807822287082672
2024-10-25 15:22:04,413 - INFO - Processing Cluster 3.
2024-10-25 15:22:04,435 - INFO - Cluster 3: Initial voxel count = 2504825.
2024-10-25 15:22:04,436 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:22:05,078 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:22:05,672 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:22:05,964 - INFO - Cluster 3: Refined voxel count = 2304267.
2024-10-25 15:22:05,979 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-10-25 15:22:06,038 - INFO - Cluster 3: Mean Intensity = -0.15270018577575684
2024-10-25 15:22:06,038 - INFO - Processing Cluster 4.
2024-10-25 15:22:06,056 - INFO - Cluster 4: Initial voxel count = 274210.
2024-10-25 15:22:06,056 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:22:06,584 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:22:07,079 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:22:07,349 - INFO - Cluster 4: Refined voxel count = 128416.
2024-10-25 15:22:07,365 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-10-25 15:22:07,412 - INFO - Cluster 4: Mean Intensity = 4.168433666229248
2024-10-25 15:22:07,413 - INFO - Processing Cluster 5.
2024-10-25 15:22:07,434 - INFO - Cluster 5: Initial voxel count = 211519.
2024-10-25 15:22:07,434 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:22:07,927 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:22:08,468 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:22:08,725 - INFO - Cluster 5: Refined voxel count = 174246.
2024-10-25 15:22:08,750 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-10-25 15:22:08,793 - INFO - Cluster 5: Mean Intensity = 9.270941734313965
2024-10-25 15:22:08,793 - INFO - Processing Cluster 6.
2024-10-25 15:22:08,817 - INFO - Cluster 6: Initial voxel count = 2232282.
2024-10-25 15:22:08,817 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:22:09,369 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:22:09,834 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:22:10,074 - INFO - Cluster 6: Refined voxel count = 2138262.
2024-10-25 15:22:10,098 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-10-25 15:22:10,156 - INFO - Cluster 6: Mean Intensity = -0.18137593567371368
2024-10-25 15:22:10,156 - INFO - Processing Cluster 7.
2024-10-25 15:22:10,184 - INFO - Cluster 7: Initial voxel count = 307348.
2024-10-25 15:22:10,185 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:22:10,695 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:22:11,137 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:22:11,337 - INFO - Cluster 7: Refined voxel count = 110495.
2024-10-25 15:22:11,351 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-10-25 15:22:11,394 - INFO - Cluster 7: Mean Intensity = 1.009087085723877
2024-10-25 15:22:11,394 - INFO - CSF is identified as cluster 1.
2024-10-25 15:22:11,395 - INFO - Starting visualization with PyVista.
2024-10-25 15:22:11,653 - INFO - Adding Original MRI volume.
2024-10-25 15:22:11,921 - INFO - Adding Denoised MRI volume.
2024-10-25 15:22:12,284 - INFO - Adding Mask 0 mesh to visualization.
2024-10-25 15:22:12,630 - INFO - Initial mesh has 295580 points and 602410 faces.
2024-10-25 15:22:12,630 - INFO - Current memory usage: 1202.69 MB
2024-10-25 15:22:15,454 - INFO - Decimated mesh has 144722 points and 301205 faces.
2024-10-25 15:22:15,455 - INFO - Current memory usage: 1436.39 MB
2024-10-25 15:22:15,466 - INFO - Adding Mask 1 mesh to visualization.
2024-10-25 15:22:15,658 - INFO - Initial mesh has 74499 points and 149760 faces.
2024-10-25 15:22:15,658 - INFO - Current memory usage: 1438.97 MB
2024-10-25 15:22:16,232 - INFO - Decimated mesh has 36729 points and 74880 faces.
2024-10-25 15:22:16,233 - INFO - Current memory usage: 1439.59 MB
2024-10-25 15:22:16,241 - INFO - Adding Mask 2 mesh to visualization.
2024-10-25 15:22:16,376 - INFO - Initial mesh has 49828 points and 99810 faces.
2024-10-25 15:22:16,377 - INFO - Current memory usage: 1439.46 MB
2024-10-25 15:22:16,706 - INFO - Decimated mesh has 24644 points and 49904 faces.
2024-10-25 15:22:16,707 - INFO - Current memory usage: 1439.46 MB
2024-10-25 15:22:16,712 - INFO - Adding Mask 3 mesh to visualization.
2024-10-25 15:22:16,877 - INFO - Initial mesh has 84440 points and 169398 faces.
2024-10-25 15:22:16,878 - INFO - Current memory usage: 1439.47 MB
2024-10-25 15:22:17,502 - INFO - Decimated mesh has 41824 points and 84699 faces.
2024-10-25 15:22:17,503 - INFO - Current memory usage: 1439.47 MB
2024-10-25 15:22:17,511 - INFO - Adding Mask 4 mesh to visualization.
2024-10-25 15:22:17,704 - INFO - Initial mesh has 49762 points and 103024 faces.
2024-10-25 15:22:17,705 - INFO - Current memory usage: 1439.50 MB
2024-10-25 15:22:18,057 - INFO - Decimated mesh has 24231 points and 51512 faces.
2024-10-25 15:22:18,058 - INFO - Current memory usage: 1439.50 MB
2024-10-25 15:22:18,063 - INFO - Adding Mask 5 mesh to visualization.
2024-10-25 15:22:18,179 - INFO - Initial mesh has 25858 points and 51828 faces.
2024-10-25 15:22:18,180 - INFO - Current memory usage: 1439.51 MB
2024-10-25 15:22:18,354 - INFO - Decimated mesh has 12901 points and 25913 faces.
2024-10-25 15:22:18,354 - INFO - Current memory usage: 1439.51 MB
2024-10-25 15:22:18,359 - INFO - Adding Mask 6 mesh to visualization.
2024-10-25 15:22:18,496 - INFO - Initial mesh has 50937 points and 101244 faces.
2024-10-25 15:22:18,497 - INFO - Current memory usage: 1439.52 MB
2024-10-25 15:22:18,817 - INFO - Decimated mesh has 25392 points and 50622 faces.
2024-10-25 15:22:18,818 - INFO - Current memory usage: 1439.52 MB
2024-10-25 15:22:18,823 - INFO - Adding Mask 7 mesh to visualization.
2024-10-25 15:22:18,980 - INFO - Initial mesh has 43531 points and 85914 faces.
2024-10-25 15:22:18,980 - INFO - Current memory usage: 1439.53 MB
2024-10-25 15:22:19,251 - INFO - Decimated mesh has 22122 points and 42956 faces.
2024-10-25 15:22:19,251 - INFO - Current memory usage: 1439.53 MB
2024-10-25 15:25:40,986 - INFO - Logging initiated.
2024-10-25 15:25:40,986 - INFO - Pipeline started.
2024-10-25 15:25:40,986 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 15:25:41,123 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 15:25:41,198 - INFO - Denoised image loaded.
2024-10-25 15:25:41,198 - INFO - Current memory usage: 515.07 MB
2024-10-25 15:25:41,205 - INFO - Starting intensity normalization.
2024-10-25 15:25:41,610 - INFO - Intensity normalization complete.
2024-10-25 15:25:41,610 - INFO - Current memory usage: 542.45 MB
2024-10-25 15:25:41,611 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-10-25 15:25:41,611 - INFO - Computing neighborhood statistics.
2024-10-25 15:25:41,900 - INFO - Neighborhood statistics computed.
2024-10-25 15:25:41,901 - INFO - Current memory usage: 542.32 MB
2024-10-25 15:25:41,901 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-10-25 15:25:42,089 - INFO - Features shape: (14264640, 3)
2024-10-25 15:25:42,090 - INFO - Current memory usage: 759.99 MB
2024-10-25 15:25:42,090 - INFO - Plotting feature distributions.
2024-10-25 15:25:48,667 - INFO - Feature distributions plotted.
2024-10-25 15:25:48,695 - INFO - Performing MiniBatch K-Means clustering with k=8, batch_size=10000, connectivity_weight=0.1.
2024-10-25 15:25:52,812 - INFO - Features shape after adding spatial connectivity: (14264640, 6)
2024-10-25 15:25:58,711 - INFO - Clustering complete with spatial connectivity.
2024-10-25 15:25:58,712 - INFO - Current memory usage: 1547.37 MB
2024-10-25 15:25:58,742 - INFO - Cluster labels reshaped to image dimensions.
2024-10-25 15:25:58,743 - INFO - Current memory usage: 894.38 MB
2024-10-25 15:25:58,749 - INFO - Processing Cluster 0.
2024-10-25 15:25:58,763 - INFO - Cluster 0: Initial voxel count = 3111352.
2024-10-25 15:25:58,763 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:25:59,318 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:25:59,826 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:26:00,084 - INFO - Cluster 0: Refined voxel count = 2715827.
2024-10-25 15:26:00,102 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-10-25 15:26:00,159 - INFO - Cluster 0: Mean Intensity = 0.13155721127986908
2024-10-25 15:26:00,159 - INFO - Processing Cluster 1.
2024-10-25 15:26:00,173 - INFO - Cluster 1: Initial voxel count = 2537111.
2024-10-25 15:26:00,173 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:26:00,667 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:26:01,135 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:26:01,352 - INFO - Cluster 1: Refined voxel count = 2450471.
2024-10-25 15:26:01,382 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-10-25 15:26:01,434 - INFO - Cluster 1: Mean Intensity = -0.18564118444919586
2024-10-25 15:26:01,434 - INFO - Processing Cluster 2.
2024-10-25 15:26:01,450 - INFO - Cluster 2: Initial voxel count = 3085993.
2024-10-25 15:26:01,450 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:26:01,965 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:26:02,478 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:26:02,728 - INFO - Cluster 2: Refined voxel count = 3020712.
2024-10-25 15:26:02,746 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-10-25 15:26:02,791 - INFO - Cluster 2: Mean Intensity = -0.1807822287082672
2024-10-25 15:26:02,791 - INFO - Processing Cluster 3.
2024-10-25 15:26:02,808 - INFO - Cluster 3: Initial voxel count = 2504825.
2024-10-25 15:26:02,808 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:26:03,312 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:26:03,786 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:26:03,999 - INFO - Cluster 3: Refined voxel count = 2304267.
2024-10-25 15:26:04,015 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-10-25 15:26:04,059 - INFO - Cluster 3: Mean Intensity = -0.15270018577575684
2024-10-25 15:26:04,059 - INFO - Processing Cluster 4.
2024-10-25 15:26:04,074 - INFO - Cluster 4: Initial voxel count = 274210.
2024-10-25 15:26:04,075 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:26:04,559 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:26:05,064 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:26:05,276 - INFO - Cluster 4: Refined voxel count = 128416.
2024-10-25 15:26:05,292 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-10-25 15:26:05,327 - INFO - Cluster 4: Mean Intensity = 4.168433666229248
2024-10-25 15:26:05,327 - INFO - Processing Cluster 5.
2024-10-25 15:26:05,342 - INFO - Cluster 5: Initial voxel count = 211519.
2024-10-25 15:26:05,343 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:26:05,824 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:26:06,294 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:26:06,523 - INFO - Cluster 5: Refined voxel count = 174246.
2024-10-25 15:26:06,539 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-10-25 15:26:06,573 - INFO - Cluster 5: Mean Intensity = 9.270941734313965
2024-10-25 15:26:06,574 - INFO - Processing Cluster 6.
2024-10-25 15:26:06,588 - INFO - Cluster 6: Initial voxel count = 2232282.
2024-10-25 15:26:06,588 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:26:07,101 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:26:07,570 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:26:07,786 - INFO - Cluster 6: Refined voxel count = 2138262.
2024-10-25 15:26:07,801 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-10-25 15:26:07,839 - INFO - Cluster 6: Mean Intensity = -0.18137593567371368
2024-10-25 15:26:07,839 - INFO - Processing Cluster 7.
2024-10-25 15:26:07,854 - INFO - Cluster 7: Initial voxel count = 307348.
2024-10-25 15:26:07,854 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:26:08,329 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:26:08,800 - INFO - Removing objects smaller than 1 voxels.
2024-10-25 15:26:08,999 - INFO - Cluster 7: Refined voxel count = 110495.
2024-10-25 15:26:09,021 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-10-25 15:26:09,059 - INFO - Cluster 7: Mean Intensity = 1.009087085723877
2024-10-25 15:26:09,060 - INFO - CSF is identified as cluster 1.
2024-10-25 15:26:09,060 - INFO - Starting visualization with PyVista.
2024-10-25 15:26:09,314 - INFO - Adding Original MRI volume.
2024-10-25 15:26:09,557 - INFO - Adding Denoised MRI volume.
2024-10-25 15:26:09,770 - INFO - Adding Mask 0 mesh to visualization.
2024-10-25 15:26:10,197 - INFO - Initial mesh has 295580 points and 602410 faces.
2024-10-25 15:26:10,197 - INFO - Current memory usage: 1178.34 MB
2024-10-25 15:26:13,240 - INFO - Decimated mesh has 144722 points and 301205 faces.
2024-10-25 15:26:13,241 - INFO - Current memory usage: 1413.11 MB
2024-10-25 15:26:13,249 - INFO - Adding Mask 1 mesh to visualization.
2024-10-25 15:26:13,441 - INFO - Initial mesh has 74499 points and 149760 faces.
2024-10-25 15:26:13,441 - INFO - Current memory usage: 1415.99 MB
2024-10-25 15:26:13,994 - INFO - Decimated mesh has 36729 points and 74880 faces.
2024-10-25 15:26:13,994 - INFO - Current memory usage: 1416.99 MB
2024-10-25 15:26:14,003 - INFO - Adding Mask 2 mesh to visualization.
2024-10-25 15:26:14,198 - INFO - Initial mesh has 49828 points and 99810 faces.
2024-10-25 15:26:14,199 - INFO - Current memory usage: 1417.05 MB
2024-10-25 15:26:14,525 - INFO - Decimated mesh has 24644 points and 49904 faces.
2024-10-25 15:26:14,525 - INFO - Current memory usage: 1417.05 MB
2024-10-25 15:26:14,530 - INFO - Adding Mask 3 mesh to visualization.
2024-10-25 15:26:14,694 - INFO - Initial mesh has 84440 points and 169398 faces.
2024-10-25 15:26:14,694 - INFO - Current memory usage: 1416.81 MB
2024-10-25 15:26:15,355 - INFO - Decimated mesh has 41824 points and 84699 faces.
2024-10-25 15:26:15,356 - INFO - Current memory usage: 1416.81 MB
2024-10-25 15:26:15,364 - INFO - Adding Mask 4 mesh to visualization.
2024-10-25 15:26:15,506 - INFO - Initial mesh has 49762 points and 103024 faces.
2024-10-25 15:26:15,507 - INFO - Current memory usage: 1416.71 MB
2024-10-25 15:26:15,875 - INFO - Decimated mesh has 24231 points and 51512 faces.
2024-10-25 15:26:15,876 - INFO - Current memory usage: 1416.71 MB
2024-10-25 15:26:15,881 - INFO - Adding Mask 5 mesh to visualization.
2024-10-25 15:26:16,006 - INFO - Initial mesh has 25858 points and 51828 faces.
2024-10-25 15:26:16,006 - INFO - Current memory usage: 1416.71 MB
2024-10-25 15:26:16,162 - INFO - Decimated mesh has 12901 points and 25913 faces.
2024-10-25 15:26:16,162 - INFO - Current memory usage: 1416.71 MB
2024-10-25 15:26:16,167 - INFO - Adding Mask 6 mesh to visualization.
2024-10-25 15:26:16,289 - INFO - Initial mesh has 50937 points and 101244 faces.
2024-10-25 15:26:16,290 - INFO - Current memory usage: 1416.71 MB
2024-10-25 15:26:16,614 - INFO - Decimated mesh has 25392 points and 50622 faces.
2024-10-25 15:26:16,615 - INFO - Current memory usage: 1416.71 MB
2024-10-25 15:26:16,622 - INFO - Adding Mask 7 mesh to visualization.
2024-10-25 15:26:16,752 - INFO - Initial mesh has 43531 points and 85914 faces.
2024-10-25 15:26:16,752 - INFO - Current memory usage: 1416.72 MB
2024-10-25 15:26:17,019 - INFO - Decimated mesh has 22122 points and 42956 faces.
2024-10-25 15:26:17,020 - INFO - Current memory usage: 1416.72 MB
2024-10-25 15:26:17,025 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2.html'.
2024-10-25 15:26:17,237 - INFO - Translator(prefix=None)
2024-10-25 15:26:17,295 - INFO - awaiting runner setup
2024-10-25 15:26:17,296 - INFO - awaiting site startup
2024-10-25 15:26:17,296 - INFO - Print WSLINK_READY_MSG
2024-10-25 15:26:17,296 - INFO - Schedule auto shutdown with timout 0
2024-10-25 15:26:17,296 - INFO - awaiting running future
2024-10-25 15:26:26,982 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2.html'.
2024-10-25 15:26:26,989 - INFO - Current memory usage: 1430.51 MB
2024-10-25 15:26:26,996 - INFO - Selected slice indices for saving: [0, 35, 71, 107, 143]
2024-10-25 15:26:27,127 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-10-25 15:26:27,241 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-10-25 15:26:27,364 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-10-25 15:26:27,497 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-10-25 15:26:27,738 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-10-25 15:26:27,854 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-10-25 15:26:27,977 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-10-25 15:26:28,135 - INFO - Saved slice 0 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_7_overlay.png'.
2024-10-25 15:26:28,272 - INFO - Saved slice 35 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_0_overlay.png'.
2024-10-25 15:26:28,406 - INFO - Saved slice 35 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_1_overlay.png'.
2024-10-25 15:26:28,537 - INFO - Saved slice 35 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_2_overlay.png'.
2024-10-25 15:26:28,666 - INFO - Saved slice 35 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_3_overlay.png'.
2024-10-25 15:26:28,797 - INFO - Saved slice 35 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_4_overlay.png'.
2024-10-25 15:26:28,925 - INFO - Saved slice 35 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_5_overlay.png'.
2024-10-25 15:26:29,061 - INFO - Saved slice 35 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_6_overlay.png'.
2024-10-25 15:26:29,202 - INFO - Saved slice 35 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_7_overlay.png'.
2024-10-25 15:26:29,348 - INFO - Saved slice 71 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_0_overlay.png'.
2024-10-25 15:26:29,483 - INFO - Saved slice 71 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_1_overlay.png'.
2024-10-25 15:26:29,619 - INFO - Saved slice 71 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_2_overlay.png'.
2024-10-25 15:26:29,754 - INFO - Saved slice 71 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_3_overlay.png'.
2024-10-25 15:26:29,882 - INFO - Saved slice 71 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_4_overlay.png'.
2024-10-25 15:26:30,014 - INFO - Saved slice 71 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_5_overlay.png'.
2024-10-25 15:26:30,174 - INFO - Saved slice 71 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_6_overlay.png'.
2024-10-25 15:26:30,322 - INFO - Saved slice 71 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_7_overlay.png'.
2024-10-25 15:26:30,469 - INFO - Saved slice 107 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_0_overlay.png'.
2024-10-25 15:26:30,604 - INFO - Saved slice 107 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_1_overlay.png'.
2024-10-25 15:26:30,745 - INFO - Saved slice 107 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_2_overlay.png'.
2024-10-25 15:26:30,887 - INFO - Saved slice 107 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_3_overlay.png'.
2024-10-25 15:26:31,025 - INFO - Saved slice 107 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_4_overlay.png'.
2024-10-25 15:26:31,160 - INFO - Saved slice 107 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_5_overlay.png'.
2024-10-25 15:26:31,297 - INFO - Saved slice 107 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_6_overlay.png'.
2024-10-25 15:26:31,433 - INFO - Saved slice 107 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_7_overlay.png'.
2024-10-25 15:26:31,566 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-10-25 15:26:31,698 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-10-25 15:26:31,832 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-10-25 15:26:31,961 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-10-25 15:26:32,125 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-10-25 15:26:32,264 - INFO - Saved slice 143 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_5_overlay.png'.
2024-10-25 15:26:32,402 - INFO - Saved slice 143 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_6_overlay.png'.
2024-10-25 15:26:32,534 - INFO - Saved slice 143 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_7_overlay.png'.
2024-10-25 15:26:32,539 - INFO - Pipeline completed successfully.
2024-10-25 15:26:32,540 - INFO - Current memory usage: 1328.54 MB
2024-10-25 15:32:39,681 - INFO - Logging initiated.
2024-10-25 15:32:39,681 - INFO - Pipeline started.
2024-10-25 15:32:39,681 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 15:32:39,968 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 15:32:40,128 - INFO - Denoised image loaded.
2024-10-25 15:32:40,128 - INFO - Current memory usage: 495.16 MB
2024-10-25 15:32:40,135 - INFO - Starting intensity normalization.
2024-10-25 15:32:40,759 - INFO - Intensity normalization complete.
2024-10-25 15:32:40,759 - INFO - Current memory usage: 521.31 MB
2024-10-25 15:32:40,764 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-10-25 15:32:40,764 - INFO - Computing neighborhood statistics.
2024-10-25 15:32:41,188 - INFO - Neighborhood statistics computed.
2024-10-25 15:32:41,189 - INFO - Current memory usage: 521.19 MB
2024-10-25 15:32:41,189 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-10-25 15:32:41,513 - INFO - Features shape: (14264640, 3)
2024-10-25 15:32:41,514 - INFO - Current memory usage: 722.98 MB
2024-10-25 15:32:41,514 - INFO - Plotting feature distributions.
2024-10-25 15:32:56,690 - INFO - Feature distributions plotted.
2024-10-25 15:32:56,729 - INFO - Performing MiniBatch K-Means clustering with k=10, batch_size=10000, connectivity_weight=0.1.
2024-10-25 15:33:05,448 - INFO - Logging initiated.
2024-10-25 15:33:05,449 - INFO - Pipeline started.
2024-10-25 15:33:05,449 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 15:33:05,658 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 15:33:05,757 - INFO - Denoised image loaded.
2024-10-25 15:33:05,758 - INFO - Current memory usage: 514.86 MB
2024-10-25 15:33:05,766 - INFO - Starting intensity normalization.
2024-10-25 15:33:06,355 - INFO - Intensity normalization complete.
2024-10-25 15:33:06,356 - INFO - Current memory usage: 542.12 MB
2024-10-25 15:33:06,356 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-10-25 15:33:06,356 - INFO - Computing neighborhood statistics.
2024-10-25 15:33:06,675 - INFO - Neighborhood statistics computed.
2024-10-25 15:33:06,675 - INFO - Current memory usage: 542.10 MB
2024-10-25 15:33:06,675 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-10-25 15:33:06,921 - INFO - Features shape: (14264640, 3)
2024-10-25 15:33:06,921 - INFO - Current memory usage: 759.77 MB
2024-10-25 15:33:06,921 - INFO - Plotting feature distributions.
2024-10-25 15:33:11,213 - INFO - Feature distributions plotted.
2024-10-25 15:33:11,225 - INFO - Performing MiniBatch K-Means clustering with k=10, batch_size=10000, connectivity_weight=0.1.
2024-10-25 15:33:47,810 - INFO - Logging initiated.
2024-10-25 15:33:47,810 - INFO - Pipeline started.
2024-10-25 15:33:47,810 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-10-25 15:33:48,092 - INFO - Image loaded with shape (144, 763, 260).
2024-10-25 15:33:48,196 - INFO - Denoised image loaded.
2024-10-25 15:33:48,196 - INFO - Current memory usage: 514.91 MB
2024-10-25 15:33:48,204 - INFO - Starting intensity normalization.
2024-10-25 15:33:48,896 - INFO - Intensity normalization complete.
2024-10-25 15:33:48,897 - INFO - Current memory usage: 542.29 MB
2024-10-25 15:33:48,898 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-10-25 15:33:48,898 - INFO - Computing neighborhood statistics.
2024-10-25 15:33:49,271 - INFO - Neighborhood statistics computed.
2024-10-25 15:33:49,271 - INFO - Current memory usage: 542.16 MB
2024-10-25 15:33:49,271 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-10-25 15:33:49,586 - INFO - Features shape: (14264640, 3)
2024-10-25 15:33:49,586 - INFO - Current memory usage: 759.83 MB
2024-10-25 15:33:49,586 - INFO - Plotting feature distributions.
2024-10-25 15:33:54,823 - INFO - Feature distributions plotted.
2024-10-25 15:33:54,860 - INFO - Performing MiniBatch K-Means clustering with k=10, batch_size=10000, connectivity_weight=0.1.
2024-10-25 15:33:58,744 - INFO - Features shape after adding spatial connectivity: (14264640, 6)
2024-10-25 15:34:06,477 - INFO - Clustering complete with spatial connectivity.
2024-10-25 15:34:06,477 - INFO - Current memory usage: 1444.29 MB
2024-10-25 15:34:06,525 - INFO - Cluster labels reshaped to image dimensions.
2024-10-25 15:34:06,526 - INFO - Current memory usage: 791.31 MB
2024-10-25 15:34:06,540 - INFO - Processing Cluster 0.
2024-10-25 15:34:06,562 - INFO - Cluster 0: Initial voxel count = 2534335.
2024-10-25 15:34:06,563 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:34:07,194 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:34:07,767 - INFO - Removing objects smaller than 5 voxels.
2024-10-25 15:34:08,063 - INFO - Cluster 0: Refined voxel count = 2081674.
2024-10-25 15:34:08,079 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-10-25 15:34:08,131 - INFO - Cluster 0: Mean Intensity = 0.16677744686603546
2024-10-25 15:34:08,131 - INFO - Processing Cluster 1.
2024-10-25 15:34:08,146 - INFO - Cluster 1: Initial voxel count = 307362.
2024-10-25 15:34:08,146 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:34:08,719 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:34:09,298 - INFO - Removing objects smaller than 5 voxels.
2024-10-25 15:34:09,535 - INFO - Cluster 1: Refined voxel count = 110224.
2024-10-25 15:34:09,549 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-10-25 15:34:09,589 - INFO - Cluster 1: Mean Intensity = 0.999994695186615
2024-10-25 15:34:09,589 - INFO - Processing Cluster 2.
2024-10-25 15:34:09,603 - INFO - Cluster 2: Initial voxel count = 1944263.
2024-10-25 15:34:09,603 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:34:10,150 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:34:10,630 - INFO - Removing objects smaller than 5 voxels.
2024-10-25 15:34:10,973 - INFO - Cluster 2: Refined voxel count = 1854882.
2024-10-25 15:34:10,990 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-10-25 15:34:11,032 - INFO - Cluster 2: Mean Intensity = -0.18233081698417664
2024-10-25 15:34:11,032 - INFO - Processing Cluster 3.
2024-10-25 15:34:11,046 - INFO - Cluster 3: Initial voxel count = 2200520.
2024-10-25 15:34:11,046 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:34:11,599 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:34:12,112 - INFO - Removing objects smaller than 5 voxels.
2024-10-25 15:34:12,339 - INFO - Cluster 3: Refined voxel count = 2119328.
2024-10-25 15:34:12,352 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-10-25 15:34:12,384 - INFO - Cluster 3: Mean Intensity = -0.17389553785324097
2024-10-25 15:34:12,384 - INFO - Processing Cluster 4.
2024-10-25 15:34:12,396 - INFO - Cluster 4: Initial voxel count = 2013668.
2024-10-25 15:34:12,396 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:34:12,852 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:34:13,617 - INFO - Removing objects smaller than 5 voxels.
2024-10-25 15:34:14,065 - INFO - Cluster 4: Refined voxel count = 1668119.
2024-10-25 15:34:14,085 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-10-25 15:34:14,163 - INFO - Cluster 4: Mean Intensity = -0.07888000458478928
2024-10-25 15:34:14,163 - INFO - Processing Cluster 5.
2024-10-25 15:34:14,186 - INFO - Cluster 5: Initial voxel count = 212053.
2024-10-25 15:34:14,187 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:34:15,271 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:34:16,355 - INFO - Removing objects smaller than 5 voxels.
2024-10-25 15:34:16,703 - INFO - Cluster 5: Refined voxel count = 174612.
2024-10-25 15:34:16,719 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-10-25 15:34:16,786 - INFO - Cluster 5: Mean Intensity = 9.269698143005371
2024-10-25 15:34:16,786 - INFO - Processing Cluster 6.
2024-10-25 15:34:16,814 - INFO - Cluster 6: Initial voxel count = 2127288.
2024-10-25 15:34:16,814 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:34:17,523 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:34:18,385 - INFO - Removing objects smaller than 5 voxels.
2024-10-25 15:34:18,792 - INFO - Cluster 6: Refined voxel count = 2052883.
2024-10-25 15:34:18,807 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-10-25 15:34:18,921 - INFO - Cluster 6: Mean Intensity = -0.15853722393512726
2024-10-25 15:34:18,921 - INFO - Processing Cluster 7.
2024-10-25 15:34:18,944 - INFO - Cluster 7: Initial voxel count = 1638485.
2024-10-25 15:34:18,944 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:34:19,797 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:34:20,463 - INFO - Removing objects smaller than 5 voxels.
2024-10-25 15:34:20,781 - INFO - Cluster 7: Refined voxel count = 1626565.
2024-10-25 15:34:20,797 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-10-25 15:34:20,929 - INFO - Cluster 7: Mean Intensity = -0.21886304020881653
2024-10-25 15:34:20,929 - INFO - Processing Cluster 8.
2024-10-25 15:34:20,950 - INFO - Cluster 8: Initial voxel count = 275173.
2024-10-25 15:34:20,951 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:34:21,622 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:34:22,476 - INFO - Removing objects smaller than 5 voxels.
2024-10-25 15:34:22,826 - INFO - Cluster 8: Refined voxel count = 128266.
2024-10-25 15:34:22,835 - INFO - Refined mask for Cluster 8 saved as 'csf_mask_class_8_refined_2.tif'.
2024-10-25 15:34:22,908 - INFO - Cluster 8: Mean Intensity = 4.147946834564209
2024-10-25 15:34:22,909 - INFO - Processing Cluster 9.
2024-10-25 15:34:22,925 - INFO - Cluster 9: Initial voxel count = 1011493.
2024-10-25 15:34:22,926 - INFO - Applying morphological opening to remove small objects.
2024-10-25 15:34:23,557 - INFO - Applying morphological closing to fill small holes.
2024-10-25 15:34:24,377 - INFO - Removing objects smaller than 5 voxels.
2024-10-25 15:34:24,796 - INFO - Cluster 9: Refined voxel count = 997576.
2024-10-25 15:34:24,805 - INFO - Refined mask for Cluster 9 saved as 'csf_mask_class_9_refined_2.tif'.
2024-10-25 15:34:24,899 - INFO - Cluster 9: Mean Intensity = -0.23532557487487793
2024-10-25 15:34:24,899 - INFO - CSF is identified as cluster 9.
2024-10-25 15:34:24,899 - INFO - Starting visualization with PyVista.
2024-10-25 15:34:25,277 - INFO - Adding Original MRI volume.
2024-10-25 15:34:25,689 - INFO - Adding Denoised MRI volume.
2024-10-25 15:34:26,055 - INFO - Adding Mask 0 mesh to visualization.
2024-10-25 15:34:26,554 - INFO - Initial mesh has 289283 points and 590656 faces.
2024-10-25 15:34:26,555 - INFO - Current memory usage: 1075.98 MB
2024-10-25 15:34:29,797 - INFO - Decimated mesh has 141536 points and 295327 faces.
2024-10-25 15:34:29,798 - INFO - Current memory usage: 1321.53 MB
2024-10-25 15:34:29,806 - INFO - Adding Mask 1 mesh to visualization.
2024-10-25 15:34:30,053 - INFO - Initial mesh has 43356 points and 85554 faces.
2024-10-25 15:34:30,054 - INFO - Current memory usage: 1318.04 MB
2024-10-25 15:34:30,349 - INFO - Decimated mesh has 22033 points and 42776 faces.
2024-10-25 15:34:30,350 - INFO - Current memory usage: 1318.41 MB
2024-10-25 15:34:30,356 - INFO - Adding Mask 2 mesh to visualization.
2024-10-25 15:34:30,557 - INFO - Initial mesh has 51424 points and 102170 faces.
2024-10-25 15:34:30,557 - INFO - Current memory usage: 1312.62 MB
2024-10-25 15:34:30,909 - INFO - Decimated mesh has 25657 points and 51085 faces.
2024-10-25 15:34:30,909 - INFO - Current memory usage: 1313.88 MB
2024-10-25 15:34:30,915 - INFO - Adding Mask 3 mesh to visualization.
2024-10-25 15:34:31,045 - INFO - Initial mesh has 48974 points and 97580 faces.
2024-10-25 15:34:31,045 - INFO - Current memory usage: 1313.00 MB
2024-10-25 15:34:31,364 - INFO - Decimated mesh has 24284 points and 48789 faces.
2024-10-25 15:34:31,364 - INFO - Current memory usage: 1313.00 MB
2024-10-25 15:34:31,370 - INFO - Adding Mask 4 mesh to visualization.
2024-10-25 15:34:31,550 - INFO - Initial mesh has 161709 points and 328122 faces.
2024-10-25 15:34:31,550 - INFO - Current memory usage: 1312.46 MB
2024-10-25 15:34:33,113 - INFO - Decimated mesh has 79461 points and 164059 faces.
2024-10-25 15:34:33,114 - INFO - Current memory usage: 1318.26 MB
2024-10-25 15:34:33,122 - INFO - Adding Mask 5 mesh to visualization.
2024-10-25 15:34:33,260 - INFO - Initial mesh has 25960 points and 52056 faces.
2024-10-25 15:34:33,261 - INFO - Current memory usage: 1317.74 MB
2024-10-25 15:34:33,449 - INFO - Decimated mesh has 12946 points and 26027 faces.
2024-10-25 15:34:33,449 - INFO - Current memory usage: 1320.79 MB
2024-10-25 15:34:33,455 - INFO - Adding Mask 6 mesh to visualization.
2024-10-25 15:34:33,589 - INFO - Initial mesh has 49841 points and 99229 faces.
2024-10-25 15:34:33,589 - INFO - Current memory usage: 1320.62 MB
2024-10-25 15:34:34,036 - INFO - Decimated mesh has 24762 points and 49613 faces.
2024-10-25 15:34:34,037 - INFO - Current memory usage: 1322.62 MB
2024-10-25 15:34:34,043 - INFO - Adding Mask 7 mesh to visualization.
2024-10-25 15:34:34,251 - INFO - Initial mesh has 24998 points and 49027 faces.
2024-10-25 15:34:34,251 - INFO - Current memory usage: 1322.72 MB
2024-10-25 15:34:34,458 - INFO - Decimated mesh has 12608 points and 24513 faces.
2024-10-25 15:34:34,458 - INFO - Current memory usage: 1322.72 MB
2024-10-25 15:34:34,464 - INFO - Adding Mask 8 mesh to visualization.
2024-10-25 15:34:34,593 - INFO - Initial mesh has 49760 points and 103032 faces.
2024-10-25 15:34:34,593 - INFO - Current memory usage: 1322.75 MB
2024-10-25 15:34:34,970 - INFO - Decimated mesh has 24231 points and 51516 faces.
2024-10-25 15:34:34,971 - INFO - Current memory usage: 1322.75 MB
2024-10-25 15:34:34,978 - INFO - Adding Mask 9 mesh to visualization.
2024-10-25 15:34:35,093 - INFO - Initial mesh has 19177 points and 37554 faces.
2024-10-25 15:34:35,093 - INFO - Current memory usage: 1322.76 MB
2024-10-25 15:34:35,228 - INFO - Decimated mesh has 9612 points and 18777 faces.
2024-10-25 15:34:35,228 - INFO - Current memory usage: 1322.76 MB
2024-10-25 15:34:35,232 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2.html'.
2024-10-25 15:34:35,457 - INFO - Translator(prefix=None)
2024-10-25 15:34:35,514 - INFO - awaiting runner setup
2024-10-25 15:34:35,514 - INFO - awaiting site startup
2024-10-25 15:34:35,515 - INFO - Print WSLINK_READY_MSG
2024-10-25 15:34:35,515 - INFO - Schedule auto shutdown with timout 0
2024-10-25 15:34:35,515 - INFO - awaiting running future
2024-10-25 15:34:45,969 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2.html'.
2024-10-25 15:34:45,979 - INFO - Current memory usage: 1316.13 MB
2024-10-25 15:34:45,996 - INFO - Selected slice indices for saving: [0, 35, 71, 107, 143]
2024-10-25 15:34:46,276 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-10-25 15:34:46,400 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-10-25 15:34:46,522 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-10-25 15:34:46,650 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-10-25 15:34:47,012 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-10-25 15:34:47,120 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-10-25 15:34:47,234 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-10-25 15:34:47,351 - INFO - Saved slice 0 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_7_overlay.png'.
2024-10-25 15:34:47,471 - INFO - Saved slice 0 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_8_overlay.png'.
2024-10-25 15:34:47,591 - INFO - Saved slice 0 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_9_overlay.png'.
2024-10-25 15:34:47,728 - INFO - Saved slice 35 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_0_overlay.png'.
2024-10-25 15:34:47,893 - INFO - Saved slice 35 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_1_overlay.png'.
2024-10-25 15:34:48,050 - INFO - Saved slice 35 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_2_overlay.png'.
2024-10-25 15:34:48,207 - INFO - Saved slice 35 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_3_overlay.png'.
2024-10-25 15:34:48,380 - INFO - Saved slice 35 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_4_overlay.png'.
2024-10-25 15:34:48,549 - INFO - Saved slice 35 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_5_overlay.png'.
2024-10-25 15:34:48,710 - INFO - Saved slice 35 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_6_overlay.png'.
2024-10-25 15:34:48,927 - INFO - Saved slice 35 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_7_overlay.png'.
2024-10-25 15:34:49,132 - INFO - Saved slice 35 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_8_overlay.png'.
2024-10-25 15:34:49,319 - INFO - Saved slice 35 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_9_overlay.png'.
2024-10-25 15:34:49,513 - INFO - Saved slice 71 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_0_overlay.png'.
2024-10-25 15:34:49,684 - INFO - Saved slice 71 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_1_overlay.png'.
2024-10-25 15:34:49,847 - INFO - Saved slice 71 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_2_overlay.png'.
2024-10-25 15:34:50,022 - INFO - Saved slice 71 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_3_overlay.png'.
2024-10-25 15:34:50,178 - INFO - Saved slice 71 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_4_overlay.png'.
2024-10-25 15:34:50,331 - INFO - Saved slice 71 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_5_overlay.png'.
2024-10-25 15:34:50,479 - INFO - Saved slice 71 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_6_overlay.png'.
2024-10-25 15:34:50,622 - INFO - Saved slice 71 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_7_overlay.png'.
2024-10-25 15:34:50,759 - INFO - Saved slice 71 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_8_overlay.png'.
2024-10-25 15:34:50,905 - INFO - Saved slice 71 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_9_overlay.png'.
2024-10-25 15:34:51,074 - INFO - Saved slice 107 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_0_overlay.png'.
2024-10-25 15:34:51,247 - INFO - Saved slice 107 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_1_overlay.png'.
2024-10-25 15:34:51,420 - INFO - Saved slice 107 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_2_overlay.png'.
2024-10-25 15:34:51,586 - INFO - Saved slice 107 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_3_overlay.png'.
2024-10-25 15:34:51,738 - INFO - Saved slice 107 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_4_overlay.png'.
2024-10-25 15:34:51,887 - INFO - Saved slice 107 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_5_overlay.png'.
2024-10-25 15:34:52,027 - INFO - Saved slice 107 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_6_overlay.png'.
2024-10-25 15:34:52,200 - INFO - Saved slice 107 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_7_overlay.png'.
2024-10-25 15:34:52,355 - INFO - Saved slice 107 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_8_overlay.png'.
2024-10-25 15:34:52,503 - INFO - Saved slice 107 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_9_overlay.png'.
2024-10-25 15:34:52,646 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-10-25 15:34:52,796 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-10-25 15:34:53,007 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-10-25 15:34:53,175 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-10-25 15:34:53,338 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-10-25 15:34:53,492 - INFO - Saved slice 143 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_5_overlay.png'.
2024-10-25 15:34:53,637 - INFO - Saved slice 143 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_6_overlay.png'.
2024-10-25 15:34:53,779 - INFO - Saved slice 143 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_7_overlay.png'.
2024-10-25 15:34:53,913 - INFO - Saved slice 143 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_8_overlay.png'.
2024-10-25 15:34:54,051 - INFO - Saved slice 143 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_9_overlay.png'.
2024-10-25 15:34:54,056 - INFO - Pipeline completed successfully.
2024-10-25 15:34:54,056 - INFO - Current memory usage: 1238.05 MB
2024-11-04 15:13:37,392 - INFO - Logging initiated.
2024-11-04 15:13:37,393 - INFO - Pipeline started.
2024-11-04 15:13:37,393 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 15:13:37,897 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 15:13:38,218 - INFO - Denoised image loaded.
2024-11-04 15:13:38,219 - INFO - Current memory usage: 513.55 MB
2024-11-04 15:13:38,225 - INFO - Starting intensity normalization.
2024-11-04 15:13:38,983 - INFO - Intensity normalization complete.
2024-11-04 15:13:38,984 - INFO - Current memory usage: 540.93 MB
2024-11-04 15:13:38,994 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-11-04 15:13:38,994 - INFO - Computing neighborhood statistics.
2024-11-04 15:13:39,643 - INFO - Neighborhood statistics computed.
2024-11-04 15:13:39,643 - INFO - Current memory usage: 540.79 MB
2024-11-04 15:13:57,444 - INFO - Logging initiated.
2024-11-04 15:13:57,444 - INFO - Pipeline started.
2024-11-04 15:13:57,444 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 15:13:57,957 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 15:13:58,240 - INFO - Denoised image loaded.
2024-11-04 15:13:58,241 - INFO - Current memory usage: 514.74 MB
2024-11-04 15:13:58,254 - INFO - Starting intensity normalization.
2024-11-04 15:13:59,427 - INFO - Intensity normalization complete.
2024-11-04 15:13:59,428 - INFO - Current memory usage: 542.12 MB
2024-11-04 15:13:59,438 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-11-04 15:13:59,438 - INFO - Computing neighborhood statistics.
2024-11-04 15:14:00,188 - INFO - Neighborhood statistics computed.
2024-11-04 15:14:00,189 - INFO - Current memory usage: 541.99 MB
2024-11-04 15:14:00,189 - INFO - Computing z-axis value for each voxel.
2024-11-04 15:14:08,430 - INFO - Z-axis value for each voxel computed.
2024-11-04 15:14:08,430 - INFO - Current memory usage: 650.85 MB
2024-11-04 15:14:08,430 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 15:14:50,895 - INFO - Logging initiated.
2024-11-04 15:14:50,895 - INFO - Pipeline started.
2024-11-04 15:14:50,896 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 15:14:51,247 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 15:14:51,385 - INFO - Denoised image loaded.
2024-11-04 15:14:51,385 - INFO - Current memory usage: 515.27 MB
2024-11-04 15:14:51,392 - INFO - Starting intensity normalization.
2024-11-04 15:14:52,205 - INFO - Intensity normalization complete.
2024-11-04 15:14:52,206 - INFO - Current memory usage: 542.64 MB
2024-11-04 15:14:52,214 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-11-04 15:14:52,214 - INFO - Computing neighborhood statistics.
2024-11-04 15:14:52,894 - INFO - Neighborhood statistics computed.
2024-11-04 15:14:52,895 - INFO - Current memory usage: 542.52 MB
2024-11-04 15:14:52,895 - INFO - Computing z-axis value for each voxel.
2024-11-04 15:15:00,887 - INFO - Z-axis value for each voxel computed.
2024-11-04 15:15:00,888 - INFO - Current memory usage: 651.27 MB
2024-11-04 15:15:00,888 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 15:15:02,371 - INFO - Features shape: (14264640, 4)
2024-11-04 15:15:02,371 - INFO - Current memory usage: 922.32 MB
2024-11-04 15:15:02,371 - INFO - Plotting feature distributions.
2024-11-04 15:15:12,776 - INFO - Feature distributions plotted.
2024-11-04 15:15:12,801 - INFO - Performing MiniBatch K-Means clustering with k=10, batch_size=10000, connectivity_weight=0.1.
2024-11-04 15:15:18,568 - INFO - Features shape after adding spatial connectivity: (14264640, 7)
2024-11-04 15:15:28,102 - INFO - Clustering complete with spatial connectivity.
2024-11-04 15:15:28,103 - INFO - Current memory usage: 1789.20 MB
2024-11-04 15:15:28,187 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 15:15:28,188 - INFO - Current memory usage: 1027.39 MB
2024-11-04 15:15:28,217 - INFO - Processing Cluster 0.
2024-11-04 15:15:28,250 - INFO - Cluster 0: Initial voxel count = 3533884.
2024-11-04 15:15:28,250 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:15:29,283 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:15:30,203 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:15:30,631 - INFO - Cluster 0: Refined voxel count = 3016403.
2024-11-04 15:15:30,656 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 15:15:30,783 - INFO - Cluster 0: Mean Intensity = -0.0011361294891685247
2024-11-04 15:15:30,784 - INFO - Processing Cluster 1.
2024-11-04 15:15:30,809 - INFO - Cluster 1: Initial voxel count = 975324.
2024-11-04 15:15:30,809 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:15:31,664 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:15:32,495 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:15:32,841 - INFO - Cluster 1: Refined voxel count = 492505.
2024-11-04 15:15:32,860 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 15:15:32,929 - INFO - Cluster 1: Mean Intensity = 0.3909512460231781
2024-11-04 15:15:32,929 - INFO - Processing Cluster 2.
2024-11-04 15:15:32,951 - INFO - Cluster 2: Initial voxel count = 1743926.
2024-11-04 15:15:32,951 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:15:33,726 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:15:34,533 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:15:34,862 - INFO - Cluster 2: Refined voxel count = 1623114.
2024-11-04 15:15:34,881 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 15:15:34,938 - INFO - Cluster 2: Mean Intensity = -0.18883007764816284
2024-11-04 15:15:34,938 - INFO - Processing Cluster 3.
2024-11-04 15:15:34,960 - INFO - Cluster 3: Initial voxel count = 202316.
2024-11-04 15:15:34,960 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:15:35,851 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:15:36,708 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:15:37,038 - INFO - Cluster 3: Refined voxel count = 166428.
2024-11-04 15:15:37,066 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 15:15:37,113 - INFO - Cluster 3: Mean Intensity = 9.354002952575684
2024-11-04 15:15:37,113 - INFO - Processing Cluster 4.
2024-11-04 15:15:37,135 - INFO - Cluster 4: Initial voxel count = 2029910.
2024-11-04 15:15:37,136 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:15:37,956 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:15:38,768 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:15:39,136 - INFO - Cluster 4: Refined voxel count = 1929825.
2024-11-04 15:15:39,168 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 15:15:39,269 - INFO - Cluster 4: Mean Intensity = -0.17780701816082
2024-11-04 15:15:39,269 - INFO - Processing Cluster 5.
2024-11-04 15:15:39,313 - INFO - Cluster 5: Initial voxel count = 273810.
2024-11-04 15:15:39,313 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:15:40,230 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:15:41,105 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:15:41,451 - INFO - Cluster 5: Refined voxel count = 64588.
2024-11-04 15:15:41,480 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-04 15:15:41,536 - INFO - Cluster 5: Mean Intensity = 1.514267921447754
2024-11-04 15:15:41,536 - INFO - Processing Cluster 6.
2024-11-04 15:15:41,558 - INFO - Cluster 6: Initial voxel count = 1397968.
2024-11-04 15:15:41,558 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:15:42,319 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:15:43,077 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:15:43,394 - INFO - Cluster 6: Refined voxel count = 1293608.
2024-11-04 15:15:43,418 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-11-04 15:15:43,482 - INFO - Cluster 6: Mean Intensity = -0.20609639585018158
2024-11-04 15:15:43,482 - INFO - Processing Cluster 7.
2024-11-04 15:15:43,510 - INFO - Cluster 7: Initial voxel count = 198175.
2024-11-04 15:15:43,511 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:15:44,273 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:15:45,034 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:15:45,358 - INFO - Cluster 7: Refined voxel count = 64072.
2024-11-04 15:15:45,385 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-11-04 15:15:45,441 - INFO - Cluster 7: Mean Intensity = 5.31787109375
2024-11-04 15:15:45,441 - INFO - Processing Cluster 8.
2024-11-04 15:15:45,464 - INFO - Cluster 8: Initial voxel count = 2279728.
2024-11-04 15:15:45,464 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:15:46,239 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:15:47,015 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:15:47,342 - INFO - Cluster 8: Refined voxel count = 2157016.
2024-11-04 15:15:47,369 - INFO - Refined mask for Cluster 8 saved as 'csf_mask_class_8_refined_2.tif'.
2024-11-04 15:15:47,425 - INFO - Cluster 8: Mean Intensity = -0.17443165183067322
2024-11-04 15:15:47,425 - INFO - Processing Cluster 9.
2024-11-04 15:15:47,448 - INFO - Cluster 9: Initial voxel count = 1629599.
2024-11-04 15:15:47,449 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:15:48,190 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:15:48,964 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:15:49,284 - INFO - Cluster 9: Refined voxel count = 1568977.
2024-11-04 15:15:49,310 - INFO - Refined mask for Cluster 9 saved as 'csf_mask_class_9_refined_2.tif'.
2024-11-04 15:15:49,362 - INFO - Cluster 9: Mean Intensity = -0.21785679459571838
2024-11-04 15:15:49,362 - INFO - CSF is identified as cluster 9.
2024-11-04 15:15:49,362 - INFO - Starting visualization with PyVista.
2024-11-04 15:15:49,846 - INFO - Adding Original MRI volume.
2024-11-04 15:15:50,265 - INFO - Adding Denoised MRI volume.
2024-11-04 15:15:50,746 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 15:15:51,603 - INFO - Initial mesh has 381995 points and 784702 faces.
2024-11-04 15:15:51,604 - INFO - Current memory usage: 1310.62 MB
2024-11-04 15:15:56,737 - INFO - Decimated mesh has 185521 points and 392350 faces.
2024-11-04 15:15:56,738 - INFO - Current memory usage: 1577.49 MB
2024-11-04 15:15:56,748 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 15:15:57,076 - INFO - Initial mesh has 125275 points and 251240 faces.
2024-11-04 15:15:57,077 - INFO - Current memory usage: 1560.64 MB
2024-11-04 15:15:58,473 - INFO - Decimated mesh has 62593 points and 125619 faces.
2024-11-04 15:15:58,473 - INFO - Current memory usage: 1560.89 MB
2024-11-04 15:15:58,482 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 15:15:58,628 - INFO - Initial mesh has 43016 points and 85042 faces.
2024-11-04 15:15:58,629 - INFO - Current memory usage: 1560.89 MB
2024-11-04 15:15:59,082 - INFO - Decimated mesh has 21573 points and 42521 faces.
2024-11-04 15:15:59,083 - INFO - Current memory usage: 1560.89 MB
2024-11-04 15:15:59,091 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 15:15:59,208 - INFO - Initial mesh has 23966 points and 47910 faces.
2024-11-04 15:15:59,208 - INFO - Current memory usage: 1560.89 MB
2024-11-04 15:15:59,457 - INFO - Decimated mesh has 11987 points and 23954 faces.
2024-11-04 15:15:59,458 - INFO - Current memory usage: 1560.89 MB
2024-11-04 15:15:59,466 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 15:15:59,607 - INFO - Initial mesh has 38422 points and 75590 faces.
2024-11-04 15:15:59,607 - INFO - Current memory usage: 1560.89 MB
2024-11-04 15:16:00,081 - INFO - Decimated mesh has 19283 points and 37795 faces.
2024-11-04 15:16:00,081 - INFO - Current memory usage: 1560.89 MB
2024-11-04 15:16:00,090 - INFO - Adding Mask 5 mesh to visualization.
2024-11-04 15:16:00,219 - INFO - Initial mesh has 29262 points and 56718 faces.
2024-11-04 15:16:00,219 - INFO - Current memory usage: 1561.02 MB
2024-11-04 15:16:00,506 - INFO - Decimated mesh has 15166 points and 28359 faces.
2024-11-04 15:16:00,507 - INFO - Current memory usage: 1561.02 MB
2024-11-04 15:16:00,515 - INFO - Adding Mask 6 mesh to visualization.
2024-11-04 15:16:00,651 - INFO - Initial mesh has 38772 points and 77071 faces.
2024-11-04 15:16:00,651 - INFO - Current memory usage: 1561.02 MB
2024-11-04 15:16:01,093 - INFO - Decimated mesh has 19240 points and 38535 faces.
2024-11-04 15:16:01,093 - INFO - Current memory usage: 1561.02 MB
2024-11-04 15:16:01,102 - INFO - Adding Mask 7 mesh to visualization.
2024-11-04 15:16:01,224 - INFO - Initial mesh has 27975 points and 56410 faces.
2024-11-04 15:16:01,225 - INFO - Current memory usage: 1561.02 MB
2024-11-04 15:16:01,495 - INFO - Decimated mesh has 13999 points and 28205 faces.
2024-11-04 15:16:01,495 - INFO - Current memory usage: 1561.02 MB
2024-11-04 15:16:01,504 - INFO - Adding Mask 8 mesh to visualization.
2024-11-04 15:16:01,653 - INFO - Initial mesh has 44917 points and 88906 faces.
2024-11-04 15:16:01,653 - INFO - Current memory usage: 1561.02 MB
2024-11-04 15:16:02,188 - INFO - Decimated mesh has 22363 points and 44452 faces.
2024-11-04 15:16:02,189 - INFO - Current memory usage: 1561.02 MB
2024-11-04 15:16:02,197 - INFO - Adding Mask 9 mesh to visualization.
2024-11-04 15:16:02,330 - INFO - Initial mesh has 31795 points and 62755 faces.
2024-11-04 15:16:02,330 - INFO - Current memory usage: 1561.02 MB
2024-11-04 15:16:02,766 - INFO - Decimated mesh has 15896 points and 31376 faces.
2024-11-04 15:16:02,767 - INFO - Current memory usage: 1561.02 MB
2024-11-04 15:16:02,776 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 15:16:03,150 - INFO - Translator(prefix=None)
2024-11-04 15:16:03,251 - INFO - awaiting runner setup
2024-11-04 15:16:03,252 - INFO - awaiting site startup
2024-11-04 15:16:03,253 - INFO - Print WSLINK_READY_MSG
2024-11-04 15:16:03,253 - INFO - Schedule auto shutdown with timout 0
2024-11-04 15:16:03,253 - INFO - awaiting running future
2024-11-04 15:16:21,669 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 15:16:21,691 - INFO - Current memory usage: 1514.21 MB
2024-11-04 15:16:21,704 - INFO - Selected slice indices for saving: [0, 35, 71, 107, 143]
2024-11-04 15:16:21,960 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 15:16:22,166 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 15:16:22,369 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 15:16:22,585 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 15:16:23,059 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 15:16:23,266 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-04 15:16:23,475 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-11-04 15:16:23,680 - INFO - Saved slice 0 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_7_overlay.png'.
2024-11-04 15:16:23,905 - INFO - Saved slice 0 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_8_overlay.png'.
2024-11-04 15:16:24,104 - INFO - Saved slice 0 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_9_overlay.png'.
2024-11-04 15:16:24,310 - INFO - Saved slice 35 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_0_overlay.png'.
2024-11-04 15:16:24,513 - INFO - Saved slice 35 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_1_overlay.png'.
2024-11-04 15:16:24,732 - INFO - Saved slice 35 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_2_overlay.png'.
2024-11-04 15:16:24,945 - INFO - Saved slice 35 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_3_overlay.png'.
2024-11-04 15:16:25,163 - INFO - Saved slice 35 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_4_overlay.png'.
2024-11-04 15:16:25,373 - INFO - Saved slice 35 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_5_overlay.png'.
2024-11-04 15:16:25,581 - INFO - Saved slice 35 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_6_overlay.png'.
2024-11-04 15:16:25,799 - INFO - Saved slice 35 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_7_overlay.png'.
2024-11-04 15:16:26,008 - INFO - Saved slice 35 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_8_overlay.png'.
2024-11-04 15:16:26,223 - INFO - Saved slice 35 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_9_overlay.png'.
2024-11-04 15:16:26,440 - INFO - Saved slice 71 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_0_overlay.png'.
2024-11-04 15:16:26,640 - INFO - Saved slice 71 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_1_overlay.png'.
2024-11-04 15:16:26,841 - INFO - Saved slice 71 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_2_overlay.png'.
2024-11-04 15:16:27,040 - INFO - Saved slice 71 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_3_overlay.png'.
2024-11-04 15:16:27,237 - INFO - Saved slice 71 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_4_overlay.png'.
2024-11-04 15:16:27,438 - INFO - Saved slice 71 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_5_overlay.png'.
2024-11-04 15:16:27,646 - INFO - Saved slice 71 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_6_overlay.png'.
2024-11-04 15:16:27,859 - INFO - Saved slice 71 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_7_overlay.png'.
2024-11-04 15:16:28,056 - INFO - Saved slice 71 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_8_overlay.png'.
2024-11-04 15:16:28,254 - INFO - Saved slice 71 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_9_overlay.png'.
2024-11-04 15:16:28,478 - INFO - Saved slice 107 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_0_overlay.png'.
2024-11-04 15:16:28,674 - INFO - Saved slice 107 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_1_overlay.png'.
2024-11-04 15:16:28,879 - INFO - Saved slice 107 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_2_overlay.png'.
2024-11-04 15:16:29,078 - INFO - Saved slice 107 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_3_overlay.png'.
2024-11-04 15:16:29,278 - INFO - Saved slice 107 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_4_overlay.png'.
2024-11-04 15:16:29,475 - INFO - Saved slice 107 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_5_overlay.png'.
2024-11-04 15:16:29,691 - INFO - Saved slice 107 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_6_overlay.png'.
2024-11-04 15:16:29,893 - INFO - Saved slice 107 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_7_overlay.png'.
2024-11-04 15:16:30,136 - INFO - Saved slice 107 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_8_overlay.png'.
2024-11-04 15:16:30,353 - INFO - Saved slice 107 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_9_overlay.png'.
2024-11-04 15:16:30,563 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 15:16:30,775 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 15:16:30,984 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 15:16:31,189 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 15:16:31,395 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 15:16:31,596 - INFO - Saved slice 143 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_5_overlay.png'.
2024-11-04 15:16:31,797 - INFO - Saved slice 143 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_6_overlay.png'.
2024-11-04 15:16:31,994 - INFO - Saved slice 143 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_7_overlay.png'.
2024-11-04 15:16:32,191 - INFO - Saved slice 143 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_8_overlay.png'.
2024-11-04 15:16:32,390 - INFO - Saved slice 143 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_9_overlay.png'.
2024-11-04 15:16:32,398 - INFO - Pipeline completed successfully.
2024-11-04 15:16:32,398 - INFO - Current memory usage: 1428.27 MB
2024-11-04 15:23:16,503 - INFO - Logging initiated.
2024-11-04 15:23:16,503 - INFO - Pipeline started.
2024-11-04 15:23:16,503 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 15:23:16,942 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 15:23:17,139 - INFO - Denoised image loaded.
2024-11-04 15:23:17,140 - INFO - Current memory usage: 511.73 MB
2024-11-04 15:23:17,147 - INFO - Starting intensity normalization.
2024-11-04 15:23:18,178 - INFO - Intensity normalization complete.
2024-11-04 15:23:18,179 - INFO - Current memory usage: 519.23 MB
2024-11-04 15:23:18,190 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-11-04 15:23:18,190 - INFO - Computing neighborhood statistics.
2024-11-04 15:23:19,023 - INFO - Neighborhood statistics computed.
2024-11-04 15:23:19,024 - INFO - Current memory usage: 518.98 MB
2024-11-04 15:23:19,024 - INFO - Computing z-axis value for each voxel.
2024-11-04 15:23:26,821 - INFO - Z-axis value for each voxel computed.
2024-11-04 15:23:26,821 - INFO - Current memory usage: 627.84 MB
2024-11-04 15:23:26,821 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 15:23:28,409 - INFO - Features shape: (14264640, 4)
2024-11-04 15:23:28,410 - INFO - Current memory usage: 876.69 MB
2024-11-04 15:23:28,410 - INFO - Plotting feature distributions.
2024-11-04 15:23:39,088 - INFO - Feature distributions plotted.
2024-11-04 15:23:39,120 - INFO - Performing MiniBatch K-Means clustering with k=12, batch_size=10000, connectivity_weight=0.1.
2024-11-04 15:23:45,347 - INFO - Features shape after adding spatial connectivity: (14264640, 7)
2024-11-04 15:23:52,429 - INFO - Clustering complete with spatial connectivity.
2024-11-04 15:23:52,430 - INFO - Current memory usage: 1664.77 MB
2024-11-04 15:23:52,478 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 15:23:52,479 - INFO - Current memory usage: 902.96 MB
2024-11-04 15:23:52,503 - INFO - Processing Cluster 0.
2024-11-04 15:23:52,549 - INFO - Cluster 0: Initial voxel count = 1601798.
2024-11-04 15:23:52,549 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:23:53,248 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:23:54,033 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:23:54,368 - INFO - Cluster 0: Refined voxel count = 1507884.
2024-11-04 15:23:54,401 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 15:23:54,482 - INFO - Cluster 0: Mean Intensity = -0.18923920392990112
2024-11-04 15:23:54,483 - INFO - Processing Cluster 1.
2024-11-04 15:23:54,515 - INFO - Cluster 1: Initial voxel count = 1331059.
2024-11-04 15:23:54,515 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:23:55,277 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:23:56,041 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:23:56,360 - INFO - Cluster 1: Refined voxel count = 711319.
2024-11-04 15:23:56,383 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 15:23:56,483 - INFO - Cluster 1: Mean Intensity = 0.2772340774536133
2024-11-04 15:23:56,484 - INFO - Processing Cluster 2.
2024-11-04 15:23:56,510 - INFO - Cluster 2: Initial voxel count = 1844778.
2024-11-04 15:23:56,510 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:23:57,258 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:23:58,032 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:23:58,367 - INFO - Cluster 2: Refined voxel count = 1271786.
2024-11-04 15:23:58,385 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 15:23:58,490 - INFO - Cluster 2: Mean Intensity = -0.025651946663856506
2024-11-04 15:23:58,490 - INFO - Processing Cluster 3.
2024-11-04 15:23:58,524 - INFO - Cluster 3: Initial voxel count = 196782.
2024-11-04 15:23:58,525 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:23:59,294 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:24:00,067 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:24:00,373 - INFO - Cluster 3: Refined voxel count = 163140.
2024-11-04 15:24:00,402 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 15:24:00,481 - INFO - Cluster 3: Mean Intensity = 9.352264404296875
2024-11-04 15:24:00,481 - INFO - Processing Cluster 4.
2024-11-04 15:24:00,516 - INFO - Cluster 4: Initial voxel count = 1730081.
2024-11-04 15:24:00,516 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:24:01,288 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:24:02,055 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:24:02,383 - INFO - Cluster 4: Refined voxel count = 1540867.
2024-11-04 15:24:02,410 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 15:24:02,494 - INFO - Cluster 4: Mean Intensity = -0.06038198247551918
2024-11-04 15:24:02,494 - INFO - Processing Cluster 5.
2024-11-04 15:24:02,523 - INFO - Cluster 5: Initial voxel count = 250339.
2024-11-04 15:24:02,523 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:24:03,284 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:24:04,061 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:24:04,366 - INFO - Cluster 5: Refined voxel count = 45291.
2024-11-04 15:24:04,404 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-04 15:24:04,483 - INFO - Cluster 5: Mean Intensity = 0.5723448991775513
2024-11-04 15:24:04,484 - INFO - Processing Cluster 6.
2024-11-04 15:24:04,518 - INFO - Cluster 6: Initial voxel count = 972736.
2024-11-04 15:24:04,518 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:24:05,277 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:24:06,054 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:24:06,367 - INFO - Cluster 6: Refined voxel count = 940525.
2024-11-04 15:24:06,387 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-11-04 15:24:06,456 - INFO - Cluster 6: Mean Intensity = -0.23979026079177856
2024-11-04 15:24:06,456 - INFO - Processing Cluster 7.
2024-11-04 15:24:06,477 - INFO - Cluster 7: Initial voxel count = 169244.
2024-11-04 15:24:06,477 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:24:07,239 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:24:08,012 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:24:08,317 - INFO - Cluster 7: Refined voxel count = 51526.
2024-11-04 15:24:08,353 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-11-04 15:24:08,429 - INFO - Cluster 7: Mean Intensity = 5.9080376625061035
2024-11-04 15:24:08,429 - INFO - Processing Cluster 8.
2024-11-04 15:24:08,466 - INFO - Cluster 8: Initial voxel count = 1919192.
2024-11-04 15:24:08,467 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:24:09,242 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:24:10,011 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:24:10,334 - INFO - Cluster 8: Refined voxel count = 1824961.
2024-11-04 15:24:10,369 - INFO - Refined mask for Cluster 8 saved as 'csf_mask_class_8_refined_2.tif'.
2024-11-04 15:24:10,471 - INFO - Cluster 8: Mean Intensity = -0.1690375804901123
2024-11-04 15:24:10,471 - INFO - Processing Cluster 9.
2024-11-04 15:24:10,507 - INFO - Cluster 9: Initial voxel count = 1833295.
2024-11-04 15:24:10,507 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:24:11,276 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:24:12,107 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:24:12,427 - INFO - Cluster 9: Refined voxel count = 1780915.
2024-11-04 15:24:12,452 - INFO - Refined mask for Cluster 9 saved as 'csf_mask_class_9_refined_2.tif'.
2024-11-04 15:24:12,530 - INFO - Cluster 9: Mean Intensity = -0.20933866500854492
2024-11-04 15:24:12,530 - INFO - Processing Cluster 10.
2024-11-04 15:24:12,564 - INFO - Cluster 10: Initial voxel count = 2172300.
2024-11-04 15:24:12,564 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:24:13,334 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:24:14,111 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:24:14,434 - INFO - Cluster 10: Refined voxel count = 2117000.
2024-11-04 15:24:14,445 - INFO - Refined mask for Cluster 10 saved as 'csf_mask_class_10_refined_2.tif'.
2024-11-04 15:24:14,516 - INFO - Cluster 10: Mean Intensity = -0.1913890689611435
2024-11-04 15:24:14,516 - INFO - Processing Cluster 11.
2024-11-04 15:24:14,547 - INFO - Cluster 11: Initial voxel count = 243036.
2024-11-04 15:24:14,548 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:24:15,344 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:24:16,137 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:24:16,446 - INFO - Cluster 11: Refined voxel count = 38959.
2024-11-04 15:24:16,456 - INFO - Refined mask for Cluster 11 saved as 'csf_mask_class_11_refined_2.tif'.
2024-11-04 15:24:16,522 - INFO - Cluster 11: Mean Intensity = 1.9205989837646484
2024-11-04 15:24:16,522 - INFO - CSF is identified as cluster 6.
2024-11-04 15:24:16,522 - INFO - Starting visualization with PyVista.
2024-11-04 15:24:17,209 - INFO - Adding Original MRI volume.
2024-11-04 15:24:17,784 - INFO - Adding Denoised MRI volume.
2024-11-04 15:24:18,514 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 15:24:18,991 - INFO - Initial mesh has 35844 points and 70605 faces.
2024-11-04 15:24:18,992 - INFO - Current memory usage: 1136.71 MB
2024-11-04 15:24:19,435 - INFO - Decimated mesh has 17962 points and 35302 faces.
2024-11-04 15:24:19,435 - INFO - Current memory usage: 1165.31 MB
2024-11-04 15:24:19,445 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 15:24:19,778 - INFO - Initial mesh has 153202 points and 308690 faces.
2024-11-04 15:24:19,778 - INFO - Current memory usage: 1192.72 MB
2024-11-04 15:24:21,763 - INFO - Decimated mesh has 76135 points and 154344 faces.
2024-11-04 15:24:21,764 - INFO - Current memory usage: 1302.61 MB
2024-11-04 15:24:21,772 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 15:24:22,216 - INFO - Initial mesh has 242832 points and 498320 faces.
2024-11-04 15:24:22,216 - INFO - Current memory usage: 1303.07 MB
2024-11-04 15:24:25,369 - INFO - Decimated mesh has 118216 points and 249160 faces.
2024-11-04 15:24:25,370 - INFO - Current memory usage: 1420.36 MB
2024-11-04 15:24:25,377 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 15:24:25,581 - INFO - Initial mesh has 23360 points and 46730 faces.
2024-11-04 15:24:25,582 - INFO - Current memory usage: 1420.44 MB
2024-11-04 15:24:25,807 - INFO - Decimated mesh has 11677 points and 23365 faces.
2024-11-04 15:24:25,808 - INFO - Current memory usage: 1420.44 MB
2024-11-04 15:24:25,815 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 15:24:26,110 - INFO - Initial mesh has 134378 points and 274544 faces.
2024-11-04 15:24:26,110 - INFO - Current memory usage: 1420.45 MB
2024-11-04 15:24:27,932 - INFO - Decimated mesh has 65632 points and 137272 faces.
2024-11-04 15:24:27,933 - INFO - Current memory usage: 1420.45 MB
2024-11-04 15:24:27,943 - INFO - Adding Mask 5 mesh to visualization.
2024-11-04 15:24:28,115 - INFO - Initial mesh has 20567 points and 39126 faces.
2024-11-04 15:24:28,116 - INFO - Current memory usage: 1420.45 MB
2024-11-04 15:24:28,283 - INFO - Decimated mesh has 10839 points and 19563 faces.
2024-11-04 15:24:28,283 - INFO - Current memory usage: 1420.45 MB
2024-11-04 15:24:28,291 - INFO - Adding Mask 6 mesh to visualization.
2024-11-04 15:24:28,452 - INFO - Initial mesh has 15284 points and 29886 faces.
2024-11-04 15:24:28,452 - INFO - Current memory usage: 1420.46 MB
2024-11-04 15:24:28,615 - INFO - Decimated mesh has 7723 points and 14943 faces.
2024-11-04 15:24:28,615 - INFO - Current memory usage: 1420.46 MB
2024-11-04 15:24:28,622 - INFO - Adding Mask 7 mesh to visualization.
2024-11-04 15:24:28,808 - INFO - Initial mesh has 23300 points and 46572 faces.
2024-11-04 15:24:28,809 - INFO - Current memory usage: 1420.47 MB
2024-11-04 15:24:29,018 - INFO - Decimated mesh has 11740 points and 23285 faces.
2024-11-04 15:24:29,018 - INFO - Current memory usage: 1420.47 MB
2024-11-04 15:24:29,027 - INFO - Adding Mask 8 mesh to visualization.
2024-11-04 15:24:29,202 - INFO - Initial mesh has 45419 points and 89881 faces.
2024-11-04 15:24:29,203 - INFO - Current memory usage: 1420.48 MB
2024-11-04 15:24:29,671 - INFO - Decimated mesh has 22681 points and 44940 faces.
2024-11-04 15:24:29,672 - INFO - Current memory usage: 1420.48 MB
2024-11-04 15:24:29,680 - INFO - Adding Mask 9 mesh to visualization.
2024-11-04 15:24:29,849 - INFO - Initial mesh has 29545 points and 57938 faces.
2024-11-04 15:24:29,850 - INFO - Current memory usage: 1420.48 MB
2024-11-04 15:24:30,212 - INFO - Decimated mesh has 14842 points and 28969 faces.
2024-11-04 15:24:30,212 - INFO - Current memory usage: 1420.48 MB
2024-11-04 15:24:30,219 - INFO - Adding Mask 10 mesh to visualization.
2024-11-04 15:24:30,388 - INFO - Initial mesh has 33827 points and 66548 faces.
2024-11-04 15:24:30,388 - INFO - Current memory usage: 1420.45 MB
2024-11-04 15:24:30,816 - INFO - Decimated mesh has 16955 points and 33273 faces.
2024-11-04 15:24:30,817 - INFO - Current memory usage: 1420.45 MB
2024-11-04 15:24:30,824 - INFO - Adding Mask 11 mesh to visualization.
2024-11-04 15:24:30,971 - INFO - Initial mesh has 19678 points and 37124 faces.
2024-11-04 15:24:30,971 - INFO - Current memory usage: 1420.45 MB
2024-11-04 15:24:31,125 - INFO - Decimated mesh has 10457 points and 18561 faces.
2024-11-04 15:24:31,125 - INFO - Current memory usage: 1420.45 MB
2024-11-04 15:24:31,134 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 15:24:31,535 - INFO - Translator(prefix=None)
2024-11-04 15:24:31,711 - INFO - awaiting runner setup
2024-11-04 15:24:31,712 - INFO - awaiting site startup
2024-11-04 15:24:31,713 - INFO - Print WSLINK_READY_MSG
2024-11-04 15:24:31,713 - INFO - Schedule auto shutdown with timout 0
2024-11-04 15:24:31,713 - INFO - awaiting running future
2024-11-04 15:24:47,815 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 15:24:47,835 - INFO - Current memory usage: 1430.26 MB
2024-11-04 15:24:47,854 - INFO - Selected slice indices for saving: [0, 35, 71, 107, 143]
2024-11-04 15:24:48,254 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 15:24:48,480 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 15:24:49,002 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 15:24:49,217 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 15:24:49,415 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 15:24:49,636 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-04 15:24:49,843 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-11-04 15:24:50,056 - INFO - Saved slice 0 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_7_overlay.png'.
2024-11-04 15:24:50,264 - INFO - Saved slice 0 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_8_overlay.png'.
2024-11-04 15:24:50,467 - INFO - Saved slice 0 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_9_overlay.png'.
2024-11-04 15:24:50,669 - INFO - Saved slice 0 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_10_overlay.png'.
2024-11-04 15:24:50,869 - INFO - Saved slice 0 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_11_overlay.png'.
2024-11-04 15:24:51,110 - INFO - Saved slice 35 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_0_overlay.png'.
2024-11-04 15:24:51,329 - INFO - Saved slice 35 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_1_overlay.png'.
2024-11-04 15:24:51,555 - INFO - Saved slice 35 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_2_overlay.png'.
2024-11-04 15:24:51,813 - INFO - Saved slice 35 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_3_overlay.png'.
2024-11-04 15:24:52,023 - INFO - Saved slice 35 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_4_overlay.png'.
2024-11-04 15:24:52,235 - INFO - Saved slice 35 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_5_overlay.png'.
2024-11-04 15:24:52,443 - INFO - Saved slice 35 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_6_overlay.png'.
2024-11-04 15:24:52,655 - INFO - Saved slice 35 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_7_overlay.png'.
2024-11-04 15:24:52,863 - INFO - Saved slice 35 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_8_overlay.png'.
2024-11-04 15:24:53,073 - INFO - Saved slice 35 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_9_overlay.png'.
2024-11-04 15:24:53,276 - INFO - Saved slice 35 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_10_overlay.png'.
2024-11-04 15:24:53,475 - INFO - Saved slice 35 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_11_overlay.png'.
2024-11-04 15:24:53,689 - INFO - Saved slice 71 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_0_overlay.png'.
2024-11-04 15:24:53,895 - INFO - Saved slice 71 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_1_overlay.png'.
2024-11-04 15:24:54,109 - INFO - Saved slice 71 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_2_overlay.png'.
2024-11-04 15:24:54,334 - INFO - Saved slice 71 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_3_overlay.png'.
2024-11-04 15:24:54,538 - INFO - Saved slice 71 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_4_overlay.png'.
2024-11-04 15:24:54,740 - INFO - Saved slice 71 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_5_overlay.png'.
2024-11-04 15:24:54,941 - INFO - Saved slice 71 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_6_overlay.png'.
2024-11-04 15:24:55,143 - INFO - Saved slice 71 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_7_overlay.png'.
2024-11-04 15:24:55,342 - INFO - Saved slice 71 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_8_overlay.png'.
2024-11-04 15:24:55,542 - INFO - Saved slice 71 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_9_overlay.png'.
2024-11-04 15:24:55,739 - INFO - Saved slice 71 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_10_overlay.png'.
2024-11-04 15:24:55,937 - INFO - Saved slice 71 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_11_overlay.png'.
2024-11-04 15:24:56,167 - INFO - Saved slice 107 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_0_overlay.png'.
2024-11-04 15:24:56,367 - INFO - Saved slice 107 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_1_overlay.png'.
2024-11-04 15:24:56,576 - INFO - Saved slice 107 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_2_overlay.png'.
2024-11-04 15:24:56,808 - INFO - Saved slice 107 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_3_overlay.png'.
2024-11-04 15:24:57,019 - INFO - Saved slice 107 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_4_overlay.png'.
2024-11-04 15:24:57,218 - INFO - Saved slice 107 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_5_overlay.png'.
2024-11-04 15:24:57,418 - INFO - Saved slice 107 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_6_overlay.png'.
2024-11-04 15:24:57,616 - INFO - Saved slice 107 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_7_overlay.png'.
2024-11-04 15:24:57,814 - INFO - Saved slice 107 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_8_overlay.png'.
2024-11-04 15:24:58,021 - INFO - Saved slice 107 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_9_overlay.png'.
2024-11-04 15:24:58,218 - INFO - Saved slice 107 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_10_overlay.png'.
2024-11-04 15:24:58,413 - INFO - Saved slice 107 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_11_overlay.png'.
2024-11-04 15:24:58,623 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 15:24:58,819 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 15:24:59,027 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 15:24:59,302 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 15:24:59,501 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 15:24:59,699 - INFO - Saved slice 143 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_5_overlay.png'.
2024-11-04 15:24:59,896 - INFO - Saved slice 143 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_6_overlay.png'.
2024-11-04 15:25:00,100 - INFO - Saved slice 143 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_7_overlay.png'.
2024-11-04 15:25:00,302 - INFO - Saved slice 143 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_8_overlay.png'.
2024-11-04 15:25:00,496 - INFO - Saved slice 143 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_9_overlay.png'.
2024-11-04 15:25:00,693 - INFO - Saved slice 143 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_10_overlay.png'.
2024-11-04 15:25:00,889 - INFO - Saved slice 143 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_11_overlay.png'.
2024-11-04 15:25:00,897 - INFO - Pipeline completed successfully.
2024-11-04 15:25:00,897 - INFO - Current memory usage: 1352.70 MB
2024-11-04 15:27:50,112 - INFO - Logging initiated.
2024-11-04 15:27:50,112 - INFO - Pipeline started.
2024-11-04 15:27:50,112 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 15:27:50,845 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 15:27:51,269 - INFO - Denoised image loaded.
2024-11-04 15:27:51,269 - INFO - Current memory usage: 515.20 MB
2024-11-04 15:27:51,277 - INFO - Starting intensity normalization.
2024-11-04 15:27:52,276 - INFO - Intensity normalization complete.
2024-11-04 15:27:52,277 - INFO - Current memory usage: 542.49 MB
2024-11-04 15:27:52,285 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-11-04 15:27:52,285 - INFO - Computing neighborhood statistics.
2024-11-04 15:27:53,145 - INFO - Neighborhood statistics computed.
2024-11-04 15:27:53,145 - INFO - Current memory usage: 542.36 MB
2024-11-04 15:27:53,146 - INFO - Computing z-axis value for each voxel.
2024-11-04 15:28:00,984 - INFO - Z-axis value for each voxel computed.
2024-11-04 15:28:00,984 - INFO - Current memory usage: 651.11 MB
2024-11-04 15:28:00,984 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 15:28:02,094 - INFO - Features shape: (14264640, 4)
2024-11-04 15:28:02,095 - INFO - Current memory usage: 923.36 MB
2024-11-04 15:28:02,095 - INFO - Plotting feature distributions.
2024-11-04 15:28:08,633 - INFO - Feature distributions plotted.
2024-11-04 15:28:08,666 - INFO - Performing MiniBatch K-Means clustering with k=16, batch_size=10000, connectivity_weight=0.1.
2024-11-04 15:28:14,492 - INFO - Features shape after adding spatial connectivity: (14264640, 7)
2024-11-04 15:28:21,303 - INFO - Clustering complete with spatial connectivity.
2024-11-04 15:28:21,303 - INFO - Current memory usage: 1698.82 MB
2024-11-04 15:28:21,365 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 15:28:21,365 - INFO - Current memory usage: 937.00 MB
2024-11-04 15:28:21,389 - INFO - Processing Cluster 0.
2024-11-04 15:28:21,424 - INFO - Cluster 0: Initial voxel count = 1377731.
2024-11-04 15:28:21,424 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:22,084 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:22,860 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:23,196 - INFO - Cluster 0: Refined voxel count = 1284795.
2024-11-04 15:28:23,229 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 15:28:23,302 - INFO - Cluster 0: Mean Intensity = -0.16679032146930695
2024-11-04 15:28:23,302 - INFO - Processing Cluster 1.
2024-11-04 15:28:23,333 - INFO - Cluster 1: Initial voxel count = 999142.
2024-11-04 15:28:23,334 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:24,099 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:24,887 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:25,201 - INFO - Cluster 1: Refined voxel count = 949855.
2024-11-04 15:28:25,233 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 15:28:25,303 - INFO - Cluster 1: Mean Intensity = -0.17719855904579163
2024-11-04 15:28:25,304 - INFO - Processing Cluster 2.
2024-11-04 15:28:25,337 - INFO - Cluster 2: Initial voxel count = 1335566.
2024-11-04 15:28:25,337 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:26,115 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:26,902 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:27,227 - INFO - Cluster 2: Refined voxel count = 987176.
2024-11-04 15:28:27,255 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 15:28:27,352 - INFO - Cluster 2: Mean Intensity = -0.054095204919576645
2024-11-04 15:28:27,352 - INFO - Processing Cluster 3.
2024-11-04 15:28:27,380 - INFO - Cluster 3: Initial voxel count = 189004.
2024-11-04 15:28:27,380 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:28,150 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:28,949 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:29,266 - INFO - Cluster 3: Refined voxel count = 158535.
2024-11-04 15:28:29,298 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 15:28:29,373 - INFO - Cluster 3: Mean Intensity = 9.373024940490723
2024-11-04 15:28:29,373 - INFO - Processing Cluster 4.
2024-11-04 15:28:29,408 - INFO - Cluster 4: Initial voxel count = 794395.
2024-11-04 15:28:29,408 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:30,173 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:30,937 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:31,247 - INFO - Cluster 4: Refined voxel count = 786249.
2024-11-04 15:28:31,276 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 15:28:31,349 - INFO - Cluster 4: Mean Intensity = -0.24005025625228882
2024-11-04 15:28:31,350 - INFO - Processing Cluster 5.
2024-11-04 15:28:31,391 - INFO - Cluster 5: Initial voxel count = 214487.
2024-11-04 15:28:31,391 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:32,185 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:32,964 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:33,267 - INFO - Cluster 5: Refined voxel count = 25723.
2024-11-04 15:28:33,300 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-04 15:28:33,380 - INFO - Cluster 5: Mean Intensity = 0.7039515376091003
2024-11-04 15:28:33,381 - INFO - Processing Cluster 6.
2024-11-04 15:28:33,414 - INFO - Cluster 6: Initial voxel count = 1247667.
2024-11-04 15:28:33,414 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:34,206 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:34,975 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:35,297 - INFO - Cluster 6: Refined voxel count = 664817.
2024-11-04 15:28:35,325 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-11-04 15:28:35,431 - INFO - Cluster 6: Mean Intensity = -0.07803748548030853
2024-11-04 15:28:35,431 - INFO - Processing Cluster 7.
2024-11-04 15:28:35,464 - INFO - Cluster 7: Initial voxel count = 211587.
2024-11-04 15:28:35,464 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:36,234 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:37,011 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:37,314 - INFO - Cluster 7: Refined voxel count = 18777.
2024-11-04 15:28:37,346 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-11-04 15:28:37,419 - INFO - Cluster 7: Mean Intensity = 2.377593755722046
2024-11-04 15:28:37,419 - INFO - Processing Cluster 8.
2024-11-04 15:28:37,450 - INFO - Cluster 8: Initial voxel count = 621748.
2024-11-04 15:28:37,450 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:38,226 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:39,009 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:39,339 - INFO - Cluster 8: Refined voxel count = 277215.
2024-11-04 15:28:39,362 - INFO - Refined mask for Cluster 8 saved as 'csf_mask_class_8_refined_2.tif'.
2024-11-04 15:28:39,451 - INFO - Cluster 8: Mean Intensity = 0.4798542261123657
2024-11-04 15:28:39,452 - INFO - Processing Cluster 9.
2024-11-04 15:28:39,484 - INFO - Cluster 9: Initial voxel count = 1449482.
2024-11-04 15:28:39,484 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:40,265 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:41,054 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:41,371 - INFO - Cluster 9: Refined voxel count = 1394914.
2024-11-04 15:28:41,403 - INFO - Refined mask for Cluster 9 saved as 'csf_mask_class_9_refined_2.tif'.
2024-11-04 15:28:41,473 - INFO - Cluster 9: Mean Intensity = -0.1734679639339447
2024-11-04 15:28:41,473 - INFO - Processing Cluster 10.
2024-11-04 15:28:41,507 - INFO - Cluster 10: Initial voxel count = 148406.
2024-11-04 15:28:41,507 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:42,283 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:43,057 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:43,367 - INFO - Cluster 10: Refined voxel count = 40279.
2024-11-04 15:28:43,400 - INFO - Refined mask for Cluster 10 saved as 'csf_mask_class_10_refined_2.tif'.
2024-11-04 15:28:43,465 - INFO - Cluster 10: Mean Intensity = 6.551016330718994
2024-11-04 15:28:43,466 - INFO - Processing Cluster 11.
2024-11-04 15:28:43,498 - INFO - Cluster 11: Initial voxel count = 770128.
2024-11-04 15:28:43,498 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:44,262 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:45,029 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:45,339 - INFO - Cluster 11: Refined voxel count = 755410.
2024-11-04 15:28:45,363 - INFO - Refined mask for Cluster 11 saved as 'csf_mask_class_11_refined_2.tif'.
2024-11-04 15:28:45,424 - INFO - Cluster 11: Mean Intensity = -0.24119095504283905
2024-11-04 15:28:45,424 - INFO - Processing Cluster 12.
2024-11-04 15:28:45,454 - INFO - Cluster 12: Initial voxel count = 996344.
2024-11-04 15:28:45,454 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:46,223 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:47,008 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:47,320 - INFO - Cluster 12: Refined voxel count = 943365.
2024-11-04 15:28:47,331 - INFO - Refined mask for Cluster 12 saved as 'csf_mask_class_12_refined_2.tif'.
2024-11-04 15:28:47,403 - INFO - Cluster 12: Mean Intensity = -0.19060033559799194
2024-11-04 15:28:47,403 - INFO - Processing Cluster 13.
2024-11-04 15:28:47,435 - INFO - Cluster 13: Initial voxel count = 1103891.
2024-11-04 15:28:47,435 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:48,236 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:49,036 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:49,352 - INFO - Cluster 13: Refined voxel count = 1071607.
2024-11-04 15:28:49,363 - INFO - Refined mask for Cluster 13 saved as 'csf_mask_class_13_refined_2.tif'.
2024-11-04 15:28:49,436 - INFO - Cluster 13: Mean Intensity = -0.2119630128145218
2024-11-04 15:28:49,437 - INFO - Processing Cluster 14.
2024-11-04 15:28:49,470 - INFO - Cluster 14: Initial voxel count = 1693228.
2024-11-04 15:28:49,470 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:50,260 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:51,084 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:51,416 - INFO - Cluster 14: Refined voxel count = 645806.
2024-11-04 15:28:51,426 - INFO - Refined mask for Cluster 14 saved as 'csf_mask_class_14_refined_2.tif'.
2024-11-04 15:28:51,532 - INFO - Cluster 14: Mean Intensity = 0.08938512951135635
2024-11-04 15:28:51,533 - INFO - Processing Cluster 15.
2024-11-04 15:28:51,560 - INFO - Cluster 15: Initial voxel count = 1111834.
2024-11-04 15:28:51,560 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:28:52,355 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:28:53,123 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:28:53,437 - INFO - Cluster 15: Refined voxel count = 1041945.
2024-11-04 15:28:53,447 - INFO - Refined mask for Cluster 15 saved as 'csf_mask_class_15_refined_2.tif'.
2024-11-04 15:28:53,534 - INFO - Cluster 15: Mean Intensity = -0.19073835015296936
2024-11-04 15:28:53,534 - INFO - CSF is identified as cluster 11.
2024-11-04 15:28:53,534 - INFO - Starting visualization with PyVista.
2024-11-04 15:28:54,004 - INFO - Adding Original MRI volume.
2024-11-04 15:28:54,458 - INFO - Adding Denoised MRI volume.
2024-11-04 15:28:55,077 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 15:28:55,478 - INFO - Initial mesh has 40987 points and 81431 faces.
2024-11-04 15:28:55,479 - INFO - Current memory usage: 1216.46 MB
2024-11-04 15:28:55,949 - INFO - Decimated mesh has 20334 points and 40714 faces.
2024-11-04 15:28:55,949 - INFO - Current memory usage: 1246.60 MB
2024-11-04 15:28:55,959 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 15:28:56,112 - INFO - Initial mesh has 21760 points and 42287 faces.
2024-11-04 15:28:56,112 - INFO - Current memory usage: 1250.70 MB
2024-11-04 15:28:56,321 - INFO - Decimated mesh has 10938 points and 21143 faces.
2024-11-04 15:28:56,322 - INFO - Current memory usage: 1250.70 MB
2024-11-04 15:28:56,329 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 15:28:56,610 - INFO - Initial mesh has 113016 points and 230654 faces.
2024-11-04 15:28:56,610 - INFO - Current memory usage: 1256.58 MB
2024-11-04 15:28:58,254 - INFO - Decimated mesh has 55275 points and 115327 faces.
2024-11-04 15:28:58,254 - INFO - Current memory usage: 1324.33 MB
2024-11-04 15:28:58,264 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 15:28:58,464 - INFO - Initial mesh has 22484 points and 44954 faces.
2024-11-04 15:28:58,465 - INFO - Current memory usage: 1326.38 MB
2024-11-04 15:28:58,681 - INFO - Decimated mesh has 11245 points and 22477 faces.
2024-11-04 15:28:58,681 - INFO - Current memory usage: 1326.38 MB
2024-11-04 15:28:58,689 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 15:28:58,851 - INFO - Initial mesh has 11651 points and 22747 faces.
2024-11-04 15:28:58,852 - INFO - Current memory usage: 1326.38 MB
2024-11-04 15:28:59,015 - INFO - Decimated mesh has 5835 points and 11373 faces.
2024-11-04 15:28:59,016 - INFO - Current memory usage: 1326.38 MB
2024-11-04 15:28:59,023 - INFO - Adding Mask 5 mesh to visualization.
2024-11-04 15:28:59,185 - INFO - Initial mesh has 11764 points and 22024 faces.
2024-11-04 15:28:59,185 - INFO - Current memory usage: 1326.38 MB
2024-11-04 15:28:59,276 - INFO - Decimated mesh has 6298 points and 11012 faces.
2024-11-04 15:28:59,276 - INFO - Current memory usage: 1326.38 MB
2024-11-04 15:28:59,283 - INFO - Adding Mask 6 mesh to visualization.
2024-11-04 15:28:59,570 - INFO - Initial mesh has 133981 points and 273276 faces.
2024-11-04 15:28:59,571 - INFO - Current memory usage: 1326.41 MB
2024-11-04 15:29:01,428 - INFO - Decimated mesh has 65658 points and 136637 faces.
2024-11-04 15:29:01,429 - INFO - Current memory usage: 1385.16 MB
2024-11-04 15:29:01,437 - INFO - Adding Mask 7 mesh to visualization.
2024-11-04 15:29:01,607 - INFO - Initial mesh has 10360 points and 18754 faces.
2024-11-04 15:29:01,607 - INFO - Current memory usage: 1385.26 MB
2024-11-04 15:29:01,682 - INFO - Decimated mesh has 5720 points and 9377 faces.
2024-11-04 15:29:01,682 - INFO - Current memory usage: 1385.26 MB
2024-11-04 15:29:01,690 - INFO - Adding Mask 8 mesh to visualization.
2024-11-04 15:29:01,923 - INFO - Initial mesh has 70396 points and 139272 faces.
2024-11-04 15:29:01,923 - INFO - Current memory usage: 1385.27 MB
2024-11-04 15:29:02,794 - INFO - Decimated mesh has 35654 points and 69636 faces.
2024-11-04 15:29:02,795 - INFO - Current memory usage: 1385.27 MB
2024-11-04 15:29:02,810 - INFO - Adding Mask 9 mesh to visualization.
2024-11-04 15:29:03,013 - INFO - Initial mesh has 27104 points and 53767 faces.
2024-11-04 15:29:03,013 - INFO - Current memory usage: 1385.27 MB
2024-11-04 15:29:03,303 - INFO - Decimated mesh has 13464 points and 26882 faces.
2024-11-04 15:29:03,304 - INFO - Current memory usage: 1385.27 MB
2024-11-04 15:29:03,312 - INFO - Adding Mask 10 mesh to visualization.
2024-11-04 15:29:03,477 - INFO - Initial mesh has 18992 points and 37468 faces.
2024-11-04 15:29:03,478 - INFO - Current memory usage: 1385.27 MB
2024-11-04 15:29:03,646 - INFO - Decimated mesh has 9687 points and 18733 faces.
2024-11-04 15:29:03,647 - INFO - Current memory usage: 1385.27 MB
2024-11-04 15:29:03,655 - INFO - Adding Mask 11 mesh to visualization.
2024-11-04 15:29:03,796 - INFO - Initial mesh has 11702 points and 22925 faces.
2024-11-04 15:29:03,796 - INFO - Current memory usage: 1385.34 MB
2024-11-04 15:29:03,941 - INFO - Decimated mesh has 5889 points and 11461 faces.
2024-11-04 15:29:03,942 - INFO - Current memory usage: 1385.34 MB
2024-11-04 15:29:03,949 - INFO - Adding Mask 12 mesh to visualization.
2024-11-04 15:29:04,118 - INFO - Initial mesh has 25468 points and 50261 faces.
2024-11-04 15:29:04,119 - INFO - Current memory usage: 1385.34 MB
2024-11-04 15:29:04,371 - INFO - Decimated mesh has 12758 points and 25130 faces.
2024-11-04 15:29:04,372 - INFO - Current memory usage: 1385.34 MB
2024-11-04 15:29:04,380 - INFO - Adding Mask 13 mesh to visualization.
2024-11-04 15:29:04,533 - INFO - Initial mesh has 19359 points and 38037 faces.
2024-11-04 15:29:04,533 - INFO - Current memory usage: 1385.35 MB
2024-11-04 15:29:04,736 - INFO - Decimated mesh has 9716 points and 19018 faces.
2024-11-04 15:29:04,737 - INFO - Current memory usage: 1385.35 MB
2024-11-04 15:29:04,744 - INFO - Adding Mask 14 mesh to visualization.
2024-11-04 15:29:05,175 - INFO - Initial mesh has 233936 points and 484826 faces.
2024-11-04 15:29:05,176 - INFO - Current memory usage: 1388.72 MB
2024-11-04 15:29:08,391 - INFO - Decimated mesh has 113464 points and 242412 faces.
2024-11-04 15:29:08,391 - INFO - Current memory usage: 1519.32 MB
2024-11-04 15:29:08,399 - INFO - Adding Mask 15 mesh to visualization.
2024-11-04 15:29:08,628 - INFO - Initial mesh has 25833 points and 50509 faces.
2024-11-04 15:29:08,629 - INFO - Current memory usage: 1519.41 MB
2024-11-04 15:29:08,888 - INFO - Decimated mesh has 12990 points and 25254 faces.
2024-11-04 15:29:08,888 - INFO - Current memory usage: 1519.41 MB
2024-11-04 15:29:08,896 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 15:29:09,348 - INFO - Translator(prefix=None)
2024-11-04 15:29:09,446 - INFO - awaiting runner setup
2024-11-04 15:29:09,446 - INFO - awaiting site startup
2024-11-04 15:29:09,447 - INFO - Print WSLINK_READY_MSG
2024-11-04 15:29:09,447 - INFO - Schedule auto shutdown with timout 0
2024-11-04 15:29:09,447 - INFO - awaiting running future
2024-11-04 15:29:25,268 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 15:29:25,296 - INFO - Current memory usage: 1511.16 MB
2024-11-04 15:29:25,324 - INFO - Selected slice indices for saving: [0, 35, 71, 107, 143]
2024-11-04 15:29:26,261 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 15:29:26,525 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 15:29:26,728 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 15:29:26,928 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 15:29:27,129 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 15:29:27,340 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-04 15:29:27,540 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-11-04 15:29:27,751 - INFO - Saved slice 0 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_7_overlay.png'.
2024-11-04 15:29:27,960 - INFO - Saved slice 0 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_8_overlay.png'.
2024-11-04 15:29:28,159 - INFO - Saved slice 0 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_9_overlay.png'.
2024-11-04 15:29:28,362 - INFO - Saved slice 0 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_10_overlay.png'.
2024-11-04 15:29:28,571 - INFO - Saved slice 0 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_11_overlay.png'.
2024-11-04 15:29:28,772 - INFO - Saved slice 0 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_12_overlay.png'.
2024-11-04 15:29:28,972 - INFO - Saved slice 0 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_13_overlay.png'.
2024-11-04 15:29:29,184 - INFO - Saved slice 0 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_14_overlay.png'.
2024-11-04 15:29:29,409 - INFO - Saved slice 0 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_15_overlay.png'.
2024-11-04 15:29:29,622 - INFO - Saved slice 35 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_0_overlay.png'.
2024-11-04 15:29:29,828 - INFO - Saved slice 35 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_1_overlay.png'.
2024-11-04 15:29:30,074 - INFO - Saved slice 35 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_2_overlay.png'.
2024-11-04 15:29:30,284 - INFO - Saved slice 35 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_3_overlay.png'.
2024-11-04 15:29:30,490 - INFO - Saved slice 35 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_4_overlay.png'.
2024-11-04 15:29:30,698 - INFO - Saved slice 35 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_5_overlay.png'.
2024-11-04 15:29:30,908 - INFO - Saved slice 35 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_6_overlay.png'.
2024-11-04 15:29:31,105 - INFO - Saved slice 35 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_7_overlay.png'.
2024-11-04 15:29:31,321 - INFO - Saved slice 35 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_8_overlay.png'.
2024-11-04 15:29:31,524 - INFO - Saved slice 35 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_9_overlay.png'.
2024-11-04 15:29:31,728 - INFO - Saved slice 35 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_10_overlay.png'.
2024-11-04 15:29:31,937 - INFO - Saved slice 35 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_11_overlay.png'.
2024-11-04 15:29:32,139 - INFO - Saved slice 35 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_12_overlay.png'.
2024-11-04 15:29:32,348 - INFO - Saved slice 35 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_13_overlay.png'.
2024-11-04 15:29:32,580 - INFO - Saved slice 35 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_14_overlay.png'.
2024-11-04 15:29:32,782 - INFO - Saved slice 35 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_15_overlay.png'.
2024-11-04 15:29:32,983 - INFO - Saved slice 71 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_0_overlay.png'.
2024-11-04 15:29:33,208 - INFO - Saved slice 71 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_1_overlay.png'.
2024-11-04 15:29:33,416 - INFO - Saved slice 71 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_2_overlay.png'.
2024-11-04 15:29:33,619 - INFO - Saved slice 71 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_3_overlay.png'.
2024-11-04 15:29:33,821 - INFO - Saved slice 71 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_4_overlay.png'.
2024-11-04 15:29:34,020 - INFO - Saved slice 71 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_5_overlay.png'.
2024-11-04 15:29:34,251 - INFO - Saved slice 71 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_6_overlay.png'.
2024-11-04 15:29:34,453 - INFO - Saved slice 71 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_7_overlay.png'.
2024-11-04 15:29:34,654 - INFO - Saved slice 71 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_8_overlay.png'.
2024-11-04 15:29:34,855 - INFO - Saved slice 71 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_9_overlay.png'.
2024-11-04 15:29:35,064 - INFO - Saved slice 71 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_10_overlay.png'.
2024-11-04 15:29:35,263 - INFO - Saved slice 71 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_11_overlay.png'.
2024-11-04 15:29:35,460 - INFO - Saved slice 71 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_12_overlay.png'.
2024-11-04 15:29:35,657 - INFO - Saved slice 71 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_13_overlay.png'.
2024-11-04 15:29:35,864 - INFO - Saved slice 71 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_14_overlay.png'.
2024-11-04 15:29:36,062 - INFO - Saved slice 71 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_15_overlay.png'.
2024-11-04 15:29:36,298 - INFO - Saved slice 107 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_0_overlay.png'.
2024-11-04 15:29:36,498 - INFO - Saved slice 107 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_1_overlay.png'.
2024-11-04 15:29:36,695 - INFO - Saved slice 107 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_2_overlay.png'.
2024-11-04 15:29:36,957 - INFO - Saved slice 107 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_3_overlay.png'.
2024-11-04 15:29:37,156 - INFO - Saved slice 107 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_4_overlay.png'.
2024-11-04 15:29:37,356 - INFO - Saved slice 107 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_5_overlay.png'.
2024-11-04 15:29:37,560 - INFO - Saved slice 107 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_6_overlay.png'.
2024-11-04 15:29:37,754 - INFO - Saved slice 107 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_7_overlay.png'.
2024-11-04 15:29:37,954 - INFO - Saved slice 107 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_8_overlay.png'.
2024-11-04 15:29:38,158 - INFO - Saved slice 107 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_9_overlay.png'.
2024-11-04 15:29:38,355 - INFO - Saved slice 107 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_10_overlay.png'.
2024-11-04 15:29:38,550 - INFO - Saved slice 107 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_11_overlay.png'.
2024-11-04 15:29:38,748 - INFO - Saved slice 107 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_12_overlay.png'.
2024-11-04 15:29:38,943 - INFO - Saved slice 107 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_13_overlay.png'.
2024-11-04 15:29:39,161 - INFO - Saved slice 107 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_14_overlay.png'.
2024-11-04 15:29:39,390 - INFO - Saved slice 107 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_15_overlay.png'.
2024-11-04 15:29:39,585 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 15:29:39,786 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 15:29:40,004 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 15:29:40,200 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 15:29:40,399 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 15:29:40,595 - INFO - Saved slice 143 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_5_overlay.png'.
2024-11-04 15:29:40,981 - INFO - Saved slice 143 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_6_overlay.png'.
2024-11-04 15:29:41,178 - INFO - Saved slice 143 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_7_overlay.png'.
2024-11-04 15:29:41,383 - INFO - Saved slice 143 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_8_overlay.png'.
2024-11-04 15:29:41,583 - INFO - Saved slice 143 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_9_overlay.png'.
2024-11-04 15:29:41,781 - INFO - Saved slice 143 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_10_overlay.png'.
2024-11-04 15:29:41,982 - INFO - Saved slice 143 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_11_overlay.png'.
2024-11-04 15:29:42,178 - INFO - Saved slice 143 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_12_overlay.png'.
2024-11-04 15:29:42,378 - INFO - Saved slice 143 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_13_overlay.png'.
2024-11-04 15:29:42,578 - INFO - Saved slice 143 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_14_overlay.png'.
2024-11-04 15:29:42,776 - INFO - Saved slice 143 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_15_overlay.png'.
2024-11-04 15:29:42,784 - INFO - Pipeline completed successfully.
2024-11-04 15:29:42,784 - INFO - Current memory usage: 1437.64 MB
2024-11-04 15:30:54,559 - INFO - Logging initiated.
2024-11-04 15:30:54,560 - INFO - Pipeline started.
2024-11-04 15:30:54,560 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 15:30:54,838 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 15:30:54,978 - INFO - Denoised image loaded.
2024-11-04 15:30:54,979 - INFO - Current memory usage: 515.05 MB
2024-11-04 15:30:54,986 - INFO - Starting intensity normalization.
2024-11-04 15:30:55,723 - INFO - Intensity normalization complete.
2024-11-04 15:30:55,724 - INFO - Current memory usage: 542.43 MB
2024-11-04 15:30:55,730 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-11-04 15:30:55,730 - INFO - Computing neighborhood statistics.
2024-11-04 15:30:56,296 - INFO - Neighborhood statistics computed.
2024-11-04 15:30:56,297 - INFO - Current memory usage: 542.30 MB
2024-11-04 15:30:56,297 - INFO - Computing z-axis value for each voxel.
2024-11-04 15:31:04,083 - INFO - Z-axis value for each voxel computed.
2024-11-04 15:31:04,084 - INFO - Current memory usage: 651.05 MB
2024-11-04 15:31:04,084 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 15:31:05,285 - INFO - Features shape: (14264640, 4)
2024-11-04 15:31:05,285 - INFO - Current memory usage: 923.21 MB
2024-11-04 15:31:05,286 - INFO - Plotting feature distributions.
2024-11-04 15:31:11,711 - INFO - Feature distributions plotted.
2024-11-04 15:31:11,743 - INFO - Performing MiniBatch K-Means clustering with k=30, batch_size=10000, connectivity_weight=0.1.
2024-11-04 15:31:34,349 - INFO - Logging initiated.
2024-11-04 15:31:34,350 - INFO - Pipeline started.
2024-11-04 15:31:34,350 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 15:31:34,509 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 15:31:34,612 - INFO - Denoised image loaded.
2024-11-04 15:31:34,613 - INFO - Current memory usage: 515.14 MB
2024-11-04 15:31:34,613 - INFO - Starting intensity normalization.
2024-11-04 15:31:35,160 - INFO - Intensity normalization complete.
2024-11-04 15:31:35,160 - INFO - Current memory usage: 542.52 MB
2024-11-04 15:31:35,161 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-11-04 15:31:35,161 - INFO - Computing neighborhood statistics.
2024-11-04 15:31:35,648 - INFO - Neighborhood statistics computed.
2024-11-04 15:31:35,648 - INFO - Current memory usage: 542.39 MB
2024-11-04 15:31:35,648 - INFO - Computing z-axis value for each voxel.
2024-11-04 15:31:42,729 - INFO - Z-axis value for each voxel computed.
2024-11-04 15:31:42,730 - INFO - Current memory usage: 651.14 MB
2024-11-04 15:31:42,730 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 15:31:43,400 - INFO - Features shape: (14264640, 4)
2024-11-04 15:31:43,401 - INFO - Current memory usage: 923.30 MB
2024-11-04 15:31:43,401 - INFO - Plotting feature distributions.
2024-11-04 15:31:49,386 - INFO - Feature distributions plotted.
2024-11-04 15:31:49,426 - INFO - Performing MiniBatch K-Means clustering with k=24, batch_size=10000, connectivity_weight=0.1.
2024-11-04 15:31:55,747 - INFO - Features shape after adding spatial connectivity: (14264640, 7)
2024-11-04 15:32:03,647 - INFO - Clustering complete with spatial connectivity.
2024-11-04 15:32:03,657 - INFO - Current memory usage: 1674.64 MB
2024-11-04 15:32:03,755 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 15:32:03,756 - INFO - Current memory usage: 912.92 MB
2024-11-04 15:32:03,790 - INFO - Processing Cluster 0.
2024-11-04 15:32:03,823 - INFO - Cluster 0: Initial voxel count = 590168.
2024-11-04 15:32:03,823 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:04,513 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:05,275 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:05,606 - INFO - Cluster 0: Refined voxel count = 247253.
2024-11-04 15:32:05,640 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 15:32:05,728 - INFO - Cluster 0: Mean Intensity = -0.13524866104125977
2024-11-04 15:32:05,728 - INFO - Processing Cluster 1.
2024-11-04 15:32:05,761 - INFO - Cluster 1: Initial voxel count = 1215880.
2024-11-04 15:32:05,761 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:06,507 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:07,268 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:07,612 - INFO - Cluster 1: Refined voxel count = 526887.
2024-11-04 15:32:07,641 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 15:32:07,737 - INFO - Cluster 1: Mean Intensity = -0.051130522042512894
2024-11-04 15:32:07,738 - INFO - Processing Cluster 2.
2024-11-04 15:32:07,764 - INFO - Cluster 2: Initial voxel count = 102970.
2024-11-04 15:32:07,764 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:08,534 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:09,311 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:09,617 - INFO - Cluster 2: Refined voxel count = 21045.
2024-11-04 15:32:09,648 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 15:32:09,726 - INFO - Cluster 2: Mean Intensity = 6.913031101226807
2024-11-04 15:32:09,726 - INFO - Processing Cluster 3.
2024-11-04 15:32:09,752 - INFO - Cluster 3: Initial voxel count = 589326.
2024-11-04 15:32:09,753 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:10,535 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:11,321 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:11,640 - INFO - Cluster 3: Refined voxel count = 583388.
2024-11-04 15:32:11,667 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 15:32:11,741 - INFO - Cluster 3: Mean Intensity = -0.23878970742225647
2024-11-04 15:32:11,742 - INFO - Processing Cluster 4.
2024-11-04 15:32:11,775 - INFO - Cluster 4: Initial voxel count = 738191.
2024-11-04 15:32:11,775 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:12,537 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:13,301 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:13,650 - INFO - Cluster 4: Refined voxel count = 702378.
2024-11-04 15:32:13,675 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 15:32:13,747 - INFO - Cluster 4: Mean Intensity = -0.17859864234924316
2024-11-04 15:32:13,748 - INFO - Processing Cluster 5.
2024-11-04 15:32:13,777 - INFO - Cluster 5: Initial voxel count = 140007.
2024-11-04 15:32:13,777 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:14,534 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:15,311 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:15,614 - INFO - Cluster 5: Refined voxel count = 21.
2024-11-04 15:32:15,652 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-04 15:32:15,732 - INFO - Cluster 5: Mean Intensity = 0.08436530083417892
2024-11-04 15:32:15,732 - INFO - Processing Cluster 6.
2024-11-04 15:32:15,768 - INFO - Cluster 6: Initial voxel count = 678869.
2024-11-04 15:32:15,769 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:16,547 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:17,319 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:17,624 - INFO - Cluster 6: Refined voxel count = 53574.
2024-11-04 15:32:17,651 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-11-04 15:32:17,744 - INFO - Cluster 6: Mean Intensity = 0.24579273164272308
2024-11-04 15:32:17,744 - INFO - Processing Cluster 7.
2024-11-04 15:32:17,773 - INFO - Cluster 7: Initial voxel count = 1060781.
2024-11-04 15:32:17,773 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:18,533 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:19,310 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:19,632 - INFO - Cluster 7: Refined voxel count = 618297.
2024-11-04 15:32:19,658 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-11-04 15:32:19,748 - INFO - Cluster 7: Mean Intensity = -0.05033540725708008
2024-11-04 15:32:19,749 - INFO - Processing Cluster 8.
2024-11-04 15:32:19,779 - INFO - Cluster 8: Initial voxel count = 316547.
2024-11-04 15:32:19,779 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:20,554 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:21,334 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:21,640 - INFO - Cluster 8: Refined voxel count = 118657.
2024-11-04 15:32:21,667 - INFO - Refined mask for Cluster 8 saved as 'csf_mask_class_8_refined_2.tif'.
2024-11-04 15:32:21,752 - INFO - Cluster 8: Mean Intensity = 0.5916423201560974
2024-11-04 15:32:21,752 - INFO - Processing Cluster 9.
2024-11-04 15:32:21,782 - INFO - Cluster 9: Initial voxel count = 59095.
2024-11-04 15:32:21,782 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:22,551 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:23,354 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:23,683 - INFO - Cluster 9: Refined voxel count = 9184.
2024-11-04 15:32:23,715 - INFO - Refined mask for Cluster 9 saved as 'csf_mask_class_9_refined_2.tif'.
2024-11-04 15:32:23,781 - INFO - Cluster 9: Mean Intensity = 2.2567617893218994
2024-11-04 15:32:23,781 - INFO - Processing Cluster 10.
2024-11-04 15:32:23,815 - INFO - Cluster 10: Initial voxel count = 120145.
2024-11-04 15:32:23,816 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:24,633 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:25,411 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:25,770 - INFO - Cluster 10: Refined voxel count = 174.
2024-11-04 15:32:25,806 - INFO - Refined mask for Cluster 10 saved as 'csf_mask_class_10_refined_2.tif'.
2024-11-04 15:32:25,890 - INFO - Cluster 10: Mean Intensity = 1.369150161743164
2024-11-04 15:32:25,890 - INFO - Processing Cluster 11.
2024-11-04 15:32:25,925 - INFO - Cluster 11: Initial voxel count = 948769.
2024-11-04 15:32:25,926 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:26,729 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:27,520 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:27,906 - INFO - Cluster 11: Refined voxel count = 891552.
2024-11-04 15:32:27,931 - INFO - Refined mask for Cluster 11 saved as 'csf_mask_class_11_refined_2.tif'.
2024-11-04 15:32:28,000 - INFO - Cluster 11: Mean Intensity = -0.15287688374519348
2024-11-04 15:32:28,000 - INFO - Processing Cluster 12.
2024-11-04 15:32:28,029 - INFO - Cluster 12: Initial voxel count = 568372.
2024-11-04 15:32:28,029 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:28,780 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:29,560 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:29,888 - INFO - Cluster 12: Refined voxel count = 566268.
2024-11-04 15:32:29,918 - INFO - Refined mask for Cluster 12 saved as 'csf_mask_class_12_refined_2.tif'.
2024-11-04 15:32:29,979 - INFO - Cluster 12: Mean Intensity = -0.24229149520397186
2024-11-04 15:32:29,979 - INFO - Processing Cluster 13.
2024-11-04 15:32:30,005 - INFO - Cluster 13: Initial voxel count = 129702.
2024-11-04 15:32:30,005 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:30,770 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:31,547 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:31,901 - INFO - Cluster 13: Refined voxel count = 39612.
2024-11-04 15:32:31,919 - INFO - Refined mask for Cluster 13 saved as 'csf_mask_class_13_refined_2.tif'.
2024-11-04 15:32:31,991 - INFO - Cluster 13: Mean Intensity = 5.924108505249023
2024-11-04 15:32:31,992 - INFO - Processing Cluster 14.
2024-11-04 15:32:32,020 - INFO - Cluster 14: Initial voxel count = 980363.
2024-11-04 15:32:32,020 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:32,784 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:33,558 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:33,974 - INFO - Cluster 14: Refined voxel count = 924085.
2024-11-04 15:32:33,992 - INFO - Refined mask for Cluster 14 saved as 'csf_mask_class_14_refined_2.tif'.
2024-11-04 15:32:34,056 - INFO - Cluster 14: Mean Intensity = -0.1718733012676239
2024-11-04 15:32:34,056 - INFO - Processing Cluster 15.
2024-11-04 15:32:34,083 - INFO - Cluster 15: Initial voxel count = 741260.
2024-11-04 15:32:34,083 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:34,858 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:35,633 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:35,995 - INFO - Cluster 15: Refined voxel count = 703578.
2024-11-04 15:32:36,022 - INFO - Refined mask for Cluster 15 saved as 'csf_mask_class_15_refined_2.tif'.
2024-11-04 15:32:36,118 - INFO - Cluster 15: Mean Intensity = -0.16911068558692932
2024-11-04 15:32:36,119 - INFO - Processing Cluster 16.
2024-11-04 15:32:36,151 - INFO - Cluster 16: Initial voxel count = 1075305.
2024-11-04 15:32:36,151 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:36,923 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:37,714 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:38,085 - INFO - Cluster 16: Refined voxel count = 59018.
2024-11-04 15:32:38,095 - INFO - Refined mask for Cluster 16 saved as 'csf_mask_class_16_refined_2.tif'.
2024-11-04 15:32:38,241 - INFO - Cluster 16: Mean Intensity = 0.07513221353292465
2024-11-04 15:32:38,242 - INFO - Processing Cluster 17.
2024-11-04 15:32:38,262 - INFO - Cluster 17: Initial voxel count = 604413.
2024-11-04 15:32:38,262 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:39,067 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:39,858 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:40,242 - INFO - Cluster 17: Refined voxel count = 602792.
2024-11-04 15:32:40,252 - INFO - Refined mask for Cluster 17 saved as 'csf_mask_class_17_refined_2.tif'.
2024-11-04 15:32:40,364 - INFO - Cluster 17: Mean Intensity = -0.24223493039608002
2024-11-04 15:32:40,364 - INFO - Processing Cluster 18.
2024-11-04 15:32:40,394 - INFO - Cluster 18: Initial voxel count = 770571.
2024-11-04 15:32:40,394 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:41,176 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:41,958 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:42,359 - INFO - Cluster 18: Refined voxel count = 754044.
2024-11-04 15:32:42,369 - INFO - Refined mask for Cluster 18 saved as 'csf_mask_class_18_refined_2.tif'.
2024-11-04 15:32:42,505 - INFO - Cluster 18: Mean Intensity = -0.19354234635829926
2024-11-04 15:32:42,505 - INFO - Processing Cluster 19.
2024-11-04 15:32:42,534 - INFO - Cluster 19: Initial voxel count = 1098176.
2024-11-04 15:32:42,534 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:43,312 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:44,095 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:44,515 - INFO - Cluster 19: Refined voxel count = 1055678.
2024-11-04 15:32:44,525 - INFO - Refined mask for Cluster 19 saved as 'csf_mask_class_19_refined_2.tif'.
2024-11-04 15:32:44,663 - INFO - Cluster 19: Mean Intensity = -0.19277603924274445
2024-11-04 15:32:44,663 - INFO - Processing Cluster 20.
2024-11-04 15:32:44,683 - INFO - Cluster 20: Initial voxel count = 157125.
2024-11-04 15:32:44,684 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:45,487 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:46,272 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:46,712 - INFO - Cluster 20: Refined voxel count = 140020.
2024-11-04 15:32:46,722 - INFO - Refined mask for Cluster 20 saved as 'csf_mask_class_20_refined_2.tif'.
2024-11-04 15:32:46,875 - INFO - Cluster 20: Mean Intensity = 9.83324146270752
2024-11-04 15:32:46,875 - INFO - Processing Cluster 21.
2024-11-04 15:32:46,896 - INFO - Cluster 21: Initial voxel count = 135041.
2024-11-04 15:32:46,896 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:47,678 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:48,456 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:48,884 - INFO - Cluster 21: Refined voxel count = 49.
2024-11-04 15:32:48,894 - INFO - Refined mask for Cluster 21 saved as 'csf_mask_class_21_refined_2.tif'.
2024-11-04 15:32:49,069 - INFO - Cluster 21: Mean Intensity = 0.6173076033592224
2024-11-04 15:32:49,069 - INFO - Processing Cluster 22.
2024-11-04 15:32:49,093 - INFO - Cluster 22: Initial voxel count = 690577.
2024-11-04 15:32:49,093 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:49,863 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:50,664 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:51,128 - INFO - Cluster 22: Refined voxel count = 671688.
2024-11-04 15:32:51,138 - INFO - Refined mask for Cluster 22 saved as 'csf_mask_class_22_refined_2.tif'.
2024-11-04 15:32:51,291 - INFO - Cluster 22: Mean Intensity = -0.2160659283399582
2024-11-04 15:32:51,291 - INFO - Processing Cluster 23.
2024-11-04 15:32:51,312 - INFO - Cluster 23: Initial voxel count = 752987.
2024-11-04 15:32:51,312 - INFO - Applying morphological opening to remove small objects.
2024-11-04 15:32:52,102 - INFO - Applying morphological closing to fill small holes.
2024-11-04 15:32:52,904 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 15:32:53,426 - INFO - Cluster 23: Refined voxel count = 707987.
2024-11-04 15:32:53,436 - INFO - Refined mask for Cluster 23 saved as 'csf_mask_class_23_refined_2.tif'.
2024-11-04 15:32:53,640 - INFO - Cluster 23: Mean Intensity = -0.19254939258098602
2024-11-04 15:32:53,640 - INFO - CSF is identified as cluster 12.
2024-11-04 15:32:53,641 - INFO - Starting visualization with PyVista.
2024-11-04 15:32:54,296 - INFO - Adding Original MRI volume.
2024-11-04 15:32:55,056 - INFO - Adding Denoised MRI volume.
2024-11-04 15:32:55,707 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 15:32:56,159 - INFO - Initial mesh has 54823 points and 110184 faces.
2024-11-04 15:32:56,160 - INFO - Current memory usage: 1309.91 MB
2024-11-04 15:32:56,926 - INFO - Decimated mesh has 27165 points and 55091 faces.
2024-11-04 15:32:56,927 - INFO - Current memory usage: 1353.70 MB
2024-11-04 15:32:56,941 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 15:32:57,273 - INFO - Initial mesh has 153160 points and 312266 faces.
2024-11-04 15:32:57,273 - INFO - Current memory usage: 1368.45 MB
2024-11-04 15:32:59,535 - INFO - Decimated mesh has 75376 points and 156132 faces.
2024-11-04 15:32:59,536 - INFO - Current memory usage: 1474.20 MB
2024-11-04 15:32:59,545 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 15:32:59,724 - INFO - Initial mesh has 10763 points and 20682 faces.
2024-11-04 15:32:59,725 - INFO - Current memory usage: 1474.29 MB
2024-11-04 15:32:59,813 - INFO - Decimated mesh has 5635 points and 10341 faces.
2024-11-04 15:32:59,814 - INFO - Current memory usage: 1474.29 MB
2024-11-04 15:32:59,821 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 15:32:59,981 - INFO - Initial mesh has 10382 points and 20339 faces.
2024-11-04 15:32:59,982 - INFO - Current memory usage: 1474.29 MB
2024-11-04 15:33:00,124 - INFO - Decimated mesh has 5217 points and 10168 faces.
2024-11-04 15:33:00,125 - INFO - Current memory usage: 1474.29 MB
2024-11-04 15:33:00,132 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 15:33:00,292 - INFO - Initial mesh has 13549 points and 26251 faces.
2024-11-04 15:33:00,292 - INFO - Current memory usage: 1474.29 MB
2024-11-04 15:33:00,422 - INFO - Decimated mesh has 6861 points and 13124 faces.
2024-11-04 15:33:00,423 - INFO - Current memory usage: 1474.29 MB
2024-11-04 15:33:00,430 - INFO - Adding Mask 5 mesh to visualization.
2024-11-04 15:33:00,577 - INFO - Initial mesh has 10 points and 16 faces.
2024-11-04 15:33:00,577 - INFO - Current memory usage: 1474.30 MB
2024-11-04 15:33:00,578 - INFO - Decimated mesh has 6 points and 8 faces.
2024-11-04 15:33:00,578 - INFO - Current memory usage: 1474.30 MB
2024-11-04 15:33:00,586 - INFO - Adding Mask 6 mesh to visualization.
2024-11-04 15:33:00,754 - INFO - Initial mesh has 25682 points and 47478 faces.
2024-11-04 15:33:00,755 - INFO - Current memory usage: 1474.30 MB
2024-11-04 15:33:00,944 - INFO - Decimated mesh has 13956 points and 23738 faces.
2024-11-04 15:33:00,944 - INFO - Current memory usage: 1474.30 MB
2024-11-04 15:33:00,952 - INFO - Adding Mask 7 mesh to visualization.
2024-11-04 15:33:01,218 - INFO - Initial mesh has 106388 points and 215996 faces.
2024-11-04 15:33:01,218 - INFO - Current memory usage: 1474.31 MB
2024-11-04 15:33:02,730 - INFO - Decimated mesh has 52346 points and 107998 faces.
2024-11-04 15:33:02,731 - INFO - Current memory usage: 1478.56 MB
2024-11-04 15:33:02,741 - INFO - Adding Mask 8 mesh to visualization.
2024-11-04 15:33:02,938 - INFO - Initial mesh has 29036 points and 57152 faces.
2024-11-04 15:33:02,939 - INFO - Current memory usage: 1481.29 MB
2024-11-04 15:33:03,211 - INFO - Decimated mesh has 14774 points and 28575 faces.
2024-11-04 15:33:03,212 - INFO - Current memory usage: 1481.29 MB
2024-11-04 15:33:03,220 - INFO - Adding Mask 9 mesh to visualization.
2024-11-04 15:33:03,366 - INFO - Initial mesh has 4042 points and 7388 faces.
2024-11-04 15:33:03,366 - INFO - Current memory usage: 1481.31 MB
2024-11-04 15:33:03,396 - INFO - Decimated mesh has 2211 points and 3693 faces.
2024-11-04 15:33:03,397 - INFO - Current memory usage: 1481.31 MB
2024-11-04 15:33:03,405 - INFO - Adding Mask 10 mesh to visualization.
2024-11-04 15:33:03,534 - INFO - Initial mesh has 106 points and 168 faces.
2024-11-04 15:33:03,534 - INFO - Current memory usage: 1481.32 MB
2024-11-04 15:33:03,536 - INFO - Decimated mesh has 65 points and 84 faces.
2024-11-04 15:33:03,536 - INFO - Current memory usage: 1481.32 MB
2024-11-04 15:33:03,544 - INFO - Adding Mask 11 mesh to visualization.
2024-11-04 15:33:03,734 - INFO - Initial mesh has 31208 points and 61978 faces.
2024-11-04 15:33:03,735 - INFO - Current memory usage: 1481.33 MB
2024-11-04 15:33:04,079 - INFO - Decimated mesh has 15522 points and 30989 faces.
2024-11-04 15:33:04,080 - INFO - Current memory usage: 1481.33 MB
2024-11-04 15:33:04,088 - INFO - Adding Mask 12 mesh to visualization.
2024-11-04 15:33:04,233 - INFO - Initial mesh has 7898 points and 15353 faces.
2024-11-04 15:33:04,233 - INFO - Current memory usage: 1481.33 MB
2024-11-04 15:33:04,415 - INFO - Decimated mesh has 4002 points and 7676 faces.
2024-11-04 15:33:04,416 - INFO - Current memory usage: 1481.33 MB
2024-11-04 15:33:04,423 - INFO - Adding Mask 13 mesh to visualization.
2024-11-04 15:33:04,584 - INFO - Initial mesh has 17059 points and 33412 faces.
2024-11-04 15:33:04,585 - INFO - Current memory usage: 1481.34 MB
2024-11-04 15:33:04,736 - INFO - Decimated mesh has 8770 points and 16706 faces.
2024-11-04 15:33:04,736 - INFO - Current memory usage: 1481.34 MB
2024-11-04 15:33:04,744 - INFO - Adding Mask 14 mesh to visualization.
2024-11-04 15:33:04,916 - INFO - Initial mesh has 24096 points and 47269 faces.
2024-11-04 15:33:04,916 - INFO - Current memory usage: 1481.34 MB
2024-11-04 15:33:05,151 - INFO - Decimated mesh has 12049 points and 23633 faces.
2024-11-04 15:33:05,151 - INFO - Current memory usage: 1481.34 MB
2024-11-04 15:33:05,159 - INFO - Adding Mask 15 mesh to visualization.
2024-11-04 15:33:05,311 - INFO - Initial mesh has 21313 points and 42042 faces.
2024-11-04 15:33:05,311 - INFO - Current memory usage: 1481.34 MB
2024-11-04 15:33:05,530 - INFO - Decimated mesh has 10688 points and 21020 faces.
2024-11-04 15:33:05,530 - INFO - Current memory usage: 1481.34 MB
2024-11-04 15:33:05,538 - INFO - Adding Mask 16 mesh to visualization.
2024-11-04 15:33:05,719 - INFO - Initial mesh has 32060 points and 57314 faces.
2024-11-04 15:33:05,719 - INFO - Current memory usage: 1481.35 MB
2024-11-04 15:33:05,936 - INFO - Decimated mesh has 17978 points and 28657 faces.
2024-11-04 15:33:05,937 - INFO - Current memory usage: 1481.35 MB
2024-11-04 15:33:05,945 - INFO - Adding Mask 17 mesh to visualization.
2024-11-04 15:33:06,089 - INFO - Initial mesh has 8115 points and 15859 faces.
2024-11-04 15:33:06,090 - INFO - Current memory usage: 1481.36 MB
2024-11-04 15:33:06,220 - INFO - Decimated mesh has 4073 points and 7929 faces.
2024-11-04 15:33:06,220 - INFO - Current memory usage: 1481.36 MB
2024-11-04 15:33:06,228 - INFO - Adding Mask 18 mesh to visualization.
2024-11-04 15:33:06,390 - INFO - Initial mesh has 15260 points and 30014 faces.
2024-11-04 15:33:06,390 - INFO - Current memory usage: 1481.36 MB
2024-11-04 15:33:06,542 - INFO - Decimated mesh has 7673 points and 15007 faces.
2024-11-04 15:33:06,543 - INFO - Current memory usage: 1481.36 MB
2024-11-04 15:33:06,550 - INFO - Adding Mask 19 mesh to visualization.
2024-11-04 15:33:06,723 - INFO - Initial mesh has 22862 points and 45021 faces.
2024-11-04 15:33:06,724 - INFO - Current memory usage: 1481.37 MB
2024-11-04 15:33:06,949 - INFO - Decimated mesh has 11408 points and 22510 faces.
2024-11-04 15:33:06,950 - INFO - Current memory usage: 1481.37 MB
2024-11-04 15:33:06,957 - INFO - Adding Mask 20 mesh to visualization.
2024-11-04 15:33:07,110 - INFO - Initial mesh has 16643 points and 33130 faces.
2024-11-04 15:33:07,111 - INFO - Current memory usage: 1481.38 MB
2024-11-04 15:33:07,272 - INFO - Decimated mesh has 8360 points and 16564 faces.
2024-11-04 15:33:07,273 - INFO - Current memory usage: 1481.38 MB
2024-11-04 15:33:07,280 - INFO - Adding Mask 21 mesh to visualization.
2024-11-04 15:33:07,404 - INFO - Initial mesh has 30 points and 48 faces.
2024-11-04 15:33:07,404 - INFO - Current memory usage: 1481.41 MB
2024-11-04 15:33:07,405 - INFO - Decimated mesh has 18 points and 24 faces.
2024-11-04 15:33:07,406 - INFO - Current memory usage: 1481.41 MB
2024-11-04 15:33:07,413 - INFO - Adding Mask 22 mesh to visualization.
2024-11-04 15:33:07,555 - INFO - Initial mesh has 15162 points and 29831 faces.
2024-11-04 15:33:07,555 - INFO - Current memory usage: 1481.41 MB
2024-11-04 15:33:07,712 - INFO - Decimated mesh has 7572 points and 14915 faces.
2024-11-04 15:33:07,713 - INFO - Current memory usage: 1481.41 MB
2024-11-04 15:33:07,720 - INFO - Adding Mask 23 mesh to visualization.
2024-11-04 15:33:07,876 - INFO - Initial mesh has 18142 points and 35581 faces.
2024-11-04 15:33:07,876 - INFO - Current memory usage: 1481.41 MB
2024-11-04 15:33:08,045 - INFO - Decimated mesh has 9106 points and 17789 faces.
2024-11-04 15:33:08,045 - INFO - Current memory usage: 1481.41 MB
2024-11-04 15:33:08,053 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 15:33:08,478 - INFO - Translator(prefix=None)
2024-11-04 15:33:08,574 - INFO - awaiting runner setup
2024-11-04 15:33:08,574 - INFO - awaiting site startup
2024-11-04 15:33:08,575 - INFO - Print WSLINK_READY_MSG
2024-11-04 15:33:08,575 - INFO - Schedule auto shutdown with timout 0
2024-11-04 15:33:08,575 - INFO - awaiting running future
2024-11-04 15:33:24,831 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 15:33:24,860 - INFO - Current memory usage: 1495.99 MB
2024-11-04 15:33:24,898 - INFO - Selected slice indices for saving: [0, 35, 71, 107, 143]
2024-11-04 15:33:25,296 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 15:33:25,503 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 15:33:25,726 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 15:33:25,930 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 15:33:26,144 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 15:33:26,343 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-04 15:33:26,565 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-11-04 15:33:26,779 - INFO - Saved slice 0 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_7_overlay.png'.
2024-11-04 15:33:26,989 - INFO - Saved slice 0 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_8_overlay.png'.
2024-11-04 15:33:27,189 - INFO - Saved slice 0 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_9_overlay.png'.
2024-11-04 15:33:27,388 - INFO - Saved slice 0 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_10_overlay.png'.
2024-11-04 15:33:27,587 - INFO - Saved slice 0 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_11_overlay.png'.
2024-11-04 15:33:27,798 - INFO - Saved slice 0 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_12_overlay.png'.
2024-11-04 15:33:27,995 - INFO - Saved slice 0 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_13_overlay.png'.
2024-11-04 15:33:28,206 - INFO - Saved slice 0 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_14_overlay.png'.
2024-11-04 15:33:28,407 - INFO - Saved slice 0 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_15_overlay.png'.
2024-11-04 15:33:28,609 - INFO - Saved slice 0 overlay for Cluster 16 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_16_overlay.png'.
2024-11-04 15:33:28,808 - INFO - Saved slice 0 overlay for Cluster 17 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_17_overlay.png'.
2024-11-04 15:33:29,017 - INFO - Saved slice 0 overlay for Cluster 18 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_18_overlay.png'.
2024-11-04 15:33:29,244 - INFO - Saved slice 0 overlay for Cluster 19 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_19_overlay.png'.
2024-11-04 15:33:29,456 - INFO - Saved slice 0 overlay for Cluster 20 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_20_overlay.png'.
2024-11-04 15:33:29,656 - INFO - Saved slice 0 overlay for Cluster 21 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_21_overlay.png'.
2024-11-04 15:33:29,871 - INFO - Saved slice 0 overlay for Cluster 22 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_22_overlay.png'.
2024-11-04 15:33:30,067 - INFO - Saved slice 0 overlay for Cluster 23 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_23_overlay.png'.
2024-11-04 15:33:30,270 - INFO - Saved slice 35 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_0_overlay.png'.
2024-11-04 15:33:30,507 - INFO - Saved slice 35 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_1_overlay.png'.
2024-11-04 15:33:30,708 - INFO - Saved slice 35 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_2_overlay.png'.
2024-11-04 15:33:30,919 - INFO - Saved slice 35 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_3_overlay.png'.
2024-11-04 15:33:31,121 - INFO - Saved slice 35 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_4_overlay.png'.
2024-11-04 15:33:31,330 - INFO - Saved slice 35 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_5_overlay.png'.
2024-11-04 15:33:31,530 - INFO - Saved slice 35 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_6_overlay.png'.
2024-11-04 15:33:31,744 - INFO - Saved slice 35 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_7_overlay.png'.
2024-11-04 15:33:31,942 - INFO - Saved slice 35 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_8_overlay.png'.
2024-11-04 15:33:32,141 - INFO - Saved slice 35 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_9_overlay.png'.
2024-11-04 15:33:32,349 - INFO - Saved slice 35 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_10_overlay.png'.
2024-11-04 15:33:32,546 - INFO - Saved slice 35 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_11_overlay.png'.
2024-11-04 15:33:32,748 - INFO - Saved slice 35 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_12_overlay.png'.
2024-11-04 15:33:32,945 - INFO - Saved slice 35 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_13_overlay.png'.
2024-11-04 15:33:33,144 - INFO - Saved slice 35 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_14_overlay.png'.
2024-11-04 15:33:33,354 - INFO - Saved slice 35 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_15_overlay.png'.
2024-11-04 15:33:33,550 - INFO - Saved slice 35 overlay for Cluster 16 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_16_overlay.png'.
2024-11-04 15:33:33,753 - INFO - Saved slice 35 overlay for Cluster 17 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_17_overlay.png'.
2024-11-04 15:33:33,958 - INFO - Saved slice 35 overlay for Cluster 18 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_18_overlay.png'.
2024-11-04 15:33:34,171 - INFO - Saved slice 35 overlay for Cluster 19 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_19_overlay.png'.
2024-11-04 15:33:34,365 - INFO - Saved slice 35 overlay for Cluster 20 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_20_overlay.png'.
2024-11-04 15:33:34,562 - INFO - Saved slice 35 overlay for Cluster 21 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_21_overlay.png'.
2024-11-04 15:33:34,821 - INFO - Saved slice 35 overlay for Cluster 22 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_22_overlay.png'.
2024-11-04 15:33:35,017 - INFO - Saved slice 35 overlay for Cluster 23 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_23_overlay.png'.
2024-11-04 15:33:35,229 - INFO - Saved slice 71 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_0_overlay.png'.
2024-11-04 15:33:35,461 - INFO - Saved slice 71 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_1_overlay.png'.
2024-11-04 15:33:35,666 - INFO - Saved slice 71 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_2_overlay.png'.
2024-11-04 15:33:35,866 - INFO - Saved slice 71 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_3_overlay.png'.
2024-11-04 15:33:36,065 - INFO - Saved slice 71 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_4_overlay.png'.
2024-11-04 15:33:36,268 - INFO - Saved slice 71 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_5_overlay.png'.
2024-11-04 15:33:36,478 - INFO - Saved slice 71 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_6_overlay.png'.
2024-11-04 15:33:36,882 - INFO - Saved slice 71 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_7_overlay.png'.
2024-11-04 15:33:37,083 - INFO - Saved slice 71 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_8_overlay.png'.
2024-11-04 15:33:37,284 - INFO - Saved slice 71 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_9_overlay.png'.
2024-11-04 15:33:37,488 - INFO - Saved slice 71 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_10_overlay.png'.
2024-11-04 15:33:37,689 - INFO - Saved slice 71 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_11_overlay.png'.
2024-11-04 15:33:37,894 - INFO - Saved slice 71 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_12_overlay.png'.
2024-11-04 15:33:38,096 - INFO - Saved slice 71 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_13_overlay.png'.
2024-11-04 15:33:38,298 - INFO - Saved slice 71 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_14_overlay.png'.
2024-11-04 15:33:38,502 - INFO - Saved slice 71 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_15_overlay.png'.
2024-11-04 15:33:38,704 - INFO - Saved slice 71 overlay for Cluster 16 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_16_overlay.png'.
2024-11-04 15:33:38,907 - INFO - Saved slice 71 overlay for Cluster 17 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_17_overlay.png'.
2024-11-04 15:33:39,148 - INFO - Saved slice 71 overlay for Cluster 18 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_18_overlay.png'.
2024-11-04 15:33:39,355 - INFO - Saved slice 71 overlay for Cluster 19 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_19_overlay.png'.
2024-11-04 15:33:39,555 - INFO - Saved slice 71 overlay for Cluster 20 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_20_overlay.png'.
2024-11-04 15:33:39,793 - INFO - Saved slice 71 overlay for Cluster 21 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_21_overlay.png'.
2024-11-04 15:33:39,996 - INFO - Saved slice 71 overlay for Cluster 22 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_22_overlay.png'.
2024-11-04 15:33:40,203 - INFO - Saved slice 71 overlay for Cluster 23 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_23_overlay.png'.
2024-11-04 15:33:40,484 - INFO - Saved slice 107 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_0_overlay.png'.
2024-11-04 15:33:40,688 - INFO - Saved slice 107 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_1_overlay.png'.
2024-11-04 15:33:40,889 - INFO - Saved slice 107 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_2_overlay.png'.
2024-11-04 15:33:41,126 - INFO - Saved slice 107 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_3_overlay.png'.
2024-11-04 15:33:41,323 - INFO - Saved slice 107 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_4_overlay.png'.
2024-11-04 15:33:41,524 - INFO - Saved slice 107 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_5_overlay.png'.
2024-11-04 15:33:41,721 - INFO - Saved slice 107 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_6_overlay.png'.
2024-11-04 15:33:41,922 - INFO - Saved slice 107 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_7_overlay.png'.
2024-11-04 15:33:42,121 - INFO - Saved slice 107 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_8_overlay.png'.
2024-11-04 15:33:42,317 - INFO - Saved slice 107 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_9_overlay.png'.
2024-11-04 15:33:42,516 - INFO - Saved slice 107 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_10_overlay.png'.
2024-11-04 15:33:42,715 - INFO - Saved slice 107 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_11_overlay.png'.
2024-11-04 15:33:42,926 - INFO - Saved slice 107 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_12_overlay.png'.
2024-11-04 15:33:43,134 - INFO - Saved slice 107 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_13_overlay.png'.
2024-11-04 15:33:43,330 - INFO - Saved slice 107 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_14_overlay.png'.
2024-11-04 15:33:43,532 - INFO - Saved slice 107 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_15_overlay.png'.
2024-11-04 15:33:43,729 - INFO - Saved slice 107 overlay for Cluster 16 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_16_overlay.png'.
2024-11-04 15:33:43,926 - INFO - Saved slice 107 overlay for Cluster 17 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_17_overlay.png'.
2024-11-04 15:33:44,136 - INFO - Saved slice 107 overlay for Cluster 18 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_18_overlay.png'.
2024-11-04 15:33:44,331 - INFO - Saved slice 107 overlay for Cluster 19 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_19_overlay.png'.
2024-11-04 15:33:44,529 - INFO - Saved slice 107 overlay for Cluster 20 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_20_overlay.png'.
2024-11-04 15:33:44,748 - INFO - Saved slice 107 overlay for Cluster 21 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_21_overlay.png'.
2024-11-04 15:33:44,947 - INFO - Saved slice 107 overlay for Cluster 22 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_22_overlay.png'.
2024-11-04 15:33:45,141 - INFO - Saved slice 107 overlay for Cluster 23 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_23_overlay.png'.
2024-11-04 15:33:45,372 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 15:33:45,568 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 15:33:45,771 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 15:33:45,978 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 15:33:46,174 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 15:33:46,373 - INFO - Saved slice 143 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_5_overlay.png'.
2024-11-04 15:33:46,570 - INFO - Saved slice 143 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_6_overlay.png'.
2024-11-04 15:33:46,767 - INFO - Saved slice 143 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_7_overlay.png'.
2024-11-04 15:33:46,970 - INFO - Saved slice 143 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_8_overlay.png'.
2024-11-04 15:33:47,167 - INFO - Saved slice 143 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_9_overlay.png'.
2024-11-04 15:33:47,365 - INFO - Saved slice 143 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_10_overlay.png'.
2024-11-04 15:33:47,562 - INFO - Saved slice 143 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_11_overlay.png'.
2024-11-04 15:33:47,759 - INFO - Saved slice 143 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_12_overlay.png'.
2024-11-04 15:33:47,958 - INFO - Saved slice 143 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_13_overlay.png'.
2024-11-04 15:33:48,157 - INFO - Saved slice 143 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_14_overlay.png'.
2024-11-04 15:33:48,357 - INFO - Saved slice 143 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_15_overlay.png'.
2024-11-04 15:33:48,553 - INFO - Saved slice 143 overlay for Cluster 16 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_16_overlay.png'.
2024-11-04 15:33:48,751 - INFO - Saved slice 143 overlay for Cluster 17 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_17_overlay.png'.
2024-11-04 15:33:49,002 - INFO - Saved slice 143 overlay for Cluster 18 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_18_overlay.png'.
2024-11-04 15:33:49,206 - INFO - Saved slice 143 overlay for Cluster 19 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_19_overlay.png'.
2024-11-04 15:33:49,406 - INFO - Saved slice 143 overlay for Cluster 20 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_20_overlay.png'.
2024-11-04 15:33:49,630 - INFO - Saved slice 143 overlay for Cluster 21 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_21_overlay.png'.
2024-11-04 15:33:49,830 - INFO - Saved slice 143 overlay for Cluster 22 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_22_overlay.png'.
2024-11-04 15:33:50,025 - INFO - Saved slice 143 overlay for Cluster 23 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_23_overlay.png'.
2024-11-04 15:33:50,032 - INFO - Pipeline completed successfully.
2024-11-04 15:33:50,032 - INFO - Current memory usage: 1410.84 MB
2024-11-04 16:02:10,177 - INFO - Logging initiated.
2024-11-04 16:02:10,177 - INFO - Pipeline started.
2024-11-04 16:02:10,177 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 16:02:10,686 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 16:02:11,011 - INFO - Denoised image loaded.
2024-11-04 16:02:11,012 - INFO - Current memory usage: 508.11 MB
2024-11-04 16:02:11,023 - INFO - Starting intensity normalization.
2024-11-04 16:02:12,146 - INFO - Intensity normalization complete.
2024-11-04 16:02:12,146 - INFO - Current memory usage: 520.32 MB
2024-11-04 16:02:12,156 - INFO - Using top half of the MRI data: new shape (144, 381, 260)
2024-11-04 16:02:12,156 - INFO - Computing neighborhood statistics.
2024-11-04 16:02:12,972 - INFO - Neighborhood statistics computed.
2024-11-04 16:02:12,972 - INFO - Current memory usage: 520.30 MB
2024-11-04 16:02:12,973 - INFO - Computing z-axis value for each voxel.
2024-11-04 16:02:21,697 - INFO - Z-axis value for each voxel computed.
2024-11-04 16:02:21,697 - INFO - Current memory usage: 626.70 MB
2024-11-04 16:02:21,697 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 16:02:23,225 - INFO - Features shape: (14264640, 4)
2024-11-04 16:02:23,229 - INFO - Current memory usage: 869.08 MB
2024-11-04 16:02:23,229 - INFO - Plotting feature distributions.
2024-11-04 16:02:29,516 - INFO - Feature distributions plotted.
2024-11-04 16:02:29,566 - INFO - Performing MiniBatch K-Means clustering with k=24, batch_size=10000, connectivity_weight=0.1.
2024-11-04 16:03:58,211 - INFO - Logging initiated.
2024-11-04 16:03:58,211 - INFO - Pipeline started.
2024-11-04 16:03:58,211 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 16:03:58,510 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 16:03:58,633 - INFO - Denoised image loaded.
2024-11-04 16:03:58,634 - INFO - Current memory usage: 515.17 MB
2024-11-04 16:03:58,641 - INFO - Starting intensity normalization.
2024-11-04 16:03:59,379 - INFO - Intensity normalization complete.
2024-11-04 16:03:59,379 - INFO - Current memory usage: 542.59 MB
2024-11-04 16:03:59,384 - INFO - Using top half of the MRI data: new shape (144, 254, 260)
2024-11-04 16:03:59,384 - INFO - Computing neighborhood statistics.
2024-11-04 16:03:59,751 - INFO - Neighborhood statistics computed.
2024-11-04 16:03:59,752 - INFO - Current memory usage: 506.19 MB
2024-11-04 16:03:59,752 - INFO - Computing z-axis value for each voxel.
2024-11-04 16:04:05,593 - INFO - Z-axis value for each voxel computed.
2024-11-04 16:04:05,594 - INFO - Current memory usage: 578.79 MB
2024-11-04 16:04:05,594 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 16:04:06,635 - INFO - Features shape: (9509760, 4)
2024-11-04 16:04:06,636 - INFO - Current memory usage: 760.14 MB
2024-11-04 16:04:06,636 - INFO - Plotting feature distributions.
2024-11-04 16:04:14,562 - INFO - Feature distributions plotted.
2024-11-04 16:04:14,584 - INFO - Performing MiniBatch K-Means clustering with k=24, batch_size=10000, connectivity_weight=0.1.
2024-11-04 16:04:20,096 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 16:04:27,865 - INFO - Clustering complete with spatial connectivity.
2024-11-04 16:04:27,875 - INFO - Current memory usage: 1249.96 MB
2024-11-04 16:04:27,917 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 16:04:27,917 - INFO - Current memory usage: 742.09 MB
2024-11-04 16:04:27,935 - INFO - Processing Cluster 0.
2024-11-04 16:04:27,953 - INFO - Cluster 0: Initial voxel count = 642038.
2024-11-04 16:04:27,953 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:28,473 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:28,998 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:29,342 - INFO - Cluster 0: Refined voxel count = 605748.
2024-11-04 16:04:29,385 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 16:04:29,437 - INFO - Cluster 0: Mean Intensity = -0.17770595848560333
2024-11-04 16:04:29,437 - INFO - Processing Cluster 1.
2024-11-04 16:04:29,459 - INFO - Cluster 1: Initial voxel count = 429116.
2024-11-04 16:04:29,459 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:29,984 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:30,596 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:30,874 - INFO - Cluster 1: Refined voxel count = 410571.
2024-11-04 16:04:30,899 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 16:04:30,946 - INFO - Cluster 1: Mean Intensity = -0.20072080194950104
2024-11-04 16:04:30,946 - INFO - Processing Cluster 2.
2024-11-04 16:04:30,970 - INFO - Cluster 2: Initial voxel count = 140594.
2024-11-04 16:04:30,970 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:31,492 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:32,006 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:32,417 - INFO - Cluster 2: Refined voxel count = 127765.
2024-11-04 16:04:32,440 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 16:04:32,490 - INFO - Cluster 2: Mean Intensity = 9.74351978302002
2024-11-04 16:04:32,490 - INFO - Processing Cluster 3.
2024-11-04 16:04:32,512 - INFO - Cluster 3: Initial voxel count = 604286.
2024-11-04 16:04:32,512 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:33,027 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:33,558 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:33,962 - INFO - Cluster 3: Refined voxel count = 262785.
2024-11-04 16:04:33,974 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 16:04:34,036 - INFO - Cluster 3: Mean Intensity = -0.04914788529276848
2024-11-04 16:04:34,036 - INFO - Processing Cluster 4.
2024-11-04 16:04:34,052 - INFO - Cluster 4: Initial voxel count = 607441.
2024-11-04 16:04:34,052 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:34,568 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:35,087 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:35,369 - INFO - Cluster 4: Refined voxel count = 602084.
2024-11-04 16:04:35,397 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 16:04:35,444 - INFO - Cluster 4: Mean Intensity = -0.19605311751365662
2024-11-04 16:04:35,444 - INFO - Processing Cluster 5.
2024-11-04 16:04:35,467 - INFO - Cluster 5: Initial voxel count = 119951.
2024-11-04 16:04:35,468 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:35,987 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:36,507 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:36,789 - INFO - Cluster 5: Refined voxel count = 28.
2024-11-04 16:04:36,822 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-04 16:04:36,876 - INFO - Cluster 5: Mean Intensity = 0.5778564810752869
2024-11-04 16:04:36,876 - INFO - Processing Cluster 6.
2024-11-04 16:04:36,893 - INFO - Cluster 6: Initial voxel count = 392839.
2024-11-04 16:04:36,894 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:37,417 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:37,951 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:38,244 - INFO - Cluster 6: Refined voxel count = 293097.
2024-11-04 16:04:38,272 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-11-04 16:04:38,317 - INFO - Cluster 6: Mean Intensity = -0.11484743654727936
2024-11-04 16:04:38,317 - INFO - Processing Cluster 7.
2024-11-04 16:04:38,332 - INFO - Cluster 7: Initial voxel count = 628453.
2024-11-04 16:04:38,332 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:38,849 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:39,400 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:39,691 - INFO - Cluster 7: Refined voxel count = 609903.
2024-11-04 16:04:39,714 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-11-04 16:04:39,760 - INFO - Cluster 7: Mean Intensity = -0.18980497121810913
2024-11-04 16:04:39,760 - INFO - Processing Cluster 8.
2024-11-04 16:04:39,781 - INFO - Cluster 8: Initial voxel count = 99775.
2024-11-04 16:04:39,781 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:40,297 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:40,820 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:41,150 - INFO - Cluster 8: Refined voxel count = 23490.
2024-11-04 16:04:41,176 - INFO - Refined mask for Cluster 8 saved as 'csf_mask_class_8_refined_2.tif'.
2024-11-04 16:04:41,225 - INFO - Cluster 8: Mean Intensity = 5.102349758148193
2024-11-04 16:04:41,225 - INFO - Processing Cluster 9.
2024-11-04 16:04:41,241 - INFO - Cluster 9: Initial voxel count = 681886.
2024-11-04 16:04:41,241 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:41,756 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:42,282 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:42,588 - INFO - Cluster 9: Refined voxel count = 670724.
2024-11-04 16:04:42,603 - INFO - Refined mask for Cluster 9 saved as 'csf_mask_class_9_refined_2.tif'.
2024-11-04 16:04:42,654 - INFO - Cluster 9: Mean Intensity = -0.17792820930480957
2024-11-04 16:04:42,654 - INFO - Processing Cluster 10.
2024-11-04 16:04:42,681 - INFO - Cluster 10: Initial voxel count = 788385.
2024-11-04 16:04:42,682 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:43,224 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:43,749 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:44,107 - INFO - Cluster 10: Refined voxel count = 78439.
2024-11-04 16:04:44,136 - INFO - Refined mask for Cluster 10 saved as 'csf_mask_class_10_refined_2.tif'.
2024-11-04 16:04:44,226 - INFO - Cluster 10: Mean Intensity = 0.06439542025327682
2024-11-04 16:04:44,226 - INFO - Processing Cluster 11.
2024-11-04 16:04:44,249 - INFO - Cluster 11: Initial voxel count = 57773.
2024-11-04 16:04:44,249 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:45,021 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:45,575 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:45,920 - INFO - Cluster 11: Refined voxel count = 7930.
2024-11-04 16:04:45,934 - INFO - Refined mask for Cluster 11 saved as 'csf_mask_class_11_refined_2.tif'.
2024-11-04 16:04:45,986 - INFO - Cluster 11: Mean Intensity = 2.173949718475342
2024-11-04 16:04:45,986 - INFO - Processing Cluster 12.
2024-11-04 16:04:46,008 - INFO - Cluster 12: Initial voxel count = 423832.
2024-11-04 16:04:46,008 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:46,522 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:47,041 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:47,342 - INFO - Cluster 12: Refined voxel count = 285625.
2024-11-04 16:04:47,366 - INFO - Refined mask for Cluster 12 saved as 'csf_mask_class_12_refined_2.tif'.
2024-11-04 16:04:47,425 - INFO - Cluster 12: Mean Intensity = -0.058024369180202484
2024-11-04 16:04:47,425 - INFO - Processing Cluster 13.
2024-11-04 16:04:47,449 - INFO - Cluster 13: Initial voxel count = 91825.
2024-11-04 16:04:47,449 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:47,962 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:48,486 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:48,824 - INFO - Cluster 13: Refined voxel count = 92.
2024-11-04 16:04:48,849 - INFO - Refined mask for Cluster 13 saved as 'csf_mask_class_13_refined_2.tif'.
2024-11-04 16:04:48,912 - INFO - Cluster 13: Mean Intensity = 1.4538156986236572
2024-11-04 16:04:48,912 - INFO - Processing Cluster 14.
2024-11-04 16:04:48,935 - INFO - Cluster 14: Initial voxel count = 65498.
2024-11-04 16:04:48,935 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:49,454 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:49,972 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:50,283 - INFO - Cluster 14: Refined voxel count = 433.
2024-11-04 16:04:50,312 - INFO - Refined mask for Cluster 14 saved as 'csf_mask_class_14_refined_2.tif'.
2024-11-04 16:04:50,379 - INFO - Cluster 14: Mean Intensity = 5.628945827484131
2024-11-04 16:04:50,379 - INFO - Processing Cluster 15.
2024-11-04 16:04:50,399 - INFO - Cluster 15: Initial voxel count = 722064.
2024-11-04 16:04:50,400 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:50,919 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:51,451 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:51,816 - INFO - Cluster 15: Refined voxel count = 692843.
2024-11-04 16:04:51,840 - INFO - Refined mask for Cluster 15 saved as 'csf_mask_class_15_refined_2.tif'.
2024-11-04 16:04:51,929 - INFO - Cluster 15: Mean Intensity = -0.1781192272901535
2024-11-04 16:04:51,929 - INFO - Processing Cluster 16.
2024-11-04 16:04:51,953 - INFO - Cluster 16: Initial voxel count = 470935.
2024-11-04 16:04:51,953 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:52,473 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:52,994 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:53,323 - INFO - Cluster 16: Refined voxel count = 437640.
2024-11-04 16:04:53,347 - INFO - Refined mask for Cluster 16 saved as 'csf_mask_class_16_refined_2.tif'.
2024-11-04 16:04:53,416 - INFO - Cluster 16: Mean Intensity = -0.1923699975013733
2024-11-04 16:04:53,416 - INFO - Processing Cluster 17.
2024-11-04 16:04:53,437 - INFO - Cluster 17: Initial voxel count = 398229.
2024-11-04 16:04:53,438 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:53,952 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:54,476 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:54,845 - INFO - Cluster 17: Refined voxel count = 371913.
2024-11-04 16:04:54,869 - INFO - Refined mask for Cluster 17 saved as 'csf_mask_class_17_refined_2.tif'.
2024-11-04 16:04:54,958 - INFO - Cluster 17: Mean Intensity = -0.1921275556087494
2024-11-04 16:04:54,958 - INFO - Processing Cluster 18.
2024-11-04 16:04:54,982 - INFO - Cluster 18: Initial voxel count = 455241.
2024-11-04 16:04:54,982 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:55,497 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:56,022 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:56,391 - INFO - Cluster 18: Refined voxel count = 271963.
2024-11-04 16:04:56,412 - INFO - Refined mask for Cluster 18 saved as 'csf_mask_class_18_refined_2.tif'.
2024-11-04 16:04:56,514 - INFO - Cluster 18: Mean Intensity = -0.07142448425292969
2024-11-04 16:04:56,514 - INFO - Processing Cluster 19.
2024-11-04 16:04:56,533 - INFO - Cluster 19: Initial voxel count = 136998.
2024-11-04 16:04:56,533 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:57,057 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:57,581 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:57,940 - INFO - Cluster 19: Refined voxel count = 7.
2024-11-04 16:04:57,962 - INFO - Refined mask for Cluster 19 saved as 'csf_mask_class_19_refined_2.tif'.
2024-11-04 16:04:58,054 - INFO - Cluster 19: Mean Intensity = 0.11410479992628098
2024-11-04 16:04:58,055 - INFO - Processing Cluster 20.
2024-11-04 16:04:58,077 - INFO - Cluster 20: Initial voxel count = 255722.
2024-11-04 16:04:58,077 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:04:58,591 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:04:59,131 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:04:59,482 - INFO - Cluster 20: Refined voxel count = 105721.
2024-11-04 16:04:59,503 - INFO - Refined mask for Cluster 20 saved as 'csf_mask_class_20_refined_2.tif'.
2024-11-04 16:04:59,672 - INFO - Cluster 20: Mean Intensity = 0.6115036010742188
2024-11-04 16:04:59,672 - INFO - Processing Cluster 21.
2024-11-04 16:04:59,692 - INFO - Cluster 21: Initial voxel count = 554767.
2024-11-04 16:04:59,692 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:05:00,215 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:05:00,743 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:05:01,085 - INFO - Cluster 21: Refined voxel count = 59220.
2024-11-04 16:05:01,146 - INFO - Refined mask for Cluster 21 saved as 'csf_mask_class_21_refined_2.tif'.
2024-11-04 16:05:01,305 - INFO - Cluster 21: Mean Intensity = 0.24133116006851196
2024-11-04 16:05:01,305 - INFO - Processing Cluster 22.
2024-11-04 16:05:01,318 - INFO - Cluster 22: Initial voxel count = 663874.
2024-11-04 16:05:01,318 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:05:01,826 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:05:02,337 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:05:02,707 - INFO - Cluster 22: Refined voxel count = 640467.
2024-11-04 16:05:02,729 - INFO - Refined mask for Cluster 22 saved as 'csf_mask_class_22_refined_2.tif'.
2024-11-04 16:05:02,841 - INFO - Cluster 22: Mean Intensity = -0.16938020288944244
2024-11-04 16:05:02,841 - INFO - Processing Cluster 23.
2024-11-04 16:05:02,859 - INFO - Cluster 23: Initial voxel count = 78238.
2024-11-04 16:05:02,859 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:05:03,370 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:05:03,888 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:05:04,286 - INFO - Cluster 23: Refined voxel count = 2443.
2024-11-04 16:05:04,313 - INFO - Refined mask for Cluster 23 saved as 'csf_mask_class_23_refined_2.tif'.
2024-11-04 16:05:04,430 - INFO - Cluster 23: Mean Intensity = 9.19542407989502
2024-11-04 16:05:04,431 - INFO - CSF is identified as cluster 1.
2024-11-04 16:05:04,431 - INFO - Starting visualization with PyVista.
2024-11-04 16:05:05,150 - INFO - Adding Original MRI volume.
2024-11-04 16:05:05,598 - INFO - Adding Denoised MRI volume.
2024-11-04 16:05:05,933 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 16:05:06,068 - INFO - Initial mesh has 13142 points and 25519 faces.
2024-11-04 16:05:06,068 - INFO - Current memory usage: 999.26 MB
2024-11-04 16:05:06,209 - INFO - Decimated mesh has 6640 points and 12758 faces.
2024-11-04 16:05:06,209 - INFO - Current memory usage: 1005.01 MB
2024-11-04 16:05:06,219 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 16:05:06,334 - INFO - Initial mesh has 9349 points and 18259 faces.
2024-11-04 16:05:06,334 - INFO - Current memory usage: 1011.60 MB
2024-11-04 16:05:06,431 - INFO - Decimated mesh has 4676 points and 9128 faces.
2024-11-04 16:05:06,431 - INFO - Current memory usage: 1011.60 MB
2024-11-04 16:05:06,439 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 16:05:06,567 - INFO - Initial mesh has 14593 points and 29006 faces.
2024-11-04 16:05:06,568 - INFO - Current memory usage: 1011.60 MB
2024-11-04 16:05:06,722 - INFO - Decimated mesh has 7341 points and 14502 faces.
2024-11-04 16:05:06,723 - INFO - Current memory usage: 1013.35 MB
2024-11-04 16:05:06,731 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 16:05:07,154 - INFO - Initial mesh has 70589 points and 143720 faces.
2024-11-04 16:05:07,155 - INFO - Current memory usage: 1025.82 MB
2024-11-04 16:05:08,179 - INFO - Decimated mesh has 34722 points and 71860 faces.
2024-11-04 16:05:08,180 - INFO - Current memory usage: 1075.57 MB
2024-11-04 16:05:08,192 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 16:05:08,317 - INFO - Initial mesh has 9509 points and 18685 faces.
2024-11-04 16:05:08,318 - INFO - Current memory usage: 1076.34 MB
2024-11-04 16:05:08,417 - INFO - Decimated mesh has 4761 points and 9341 faces.
2024-11-04 16:05:08,417 - INFO - Current memory usage: 1076.34 MB
2024-11-04 16:05:08,425 - INFO - Adding Mask 5 mesh to visualization.
2024-11-04 16:05:08,566 - INFO - Initial mesh has 20 points and 32 faces.
2024-11-04 16:05:08,566 - INFO - Current memory usage: 1075.72 MB
2024-11-04 16:05:08,567 - INFO - Decimated mesh has 12 points and 16 faces.
2024-11-04 16:05:08,567 - INFO - Current memory usage: 1075.72 MB
2024-11-04 16:05:08,575 - INFO - Adding Mask 6 mesh to visualization.
2024-11-04 16:05:08,759 - INFO - Initial mesh has 39175 points and 78568 faces.
2024-11-04 16:05:08,759 - INFO - Current memory usage: 1075.60 MB
2024-11-04 16:05:09,196 - INFO - Decimated mesh has 19279 points and 39284 faces.
2024-11-04 16:05:09,196 - INFO - Current memory usage: 1075.60 MB
2024-11-04 16:05:09,205 - INFO - Adding Mask 7 mesh to visualization.
2024-11-04 16:05:09,312 - INFO - Initial mesh has 11394 points and 22117 faces.
2024-11-04 16:05:09,313 - INFO - Current memory usage: 1075.61 MB
2024-11-04 16:05:09,431 - INFO - Decimated mesh has 5745 points and 11058 faces.
2024-11-04 16:05:09,431 - INFO - Current memory usage: 1075.61 MB
2024-11-04 16:05:09,438 - INFO - Adding Mask 8 mesh to visualization.
2024-11-04 16:05:09,540 - INFO - Initial mesh has 11506 points and 22464 faces.
2024-11-04 16:05:09,541 - INFO - Current memory usage: 1075.59 MB
2024-11-04 16:05:09,642 - INFO - Decimated mesh has 5930 points and 11231 faces.
2024-11-04 16:05:09,643 - INFO - Current memory usage: 1075.59 MB
2024-11-04 16:05:09,652 - INFO - Adding Mask 9 mesh to visualization.
2024-11-04 16:05:09,792 - INFO - Initial mesh has 13786 points and 27137 faces.
2024-11-04 16:05:09,792 - INFO - Current memory usage: 1075.59 MB
2024-11-04 16:05:09,929 - INFO - Decimated mesh has 6876 points and 13568 faces.
2024-11-04 16:05:09,930 - INFO - Current memory usage: 1075.59 MB
2024-11-04 16:05:09,937 - INFO - Adding Mask 10 mesh to visualization.
2024-11-04 16:05:10,138 - INFO - Initial mesh has 41896 points and 77954 faces.
2024-11-04 16:05:10,139 - INFO - Current memory usage: 1075.59 MB
2024-11-04 16:05:10,478 - INFO - Decimated mesh has 22582 points and 38977 faces.
2024-11-04 16:05:10,479 - INFO - Current memory usage: 1077.34 MB
2024-11-04 16:05:10,486 - INFO - Adding Mask 11 mesh to visualization.
2024-11-04 16:05:10,598 - INFO - Initial mesh has 3505 points and 6332 faces.
2024-11-04 16:05:10,598 - INFO - Current memory usage: 1078.89 MB
2024-11-04 16:05:10,624 - INFO - Decimated mesh has 1930 points and 3165 faces.
2024-11-04 16:05:10,625 - INFO - Current memory usage: 1078.89 MB
2024-11-04 16:05:10,635 - INFO - Adding Mask 12 mesh to visualization.
2024-11-04 16:05:10,798 - INFO - Initial mesh has 53226 points and 109308 faces.
2024-11-04 16:05:10,798 - INFO - Current memory usage: 1078.89 MB
2024-11-04 16:05:11,404 - INFO - Decimated mesh has 25928 points and 54653 faces.
2024-11-04 16:05:11,405 - INFO - Current memory usage: 1081.64 MB
2024-11-04 16:05:11,418 - INFO - Adding Mask 13 mesh to visualization.
2024-11-04 16:05:11,534 - INFO - Initial mesh has 42 points and 64 faces.
2024-11-04 16:05:11,535 - INFO - Current memory usage: 1086.09 MB
2024-11-04 16:05:11,536 - INFO - Decimated mesh has 26 points and 30 faces.
2024-11-04 16:05:11,536 - INFO - Current memory usage: 1086.09 MB
2024-11-04 16:05:11,544 - INFO - Adding Mask 14 mesh to visualization.
2024-11-04 16:05:11,662 - INFO - Initial mesh has 260 points and 412 faces.
2024-11-04 16:05:11,662 - INFO - Current memory usage: 1086.09 MB
2024-11-04 16:05:11,664 - INFO - Decimated mesh has 159 points and 204 faces.
2024-11-04 16:05:11,665 - INFO - Current memory usage: 1086.09 MB
2024-11-04 16:05:11,672 - INFO - Adding Mask 15 mesh to visualization.
2024-11-04 16:05:11,778 - INFO - Initial mesh has 12877 points and 25033 faces.
2024-11-04 16:05:11,778 - INFO - Current memory usage: 1086.11 MB
2024-11-04 16:05:11,902 - INFO - Decimated mesh has 6493 points and 12515 faces.
2024-11-04 16:05:11,903 - INFO - Current memory usage: 1086.11 MB
2024-11-04 16:05:11,910 - INFO - Adding Mask 16 mesh to visualization.
2024-11-04 16:05:12,028 - INFO - Initial mesh has 11615 points and 22617 faces.
2024-11-04 16:05:12,028 - INFO - Current memory usage: 1086.11 MB
2024-11-04 16:05:12,146 - INFO - Decimated mesh has 5823 points and 11307 faces.
2024-11-04 16:05:12,146 - INFO - Current memory usage: 1086.11 MB
2024-11-04 16:05:12,153 - INFO - Adding Mask 17 mesh to visualization.
2024-11-04 16:05:12,255 - INFO - Initial mesh has 12748 points and 25024 faces.
2024-11-04 16:05:12,255 - INFO - Current memory usage: 1086.15 MB
2024-11-04 16:05:12,384 - INFO - Decimated mesh has 6384 points and 12512 faces.
2024-11-04 16:05:12,385 - INFO - Current memory usage: 1086.15 MB
2024-11-04 16:05:12,392 - INFO - Adding Mask 18 mesh to visualization.
2024-11-04 16:05:12,570 - INFO - Initial mesh has 55080 points and 111998 faces.
2024-11-04 16:05:12,570 - INFO - Current memory usage: 1086.15 MB
2024-11-04 16:05:13,205 - INFO - Decimated mesh has 26884 points and 55998 faces.
2024-11-04 16:05:13,205 - INFO - Current memory usage: 1089.15 MB
2024-11-04 16:05:13,218 - INFO - Adding Mask 19 mesh to visualization.
2024-11-04 16:05:13,327 - INFO - Initial mesh has 10 points and 16 faces.
2024-11-04 16:05:13,327 - INFO - Current memory usage: 1098.32 MB
2024-11-04 16:05:13,328 - INFO - Decimated mesh has 6 points and 8 faces.
2024-11-04 16:05:13,328 - INFO - Current memory usage: 1098.32 MB
2024-11-04 16:05:13,337 - INFO - Adding Mask 20 mesh to visualization.
2024-11-04 16:05:13,473 - INFO - Initial mesh has 24062 points and 47300 faces.
2024-11-04 16:05:13,474 - INFO - Current memory usage: 1098.33 MB
2024-11-04 16:05:13,702 - INFO - Decimated mesh has 12236 points and 23650 faces.
2024-11-04 16:05:13,702 - INFO - Current memory usage: 1098.33 MB
2024-11-04 16:05:13,710 - INFO - Adding Mask 21 mesh to visualization.
2024-11-04 16:05:13,856 - INFO - Initial mesh has 27218 points and 50482 faces.
2024-11-04 16:05:13,856 - INFO - Current memory usage: 1098.21 MB
2024-11-04 16:05:14,085 - INFO - Decimated mesh has 14679 points and 25240 faces.
2024-11-04 16:05:14,085 - INFO - Current memory usage: 1098.21 MB
2024-11-04 16:05:14,094 - INFO - Adding Mask 22 mesh to visualization.
2024-11-04 16:05:14,850 - INFO - Initial mesh has 15054 points and 29459 faces.
2024-11-04 16:05:14,850 - INFO - Current memory usage: 1098.21 MB
2024-11-04 16:05:15,011 - INFO - Decimated mesh has 7526 points and 14728 faces.
2024-11-04 16:05:15,011 - INFO - Current memory usage: 1098.21 MB
2024-11-04 16:05:15,019 - INFO - Adding Mask 23 mesh to visualization.
2024-11-04 16:05:15,131 - INFO - Initial mesh has 1568 points and 2636 faces.
2024-11-04 16:05:15,132 - INFO - Current memory usage: 1098.22 MB
2024-11-04 16:05:15,142 - INFO - Decimated mesh has 920 points and 1318 faces.
2024-11-04 16:05:15,143 - INFO - Current memory usage: 1098.22 MB
2024-11-04 16:05:15,152 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:05:15,618 - INFO - Translator(prefix=None)
2024-11-04 16:05:15,806 - INFO - awaiting runner setup
2024-11-04 16:05:15,807 - INFO - awaiting site startup
2024-11-04 16:05:15,812 - INFO - Print WSLINK_READY_MSG
2024-11-04 16:05:15,812 - INFO - Schedule auto shutdown with timout 0
2024-11-04 16:05:15,812 - INFO - awaiting running future
2024-11-04 16:05:30,037 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:05:30,063 - INFO - Current memory usage: 1130.45 MB
2024-11-04 16:05:30,095 - INFO - Selected slice indices for saving: [0, 35, 71, 107, 143]
2024-11-04 16:05:30,605 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 16:05:30,871 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 16:05:31,127 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 16:05:31,383 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 16:05:31,638 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 16:05:31,892 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-04 16:05:32,146 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-11-04 16:05:32,392 - INFO - Saved slice 0 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_7_overlay.png'.
2024-11-04 16:05:32,645 - INFO - Saved slice 0 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_8_overlay.png'.
2024-11-04 16:05:32,900 - INFO - Saved slice 0 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_9_overlay.png'.
2024-11-04 16:05:33,148 - INFO - Saved slice 0 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_10_overlay.png'.
2024-11-04 16:05:33,398 - INFO - Saved slice 0 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_11_overlay.png'.
2024-11-04 16:05:33,647 - INFO - Saved slice 0 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_12_overlay.png'.
2024-11-04 16:05:33,898 - INFO - Saved slice 0 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_13_overlay.png'.
2024-11-04 16:05:34,159 - INFO - Saved slice 0 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_14_overlay.png'.
2024-11-04 16:05:34,404 - INFO - Saved slice 0 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_15_overlay.png'.
2024-11-04 16:05:34,697 - INFO - Saved slice 0 overlay for Cluster 16 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_16_overlay.png'.
2024-11-04 16:05:34,947 - INFO - Saved slice 0 overlay for Cluster 17 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_17_overlay.png'.
2024-11-04 16:05:35,195 - INFO - Saved slice 0 overlay for Cluster 18 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_18_overlay.png'.
2024-11-04 16:05:35,447 - INFO - Saved slice 0 overlay for Cluster 19 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_19_overlay.png'.
2024-11-04 16:05:35,704 - INFO - Saved slice 0 overlay for Cluster 20 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_20_overlay.png'.
2024-11-04 16:05:35,958 - INFO - Saved slice 0 overlay for Cluster 21 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_21_overlay.png'.
2024-11-04 16:05:36,215 - INFO - Saved slice 0 overlay for Cluster 22 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_22_overlay.png'.
2024-11-04 16:05:36,452 - INFO - Saved slice 0 overlay for Cluster 23 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_23_overlay.png'.
2024-11-04 16:05:36,682 - INFO - Saved slice 35 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_0_overlay.png'.
2024-11-04 16:05:36,911 - INFO - Saved slice 35 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_1_overlay.png'.
2024-11-04 16:05:37,138 - INFO - Saved slice 35 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_2_overlay.png'.
2024-11-04 16:05:37,380 - INFO - Saved slice 35 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_3_overlay.png'.
2024-11-04 16:05:37,611 - INFO - Saved slice 35 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_4_overlay.png'.
2024-11-04 16:05:37,841 - INFO - Saved slice 35 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_5_overlay.png'.
2024-11-04 16:05:38,069 - INFO - Saved slice 35 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_6_overlay.png'.
2024-11-04 16:05:38,291 - INFO - Saved slice 35 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_7_overlay.png'.
2024-11-04 16:05:38,520 - INFO - Saved slice 35 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_8_overlay.png'.
2024-11-04 16:05:38,751 - INFO - Saved slice 35 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_9_overlay.png'.
2024-11-04 16:05:38,976 - INFO - Saved slice 35 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_10_overlay.png'.
2024-11-04 16:05:39,213 - INFO - Saved slice 35 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_11_overlay.png'.
2024-11-04 16:05:39,436 - INFO - Saved slice 35 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_12_overlay.png'.
2024-11-04 16:05:39,672 - INFO - Saved slice 35 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_13_overlay.png'.
2024-11-04 16:05:39,899 - INFO - Saved slice 35 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_14_overlay.png'.
2024-11-04 16:05:40,121 - INFO - Saved slice 35 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_15_overlay.png'.
2024-11-04 16:05:40,359 - INFO - Saved slice 35 overlay for Cluster 16 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_16_overlay.png'.
2024-11-04 16:05:40,588 - INFO - Saved slice 35 overlay for Cluster 17 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_17_overlay.png'.
2024-11-04 16:05:40,823 - INFO - Saved slice 35 overlay for Cluster 18 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_18_overlay.png'.
2024-11-04 16:05:41,061 - INFO - Saved slice 35 overlay for Cluster 19 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_19_overlay.png'.
2024-11-04 16:05:41,294 - INFO - Saved slice 35 overlay for Cluster 20 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_20_overlay.png'.
2024-11-04 16:05:41,531 - INFO - Saved slice 35 overlay for Cluster 21 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_21_overlay.png'.
2024-11-04 16:05:41,759 - INFO - Saved slice 35 overlay for Cluster 22 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_22_overlay.png'.
2024-11-04 16:05:41,977 - INFO - Saved slice 35 overlay for Cluster 23 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_35_cluster_23_overlay.png'.
2024-11-04 16:05:42,213 - INFO - Saved slice 71 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_0_overlay.png'.
2024-11-04 16:05:42,440 - INFO - Saved slice 71 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_1_overlay.png'.
2024-11-04 16:05:42,674 - INFO - Saved slice 71 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_2_overlay.png'.
2024-11-04 16:05:42,913 - INFO - Saved slice 71 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_3_overlay.png'.
2024-11-04 16:05:43,146 - INFO - Saved slice 71 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_4_overlay.png'.
2024-11-04 16:05:43,377 - INFO - Saved slice 71 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_5_overlay.png'.
2024-11-04 16:05:43,619 - INFO - Saved slice 71 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_6_overlay.png'.
2024-11-04 16:05:43,851 - INFO - Saved slice 71 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_7_overlay.png'.
2024-11-04 16:05:44,093 - INFO - Saved slice 71 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_8_overlay.png'.
2024-11-04 16:05:44,332 - INFO - Saved slice 71 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_9_overlay.png'.
2024-11-04 16:05:44,564 - INFO - Saved slice 71 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_10_overlay.png'.
2024-11-04 16:05:44,803 - INFO - Saved slice 71 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_11_overlay.png'.
2024-11-04 16:05:45,036 - INFO - Saved slice 71 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_12_overlay.png'.
2024-11-04 16:05:45,276 - INFO - Saved slice 71 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_13_overlay.png'.
2024-11-04 16:05:45,504 - INFO - Saved slice 71 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_14_overlay.png'.
2024-11-04 16:05:45,738 - INFO - Saved slice 71 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_15_overlay.png'.
2024-11-04 16:05:45,977 - INFO - Saved slice 71 overlay for Cluster 16 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_16_overlay.png'.
2024-11-04 16:05:46,214 - INFO - Saved slice 71 overlay for Cluster 17 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_17_overlay.png'.
2024-11-04 16:05:46,445 - INFO - Saved slice 71 overlay for Cluster 18 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_18_overlay.png'.
2024-11-04 16:05:46,684 - INFO - Saved slice 71 overlay for Cluster 19 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_19_overlay.png'.
2024-11-04 16:05:46,923 - INFO - Saved slice 71 overlay for Cluster 20 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_20_overlay.png'.
2024-11-04 16:05:47,349 - INFO - Saved slice 71 overlay for Cluster 21 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_21_overlay.png'.
2024-11-04 16:05:47,579 - INFO - Saved slice 71 overlay for Cluster 22 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_22_overlay.png'.
2024-11-04 16:05:47,811 - INFO - Saved slice 71 overlay for Cluster 23 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_23_overlay.png'.
2024-11-04 16:05:48,036 - INFO - Saved slice 107 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_0_overlay.png'.
2024-11-04 16:05:48,273 - INFO - Saved slice 107 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_1_overlay.png'.
2024-11-04 16:05:48,526 - INFO - Saved slice 107 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_2_overlay.png'.
2024-11-04 16:05:48,758 - INFO - Saved slice 107 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_3_overlay.png'.
2024-11-04 16:05:48,985 - INFO - Saved slice 107 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_4_overlay.png'.
2024-11-04 16:05:49,223 - INFO - Saved slice 107 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_5_overlay.png'.
2024-11-04 16:05:49,447 - INFO - Saved slice 107 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_6_overlay.png'.
2024-11-04 16:05:49,675 - INFO - Saved slice 107 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_7_overlay.png'.
2024-11-04 16:05:49,899 - INFO - Saved slice 107 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_8_overlay.png'.
2024-11-04 16:05:50,123 - INFO - Saved slice 107 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_9_overlay.png'.
2024-11-04 16:05:50,357 - INFO - Saved slice 107 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_10_overlay.png'.
2024-11-04 16:05:50,580 - INFO - Saved slice 107 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_11_overlay.png'.
2024-11-04 16:05:50,812 - INFO - Saved slice 107 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_12_overlay.png'.
2024-11-04 16:05:51,038 - INFO - Saved slice 107 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_13_overlay.png'.
2024-11-04 16:05:51,273 - INFO - Saved slice 107 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_14_overlay.png'.
2024-11-04 16:05:51,495 - INFO - Saved slice 107 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_15_overlay.png'.
2024-11-04 16:05:51,731 - INFO - Saved slice 107 overlay for Cluster 16 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_16_overlay.png'.
2024-11-04 16:05:51,968 - INFO - Saved slice 107 overlay for Cluster 17 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_17_overlay.png'.
2024-11-04 16:05:52,218 - INFO - Saved slice 107 overlay for Cluster 18 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_18_overlay.png'.
2024-11-04 16:05:52,439 - INFO - Saved slice 107 overlay for Cluster 19 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_19_overlay.png'.
2024-11-04 16:05:52,671 - INFO - Saved slice 107 overlay for Cluster 20 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_20_overlay.png'.
2024-11-04 16:05:52,909 - INFO - Saved slice 107 overlay for Cluster 21 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_21_overlay.png'.
2024-11-04 16:05:53,139 - INFO - Saved slice 107 overlay for Cluster 22 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_22_overlay.png'.
2024-11-04 16:05:53,371 - INFO - Saved slice 107 overlay for Cluster 23 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_107_cluster_23_overlay.png'.
2024-11-04 16:05:53,620 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 16:05:53,868 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 16:05:54,126 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 16:05:54,387 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 16:05:54,633 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 16:05:54,882 - INFO - Saved slice 143 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_5_overlay.png'.
2024-11-04 16:05:55,124 - INFO - Saved slice 143 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_6_overlay.png'.
2024-11-04 16:05:55,371 - INFO - Saved slice 143 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_7_overlay.png'.
2024-11-04 16:05:55,622 - INFO - Saved slice 143 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_8_overlay.png'.
2024-11-04 16:05:55,868 - INFO - Saved slice 143 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_9_overlay.png'.
2024-11-04 16:05:56,125 - INFO - Saved slice 143 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_10_overlay.png'.
2024-11-04 16:05:56,372 - INFO - Saved slice 143 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_11_overlay.png'.
2024-11-04 16:05:56,617 - INFO - Saved slice 143 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_12_overlay.png'.
2024-11-04 16:05:56,872 - INFO - Saved slice 143 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_13_overlay.png'.
2024-11-04 16:05:57,116 - INFO - Saved slice 143 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_14_overlay.png'.
2024-11-04 16:05:57,368 - INFO - Saved slice 143 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_15_overlay.png'.
2024-11-04 16:05:57,616 - INFO - Saved slice 143 overlay for Cluster 16 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_16_overlay.png'.
2024-11-04 16:05:57,865 - INFO - Saved slice 143 overlay for Cluster 17 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_17_overlay.png'.
2024-11-04 16:05:58,113 - INFO - Saved slice 143 overlay for Cluster 18 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_18_overlay.png'.
2024-11-04 16:05:58,358 - INFO - Saved slice 143 overlay for Cluster 19 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_19_overlay.png'.
2024-11-04 16:05:58,608 - INFO - Saved slice 143 overlay for Cluster 20 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_20_overlay.png'.
2024-11-04 16:05:58,858 - INFO - Saved slice 143 overlay for Cluster 21 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_21_overlay.png'.
2024-11-04 16:05:59,115 - INFO - Saved slice 143 overlay for Cluster 22 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_22_overlay.png'.
2024-11-04 16:05:59,375 - INFO - Saved slice 143 overlay for Cluster 23 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_23_overlay.png'.
2024-11-04 16:05:59,383 - INFO - Pipeline completed successfully.
2024-11-04 16:05:59,383 - INFO - Current memory usage: 1079.94 MB
2024-11-04 16:05:59,383 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 16:05:59,405 - INFO - Computed density profiles along x and y axes.
2024-11-04 16:05:59,405 - INFO - Mask is highly dispersed across both x and y axes. Applying folding (symmetrization).
2024-11-04 16:05:59,410 - INFO - ----- Step 12: Removing Eyes from the CSF Mask -----
2024-11-04 16:05:59,411 - INFO - Removing eyes at centers: [(72, 32, 65), (72, 32, 195)] with radius 10 voxels.
2024-11-04 16:07:23,365 - INFO - Logging initiated.
2024-11-04 16:07:23,365 - INFO - Pipeline started.
2024-11-04 16:07:23,365 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 16:07:23,631 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 16:07:23,759 - INFO - Denoised image loaded.
2024-11-04 16:07:23,760 - INFO - Current memory usage: 515.88 MB
2024-11-04 16:07:23,766 - INFO - Starting intensity normalization.
2024-11-04 16:07:24,390 - INFO - Intensity normalization complete.
2024-11-04 16:07:24,390 - INFO - Current memory usage: 543.25 MB
2024-11-04 16:07:24,394 - INFO - Using top half of the MRI data: new shape (144, 254, 260)
2024-11-04 16:07:24,395 - INFO - Computing neighborhood statistics.
2024-11-04 16:07:24,738 - INFO - Neighborhood statistics computed.
2024-11-04 16:07:24,738 - INFO - Current memory usage: 506.89 MB
2024-11-04 16:07:24,738 - INFO - Computing z-axis value for each voxel.
2024-11-04 16:07:29,944 - INFO - Z-axis value for each voxel computed.
2024-11-04 16:07:29,944 - INFO - Current memory usage: 579.41 MB
2024-11-04 16:07:29,944 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 16:07:30,413 - INFO - Features shape: (9509760, 4)
2024-11-04 16:07:30,413 - INFO - Current memory usage: 756.20 MB
2024-11-04 16:07:30,413 - INFO - Performing MiniBatch K-Means clustering with k=24, batch_size=10000, connectivity_weight=0.1.
2024-11-04 16:07:33,879 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 16:07:40,636 - INFO - Clustering complete with spatial connectivity.
2024-11-04 16:07:40,636 - INFO - Current memory usage: 1260.90 MB
2024-11-04 16:07:40,673 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 16:07:40,673 - INFO - Current memory usage: 753.02 MB
2024-11-04 16:07:40,686 - INFO - Processing Cluster 0.
2024-11-04 16:07:40,704 - INFO - Cluster 0: Initial voxel count = 642038.
2024-11-04 16:07:40,704 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:07:41,209 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:07:41,706 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:07:41,923 - INFO - Cluster 0: Refined voxel count = 605748.
2024-11-04 16:07:41,946 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 16:07:41,987 - INFO - Cluster 0: Mean Intensity = -0.17770595848560333
2024-11-04 16:07:41,988 - INFO - Processing Cluster 1.
2024-11-04 16:07:42,007 - INFO - Cluster 1: Initial voxel count = 429116.
2024-11-04 16:07:42,007 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:07:42,505 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:07:42,984 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:07:43,187 - INFO - Cluster 1: Refined voxel count = 410571.
2024-11-04 16:07:43,211 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 16:07:43,259 - INFO - Cluster 1: Mean Intensity = -0.20072080194950104
2024-11-04 16:07:43,259 - INFO - Processing Cluster 2.
2024-11-04 16:07:43,279 - INFO - Cluster 2: Initial voxel count = 140594.
2024-11-04 16:07:43,279 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:07:43,792 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:07:44,296 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:07:44,501 - INFO - Cluster 2: Refined voxel count = 127765.
2024-11-04 16:07:44,523 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 16:07:44,574 - INFO - Cluster 2: Mean Intensity = 9.74351978302002
2024-11-04 16:07:44,574 - INFO - Processing Cluster 3.
2024-11-04 16:07:44,588 - INFO - Cluster 3: Initial voxel count = 604286.
2024-11-04 16:07:44,588 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:07:45,087 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:07:45,569 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:07:45,777 - INFO - Cluster 3: Refined voxel count = 262785.
2024-11-04 16:07:45,803 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 16:07:45,862 - INFO - Cluster 3: Mean Intensity = -0.04914788529276848
2024-11-04 16:07:45,862 - INFO - Processing Cluster 4.
2024-11-04 16:07:45,876 - INFO - Cluster 4: Initial voxel count = 607441.
2024-11-04 16:07:45,876 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:07:46,363 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:07:46,857 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:07:47,076 - INFO - Cluster 4: Refined voxel count = 602084.
2024-11-04 16:07:47,087 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 16:07:47,125 - INFO - Cluster 4: Mean Intensity = -0.19605311751365662
2024-11-04 16:07:47,125 - INFO - Processing Cluster 5.
2024-11-04 16:07:47,142 - INFO - Cluster 5: Initial voxel count = 119951.
2024-11-04 16:07:47,142 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:07:47,622 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:07:48,092 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:07:48,313 - INFO - Cluster 5: Refined voxel count = 28.
2024-11-04 16:07:48,340 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-04 16:07:48,385 - INFO - Cluster 5: Mean Intensity = 0.5778564810752869
2024-11-04 16:07:48,386 - INFO - Processing Cluster 6.
2024-11-04 16:07:48,407 - INFO - Cluster 6: Initial voxel count = 392839.
2024-11-04 16:07:48,407 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:07:48,882 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:07:49,315 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:07:49,531 - INFO - Cluster 6: Refined voxel count = 293097.
2024-11-04 16:07:49,560 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-11-04 16:07:49,620 - INFO - Cluster 6: Mean Intensity = -0.11484743654727936
2024-11-04 16:07:49,620 - INFO - Processing Cluster 7.
2024-11-04 16:07:49,637 - INFO - Cluster 7: Initial voxel count = 628453.
2024-11-04 16:07:49,637 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:07:50,117 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:07:50,525 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:07:50,719 - INFO - Cluster 7: Refined voxel count = 609903.
2024-11-04 16:07:50,739 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-11-04 16:07:50,790 - INFO - Cluster 7: Mean Intensity = -0.18980497121810913
2024-11-04 16:07:50,790 - INFO - Processing Cluster 8.
2024-11-04 16:07:50,810 - INFO - Cluster 8: Initial voxel count = 99775.
2024-11-04 16:07:50,810 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:07:51,300 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:07:51,804 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:07:52,073 - INFO - Cluster 8: Refined voxel count = 23490.
2024-11-04 16:07:52,095 - INFO - Refined mask for Cluster 8 saved as 'csf_mask_class_8_refined_2.tif'.
2024-11-04 16:07:52,141 - INFO - Cluster 8: Mean Intensity = 5.102349758148193
2024-11-04 16:07:52,141 - INFO - Processing Cluster 9.
2024-11-04 16:07:52,163 - INFO - Cluster 9: Initial voxel count = 681886.
2024-11-04 16:07:52,163 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:07:52,652 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:07:53,130 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:07:53,372 - INFO - Cluster 9: Refined voxel count = 670724.
2024-11-04 16:07:53,394 - INFO - Refined mask for Cluster 9 saved as 'csf_mask_class_9_refined_2.tif'.
2024-11-04 16:07:53,438 - INFO - Cluster 9: Mean Intensity = -0.17792820930480957
2024-11-04 16:07:53,438 - INFO - Processing Cluster 10.
2024-11-04 16:07:53,454 - INFO - Cluster 10: Initial voxel count = 788385.
2024-11-04 16:07:53,455 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:07:53,937 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:07:54,411 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:07:54,655 - INFO - Cluster 10: Refined voxel count = 78439.
2024-11-04 16:07:54,679 - INFO - Refined mask for Cluster 10 saved as 'csf_mask_class_10_refined_2.tif'.
2024-11-04 16:07:54,763 - INFO - Cluster 10: Mean Intensity = 0.06439542025327682
2024-11-04 16:07:54,764 - INFO - Processing Cluster 11.
2024-11-04 16:07:54,781 - INFO - Cluster 11: Initial voxel count = 57773.
2024-11-04 16:07:54,781 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:07:55,260 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:07:55,741 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:07:56,019 - INFO - Cluster 11: Refined voxel count = 7930.
2024-11-04 16:07:56,034 - INFO - Refined mask for Cluster 11 saved as 'csf_mask_class_11_refined_2.tif'.
2024-11-04 16:07:56,087 - INFO - Cluster 11: Mean Intensity = 2.173949718475342
2024-11-04 16:07:56,087 - INFO - Processing Cluster 12.
2024-11-04 16:07:56,105 - INFO - Cluster 12: Initial voxel count = 423832.
2024-11-04 16:07:56,106 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:07:56,595 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:07:57,076 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:07:57,325 - INFO - Cluster 12: Refined voxel count = 285625.
2024-11-04 16:07:57,347 - INFO - Refined mask for Cluster 12 saved as 'csf_mask_class_12_refined_2.tif'.
2024-11-04 16:07:57,409 - INFO - Cluster 12: Mean Intensity = -0.058024369180202484
2024-11-04 16:07:57,409 - INFO - Processing Cluster 13.
2024-11-04 16:07:57,426 - INFO - Cluster 13: Initial voxel count = 91825.
2024-11-04 16:07:57,426 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:07:57,943 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:07:58,422 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:07:58,693 - INFO - Cluster 13: Refined voxel count = 92.
2024-11-04 16:07:58,714 - INFO - Refined mask for Cluster 13 saved as 'csf_mask_class_13_refined_2.tif'.
2024-11-04 16:07:58,808 - INFO - Cluster 13: Mean Intensity = 1.4538156986236572
2024-11-04 16:07:58,808 - INFO - Processing Cluster 14.
2024-11-04 16:07:58,821 - INFO - Cluster 14: Initial voxel count = 65498.
2024-11-04 16:07:58,822 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:07:59,307 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:07:59,801 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:08:00,096 - INFO - Cluster 14: Refined voxel count = 433.
2024-11-04 16:08:00,110 - INFO - Refined mask for Cluster 14 saved as 'csf_mask_class_14_refined_2.tif'.
2024-11-04 16:08:00,201 - INFO - Cluster 14: Mean Intensity = 5.628945827484131
2024-11-04 16:08:00,201 - INFO - Processing Cluster 15.
2024-11-04 16:08:00,215 - INFO - Cluster 15: Initial voxel count = 722064.
2024-11-04 16:08:00,215 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:08:00,704 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:08:01,175 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:08:01,437 - INFO - Cluster 15: Refined voxel count = 692843.
2024-11-04 16:08:01,458 - INFO - Refined mask for Cluster 15 saved as 'csf_mask_class_15_refined_2.tif'.
2024-11-04 16:08:01,573 - INFO - Cluster 15: Mean Intensity = -0.1781192272901535
2024-11-04 16:08:01,573 - INFO - Processing Cluster 16.
2024-11-04 16:08:01,587 - INFO - Cluster 16: Initial voxel count = 470935.
2024-11-04 16:08:01,587 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:08:02,061 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:08:02,521 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:08:02,821 - INFO - Cluster 16: Refined voxel count = 437640.
2024-11-04 16:08:02,848 - INFO - Refined mask for Cluster 16 saved as 'csf_mask_class_16_refined_2.tif'.
2024-11-04 16:08:02,985 - INFO - Cluster 16: Mean Intensity = -0.1923699975013733
2024-11-04 16:08:02,985 - INFO - Processing Cluster 17.
2024-11-04 16:08:02,998 - INFO - Cluster 17: Initial voxel count = 398229.
2024-11-04 16:08:02,998 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:08:03,422 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:08:03,790 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:08:04,046 - INFO - Cluster 17: Refined voxel count = 371913.
2024-11-04 16:08:04,069 - INFO - Refined mask for Cluster 17 saved as 'csf_mask_class_17_refined_2.tif'.
2024-11-04 16:08:04,168 - INFO - Cluster 17: Mean Intensity = -0.1921275556087494
2024-11-04 16:08:04,168 - INFO - Processing Cluster 18.
2024-11-04 16:08:04,182 - INFO - Cluster 18: Initial voxel count = 455241.
2024-11-04 16:08:04,182 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:08:04,623 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:08:05,054 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:08:05,355 - INFO - Cluster 18: Refined voxel count = 271963.
2024-11-04 16:08:05,376 - INFO - Refined mask for Cluster 18 saved as 'csf_mask_class_18_refined_2.tif'.
2024-11-04 16:08:05,506 - INFO - Cluster 18: Mean Intensity = -0.07142448425292969
2024-11-04 16:08:05,506 - INFO - Processing Cluster 19.
2024-11-04 16:08:05,518 - INFO - Cluster 19: Initial voxel count = 136998.
2024-11-04 16:08:05,519 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:08:05,925 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:08:06,296 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:08:06,570 - INFO - Cluster 19: Refined voxel count = 7.
2024-11-04 16:08:06,591 - INFO - Refined mask for Cluster 19 saved as 'csf_mask_class_19_refined_2.tif'.
2024-11-04 16:08:06,691 - INFO - Cluster 19: Mean Intensity = 0.11410479992628098
2024-11-04 16:08:06,691 - INFO - Processing Cluster 20.
2024-11-04 16:08:06,704 - INFO - Cluster 20: Initial voxel count = 255722.
2024-11-04 16:08:06,704 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:08:07,120 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:08:07,493 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:08:07,766 - INFO - Cluster 20: Refined voxel count = 105721.
2024-11-04 16:08:07,788 - INFO - Refined mask for Cluster 20 saved as 'csf_mask_class_20_refined_2.tif'.
2024-11-04 16:08:07,922 - INFO - Cluster 20: Mean Intensity = 0.6115036010742188
2024-11-04 16:08:07,923 - INFO - Processing Cluster 21.
2024-11-04 16:08:07,936 - INFO - Cluster 21: Initial voxel count = 554767.
2024-11-04 16:08:07,937 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:08:08,426 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:08:08,918 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:08:09,233 - INFO - Cluster 21: Refined voxel count = 59220.
2024-11-04 16:08:09,253 - INFO - Refined mask for Cluster 21 saved as 'csf_mask_class_21_refined_2.tif'.
2024-11-04 16:08:09,348 - INFO - Cluster 21: Mean Intensity = 0.24133116006851196
2024-11-04 16:08:09,348 - INFO - Processing Cluster 22.
2024-11-04 16:08:09,364 - INFO - Cluster 22: Initial voxel count = 663874.
2024-11-04 16:08:09,364 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:08:09,853 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:08:10,320 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:08:10,626 - INFO - Cluster 22: Refined voxel count = 640467.
2024-11-04 16:08:10,649 - INFO - Refined mask for Cluster 22 saved as 'csf_mask_class_22_refined_2.tif'.
2024-11-04 16:08:10,794 - INFO - Cluster 22: Mean Intensity = -0.16938020288944244
2024-11-04 16:08:10,794 - INFO - Processing Cluster 23.
2024-11-04 16:08:10,807 - INFO - Cluster 23: Initial voxel count = 78238.
2024-11-04 16:08:10,807 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:08:11,245 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:08:11,634 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:08:11,900 - INFO - Cluster 23: Refined voxel count = 2443.
2024-11-04 16:08:11,922 - INFO - Refined mask for Cluster 23 saved as 'csf_mask_class_23_refined_2.tif'.
2024-11-04 16:08:12,059 - INFO - Cluster 23: Mean Intensity = 9.19542407989502
2024-11-04 16:08:12,060 - INFO - CSF is identified as cluster 1.
2024-11-04 16:08:12,060 - INFO - Starting visualization with PyVista.
2024-11-04 16:08:12,525 - INFO - Adding Original MRI volume.
2024-11-04 16:08:12,874 - INFO - Adding Denoised MRI volume.
2024-11-04 16:08:13,132 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 16:08:13,249 - INFO - Initial mesh has 13142 points and 25519 faces.
2024-11-04 16:08:13,250 - INFO - Current memory usage: 987.84 MB
2024-11-04 16:08:13,381 - INFO - Decimated mesh has 6640 points and 12758 faces.
2024-11-04 16:08:13,382 - INFO - Current memory usage: 996.79 MB
2024-11-04 16:08:13,390 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 16:08:13,492 - INFO - Initial mesh has 9349 points and 18259 faces.
2024-11-04 16:08:13,492 - INFO - Current memory usage: 1002.56 MB
2024-11-04 16:08:13,587 - INFO - Decimated mesh has 4676 points and 9128 faces.
2024-11-04 16:08:13,588 - INFO - Current memory usage: 1002.56 MB
2024-11-04 16:08:13,595 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 16:08:13,702 - INFO - Initial mesh has 14593 points and 29006 faces.
2024-11-04 16:08:13,703 - INFO - Current memory usage: 1002.44 MB
2024-11-04 16:08:13,847 - INFO - Decimated mesh has 7341 points and 14502 faces.
2024-11-04 16:08:13,847 - INFO - Current memory usage: 1004.19 MB
2024-11-04 16:08:13,855 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 16:08:14,140 - INFO - Initial mesh has 70589 points and 143720 faces.
2024-11-04 16:08:14,141 - INFO - Current memory usage: 1015.30 MB
2024-11-04 16:08:14,936 - INFO - Decimated mesh has 34722 points and 71860 faces.
2024-11-04 16:08:14,936 - INFO - Current memory usage: 1066.02 MB
2024-11-04 16:08:14,944 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 16:08:15,047 - INFO - Initial mesh has 9509 points and 18685 faces.
2024-11-04 16:08:15,047 - INFO - Current memory usage: 1066.45 MB
2024-11-04 16:08:15,145 - INFO - Decimated mesh has 4761 points and 9341 faces.
2024-11-04 16:08:15,146 - INFO - Current memory usage: 1066.45 MB
2024-11-04 16:08:15,153 - INFO - Adding Mask 5 mesh to visualization.
2024-11-04 16:08:15,295 - INFO - Initial mesh has 20 points and 32 faces.
2024-11-04 16:08:15,295 - INFO - Current memory usage: 1066.45 MB
2024-11-04 16:08:15,296 - INFO - Decimated mesh has 12 points and 16 faces.
2024-11-04 16:08:15,297 - INFO - Current memory usage: 1066.45 MB
2024-11-04 16:08:15,304 - INFO - Adding Mask 6 mesh to visualization.
2024-11-04 16:08:15,458 - INFO - Initial mesh has 39175 points and 78568 faces.
2024-11-04 16:08:15,458 - INFO - Current memory usage: 1066.46 MB
2024-11-04 16:08:15,852 - INFO - Decimated mesh has 19279 points and 39284 faces.
2024-11-04 16:08:15,852 - INFO - Current memory usage: 1066.46 MB
2024-11-04 16:08:15,860 - INFO - Adding Mask 7 mesh to visualization.
2024-11-04 16:08:15,986 - INFO - Initial mesh has 11394 points and 22117 faces.
2024-11-04 16:08:15,987 - INFO - Current memory usage: 1066.46 MB
2024-11-04 16:08:16,101 - INFO - Decimated mesh has 5745 points and 11058 faces.
2024-11-04 16:08:16,102 - INFO - Current memory usage: 1066.46 MB
2024-11-04 16:08:16,109 - INFO - Adding Mask 8 mesh to visualization.
2024-11-04 16:08:16,208 - INFO - Initial mesh has 11506 points and 22464 faces.
2024-11-04 16:08:16,209 - INFO - Current memory usage: 1066.46 MB
2024-11-04 16:08:16,303 - INFO - Decimated mesh has 5930 points and 11231 faces.
2024-11-04 16:08:16,303 - INFO - Current memory usage: 1066.46 MB
2024-11-04 16:08:16,311 - INFO - Adding Mask 9 mesh to visualization.
2024-11-04 16:08:16,433 - INFO - Initial mesh has 13786 points and 27137 faces.
2024-11-04 16:08:16,433 - INFO - Current memory usage: 1065.96 MB
2024-11-04 16:08:16,561 - INFO - Decimated mesh has 6876 points and 13568 faces.
2024-11-04 16:08:16,562 - INFO - Current memory usage: 1065.96 MB
2024-11-04 16:08:16,569 - INFO - Adding Mask 10 mesh to visualization.
2024-11-04 16:08:16,704 - INFO - Initial mesh has 41896 points and 77954 faces.
2024-11-04 16:08:16,704 - INFO - Current memory usage: 1065.36 MB
2024-11-04 16:08:17,064 - INFO - Decimated mesh has 22582 points and 38977 faces.
2024-11-04 16:08:17,064 - INFO - Current memory usage: 1067.11 MB
2024-11-04 16:08:17,072 - INFO - Adding Mask 11 mesh to visualization.
2024-11-04 16:08:17,177 - INFO - Initial mesh has 3505 points and 6332 faces.
2024-11-04 16:08:17,177 - INFO - Current memory usage: 1068.65 MB
2024-11-04 16:08:17,206 - INFO - Decimated mesh has 1930 points and 3165 faces.
2024-11-04 16:08:17,206 - INFO - Current memory usage: 1068.65 MB
2024-11-04 16:08:17,216 - INFO - Adding Mask 12 mesh to visualization.
2024-11-04 16:08:17,370 - INFO - Initial mesh has 53226 points and 109308 faces.
2024-11-04 16:08:17,371 - INFO - Current memory usage: 1068.65 MB
2024-11-04 16:08:17,929 - INFO - Decimated mesh has 25928 points and 54653 faces.
2024-11-04 16:08:17,930 - INFO - Current memory usage: 1071.40 MB
2024-11-04 16:08:17,938 - INFO - Adding Mask 13 mesh to visualization.
2024-11-04 16:08:18,054 - INFO - Initial mesh has 42 points and 64 faces.
2024-11-04 16:08:18,054 - INFO - Current memory usage: 1077.11 MB
2024-11-04 16:08:18,055 - INFO - Decimated mesh has 26 points and 30 faces.
2024-11-04 16:08:18,056 - INFO - Current memory usage: 1077.11 MB
2024-11-04 16:08:18,063 - INFO - Adding Mask 14 mesh to visualization.
2024-11-04 16:08:18,166 - INFO - Initial mesh has 260 points and 412 faces.
2024-11-04 16:08:18,167 - INFO - Current memory usage: 1077.11 MB
2024-11-04 16:08:18,168 - INFO - Decimated mesh has 159 points and 204 faces.
2024-11-04 16:08:18,169 - INFO - Current memory usage: 1077.11 MB
2024-11-04 16:08:18,176 - INFO - Adding Mask 15 mesh to visualization.
2024-11-04 16:08:18,298 - INFO - Initial mesh has 12877 points and 25033 faces.
2024-11-04 16:08:18,298 - INFO - Current memory usage: 1077.12 MB
2024-11-04 16:08:18,425 - INFO - Decimated mesh has 6493 points and 12515 faces.
2024-11-04 16:08:18,425 - INFO - Current memory usage: 1077.12 MB
2024-11-04 16:08:18,433 - INFO - Adding Mask 16 mesh to visualization.
2024-11-04 16:08:18,548 - INFO - Initial mesh has 11615 points and 22617 faces.
2024-11-04 16:08:18,548 - INFO - Current memory usage: 1076.98 MB
2024-11-04 16:08:18,662 - INFO - Decimated mesh has 5823 points and 11307 faces.
2024-11-04 16:08:18,662 - INFO - Current memory usage: 1076.98 MB
2024-11-04 16:08:18,669 - INFO - Adding Mask 17 mesh to visualization.
2024-11-04 16:08:18,771 - INFO - Initial mesh has 12748 points and 25024 faces.
2024-11-04 16:08:18,772 - INFO - Current memory usage: 1076.74 MB
2024-11-04 16:08:18,903 - INFO - Decimated mesh has 6384 points and 12512 faces.
2024-11-04 16:08:18,904 - INFO - Current memory usage: 1076.74 MB
2024-11-04 16:08:18,912 - INFO - Adding Mask 18 mesh to visualization.
2024-11-04 16:08:19,088 - INFO - Initial mesh has 55080 points and 111998 faces.
2024-11-04 16:08:19,089 - INFO - Current memory usage: 1075.50 MB
2024-11-04 16:08:19,672 - INFO - Decimated mesh has 26884 points and 55998 faces.
2024-11-04 16:08:19,672 - INFO - Current memory usage: 1076.50 MB
2024-11-04 16:08:19,680 - INFO - Adding Mask 19 mesh to visualization.
2024-11-04 16:08:19,790 - INFO - Initial mesh has 10 points and 16 faces.
2024-11-04 16:08:19,791 - INFO - Current memory usage: 1085.15 MB
2024-11-04 16:08:19,792 - INFO - Decimated mesh has 6 points and 8 faces.
2024-11-04 16:08:19,792 - INFO - Current memory usage: 1085.15 MB
2024-11-04 16:08:19,801 - INFO - Adding Mask 20 mesh to visualization.
2024-11-04 16:08:19,928 - INFO - Initial mesh has 24062 points and 47300 faces.
2024-11-04 16:08:19,928 - INFO - Current memory usage: 1085.12 MB
2024-11-04 16:08:20,144 - INFO - Decimated mesh has 12236 points and 23650 faces.
2024-11-04 16:08:20,144 - INFO - Current memory usage: 1085.12 MB
2024-11-04 16:08:20,152 - INFO - Adding Mask 21 mesh to visualization.
2024-11-04 16:08:20,294 - INFO - Initial mesh has 27218 points and 50482 faces.
2024-11-04 16:08:20,294 - INFO - Current memory usage: 1085.13 MB
2024-11-04 16:08:20,499 - INFO - Decimated mesh has 14679 points and 25240 faces.
2024-11-04 16:08:20,499 - INFO - Current memory usage: 1085.13 MB
2024-11-04 16:08:20,507 - INFO - Adding Mask 22 mesh to visualization.
2024-11-04 16:08:20,616 - INFO - Initial mesh has 15054 points and 29459 faces.
2024-11-04 16:08:20,617 - INFO - Current memory usage: 1085.14 MB
2024-11-04 16:08:20,757 - INFO - Decimated mesh has 7526 points and 14728 faces.
2024-11-04 16:08:20,758 - INFO - Current memory usage: 1085.14 MB
2024-11-04 16:08:20,765 - INFO - Adding Mask 23 mesh to visualization.
2024-11-04 16:08:20,876 - INFO - Initial mesh has 1568 points and 2636 faces.
2024-11-04 16:08:20,877 - INFO - Current memory usage: 1085.14 MB
2024-11-04 16:08:20,886 - INFO - Decimated mesh has 920 points and 1318 faces.
2024-11-04 16:08:20,886 - INFO - Current memory usage: 1085.14 MB
2024-11-04 16:08:20,895 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:08:21,544 - INFO - Translator(prefix=None)
2024-11-04 16:08:21,683 - INFO - awaiting runner setup
2024-11-04 16:08:21,684 - INFO - awaiting site startup
2024-11-04 16:08:21,685 - INFO - Print WSLINK_READY_MSG
2024-11-04 16:08:21,685 - INFO - Schedule auto shutdown with timout 0
2024-11-04 16:08:21,686 - INFO - awaiting running future
2024-11-04 16:08:34,431 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:08:34,460 - INFO - Current memory usage: 1084.01 MB
2024-11-04 16:08:34,509 - INFO - Selected slice indices for saving: [0]
2024-11-04 16:08:35,567 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 16:08:35,828 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 16:08:36,086 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 16:08:36,486 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 16:08:36,733 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 16:08:36,981 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-04 16:08:37,227 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-11-04 16:08:37,469 - INFO - Saved slice 0 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_7_overlay.png'.
2024-11-04 16:08:37,715 - INFO - Saved slice 0 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_8_overlay.png'.
2024-11-04 16:08:37,959 - INFO - Saved slice 0 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_9_overlay.png'.
2024-11-04 16:08:38,203 - INFO - Saved slice 0 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_10_overlay.png'.
2024-11-04 16:08:38,442 - INFO - Saved slice 0 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_11_overlay.png'.
2024-11-04 16:08:38,680 - INFO - Saved slice 0 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_12_overlay.png'.
2024-11-04 16:08:38,922 - INFO - Saved slice 0 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_13_overlay.png'.
2024-11-04 16:08:39,187 - INFO - Saved slice 0 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_14_overlay.png'.
2024-11-04 16:08:39,433 - INFO - Saved slice 0 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_15_overlay.png'.
2024-11-04 16:08:39,674 - INFO - Saved slice 0 overlay for Cluster 16 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_16_overlay.png'.
2024-11-04 16:08:39,910 - INFO - Saved slice 0 overlay for Cluster 17 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_17_overlay.png'.
2024-11-04 16:08:40,150 - INFO - Saved slice 0 overlay for Cluster 18 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_18_overlay.png'.
2024-11-04 16:08:40,388 - INFO - Saved slice 0 overlay for Cluster 19 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_19_overlay.png'.
2024-11-04 16:08:40,647 - INFO - Saved slice 0 overlay for Cluster 20 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_20_overlay.png'.
2024-11-04 16:08:40,892 - INFO - Saved slice 0 overlay for Cluster 21 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_21_overlay.png'.
2024-11-04 16:08:41,131 - INFO - Saved slice 0 overlay for Cluster 22 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_22_overlay.png'.
2024-11-04 16:08:41,372 - INFO - Saved slice 0 overlay for Cluster 23 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_23_overlay.png'.
2024-11-04 16:08:41,379 - INFO - Pipeline completed successfully.
2024-11-04 16:08:41,380 - INFO - Current memory usage: 1060.13 MB
2024-11-04 16:08:41,380 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 16:08:41,401 - INFO - Computed density profiles along x and y axes.
2024-11-04 16:08:41,401 - INFO - Mask is highly dispersed across both x and y axes. Applying folding (symmetrization).
2024-11-04 16:08:41,403 - INFO - ----- Step 12: Removing Eyes from the CSF Mask -----
2024-11-04 16:08:41,404 - INFO - Removing eyes at centers: [(72, 32, 65), (72, 32, 195)] with radius 10 voxels.
2024-11-04 16:08:41,483 - INFO - Refined CSF mask with eyes removed saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/csf_mask_refined_final.tif'.
2024-11-04 16:08:41,483 - INFO - ----- Step 13: Calculating CSF Volume -----
2024-11-04 16:08:41,488 - INFO - Total CSF Volume: 372323.7987118162 mm³
2024-11-04 16:08:41,488 - INFO - ----- Final Visualization -----
2024-11-04 16:08:41,489 - INFO - Starting visualization with PyVista.
2024-11-04 16:08:41,544 - INFO - Adding Original MRI volume.
2024-11-04 16:08:41,856 - INFO - Adding Denoised MRI volume.
2024-11-04 16:08:42,191 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 16:08:42,319 - INFO - Initial mesh has 13142 points and 25519 faces.
2024-11-04 16:08:42,319 - INFO - Current memory usage: 1174.33 MB
2024-11-04 16:08:42,459 - INFO - Decimated mesh has 6640 points and 12758 faces.
2024-11-04 16:08:42,460 - INFO - Current memory usage: 1174.33 MB
2024-11-04 16:08:42,468 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 16:08:42,520 - INFO - Initial mesh has 8007 points and 15576 faces.
2024-11-04 16:08:42,520 - INFO - Current memory usage: 1183.33 MB
2024-11-04 16:08:42,606 - INFO - Decimated mesh has 4016 points and 7787 faces.
2024-11-04 16:08:42,606 - INFO - Current memory usage: 1183.33 MB
2024-11-04 16:08:42,614 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 16:08:42,727 - INFO - Initial mesh has 14593 points and 29006 faces.
2024-11-04 16:08:42,728 - INFO - Current memory usage: 1183.15 MB
2024-11-04 16:08:42,916 - INFO - Decimated mesh has 7341 points and 14502 faces.
2024-11-04 16:08:42,917 - INFO - Current memory usage: 1183.15 MB
2024-11-04 16:08:42,927 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 16:08:43,260 - INFO - Initial mesh has 70589 points and 143720 faces.
2024-11-04 16:08:43,261 - INFO - Current memory usage: 1183.09 MB
2024-11-04 16:08:44,101 - INFO - Decimated mesh has 34722 points and 71860 faces.
2024-11-04 16:08:44,101 - INFO - Current memory usage: 1210.59 MB
2024-11-04 16:08:44,110 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 16:08:44,236 - INFO - Initial mesh has 9509 points and 18685 faces.
2024-11-04 16:08:44,236 - INFO - Current memory usage: 1213.69 MB
2024-11-04 16:08:44,332 - INFO - Decimated mesh has 4761 points and 9341 faces.
2024-11-04 16:08:44,333 - INFO - Current memory usage: 1213.69 MB
2024-11-04 16:08:44,340 - INFO - Adding Mask 5 mesh to visualization.
2024-11-04 16:08:44,441 - INFO - Initial mesh has 20 points and 32 faces.
2024-11-04 16:08:44,442 - INFO - Current memory usage: 1213.69 MB
2024-11-04 16:08:44,443 - INFO - Decimated mesh has 12 points and 16 faces.
2024-11-04 16:08:44,443 - INFO - Current memory usage: 1213.69 MB
2024-11-04 16:08:44,450 - INFO - Adding Mask 6 mesh to visualization.
2024-11-04 16:08:44,595 - INFO - Initial mesh has 39175 points and 78568 faces.
2024-11-04 16:08:44,596 - INFO - Current memory usage: 1213.57 MB
2024-11-04 16:08:44,995 - INFO - Decimated mesh has 19279 points and 39284 faces.
2024-11-04 16:08:44,996 - INFO - Current memory usage: 1213.57 MB
2024-11-04 16:08:45,003 - INFO - Adding Mask 7 mesh to visualization.
2024-11-04 16:08:45,109 - INFO - Initial mesh has 11394 points and 22117 faces.
2024-11-04 16:08:45,109 - INFO - Current memory usage: 1213.58 MB
2024-11-04 16:08:45,226 - INFO - Decimated mesh has 5745 points and 11058 faces.
2024-11-04 16:08:45,227 - INFO - Current memory usage: 1213.58 MB
2024-11-04 16:08:45,234 - INFO - Adding Mask 8 mesh to visualization.
2024-11-04 16:08:45,362 - INFO - Initial mesh has 11506 points and 22464 faces.
2024-11-04 16:08:45,363 - INFO - Current memory usage: 1213.58 MB
2024-11-04 16:08:45,461 - INFO - Decimated mesh has 5930 points and 11231 faces.
2024-11-04 16:08:45,461 - INFO - Current memory usage: 1213.58 MB
2024-11-04 16:08:45,469 - INFO - Adding Mask 9 mesh to visualization.
2024-11-04 16:08:45,581 - INFO - Initial mesh has 13786 points and 27137 faces.
2024-11-04 16:08:45,581 - INFO - Current memory usage: 1213.58 MB
2024-11-04 16:08:45,712 - INFO - Decimated mesh has 6876 points and 13568 faces.
2024-11-04 16:08:45,713 - INFO - Current memory usage: 1213.58 MB
2024-11-04 16:08:45,720 - INFO - Adding Mask 10 mesh to visualization.
2024-11-04 16:08:45,860 - INFO - Initial mesh has 41896 points and 77954 faces.
2024-11-04 16:08:45,861 - INFO - Current memory usage: 1213.35 MB
2024-11-04 16:08:46,193 - INFO - Decimated mesh has 22582 points and 38977 faces.
2024-11-04 16:08:46,193 - INFO - Current memory usage: 1213.35 MB
2024-11-04 16:08:46,201 - INFO - Adding Mask 11 mesh to visualization.
2024-11-04 16:08:46,293 - INFO - Initial mesh has 3505 points and 6332 faces.
2024-11-04 16:08:46,293 - INFO - Current memory usage: 1213.35 MB
2024-11-04 16:08:46,320 - INFO - Decimated mesh has 1930 points and 3165 faces.
2024-11-04 16:08:46,321 - INFO - Current memory usage: 1213.35 MB
2024-11-04 16:08:46,330 - INFO - Adding Mask 12 mesh to visualization.
2024-11-04 16:08:46,535 - INFO - Initial mesh has 53226 points and 109308 faces.
2024-11-04 16:08:46,536 - INFO - Current memory usage: 1213.23 MB
2024-11-04 16:08:47,103 - INFO - Decimated mesh has 25928 points and 54653 faces.
2024-11-04 16:08:47,104 - INFO - Current memory usage: 1213.23 MB
2024-11-04 16:08:47,112 - INFO - Adding Mask 13 mesh to visualization.
2024-11-04 16:08:47,220 - INFO - Initial mesh has 42 points and 64 faces.
2024-11-04 16:08:47,220 - INFO - Current memory usage: 1219.45 MB
2024-11-04 16:08:47,221 - INFO - Decimated mesh has 26 points and 30 faces.
2024-11-04 16:08:47,221 - INFO - Current memory usage: 1219.45 MB
2024-11-04 16:08:47,230 - INFO - Adding Mask 14 mesh to visualization.
2024-11-04 16:08:47,340 - INFO - Initial mesh has 260 points and 412 faces.
2024-11-04 16:08:47,340 - INFO - Current memory usage: 1219.45 MB
2024-11-04 16:08:47,342 - INFO - Decimated mesh has 159 points and 204 faces.
2024-11-04 16:08:47,343 - INFO - Current memory usage: 1219.45 MB
2024-11-04 16:08:47,350 - INFO - Adding Mask 15 mesh to visualization.
2024-11-04 16:08:47,457 - INFO - Initial mesh has 12877 points and 25033 faces.
2024-11-04 16:08:47,458 - INFO - Current memory usage: 1219.45 MB
2024-11-04 16:08:47,584 - INFO - Decimated mesh has 6493 points and 12515 faces.
2024-11-04 16:08:47,585 - INFO - Current memory usage: 1219.45 MB
2024-11-04 16:08:47,592 - INFO - Adding Mask 16 mesh to visualization.
2024-11-04 16:08:47,694 - INFO - Initial mesh has 11615 points and 22617 faces.
2024-11-04 16:08:47,695 - INFO - Current memory usage: 1219.45 MB
2024-11-04 16:08:47,817 - INFO - Decimated mesh has 5823 points and 11307 faces.
2024-11-04 16:08:47,817 - INFO - Current memory usage: 1212.08 MB
2024-11-04 16:08:47,825 - INFO - Adding Mask 17 mesh to visualization.
2024-11-04 16:08:47,934 - INFO - Initial mesh has 12748 points and 25024 faces.
2024-11-04 16:08:47,934 - INFO - Current memory usage: 1212.09 MB
2024-11-04 16:08:48,066 - INFO - Decimated mesh has 6384 points and 12512 faces.
2024-11-04 16:08:48,066 - INFO - Current memory usage: 1212.09 MB
2024-11-04 16:08:48,074 - INFO - Adding Mask 18 mesh to visualization.
2024-11-04 16:08:48,256 - INFO - Initial mesh has 55080 points and 111998 faces.
2024-11-04 16:08:48,257 - INFO - Current memory usage: 1212.09 MB
2024-11-04 16:08:48,842 - INFO - Decimated mesh has 26884 points and 55998 faces.
2024-11-04 16:08:48,842 - INFO - Current memory usage: 1212.96 MB
2024-11-04 16:08:48,850 - INFO - Adding Mask 19 mesh to visualization.
2024-11-04 16:08:48,957 - INFO - Initial mesh has 10 points and 16 faces.
2024-11-04 16:08:48,957 - INFO - Current memory usage: 1222.10 MB
2024-11-04 16:08:48,958 - INFO - Decimated mesh has 6 points and 8 faces.
2024-11-04 16:08:48,958 - INFO - Current memory usage: 1222.10 MB
2024-11-04 16:08:48,966 - INFO - Adding Mask 20 mesh to visualization.
2024-11-04 16:08:49,129 - INFO - Initial mesh has 24062 points and 47300 faces.
2024-11-04 16:08:49,129 - INFO - Current memory usage: 1222.11 MB
2024-11-04 16:08:49,360 - INFO - Decimated mesh has 12236 points and 23650 faces.
2024-11-04 16:08:49,361 - INFO - Current memory usage: 1222.11 MB
2024-11-04 16:08:49,368 - INFO - Adding Mask 21 mesh to visualization.
2024-11-04 16:08:49,496 - INFO - Initial mesh has 27218 points and 50482 faces.
2024-11-04 16:08:49,497 - INFO - Current memory usage: 1222.11 MB
2024-11-04 16:08:49,705 - INFO - Decimated mesh has 14679 points and 25240 faces.
2024-11-04 16:08:49,705 - INFO - Current memory usage: 1222.11 MB
2024-11-04 16:08:49,713 - INFO - Adding Mask 22 mesh to visualization.
2024-11-04 16:08:49,841 - INFO - Initial mesh has 15054 points and 29459 faces.
2024-11-04 16:08:49,842 - INFO - Current memory usage: 1222.11 MB
2024-11-04 16:08:49,984 - INFO - Decimated mesh has 7526 points and 14728 faces.
2024-11-04 16:08:49,984 - INFO - Current memory usage: 1222.11 MB
2024-11-04 16:08:49,992 - INFO - Adding Mask 23 mesh to visualization.
2024-11-04 16:08:50,087 - INFO - Initial mesh has 1568 points and 2636 faces.
2024-11-04 16:08:50,087 - INFO - Current memory usage: 1222.11 MB
2024-11-04 16:08:50,097 - INFO - Decimated mesh has 920 points and 1318 faces.
2024-11-04 16:08:50,097 - INFO - Current memory usage: 1222.11 MB
2024-11-04 16:08:50,106 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:09:00,941 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:09:00,965 - INFO - Current memory usage: 1162.79 MB
2024-11-04 16:09:01,249 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 16:09:01,421 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 16:09:01,683 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 16:09:01,927 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 16:09:02,172 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 16:09:02,423 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-04 16:09:02,667 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-11-04 16:09:02,907 - INFO - Saved slice 0 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_7_overlay.png'.
2024-11-04 16:09:03,151 - INFO - Saved slice 0 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_8_overlay.png'.
2024-11-04 16:09:03,391 - INFO - Saved slice 0 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_9_overlay.png'.
2024-11-04 16:09:03,632 - INFO - Saved slice 0 overlay for Cluster 10 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_10_overlay.png'.
2024-11-04 16:09:03,872 - INFO - Saved slice 0 overlay for Cluster 11 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_11_overlay.png'.
2024-11-04 16:09:04,126 - INFO - Saved slice 0 overlay for Cluster 12 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_12_overlay.png'.
2024-11-04 16:09:04,375 - INFO - Saved slice 0 overlay for Cluster 13 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_13_overlay.png'.
2024-11-04 16:09:04,618 - INFO - Saved slice 0 overlay for Cluster 14 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_14_overlay.png'.
2024-11-04 16:09:04,861 - INFO - Saved slice 0 overlay for Cluster 15 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_15_overlay.png'.
2024-11-04 16:09:05,110 - INFO - Saved slice 0 overlay for Cluster 16 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_16_overlay.png'.
2024-11-04 16:09:05,349 - INFO - Saved slice 0 overlay for Cluster 17 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_17_overlay.png'.
2024-11-04 16:09:05,591 - INFO - Saved slice 0 overlay for Cluster 18 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_18_overlay.png'.
2024-11-04 16:09:05,831 - INFO - Saved slice 0 overlay for Cluster 19 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_19_overlay.png'.
2024-11-04 16:09:06,067 - INFO - Saved slice 0 overlay for Cluster 20 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_20_overlay.png'.
2024-11-04 16:09:06,306 - INFO - Saved slice 0 overlay for Cluster 21 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_21_overlay.png'.
2024-11-04 16:09:06,543 - INFO - Saved slice 0 overlay for Cluster 22 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_22_overlay.png'.
2024-11-04 16:09:06,784 - INFO - Saved slice 0 overlay for Cluster 23 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_23_overlay.png'.
2024-11-04 16:09:06,792 - INFO - Final cleanup completed.
2024-11-04 16:09:06,792 - INFO - Current memory usage: 1126.63 MB
2024-11-04 16:14:50,123 - INFO - Logging initiated.
2024-11-04 16:14:50,124 - INFO - Pipeline started.
2024-11-04 16:14:50,124 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 16:14:50,628 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 16:14:51,015 - INFO - Denoised image loaded.
2024-11-04 16:14:51,015 - INFO - Current memory usage: 512.93 MB
2024-11-04 16:14:51,026 - INFO - Starting intensity normalization.
2024-11-04 16:14:51,988 - INFO - Intensity normalization complete.
2024-11-04 16:14:51,988 - INFO - Current memory usage: 540.18 MB
2024-11-04 16:14:51,996 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 16:14:51,996 - INFO - Computing neighborhood statistics.
2024-11-04 16:14:52,560 - INFO - Neighborhood statistics computed.
2024-11-04 16:14:52,561 - INFO - Current memory usage: 503.80 MB
2024-11-04 16:14:52,561 - INFO - Computing z-axis value for each voxel.
2024-11-04 16:14:58,174 - INFO - Z-axis value for each voxel computed.
2024-11-04 16:14:58,175 - INFO - Current memory usage: 576.42 MB
2024-11-04 16:14:58,175 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 16:14:58,917 - INFO - Features shape: (9509760, 4)
2024-11-04 16:14:58,917 - INFO - Current memory usage: 757.83 MB
2024-11-04 16:14:58,917 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 16:15:02,370 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 16:15:05,717 - INFO - Clustering complete with spatial connectivity.
2024-11-04 16:15:05,717 - INFO - Current memory usage: 1254.89 MB
2024-11-04 16:15:05,761 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 16:15:05,762 - INFO - Current memory usage: 747.01 MB
2024-11-04 16:15:05,778 - INFO - Processing Cluster 0.
2024-11-04 16:15:05,803 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 16:15:05,803 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:15:06,332 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:15:06,841 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:15:07,249 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 16:15:07,279 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 16:15:07,357 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 16:15:07,358 - INFO - Processing Cluster 1.
2024-11-04 16:15:07,377 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 16:15:07,378 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:15:07,891 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:15:08,393 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:15:08,638 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 16:15:08,665 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 16:15:08,720 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 16:15:08,720 - INFO - Processing Cluster 2.
2024-11-04 16:15:08,741 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 16:15:08,741 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:15:09,261 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:15:09,768 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:15:10,118 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 16:15:10,141 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 16:15:10,231 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 16:15:10,232 - INFO - Processing Cluster 3.
2024-11-04 16:15:10,249 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 16:15:10,249 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:15:10,757 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:15:11,263 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:15:11,551 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 16:15:11,572 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 16:15:11,631 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 16:15:11,631 - INFO - Processing Cluster 4.
2024-11-04 16:15:11,652 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 16:15:11,652 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:15:12,173 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:15:12,684 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:15:12,991 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 16:15:13,011 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 16:15:13,080 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 16:15:13,080 - INFO - CSF is identified as cluster 2.
2024-11-04 16:15:13,081 - INFO - Starting visualization with PyVista.
2024-11-04 16:15:13,578 - INFO - Adding Original MRI volume.
2024-11-04 16:15:13,991 - INFO - Adding Denoised MRI volume.
2024-11-04 16:15:14,565 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 16:15:14,927 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 16:15:14,928 - INFO - Current memory usage: 856.65 MB
2024-11-04 16:15:16,595 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 16:15:16,596 - INFO - Current memory usage: 980.17 MB
2024-11-04 16:15:16,606 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 16:15:16,711 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 16:15:16,712 - INFO - Current memory usage: 992.17 MB
2024-11-04 16:15:16,920 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 16:15:16,921 - INFO - Current memory usage: 992.17 MB
2024-11-04 16:15:16,929 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 16:15:17,233 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 16:15:17,234 - INFO - Current memory usage: 992.17 MB
2024-11-04 16:15:19,717 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 16:15:19,717 - INFO - Current memory usage: 1058.79 MB
2024-11-04 16:15:19,727 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 16:15:19,849 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 16:15:19,850 - INFO - Current memory usage: 1058.88 MB
2024-11-04 16:15:20,015 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 16:15:20,015 - INFO - Current memory usage: 1058.88 MB
2024-11-04 16:15:20,023 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 16:15:20,200 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 16:15:20,201 - INFO - Current memory usage: 1058.88 MB
2024-11-04 16:15:20,377 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 16:15:20,378 - INFO - Current memory usage: 1058.88 MB
2024-11-04 16:15:20,386 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:15:20,923 - INFO - Translator(prefix=None)
2024-11-04 16:15:21,063 - INFO - awaiting runner setup
2024-11-04 16:15:21,065 - INFO - awaiting site startup
2024-11-04 16:15:21,066 - INFO - Print WSLINK_READY_MSG
2024-11-04 16:15:21,066 - INFO - Schedule auto shutdown with timout 0
2024-11-04 16:15:21,066 - INFO - awaiting running future
2024-11-04 16:15:34,136 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:15:34,142 - INFO - Current memory usage: 1071.96 MB
2024-11-04 16:15:34,153 - INFO - Selected slice indices for saving: [0]
2024-11-04 16:15:35,193 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 16:15:35,449 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 16:15:35,700 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 16:15:35,954 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 16:15:36,213 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 16:15:36,221 - INFO - Pipeline completed successfully.
2024-11-04 16:15:36,222 - INFO - Current memory usage: 1038.54 MB
2024-11-04 16:15:36,222 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 16:15:36,243 - INFO - Computed density profiles along x and y axes.
2024-11-04 16:15:36,244 - INFO - Mask is highly dispersed across both x and y axes. Applying folding (symmetrization).
2024-11-04 16:15:36,247 - INFO - ----- Step 12: Removing Eyes from the CSF Mask -----
2024-11-04 16:15:36,247 - INFO - Removing eyes at centers: [(72, 32, 65), (72, 32, 195)] with radius 10 voxels.
2024-11-04 16:15:36,315 - INFO - Refined CSF mask with eyes removed saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/csf_mask_refined_final.tif'.
2024-11-04 16:15:36,315 - INFO - ----- Step 13: Calculating CSF Volume -----
2024-11-04 16:15:36,320 - INFO - Total CSF Volume: 4221235.337276399 mm³
2024-11-04 16:15:36,320 - INFO - ----- Final Visualization -----
2024-11-04 16:15:36,320 - INFO - Starting visualization with PyVista.
2024-11-04 16:15:36,331 - INFO - Adding Original MRI volume.
2024-11-04 16:15:36,529 - INFO - Adding Denoised MRI volume.
2024-11-04 16:15:36,867 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:15:46,991 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:15:46,993 - INFO - Current memory usage: 1077.12 MB
2024-11-04 16:15:46,996 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 16:15:46,996 - INFO - Final cleanup completed.
2024-11-04 16:15:46,997 - INFO - Current memory usage: 1040.84 MB
2024-11-04 16:17:16,411 - INFO - Logging initiated.
2024-11-04 16:17:16,411 - INFO - Pipeline started.
2024-11-04 16:17:16,411 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 16:17:16,753 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 16:17:16,917 - INFO - Denoised image loaded.
2024-11-04 16:17:16,917 - INFO - Current memory usage: 513.00 MB
2024-11-04 16:17:16,924 - INFO - Starting intensity normalization.
2024-11-04 16:17:18,015 - INFO - Intensity normalization complete.
2024-11-04 16:17:18,015 - INFO - Current memory usage: 540.37 MB
2024-11-04 16:17:18,022 - INFO - Using top half of the MRI data: new shape (144, 254, 260)
2024-11-04 16:17:18,022 - INFO - Computing neighborhood statistics.
2024-11-04 16:17:18,476 - INFO - Neighborhood statistics computed.
2024-11-04 16:17:18,477 - INFO - Current memory usage: 503.96 MB
2024-11-04 16:17:18,477 - INFO - Computing z-axis value for each voxel.
2024-11-04 16:17:23,793 - INFO - Z-axis value for each voxel computed.
2024-11-04 16:17:23,794 - INFO - Current memory usage: 576.46 MB
2024-11-04 16:17:23,794 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 16:17:24,428 - INFO - Features shape: (9509760, 4)
2024-11-04 16:17:24,428 - INFO - Current memory usage: 757.90 MB
2024-11-04 16:17:24,428 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 16:17:27,818 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 16:17:31,207 - INFO - Clustering complete with spatial connectivity.
2024-11-04 16:17:31,208 - INFO - Current memory usage: 1269.73 MB
2024-11-04 16:17:31,242 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 16:17:31,242 - INFO - Current memory usage: 761.85 MB
2024-11-04 16:17:31,257 - INFO - Processing Cluster 0.
2024-11-04 16:17:31,283 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 16:17:31,284 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:17:31,782 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:17:32,251 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:17:32,474 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 16:17:32,499 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 16:17:32,553 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 16:17:32,553 - INFO - Processing Cluster 1.
2024-11-04 16:17:32,568 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 16:17:32,568 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:17:33,044 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:17:33,520 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:17:33,721 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 16:17:33,735 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 16:17:33,769 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 16:17:33,769 - INFO - Processing Cluster 2.
2024-11-04 16:17:33,784 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 16:17:33,785 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:17:34,270 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:17:34,725 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:17:35,003 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 16:17:35,026 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 16:17:35,094 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 16:17:35,095 - INFO - Processing Cluster 3.
2024-11-04 16:17:35,112 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 16:17:35,112 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:17:35,556 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:17:35,925 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:17:36,095 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 16:17:36,112 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 16:17:36,164 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 16:17:36,164 - INFO - Processing Cluster 4.
2024-11-04 16:17:36,181 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 16:17:36,182 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:17:36,607 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:17:36,997 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:17:37,184 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 16:17:37,196 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 16:17:37,246 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 16:17:37,246 - INFO - CSF is identified as cluster 2.
2024-11-04 16:17:37,246 - INFO - Starting visualization with PyVista.
2024-11-04 16:17:37,635 - INFO - Adding Original MRI volume.
2024-11-04 16:17:37,902 - INFO - Adding Denoised MRI volume.
2024-11-04 16:17:38,112 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 16:17:38,632 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 16:17:38,633 - INFO - Current memory usage: 876.36 MB
2024-11-04 16:17:40,249 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 16:17:40,250 - INFO - Current memory usage: 999.92 MB
2024-11-04 16:17:40,258 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 16:17:40,369 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 16:17:40,370 - INFO - Current memory usage: 1011.97 MB
2024-11-04 16:17:40,564 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 16:17:40,565 - INFO - Current memory usage: 1011.97 MB
2024-11-04 16:17:40,573 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 16:17:40,916 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 16:17:40,916 - INFO - Current memory usage: 1011.97 MB
2024-11-04 16:17:43,263 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 16:17:43,264 - INFO - Current memory usage: 1078.60 MB
2024-11-04 16:17:43,272 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 16:17:43,394 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 16:17:43,394 - INFO - Current memory usage: 1078.04 MB
2024-11-04 16:17:43,556 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 16:17:43,557 - INFO - Current memory usage: 1078.04 MB
2024-11-04 16:17:43,565 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 16:17:43,684 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 16:17:43,684 - INFO - Current memory usage: 1077.66 MB
2024-11-04 16:17:43,850 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 16:17:43,850 - INFO - Current memory usage: 1077.66 MB
2024-11-04 16:17:43,858 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:17:44,340 - INFO - Translator(prefix=None)
2024-11-04 16:17:44,465 - INFO - awaiting runner setup
2024-11-04 16:17:44,466 - INFO - awaiting site startup
2024-11-04 16:17:44,467 - INFO - Print WSLINK_READY_MSG
2024-11-04 16:17:44,467 - INFO - Schedule auto shutdown with timout 0
2024-11-04 16:17:44,467 - INFO - awaiting running future
2024-11-04 16:17:55,447 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:17:55,453 - INFO - Current memory usage: 1090.98 MB
2024-11-04 16:17:55,462 - INFO - Selected slice indices for saving: [0]
2024-11-04 16:17:56,462 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 16:17:56,737 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 16:17:56,991 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 16:17:57,237 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 16:17:57,486 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 16:17:57,494 - INFO - Pipeline completed successfully.
2024-11-04 16:17:57,495 - INFO - Current memory usage: 1059.93 MB
2024-11-04 16:17:57,495 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 16:17:57,516 - INFO - Computed density profiles along x and y axes.
2024-11-04 16:17:57,516 - INFO - Mask is highly dispersed across both x and y axes. Applying folding (symmetrization).
2024-11-04 16:17:57,519 - INFO - ----- Step 12: Removing Eyes from the CSF Mask -----
2024-11-04 16:17:57,519 - INFO - Removing eyes at centers: [(72, 32, 65), (72, 32, 195)] with radius 10 voxels.
2024-11-04 16:17:57,580 - INFO - Refined CSF mask with eyes removed saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/csf_mask_refined_final.tif'.
2024-11-04 16:17:57,580 - INFO - ----- Step 13: Calculating CSF Volume -----
2024-11-04 16:17:57,585 - INFO - Total CSF Volume: 4221235.337276399 mm³
2024-11-04 16:17:57,585 - INFO - ----- Final Visualization -----
2024-11-04 16:17:57,585 - INFO - Starting visualization with PyVista.
2024-11-04 16:17:57,610 - INFO - Adding Original MRI volume.
2024-11-04 16:17:57,795 - INFO - Adding Denoised MRI volume.
2024-11-04 16:18:39,147 - INFO - Logging initiated.
2024-11-04 16:18:39,147 - INFO - Pipeline started.
2024-11-04 16:18:39,147 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 16:18:39,469 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 16:18:39,589 - INFO - Denoised image loaded.
2024-11-04 16:18:39,590 - INFO - Current memory usage: 515.65 MB
2024-11-04 16:18:39,597 - INFO - Starting intensity normalization.
2024-11-04 16:18:40,442 - INFO - Intensity normalization complete.
2024-11-04 16:18:40,442 - INFO - Current memory usage: 543.02 MB
2024-11-04 16:18:40,443 - INFO - Using top half of the MRI data: new shape (144, 254, 260)
2024-11-04 16:18:40,443 - INFO - Computing neighborhood statistics.
2024-11-04 16:18:40,784 - INFO - Neighborhood statistics computed.
2024-11-04 16:18:40,785 - INFO - Current memory usage: 506.61 MB
2024-11-04 16:18:40,785 - INFO - Computing z-axis value for each voxel.
2024-11-04 16:18:43,969 - INFO - Z-axis value for each voxel computed.
2024-11-04 16:18:43,970 - INFO - Current memory usage: 579.16 MB
2024-11-04 16:18:43,970 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 16:18:44,725 - INFO - Features shape: (9509760, 4)
2024-11-04 16:18:44,726 - INFO - Current memory usage: 760.61 MB
2024-11-04 16:18:44,726 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 16:18:49,531 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 16:18:54,187 - INFO - Clustering complete with spatial connectivity.
2024-11-04 16:18:54,188 - INFO - Current memory usage: 1275.49 MB
2024-11-04 16:18:54,241 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 16:18:54,241 - INFO - Current memory usage: 767.61 MB
2024-11-04 16:18:54,256 - INFO - Processing Cluster 0.
2024-11-04 16:18:54,280 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 16:18:54,281 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:18:54,995 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:18:55,649 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:18:55,954 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 16:18:55,986 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 16:18:56,049 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 16:18:56,049 - INFO - Processing Cluster 1.
2024-11-04 16:18:56,069 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 16:18:56,070 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:18:56,716 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:18:57,364 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:18:57,646 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 16:18:57,677 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 16:18:57,722 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 16:18:57,723 - INFO - Processing Cluster 2.
2024-11-04 16:18:57,740 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 16:18:57,740 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:18:58,378 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:18:59,021 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:18:59,408 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 16:18:59,427 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 16:18:59,506 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 16:18:59,506 - INFO - Processing Cluster 3.
2024-11-04 16:18:59,525 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 16:18:59,525 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:19:00,136 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:19:00,744 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:19:01,017 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 16:19:01,043 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 16:19:01,092 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 16:19:01,092 - INFO - Processing Cluster 4.
2024-11-04 16:19:01,110 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 16:19:01,111 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:19:01,715 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:19:02,324 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:19:02,595 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 16:19:02,630 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 16:19:02,678 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 16:19:02,679 - INFO - CSF is identified as cluster 2.
2024-11-04 16:19:02,679 - INFO - Starting visualization with PyVista.
2024-11-04 16:19:03,115 - INFO - Adding Original MRI volume.
2024-11-04 16:19:03,418 - INFO - Adding Denoised MRI volume.
2024-11-04 16:19:03,896 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 16:19:04,448 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 16:19:04,448 - INFO - Current memory usage: 877.26 MB
2024-11-04 16:19:06,996 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 16:19:06,997 - INFO - Current memory usage: 1002.80 MB
2024-11-04 16:19:07,007 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 16:19:07,126 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 16:19:07,126 - INFO - Current memory usage: 1014.89 MB
2024-11-04 16:19:07,396 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 16:19:07,397 - INFO - Current memory usage: 1014.89 MB
2024-11-04 16:19:07,406 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 16:19:07,810 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 16:19:07,811 - INFO - Current memory usage: 1016.64 MB
2024-11-04 16:19:10,905 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 16:19:10,905 - INFO - Current memory usage: 1083.76 MB
2024-11-04 16:19:10,916 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 16:19:11,057 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 16:19:11,057 - INFO - Current memory usage: 1083.80 MB
2024-11-04 16:19:11,285 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 16:19:11,285 - INFO - Current memory usage: 1083.80 MB
2024-11-04 16:19:11,296 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 16:19:11,476 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 16:19:11,477 - INFO - Current memory usage: 1083.80 MB
2024-11-04 16:19:11,720 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 16:19:11,721 - INFO - Current memory usage: 1083.80 MB
2024-11-04 16:19:11,732 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:19:12,214 - INFO - Translator(prefix=None)
2024-11-04 16:19:12,311 - INFO - awaiting runner setup
2024-11-04 16:19:12,312 - INFO - awaiting site startup
2024-11-04 16:19:12,313 - INFO - Print WSLINK_READY_MSG
2024-11-04 16:19:12,313 - INFO - Schedule auto shutdown with timout 0
2024-11-04 16:19:12,313 - INFO - awaiting running future
2024-11-04 16:19:28,505 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:19:28,515 - INFO - Current memory usage: 1094.90 MB
2024-11-04 16:19:28,524 - INFO - Selected slice indices for saving: [0]
2024-11-04 16:19:29,290 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 16:19:29,603 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 16:19:29,923 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 16:19:30,234 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 16:19:30,550 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 16:19:30,560 - INFO - Pipeline completed successfully.
2024-11-04 16:19:30,561 - INFO - Current memory usage: 1060.46 MB
2024-11-04 16:19:30,561 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 16:19:30,586 - INFO - Computed density profiles along x and y axes.
2024-11-04 16:19:30,586 - INFO - Mask is highly dispersed across both x and y axes. Applying folding (symmetrization).
2024-11-04 16:19:30,590 - INFO - ----- Step 12: Removing Eyes from the CSF Mask -----
2024-11-04 16:19:30,590 - INFO - Removing eyes at centers: [(72, 32, 65), (72, 32, 195)] with radius 10 voxels.
2024-11-04 16:19:30,655 - INFO - Refined CSF mask with eyes removed saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/csf_mask_refined_final.tif'.
2024-11-04 16:19:30,656 - INFO - ----- Step 13: Calculating CSF Volume -----
2024-11-04 16:19:30,662 - INFO - Total CSF Volume: 4221235.337276399 mm³
2024-11-04 16:19:30,662 - INFO - ----- Final Visualization -----
2024-11-04 16:19:30,662 - INFO - Starting visualization with PyVista.
2024-11-04 16:19:30,674 - INFO - Adding Original MRI volume.
2024-11-04 16:19:30,904 - INFO - Adding Denoised MRI volume.
2024-11-04 16:22:56,514 - INFO - Logging initiated.
2024-11-04 16:22:56,514 - INFO - Pipeline started.
2024-11-04 16:22:56,515 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 16:22:56,740 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 16:22:56,808 - INFO - Denoised image loaded.
2024-11-04 16:22:56,809 - INFO - Current memory usage: 514.75 MB
2024-11-04 16:22:56,814 - INFO - Starting intensity normalization.
2024-11-04 16:22:57,550 - INFO - Intensity normalization complete.
2024-11-04 16:22:57,550 - INFO - Current memory usage: 542.12 MB
2024-11-04 16:22:57,551 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 16:22:57,551 - INFO - Computing neighborhood statistics.
2024-11-04 16:22:57,743 - INFO - Neighborhood statistics computed.
2024-11-04 16:22:57,743 - INFO - Current memory usage: 505.71 MB
2024-11-04 16:22:57,743 - INFO - Computing z-axis value for each voxel.
2024-11-04 16:23:00,474 - INFO - Z-axis value for each voxel computed.
2024-11-04 16:23:00,475 - INFO - Current memory usage: 578.21 MB
2024-11-04 16:23:00,475 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 16:23:01,059 - INFO - Features shape: (9509760, 4)
2024-11-04 16:23:01,060 - INFO - Current memory usage: 759.69 MB
2024-11-04 16:23:01,060 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 16:23:02,976 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 16:23:04,930 - INFO - Clustering complete with spatial connectivity.
2024-11-04 16:23:04,930 - INFO - Current memory usage: 1305.98 MB
2024-11-04 16:23:04,957 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 16:23:04,957 - INFO - Current memory usage: 798.10 MB
2024-11-04 16:23:04,965 - INFO - Processing Cluster 0.
2024-11-04 16:23:04,977 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 16:23:04,977 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:23:05,261 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:23:05,510 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:23:05,622 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 16:23:05,631 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 16:23:05,677 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 16:23:05,678 - INFO - Processing Cluster 1.
2024-11-04 16:23:05,691 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 16:23:05,691 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:23:05,954 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:23:06,203 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:23:06,314 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 16:23:06,323 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 16:23:06,371 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 16:23:06,372 - INFO - Processing Cluster 2.
2024-11-04 16:23:06,391 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 16:23:06,391 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:23:06,659 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:23:06,912 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:23:07,061 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 16:23:07,069 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 16:23:07,132 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 16:23:07,132 - INFO - Processing Cluster 3.
2024-11-04 16:23:07,141 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 16:23:07,142 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:23:07,396 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:23:07,645 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:23:07,750 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 16:23:07,759 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 16:23:07,795 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 16:23:07,795 - INFO - Processing Cluster 4.
2024-11-04 16:23:07,811 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 16:23:07,811 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:23:08,073 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:23:08,320 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:23:08,436 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 16:23:08,445 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 16:23:08,489 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 16:23:08,490 - INFO - CSF is identified as cluster 2.
2024-11-04 16:23:08,490 - INFO - Selected slice indices for saving: [0]
2024-11-04 16:23:08,779 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 16:23:08,913 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 16:23:09,080 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 16:23:09,212 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 16:23:09,441 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 16:23:09,445 - INFO - Pipeline completed successfully.
2024-11-04 16:23:09,445 - INFO - Current memory usage: 742.95 MB
2024-11-04 16:23:09,446 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 16:23:09,457 - INFO - Computed density profiles along x and y axes.
2024-11-04 16:23:09,457 - INFO - Mask is highly dispersed across both x and y axes. Applying folding (symmetrization).
2024-11-04 16:23:09,459 - INFO - ----- Step 12: Removing Eyes from the CSF Mask -----
2024-11-04 16:23:09,459 - INFO - Removing eyes at centers: [(72, 32, 65), (72, 32, 195)] with radius 10 voxels.
2024-11-04 16:23:09,503 - INFO - Refined CSF mask with eyes removed saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/csf_mask_refined_final.tif'.
2024-11-04 16:23:09,503 - INFO - ----- Step 13: Calculating CSF Volume -----
2024-11-04 16:23:09,507 - INFO - Total CSF Volume: 4221235.337276399 mm³
2024-11-04 16:23:09,507 - INFO - ----- Final Visualization -----
2024-11-04 16:35:44,259 - INFO - Logging initiated.
2024-11-04 16:35:44,260 - INFO - Pipeline started.
2024-11-04 16:35:44,260 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 16:35:44,755 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 16:35:44,988 - INFO - Denoised image loaded.
2024-11-04 16:35:44,988 - INFO - Current memory usage: 514.81 MB
2024-11-04 16:35:44,997 - INFO - Starting intensity normalization.
2024-11-04 16:35:45,937 - INFO - Intensity normalization complete.
2024-11-04 16:35:45,938 - INFO - Current memory usage: 542.10 MB
2024-11-04 16:35:45,945 - INFO - Using top half of the MRI data: new shape (144, 254, 260)
2024-11-04 16:35:45,945 - INFO - Computing neighborhood statistics.
2024-11-04 16:35:46,418 - INFO - Neighborhood statistics computed.
2024-11-04 16:35:46,418 - INFO - Current memory usage: 505.69 MB
2024-11-04 16:35:46,418 - INFO - Computing z-axis value for each voxel.
2024-11-04 16:35:49,700 - INFO - Z-axis value for each voxel computed.
2024-11-04 16:35:49,701 - INFO - Current memory usage: 578.19 MB
2024-11-04 16:35:49,701 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 16:35:50,243 - INFO - Features shape: (9509760, 4)
2024-11-04 16:35:50,244 - INFO - Current memory usage: 759.63 MB
2024-11-04 16:35:50,244 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 16:35:52,725 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 16:35:56,077 - INFO - Clustering complete with spatial connectivity.
2024-11-04 16:35:56,077 - INFO - Current memory usage: 1298.06 MB
2024-11-04 16:35:56,114 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 16:35:56,114 - INFO - Current memory usage: 790.18 MB
2024-11-04 16:35:56,130 - INFO - Processing Cluster 0.
2024-11-04 16:35:56,151 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 16:35:56,151 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:35:56,588 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:35:56,923 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:35:57,370 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 16:35:57,378 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 16:35:57,436 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 16:35:57,437 - INFO - Processing Cluster 1.
2024-11-04 16:35:57,458 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 16:35:57,458 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:35:57,775 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:35:58,067 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:35:58,198 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 16:35:58,206 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 16:35:58,250 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 16:35:58,250 - INFO - Processing Cluster 2.
2024-11-04 16:35:58,266 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 16:35:58,266 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:35:58,576 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:35:58,863 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:35:59,245 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 16:35:59,252 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 16:35:59,393 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 16:35:59,393 - INFO - Processing Cluster 3.
2024-11-04 16:35:59,401 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 16:35:59,401 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:35:59,707 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:35:59,997 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:36:00,231 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 16:36:00,239 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 16:36:00,342 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 16:36:00,343 - INFO - Processing Cluster 4.
2024-11-04 16:36:00,351 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 16:36:00,351 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:36:00,665 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:36:00,980 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:36:01,203 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 16:36:01,211 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 16:36:01,300 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 16:36:01,301 - INFO - CSF is identified as cluster 2.
2024-11-04 16:36:01,301 - INFO - Starting visualization with PyVista.
2024-11-04 16:36:01,544 - INFO - Adding Original MRI volume.
2024-11-04 16:36:01,971 - INFO - Adding Denoised MRI volume.
2024-11-04 16:36:02,557 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 16:36:02,844 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 16:36:02,845 - INFO - Current memory usage: 894.17 MB
2024-11-04 16:36:04,080 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 16:36:04,081 - INFO - Current memory usage: 1019.46 MB
2024-11-04 16:36:04,090 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 16:36:04,180 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 16:36:04,181 - INFO - Current memory usage: 1031.46 MB
2024-11-04 16:36:04,300 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 16:36:04,301 - INFO - Current memory usage: 1031.46 MB
2024-11-04 16:36:04,305 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 16:36:04,472 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 16:36:04,472 - INFO - Current memory usage: 1033.21 MB
2024-11-04 16:36:06,129 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 16:36:06,130 - INFO - Current memory usage: 1100.34 MB
2024-11-04 16:36:06,137 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 16:36:06,227 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 16:36:06,227 - INFO - Current memory usage: 1100.45 MB
2024-11-04 16:36:06,333 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 16:36:06,334 - INFO - Current memory usage: 1100.45 MB
2024-11-04 16:36:06,338 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 16:36:06,485 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 16:36:06,486 - INFO - Current memory usage: 1100.45 MB
2024-11-04 16:36:06,597 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 16:36:06,597 - INFO - Current memory usage: 1100.45 MB
2024-11-04 16:36:06,603 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:36:06,922 - INFO - Translator(prefix=None)
2024-11-04 16:36:06,988 - INFO - awaiting runner setup
2024-11-04 16:36:06,988 - INFO - awaiting site startup
2024-11-04 16:36:06,989 - INFO - Print WSLINK_READY_MSG
2024-11-04 16:36:06,989 - INFO - Schedule auto shutdown with timout 0
2024-11-04 16:36:06,989 - INFO - awaiting running future
2024-11-04 16:36:13,759 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:36:13,765 - INFO - Current memory usage: 1112.70 MB
2024-11-04 16:36:13,774 - INFO - Selected slice indices for saving: [0]
2024-11-04 16:36:14,259 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 16:36:14,391 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 16:36:14,529 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 16:36:14,670 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 16:36:14,813 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 16:36:14,818 - INFO - Pipeline completed successfully.
2024-11-04 16:36:14,818 - INFO - Current memory usage: 1078.05 MB
2024-11-04 16:36:14,818 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 16:36:14,831 - INFO - Computed density profiles along x and y axes.
2024-11-04 16:36:14,831 - INFO - Mask is highly dispersed across both x and y axes. Applying folding (symmetrization).
2024-11-04 16:36:14,834 - INFO - ----- Step 12: Removing Eyes from the CSF Mask -----
2024-11-04 16:36:14,834 - INFO - Removing eyes at centers: [(72, 32, 65), (72, 32, 195)] with radius 10 voxels.
2024-11-04 16:36:14,902 - INFO - Refined CSF mask with eyes removed saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/csf_mask_refined_final.tif'.
2024-11-04 16:36:14,902 - INFO - ----- Step 13: Calculating CSF Volume -----
2024-11-04 16:36:14,906 - INFO - Total CSF Volume: 4221235.337276399 mm³
2024-11-04 16:36:14,907 - INFO - ----- Final Visualization -----
2024-11-04 16:36:14,907 - INFO - Starting visualization with PyVista.
2024-11-04 16:36:14,930 - INFO - Adding Original MRI volume.
2024-11-04 16:36:15,186 - INFO - Adding Denoised MRI volume.
2024-11-04 16:36:15,643 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 16:36:15,857 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 16:36:15,857 - INFO - Current memory usage: 1187.02 MB
2024-11-04 16:36:17,011 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 16:36:17,012 - INFO - Current memory usage: 1208.14 MB
2024-11-04 16:36:17,020 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 16:36:17,169 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 16:36:17,169 - INFO - Current memory usage: 1208.18 MB
2024-11-04 16:36:17,282 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 16:36:17,282 - INFO - Current memory usage: 1208.18 MB
2024-11-04 16:36:17,286 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 16:36:17,358 - INFO - Initial mesh has 67013 points and 135036 faces.
2024-11-04 16:36:17,359 - INFO - Current memory usage: 1208.18 MB
2024-11-04 16:36:17,835 - INFO - Decimated mesh has 33125 points and 67518 faces.
2024-11-04 16:36:17,835 - INFO - Current memory usage: 1208.18 MB
2024-11-04 16:36:17,840 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 16:36:17,908 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 16:36:17,908 - INFO - Current memory usage: 1208.25 MB
2024-11-04 16:36:18,020 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 16:36:18,021 - INFO - Current memory usage: 1208.25 MB
2024-11-04 16:36:18,025 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 16:36:18,158 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 16:36:18,159 - INFO - Current memory usage: 1208.12 MB
2024-11-04 16:36:18,304 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 16:36:18,305 - INFO - Current memory usage: 1208.12 MB
2024-11-04 16:36:18,314 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:36:25,430 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:36:25,436 - INFO - Current memory usage: 1136.86 MB
2024-11-04 16:36:25,596 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 16:36:25,736 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 16:36:25,840 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 16:36:26,007 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 16:36:26,177 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 16:36:26,182 - INFO - Final cleanup completed.
2024-11-04 16:36:26,182 - INFO - Current memory usage: 1101.07 MB
2024-11-04 16:43:15,288 - INFO - Logging initiated.
2024-11-04 16:43:15,288 - INFO - Pipeline started.
2024-11-04 16:43:15,289 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 16:43:15,606 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 16:43:15,766 - INFO - Denoised image loaded.
2024-11-04 16:43:15,766 - INFO - Current memory usage: 517.82 MB
2024-11-04 16:43:15,773 - INFO - Starting intensity normalization.
2024-11-04 16:43:16,566 - INFO - Intensity normalization complete.
2024-11-04 16:43:16,566 - INFO - Current memory usage: 545.24 MB
2024-11-04 16:43:16,571 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 16:43:16,571 - INFO - Computing neighborhood statistics.
2024-11-04 16:43:16,966 - INFO - Neighborhood statistics computed.
2024-11-04 16:43:16,967 - INFO - Current memory usage: 508.83 MB
2024-11-04 16:43:16,967 - INFO - Computing z-axis value for each voxel.
2024-11-04 16:43:19,676 - INFO - Z-axis value for each voxel computed.
2024-11-04 16:43:19,677 - INFO - Current memory usage: 581.34 MB
2024-11-04 16:43:19,677 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 16:43:20,207 - INFO - Features shape: (9509760, 4)
2024-11-04 16:43:20,207 - INFO - Current memory usage: 754.31 MB
2024-11-04 16:43:20,207 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 16:43:22,484 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 16:43:25,185 - INFO - Clustering complete with spatial connectivity.
2024-11-04 16:43:25,185 - INFO - Current memory usage: 1291.75 MB
2024-11-04 16:43:25,216 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 16:43:25,217 - INFO - Current memory usage: 783.88 MB
2024-11-04 16:43:25,232 - INFO - Processing Cluster 0.
2024-11-04 16:43:25,252 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 16:43:25,253 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:43:25,701 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:43:26,055 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:43:26,210 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 16:43:26,223 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 16:43:26,281 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 16:43:26,282 - INFO - Processing Cluster 1.
2024-11-04 16:43:26,293 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 16:43:26,293 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:43:26,612 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:43:26,910 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:43:27,184 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 16:43:27,192 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 16:43:27,227 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 16:43:27,227 - INFO - Processing Cluster 2.
2024-11-04 16:43:27,243 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 16:43:27,243 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:43:27,561 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:43:27,855 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:43:28,166 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 16:43:28,174 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 16:43:28,236 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 16:43:28,236 - INFO - Processing Cluster 3.
2024-11-04 16:43:28,245 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 16:43:28,246 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:43:28,550 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:43:28,853 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:43:29,048 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 16:43:29,056 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 16:43:29,098 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 16:43:29,098 - INFO - Processing Cluster 4.
2024-11-04 16:43:29,117 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 16:43:29,117 - INFO - Applying morphological opening to remove small objects.
2024-11-04 16:43:29,433 - INFO - Applying morphological closing to fill small holes.
2024-11-04 16:43:29,726 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 16:43:30,006 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 16:43:30,016 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 16:43:30,071 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 16:43:30,071 - INFO - CSF is identified as cluster 2.
2024-11-04 16:43:30,072 - INFO - Starting visualization with PyVista.
2024-11-04 16:43:30,360 - INFO - Adding Original MRI volume.
2024-11-04 16:43:30,719 - INFO - Adding Denoised MRI volume.
2024-11-04 16:43:31,131 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 16:43:31,410 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 16:43:31,410 - INFO - Current memory usage: 890.28 MB
2024-11-04 16:43:32,653 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 16:43:32,653 - INFO - Current memory usage: 1015.69 MB
2024-11-04 16:43:32,661 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 16:43:32,747 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 16:43:32,747 - INFO - Current memory usage: 1027.57 MB
2024-11-04 16:43:32,863 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 16:43:32,863 - INFO - Current memory usage: 1027.57 MB
2024-11-04 16:43:32,868 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 16:43:33,042 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 16:43:33,043 - INFO - Current memory usage: 1029.32 MB
2024-11-04 16:43:34,693 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 16:43:34,693 - INFO - Current memory usage: 1096.44 MB
2024-11-04 16:43:34,701 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 16:43:34,784 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 16:43:34,785 - INFO - Current memory usage: 1096.53 MB
2024-11-04 16:43:34,899 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 16:43:34,899 - INFO - Current memory usage: 1096.53 MB
2024-11-04 16:43:34,904 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 16:43:34,990 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 16:43:34,991 - INFO - Current memory usage: 1096.53 MB
2024-11-04 16:43:35,110 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 16:43:35,110 - INFO - Current memory usage: 1096.53 MB
2024-11-04 16:43:35,115 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:43:35,395 - INFO - Translator(prefix=None)
2024-11-04 16:43:35,432 - INFO - awaiting runner setup
2024-11-04 16:43:35,432 - INFO - awaiting site startup
2024-11-04 16:43:35,433 - INFO - Print WSLINK_READY_MSG
2024-11-04 16:43:35,433 - INFO - Schedule auto shutdown with timout 0
2024-11-04 16:43:35,433 - INFO - awaiting running future
2024-11-04 16:43:42,164 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:43:42,171 - INFO - Current memory usage: 1109.60 MB
2024-11-04 16:43:42,181 - INFO - Selected slice indices for saving: [0]
2024-11-04 16:43:42,613 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 16:43:42,758 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 16:43:42,906 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 16:43:43,081 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 16:43:43,245 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 16:43:43,249 - INFO - Pipeline completed successfully.
2024-11-04 16:43:43,250 - INFO - Current memory usage: 1075.12 MB
2024-11-04 16:43:43,250 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 16:43:43,263 - INFO - Computed density profiles along x and y axes.
2024-11-04 16:43:43,263 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 16:43:43,277 - INFO - Cluster 0: Score = 118616.0 (X: 56481.0, Y: 62135.0)
2024-11-04 16:43:43,291 - INFO - Cluster 1: Score = 27293.0 (X: 9555.0, Y: 17738.0)
2024-11-04 16:43:43,308 - INFO - Cluster 2: Score = 1018889.0 (X: 567015.0, Y: 451874.0)
2024-11-04 16:43:43,325 - INFO - Cluster 3: Score = 16705.0 (X: 8199.0, Y: 8506.0)
2024-11-04 16:43:43,343 - INFO - Cluster 4: Score = 17378.0 (X: 7973.0, Y: 9405.0)
2024-11-04 16:43:43,343 - INFO - Good cluster identified as Cluster 2 with score 1018889.0.
2024-11-04 16:43:43,343 - INFO - ----- Step 12: Removing Eyes from the Good Cluster Mask -----
2024-11-04 16:43:43,343 - INFO - Removing eyes at centers: [(72, 64, 65), (72, 64, 195)] with radius 10 voxels.
2024-11-04 16:43:43,496 - INFO - ----- Step 13: Saving the Good Cluster Mask -----
2024-11-04 16:43:43,496 - ERROR - Failed to save good cluster mask: [Errno 2] No such file or directory: ''
2024-11-04 16:43:43,496 - INFO - ----- Step 14: Calculating CSF Volume -----
2024-11-04 16:43:43,503 - INFO - Total CSF Volume: 7546527.105349222 mm³
2024-11-04 16:43:43,503 - INFO - ----- Final Visualization -----
2024-11-04 16:43:43,503 - INFO - Starting visualization with PyVista.
2024-11-04 16:43:43,520 - INFO - Adding Original MRI volume.
2024-11-04 16:43:43,748 - INFO - Adding Denoised MRI volume.
2024-11-04 16:43:43,971 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 16:43:44,157 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 16:43:44,157 - INFO - Current memory usage: 1181.61 MB
2024-11-04 16:43:45,320 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 16:43:45,321 - INFO - Current memory usage: 1200.86 MB
2024-11-04 16:43:45,329 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 16:43:45,437 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 16:43:45,437 - INFO - Current memory usage: 1200.87 MB
2024-11-04 16:43:45,553 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 16:43:45,553 - INFO - Current memory usage: 1200.87 MB
2024-11-04 16:43:45,557 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 16:43:45,740 - INFO - Initial mesh has 195344 points and 395940 faces.
2024-11-04 16:43:45,740 - INFO - Current memory usage: 1200.88 MB
2024-11-04 16:43:47,398 - INFO - Decimated mesh has 96191 points and 197969 faces.
2024-11-04 16:43:47,399 - INFO - Current memory usage: 1260.12 MB
2024-11-04 16:43:47,406 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 16:43:47,538 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 16:43:47,538 - INFO - Current memory usage: 1260.18 MB
2024-11-04 16:43:47,642 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 16:43:47,642 - INFO - Current memory usage: 1260.18 MB
2024-11-04 16:43:47,647 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 16:43:47,721 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 16:43:47,721 - INFO - Current memory usage: 1260.19 MB
2024-11-04 16:43:47,837 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 16:43:47,838 - INFO - Current memory usage: 1260.19 MB
2024-11-04 16:43:47,842 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:43:54,849 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 16:43:54,857 - INFO - Current memory usage: 1188.88 MB
2024-11-04 16:43:55,022 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 16:43:55,199 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 16:43:55,356 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 16:43:55,511 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 16:43:55,667 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 16:43:55,672 - INFO - Final cleanup completed.
2024-11-04 16:43:55,672 - INFO - Current memory usage: 1153.22 MB
2024-11-04 16:46:05,255 - INFO - Logging initiated.
2024-11-04 16:46:05,255 - INFO - Pipeline started.
2024-11-04 16:46:05,255 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 16:46:05,446 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 16:46:05,625 - INFO - Denoised image loaded.
2024-11-04 16:46:05,625 - INFO - Current memory usage: 517.32 MB
2024-11-04 16:46:05,629 - INFO - Starting intensity normalization.
2024-11-04 16:46:06,135 - INFO - Intensity normalization complete.
2024-11-04 16:46:06,135 - INFO - Current memory usage: 542.32 MB
2024-11-04 16:46:06,139 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 16:46:06,139 - INFO - Computing neighborhood statistics.
2024-11-04 16:46:06,423 - INFO - Neighborhood statistics computed.
2024-11-04 16:46:06,424 - INFO - Current memory usage: 505.90 MB
2024-11-04 16:46:06,424 - INFO - Computing z-axis value for each voxel.
2024-11-04 16:46:09,159 - INFO - Z-axis value for each voxel computed.
2024-11-04 16:46:09,159 - INFO - Current memory usage: 578.41 MB
2024-11-04 16:46:09,159 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 16:46:09,627 - INFO - Features shape: (9509760, 4)
2024-11-04 16:46:09,628 - INFO - Current memory usage: 759.22 MB
2024-11-04 16:46:09,628 - INFO - Plotting feature distributions.
2024-11-04 16:46:14,732 - INFO - Feature distributions plotted.
2024-11-04 16:46:14,742 - INFO - Analyzing enhanced feature distributions with a sampled subset.
2024-11-04 17:11:19,847 - INFO - Logging initiated.
2024-11-04 17:11:19,847 - INFO - Pipeline started.
2024-11-04 17:11:19,847 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 17:11:20,056 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 17:11:20,240 - INFO - Denoised image loaded.
2024-11-04 17:11:20,240 - INFO - Current memory usage: 517.23 MB
2024-11-04 17:11:20,277 - INFO - Starting intensity normalization.
2024-11-04 17:11:20,757 - INFO - Intensity normalization complete.
2024-11-04 17:11:20,757 - INFO - Current memory usage: 653.54 MB
2024-11-04 17:11:20,759 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 17:11:20,759 - INFO - Computing neighborhood statistics.
2024-11-04 17:11:20,961 - INFO - Neighborhood statistics computed.
2024-11-04 17:11:20,962 - INFO - Current memory usage: 617.13 MB
2024-11-04 17:11:20,962 - INFO - Computing z-axis value for each voxel.
2024-11-04 17:11:23,887 - INFO - Z-axis value for each voxel computed.
2024-11-04 17:11:23,887 - INFO - Current memory usage: 689.71 MB
2024-11-04 17:11:23,887 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 17:11:24,473 - INFO - Features shape: (9509760, 4)
2024-11-04 17:11:24,473 - INFO - Current memory usage: 871.18 MB
2024-11-04 17:11:24,473 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 17:11:26,937 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 17:11:29,806 - INFO - Clustering complete with spatial connectivity.
2024-11-04 17:11:29,807 - INFO - Current memory usage: 1372.31 MB
2024-11-04 17:11:29,829 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 17:11:29,830 - INFO - Current memory usage: 864.44 MB
2024-11-04 17:11:29,835 - INFO - Processing Cluster 0.
2024-11-04 17:11:29,849 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 17:11:29,849 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:11:30,193 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:11:30,472 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:11:30,631 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 17:11:30,656 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 17:11:30,695 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 17:11:30,695 - INFO - Processing Cluster 1.
2024-11-04 17:11:30,707 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 17:11:30,708 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:11:30,971 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:11:31,235 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:11:31,375 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 17:11:31,400 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 17:11:31,439 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 17:11:31,439 - INFO - Processing Cluster 2.
2024-11-04 17:11:31,457 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 17:11:31,457 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:11:31,730 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:11:31,992 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:11:32,190 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 17:11:32,211 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 17:11:32,279 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 17:11:32,279 - INFO - Processing Cluster 3.
2024-11-04 17:11:32,296 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 17:11:32,296 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:11:32,567 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:11:32,825 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:11:32,962 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 17:11:32,981 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 17:11:33,025 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 17:11:33,025 - INFO - Processing Cluster 4.
2024-11-04 17:11:33,041 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 17:11:33,041 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:11:33,318 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:11:33,601 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:11:33,723 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 17:11:33,740 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 17:11:33,766 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 17:11:33,767 - INFO - CSF is identified as cluster 2.
2024-11-04 17:11:33,767 - INFO - Starting visualization with PyVista.
2024-11-04 17:11:34,012 - INFO - Adding Original MRI volume.
2024-11-04 17:11:34,173 - INFO - Adding Denoised MRI volume.
2024-11-04 17:11:34,298 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 17:11:34,453 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 17:11:34,454 - INFO - Current memory usage: 977.67 MB
2024-11-04 17:11:35,831 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 17:11:35,832 - INFO - Current memory usage: 1109.08 MB
2024-11-04 17:11:35,841 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 17:11:35,920 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 17:11:35,920 - INFO - Current memory usage: 1116.96 MB
2024-11-04 17:11:36,054 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 17:11:36,054 - INFO - Current memory usage: 1116.96 MB
2024-11-04 17:11:36,059 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 17:11:36,260 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 17:11:36,260 - INFO - Current memory usage: 1117.59 MB
2024-11-04 17:11:38,126 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 17:11:38,127 - INFO - Current memory usage: 1186.20 MB
2024-11-04 17:11:38,134 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 17:11:38,207 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 17:11:38,207 - INFO - Current memory usage: 1186.29 MB
2024-11-04 17:11:38,365 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 17:11:38,365 - INFO - Current memory usage: 1186.29 MB
2024-11-04 17:11:38,370 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 17:11:38,440 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 17:11:38,440 - INFO - Current memory usage: 1186.29 MB
2024-11-04 17:11:38,555 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 17:11:38,556 - INFO - Current memory usage: 1186.29 MB
2024-11-04 17:11:38,561 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:11:38,927 - INFO - Translator(prefix=None)
2024-11-04 17:11:38,984 - INFO - awaiting runner setup
2024-11-04 17:11:38,984 - INFO - awaiting site startup
2024-11-04 17:11:38,984 - INFO - Print WSLINK_READY_MSG
2024-11-04 17:11:38,984 - INFO - Schedule auto shutdown with timout 0
2024-11-04 17:11:38,984 - INFO - awaiting running future
2024-11-04 17:11:46,640 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:11:46,644 - INFO - Current memory usage: 1199.50 MB
2024-11-04 17:11:46,649 - INFO - Selected slice indices for saving: [0, 143]
2024-11-04 17:11:47,141 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 17:11:47,284 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 17:11:47,452 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 17:11:47,643 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 17:11:47,818 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 17:11:47,989 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 17:11:48,166 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 17:11:48,350 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 17:11:48,550 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 17:11:48,783 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 17:11:48,790 - INFO - Pipeline completed successfully.
2024-11-04 17:11:48,791 - INFO - Current memory usage: 1168.31 MB
2024-11-04 17:11:48,791 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 17:11:48,809 - INFO - Computed density profiles along x and y axes.
2024-11-04 17:11:48,809 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 17:11:48,827 - INFO - Cluster 0: Score = 118616.0 (X: 56481.0, Y: 62135.0)
2024-11-04 17:11:48,853 - INFO - Cluster 0: Original Sum = 26953.162109375, Normalized Sum = 287217.1875
2024-11-04 17:11:48,871 - INFO - Cluster 1: Score = 27293.0 (X: 9555.0, Y: 17738.0)
2024-11-04 17:11:48,882 - INFO - Cluster 1: Original Sum = 95300.546875, Normalized Sum = 1445173.0
2024-11-04 17:11:48,901 - INFO - Cluster 2: Score = 1018889.0 (X: 567015.0, Y: 451874.0)
2024-11-04 17:11:48,949 - INFO - Cluster 2: Original Sum = 59302.86328125, Normalized Sum = -999242.5625
2024-11-04 17:11:48,968 - INFO - Cluster 3: Score = 16705.0 (X: 8199.0, Y: 8506.0)
2024-11-04 17:11:48,981 - INFO - Cluster 3: Original Sum = 19379.09375, Normalized Sum = 291598.5
2024-11-04 17:11:49,000 - INFO - Cluster 4: Score = 17378.0 (X: 7973.0, Y: 9405.0)
2024-11-04 17:11:49,014 - INFO - Cluster 4: Original Sum = 10043.6123046875, Normalized Sum = 145919.890625
2024-11-04 17:11:49,014 - INFO - Good cluster identified as Cluster 2 with score 1018889.0.
2024-11-04 17:14:30,157 - INFO - Logging initiated.
2024-11-04 17:14:30,157 - INFO - Pipeline started.
2024-11-04 17:14:30,157 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 17:14:30,424 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 17:14:30,586 - INFO - Denoised image loaded.
2024-11-04 17:14:30,587 - INFO - Current memory usage: 515.23 MB
2024-11-04 17:14:30,693 - INFO - Starting intensity normalization.
2024-11-04 17:14:31,184 - INFO - Intensity normalization complete.
2024-11-04 17:14:31,185 - INFO - Current memory usage: 650.95 MB
2024-11-04 17:14:31,190 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 17:14:31,190 - INFO - Computing neighborhood statistics.
2024-11-04 17:14:31,489 - INFO - Neighborhood statistics computed.
2024-11-04 17:14:31,490 - INFO - Current memory usage: 614.61 MB
2024-11-04 17:14:31,490 - INFO - Computing z-axis value for each voxel.
2024-11-04 17:14:34,306 - INFO - Z-axis value for each voxel computed.
2024-11-04 17:14:34,307 - INFO - Current memory usage: 687.20 MB
2024-11-04 17:14:34,307 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 17:14:34,682 - INFO - Features shape: (9509760, 4)
2024-11-04 17:14:34,683 - INFO - Current memory usage: 868.64 MB
2024-11-04 17:14:34,683 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 17:14:36,821 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 17:14:38,874 - INFO - Clustering complete with spatial connectivity.
2024-11-04 17:14:38,875 - INFO - Current memory usage: 1400.75 MB
2024-11-04 17:14:38,903 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 17:14:38,903 - INFO - Current memory usage: 892.88 MB
2024-11-04 17:14:38,911 - INFO - Processing Cluster 0.
2024-11-04 17:14:38,921 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 17:14:38,922 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:14:39,201 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:14:39,460 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:14:39,597 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 17:14:39,615 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 17:14:39,653 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 17:14:39,653 - INFO - Processing Cluster 1.
2024-11-04 17:14:39,663 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 17:14:39,663 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:14:39,930 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:14:40,188 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:14:40,296 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 17:14:40,306 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 17:14:40,340 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 17:14:40,340 - INFO - Processing Cluster 2.
2024-11-04 17:14:40,352 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 17:14:40,352 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:14:40,619 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:14:40,877 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:14:41,037 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 17:14:41,045 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 17:14:41,089 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 17:14:41,089 - INFO - Processing Cluster 3.
2024-11-04 17:14:41,097 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 17:14:41,097 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:14:41,370 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:14:41,629 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:14:41,765 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 17:14:41,773 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 17:14:41,802 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 17:14:41,802 - INFO - Processing Cluster 4.
2024-11-04 17:14:41,815 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 17:14:41,815 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:14:42,080 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:14:42,338 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:14:42,454 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 17:14:42,463 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 17:14:42,492 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 17:14:42,492 - INFO - CSF is identified as cluster 2.
2024-11-04 17:14:42,492 - INFO - Starting visualization with PyVista.
2024-11-04 17:14:42,712 - INFO - Adding Original MRI volume.
2024-11-04 17:14:42,870 - INFO - Adding Denoised MRI volume.
2024-11-04 17:14:43,088 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 17:14:43,231 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 17:14:43,231 - INFO - Current memory usage: 1000.31 MB
2024-11-04 17:14:44,389 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 17:14:44,390 - INFO - Current memory usage: 1126.01 MB
2024-11-04 17:14:44,398 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 17:14:44,462 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 17:14:44,463 - INFO - Current memory usage: 1137.77 MB
2024-11-04 17:14:44,600 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 17:14:44,601 - INFO - Current memory usage: 1137.77 MB
2024-11-04 17:14:44,607 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 17:14:44,791 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 17:14:44,791 - INFO - Current memory usage: 1139.89 MB
2024-11-04 17:14:46,423 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 17:14:46,423 - INFO - Current memory usage: 1207.88 MB
2024-11-04 17:14:46,431 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 17:14:46,552 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 17:14:46,552 - INFO - Current memory usage: 1207.97 MB
2024-11-04 17:14:46,658 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 17:14:46,658 - INFO - Current memory usage: 1207.97 MB
2024-11-04 17:14:46,663 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 17:14:46,733 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 17:14:46,734 - INFO - Current memory usage: 1207.98 MB
2024-11-04 17:14:46,852 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 17:14:46,852 - INFO - Current memory usage: 1207.98 MB
2024-11-04 17:14:46,857 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:14:47,130 - INFO - Translator(prefix=None)
2024-11-04 17:14:47,188 - INFO - awaiting runner setup
2024-11-04 17:14:47,188 - INFO - awaiting site startup
2024-11-04 17:14:47,189 - INFO - Print WSLINK_READY_MSG
2024-11-04 17:14:47,189 - INFO - Schedule auto shutdown with timout 0
2024-11-04 17:14:47,189 - INFO - awaiting running future
2024-11-04 17:14:53,964 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:14:53,970 - INFO - Current memory usage: 1219.03 MB
2024-11-04 17:14:53,977 - INFO - Selected slice indices for saving: [0, 143]
2024-11-04 17:14:54,521 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 17:14:54,659 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 17:14:54,793 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 17:14:54,930 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 17:14:55,072 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 17:14:55,219 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 17:14:55,369 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 17:14:55,521 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 17:14:55,685 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 17:14:55,849 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 17:14:55,854 - INFO - Pipeline completed successfully.
2024-11-04 17:14:55,854 - INFO - Current memory usage: 1187.07 MB
2024-11-04 17:14:55,854 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 17:14:55,867 - INFO - Computed density profiles along x and y axes.
2024-11-04 17:14:55,867 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 17:14:55,899 - INFO - Cluster 0: Score = 7854.579935312271 (X: 4291.768005371094, Y: 3562.8119299411774)
2024-11-04 17:14:55,917 - INFO - Cluster 0: Original Sum = 26953.162109375, Normalized Sum = 287217.1875
2024-11-04 17:14:55,960 - INFO - Cluster 1: Score = 18015.195642471313 (X: 5813.070747375488, Y: 12202.124895095825)
2024-11-04 17:14:55,974 - INFO - Cluster 1: Original Sum = 95300.546875, Normalized Sum = 1445173.0
2024-11-04 17:14:56,023 - INFO - Cluster 2: Score = 16857.78089904785 (X: 10301.632614135742, Y: 6556.148284912109)
2024-11-04 17:14:56,073 - INFO - Cluster 2: Original Sum = 59302.86328125, Normalized Sum = -999242.5625
2024-11-04 17:14:56,109 - INFO - Cluster 3: Score = 8342.984752178192 (X: 3712.395882129669, Y: 4630.588870048523)
2024-11-04 17:14:56,122 - INFO - Cluster 3: Original Sum = 19379.09375, Normalized Sum = 291598.5
2024-11-04 17:14:56,159 - INFO - Cluster 4: Score = 4529.082009792328 (X: 2220.5408577919006, Y: 2308.5411520004272)
2024-11-04 17:14:56,174 - INFO - Cluster 4: Original Sum = 10043.6123046875, Normalized Sum = 145919.890625
2024-11-04 17:14:56,174 - INFO - Good cluster identified as Cluster 1 with score 18015.195642471313.
2024-11-04 17:16:09,334 - INFO - Logging initiated.
2024-11-04 17:16:09,334 - INFO - Pipeline started.
2024-11-04 17:16:09,334 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 17:16:09,415 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 17:16:09,495 - INFO - Denoised image loaded.
2024-11-04 17:16:09,496 - INFO - Current memory usage: 516.17 MB
2024-11-04 17:16:09,524 - INFO - Starting intensity normalization.
2024-11-04 17:16:09,899 - INFO - Intensity normalization complete.
2024-11-04 17:16:09,899 - INFO - Current memory usage: 652.58 MB
2024-11-04 17:16:09,900 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 17:16:09,900 - INFO - Computing neighborhood statistics.
2024-11-04 17:16:10,090 - INFO - Neighborhood statistics computed.
2024-11-04 17:16:10,090 - INFO - Current memory usage: 616.17 MB
2024-11-04 17:16:10,090 - INFO - Computing z-axis value for each voxel.
2024-11-04 17:16:12,891 - INFO - Z-axis value for each voxel computed.
2024-11-04 17:16:12,891 - INFO - Current memory usage: 688.67 MB
2024-11-04 17:16:12,892 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 17:16:13,242 - INFO - Features shape: (9509760, 4)
2024-11-04 17:16:13,242 - INFO - Current memory usage: 870.11 MB
2024-11-04 17:16:13,242 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 17:16:15,076 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 17:16:17,642 - INFO - Clustering complete with spatial connectivity.
2024-11-04 17:16:17,643 - INFO - Current memory usage: 1415.35 MB
2024-11-04 17:16:17,667 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 17:16:17,667 - INFO - Current memory usage: 907.47 MB
2024-11-04 17:16:17,674 - INFO - Processing Cluster 0.
2024-11-04 17:16:17,682 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 17:16:17,682 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:16:17,949 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:16:18,207 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:16:18,332 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 17:16:18,353 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 17:16:18,387 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 17:16:18,387 - INFO - Processing Cluster 1.
2024-11-04 17:16:18,397 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 17:16:18,397 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:16:18,660 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:16:18,918 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:16:19,028 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 17:16:19,046 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 17:16:19,070 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 17:16:19,070 - INFO - Processing Cluster 2.
2024-11-04 17:16:19,081 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 17:16:19,081 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:16:19,348 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:16:19,604 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:16:19,758 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 17:16:19,776 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 17:16:19,817 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 17:16:19,817 - INFO - Processing Cluster 3.
2024-11-04 17:16:19,828 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 17:16:19,828 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:16:20,093 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:16:20,352 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:16:20,462 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 17:16:20,484 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 17:16:20,511 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 17:16:20,511 - INFO - Processing Cluster 4.
2024-11-04 17:16:20,522 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 17:16:20,522 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:16:20,786 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:16:21,052 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:16:21,163 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 17:16:21,183 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 17:16:21,213 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 17:16:21,213 - INFO - CSF is identified as cluster 2.
2024-11-04 17:16:21,213 - INFO - Starting visualization with PyVista.
2024-11-04 17:16:21,410 - INFO - Adding Original MRI volume.
2024-11-04 17:16:21,558 - INFO - Adding Denoised MRI volume.
2024-11-04 17:16:21,682 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 17:16:21,820 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 17:16:21,821 - INFO - Current memory usage: 1012.65 MB
2024-11-04 17:16:22,951 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 17:16:22,952 - INFO - Current memory usage: 1136.41 MB
2024-11-04 17:16:22,960 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 17:16:23,025 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 17:16:23,025 - INFO - Current memory usage: 1148.29 MB
2024-11-04 17:16:23,139 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 17:16:23,139 - INFO - Current memory usage: 1148.29 MB
2024-11-04 17:16:23,144 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 17:16:23,312 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 17:16:23,312 - INFO - Current memory usage: 1148.29 MB
2024-11-04 17:16:24,965 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 17:16:24,966 - INFO - Current memory usage: 1216.18 MB
2024-11-04 17:16:24,974 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 17:16:25,117 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 17:16:25,117 - INFO - Current memory usage: 1215.67 MB
2024-11-04 17:16:25,220 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 17:16:25,220 - INFO - Current memory usage: 1215.67 MB
2024-11-04 17:16:25,225 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 17:16:25,281 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 17:16:25,281 - INFO - Current memory usage: 1214.92 MB
2024-11-04 17:16:25,390 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 17:16:25,390 - INFO - Current memory usage: 1214.92 MB
2024-11-04 17:16:25,395 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:16:25,710 - INFO - Translator(prefix=None)
2024-11-04 17:16:25,758 - INFO - awaiting runner setup
2024-11-04 17:16:25,758 - INFO - awaiting site startup
2024-11-04 17:16:25,759 - INFO - Print WSLINK_READY_MSG
2024-11-04 17:16:25,759 - INFO - Schedule auto shutdown with timout 0
2024-11-04 17:16:25,759 - INFO - awaiting running future
2024-11-04 17:16:32,452 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:16:32,458 - INFO - Current memory usage: 1227.12 MB
2024-11-04 17:16:32,464 - INFO - Selected slice indices for saving: [0, 143]
2024-11-04 17:16:32,822 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 17:16:32,998 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 17:16:33,147 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 17:16:33,296 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 17:16:33,447 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 17:16:33,609 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 17:16:33,777 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 17:16:33,938 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 17:16:34,101 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 17:16:34,256 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 17:16:34,260 - INFO - Pipeline completed successfully.
2024-11-04 17:16:34,261 - INFO - Current memory usage: 1194.77 MB
2024-11-04 17:16:34,261 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 17:16:34,274 - INFO - Computed density profiles along x and y axes.
2024-11-04 17:16:34,274 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 17:16:34,303 - INFO - Cluster 0: Score = 7854.579935312271 (X: 4291.768005371094, Y: 3562.8119299411774)
2024-11-04 17:16:34,322 - INFO - Cluster 0: Original Sum = 26953.162109375, Normalized Sum = 287217.1875
2024-11-04 17:16:34,359 - INFO - Cluster 1: Score = 18015.195642471313 (X: 5813.070747375488, Y: 12202.124895095825)
2024-11-04 17:16:34,369 - INFO - Cluster 1: Original Sum = 95300.546875, Normalized Sum = 1445173.0
2024-11-04 17:16:34,413 - INFO - Cluster 2: Score = 16857.78089904785 (X: 10301.632614135742, Y: 6556.148284912109)
2024-11-04 17:16:34,467 - INFO - Cluster 2: Original Sum = 59302.86328125, Normalized Sum = -999242.5625
2024-11-04 17:16:34,514 - INFO - Cluster 3: Score = 8342.984752178192 (X: 3712.395882129669, Y: 4630.588870048523)
2024-11-04 17:16:34,526 - INFO - Cluster 3: Original Sum = 19379.09375, Normalized Sum = 291598.5
2024-11-04 17:16:34,558 - INFO - Cluster 4: Score = 4529.082009792328 (X: 2220.5408577919006, Y: 2308.5411520004272)
2024-11-04 17:16:34,568 - INFO - Cluster 4: Original Sum = 10043.6123046875, Normalized Sum = 145919.890625
2024-11-04 17:16:34,568 - INFO - Good cluster identified as Cluster 1 with score 18015.195642471313.
2024-11-04 17:16:35,459 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/density_histogram.png'.
2024-11-04 17:16:35,459 - INFO - ----- Step 12: Removing Eyes from the Good Cluster Mask -----
2024-11-04 17:16:35,459 - INFO - Removing eyes at centers: [(72, 64, 65), (72, 64, 195)] with radius 10 voxels.
2024-11-04 17:16:35,529 - INFO - ----- Step 13: Saving the Good Cluster Mask -----
2024-11-04 17:16:35,545 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-04 17:16:35,545 - INFO - ----- Step 14: Calculating CSF Volume -----
2024-11-04 17:16:35,551 - INFO - Total CSF Volume: 142404.84791909464 mm³
2024-11-04 17:16:35,551 - INFO - ----- Step 15: Final Visualization of the Good CSF Mask -----
2024-11-04 17:16:35,551 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-04 17:16:36,194 - INFO - Exporting the Good CSF Mask visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_cluster.html'.
2024-11-04 17:16:44,132 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_cluster.html'.
2024-11-04 17:16:44,132 - INFO - Visualization process completed.
2024-11-04 17:16:44,134 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:16:44,134 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:16:44,134 - INFO - Final cleanup completed.
2024-11-04 17:16:44,134 - INFO - Current memory usage: 1267.62 MB
2024-11-04 17:22:55,608 - INFO - Logging initiated.
2024-11-04 17:22:55,609 - INFO - Pipeline started.
2024-11-04 17:22:55,609 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 17:22:55,728 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 17:22:55,789 - INFO - Denoised image loaded.
2024-11-04 17:22:55,790 - INFO - Current memory usage: 518.37 MB
2024-11-04 17:22:55,823 - INFO - Starting intensity normalization.
2024-11-04 17:22:56,381 - INFO - Intensity normalization complete.
2024-11-04 17:22:56,381 - INFO - Current memory usage: 654.72 MB
2024-11-04 17:22:56,381 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 17:22:56,382 - INFO - Computing neighborhood statistics.
2024-11-04 17:22:56,574 - INFO - Neighborhood statistics computed.
2024-11-04 17:22:56,575 - INFO - Current memory usage: 618.31 MB
2024-11-04 17:22:56,575 - INFO - Computing z-axis value for each voxel.
2024-11-04 17:22:59,476 - INFO - Z-axis value for each voxel computed.
2024-11-04 17:22:59,476 - INFO - Current memory usage: 690.81 MB
2024-11-04 17:22:59,476 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 17:22:59,925 - INFO - Features shape: (9509760, 4)
2024-11-04 17:22:59,926 - INFO - Current memory usage: 872.15 MB
2024-11-04 17:22:59,926 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 17:23:01,897 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 17:23:04,594 - INFO - Clustering complete with spatial connectivity.
2024-11-04 17:23:04,595 - INFO - Current memory usage: 1425.01 MB
2024-11-04 17:23:04,631 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 17:23:04,632 - INFO - Current memory usage: 917.13 MB
2024-11-04 17:23:04,643 - INFO - Processing Cluster 0.
2024-11-04 17:23:04,655 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 17:23:04,656 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:23:05,116 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:23:05,525 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:23:05,771 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 17:23:05,802 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 17:23:05,868 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 17:23:05,868 - INFO - Processing Cluster 1.
2024-11-04 17:23:05,889 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 17:23:05,889 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:23:06,365 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:23:06,771 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:23:07,008 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 17:23:07,052 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 17:23:07,105 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 17:23:07,106 - INFO - Processing Cluster 2.
2024-11-04 17:23:07,121 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 17:23:07,121 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:23:07,605 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:23:08,039 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:23:08,376 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 17:23:08,398 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 17:23:08,470 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 17:23:08,470 - INFO - Processing Cluster 3.
2024-11-04 17:23:08,489 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 17:23:08,489 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:23:08,968 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:23:09,398 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:23:09,602 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 17:23:09,615 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 17:23:09,647 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 17:23:09,647 - INFO - Processing Cluster 4.
2024-11-04 17:23:09,658 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 17:23:09,659 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:23:10,064 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:23:10,410 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:23:10,560 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 17:23:10,570 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 17:23:10,603 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 17:23:10,603 - INFO - CSF is identified as cluster 2.
2024-11-04 17:23:10,603 - INFO - Starting visualization with PyVista.
2024-11-04 17:23:10,852 - INFO - Adding Original MRI volume.
2024-11-04 17:23:11,017 - INFO - Adding Denoised MRI volume.
2024-11-04 17:23:11,217 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 17:23:11,392 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 17:23:11,392 - INFO - Current memory usage: 1024.20 MB
2024-11-04 17:23:12,702 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 17:23:12,703 - INFO - Current memory usage: 1149.61 MB
2024-11-04 17:23:12,713 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 17:23:12,788 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 17:23:12,789 - INFO - Current memory usage: 1161.25 MB
2024-11-04 17:23:12,922 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 17:23:12,922 - INFO - Current memory usage: 1161.25 MB
2024-11-04 17:23:12,929 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 17:23:13,117 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 17:23:13,118 - INFO - Current memory usage: 1161.38 MB
2024-11-04 17:23:15,034 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 17:23:15,034 - INFO - Current memory usage: 1228.38 MB
2024-11-04 17:23:15,042 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 17:23:15,145 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 17:23:15,145 - INFO - Current memory usage: 1228.34 MB
2024-11-04 17:23:15,278 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 17:23:15,278 - INFO - Current memory usage: 1228.34 MB
2024-11-04 17:23:15,283 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 17:23:15,346 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 17:23:15,346 - INFO - Current memory usage: 1228.22 MB
2024-11-04 17:23:15,462 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 17:23:15,462 - INFO - Current memory usage: 1228.22 MB
2024-11-04 17:23:15,467 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:23:15,756 - INFO - Translator(prefix=None)
2024-11-04 17:23:15,812 - INFO - awaiting runner setup
2024-11-04 17:23:15,812 - INFO - awaiting site startup
2024-11-04 17:23:15,813 - INFO - Print WSLINK_READY_MSG
2024-11-04 17:23:15,813 - INFO - Schedule auto shutdown with timout 0
2024-11-04 17:23:15,813 - INFO - awaiting running future
2024-11-04 17:23:22,901 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:23:22,907 - INFO - Current memory usage: 1240.28 MB
2024-11-04 17:23:22,912 - INFO - Selected slice indices for saving: [0, 143]
2024-11-04 17:23:23,520 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 17:23:23,654 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 17:23:23,790 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 17:23:23,936 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 17:23:24,084 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 17:23:24,244 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 17:23:24,402 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 17:23:24,559 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 17:23:24,721 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 17:23:24,889 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 17:23:24,894 - INFO - Pipeline completed successfully.
2024-11-04 17:23:24,894 - INFO - Current memory usage: 1208.01 MB
2024-11-04 17:23:24,894 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 17:23:24,909 - INFO - Computed density profiles along x and y axes.
2024-11-04 17:23:24,909 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 17:23:24,942 - INFO - Cluster 0: Score = 7854.579935312271 (X: 4291.768005371094, Y: 3562.8119299411774)
2024-11-04 17:23:24,964 - INFO - Cluster 0: Original Sum = 26953.162109375, Normalized Sum = 287217.1875
2024-11-04 17:23:25,020 - INFO - Cluster 1: Score = 18015.195642471313 (X: 5813.070747375488, Y: 12202.124895095825)
2024-11-04 17:23:25,036 - INFO - Cluster 1: Original Sum = 95300.546875, Normalized Sum = 1445173.0
2024-11-04 17:23:25,078 - INFO - Cluster 2: Score = 16857.78089904785 (X: 10301.632614135742, Y: 6556.148284912109)
2024-11-04 17:23:25,142 - INFO - Cluster 2: Original Sum = 59302.86328125, Normalized Sum = -999242.5625
2024-11-04 17:23:25,192 - INFO - Cluster 3: Score = 8342.984752178192 (X: 3712.395882129669, Y: 4630.588870048523)
2024-11-04 17:23:25,206 - INFO - Cluster 3: Original Sum = 19379.09375, Normalized Sum = 291598.5
2024-11-04 17:23:25,253 - INFO - Cluster 4: Score = 4529.082009792328 (X: 2220.5408577919006, Y: 2308.5411520004272)
2024-11-04 17:23:25,268 - INFO - Cluster 4: Original Sum = 10043.6123046875, Normalized Sum = 145919.890625
2024-11-04 17:23:25,268 - INFO - Good cluster identified as Cluster 1 with score 18015.195642471313.
2024-11-04 17:23:26,299 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/density_histogram.png'.
2024-11-04 17:23:26,299 - INFO - ----- Step 12: Removing Eyes from the Good Cluster Mask -----
2024-11-04 17:23:26,299 - INFO - Starting automated eye detection within the CSF mask.
2024-11-04 17:23:26,478 - INFO - Detected eye at (71.34341764777608, 77.74785601062172, 137.43901315522078) with peak intensity 0.6586090326309204.
2024-11-04 17:23:26,647 - INFO - Detected eye at (71.44170749348363, 78.72475674495408, 137.96507771879308) with peak intensity 0.6676164269447327.
2024-11-04 17:23:26,647 - INFO - Successfully detected eye centers: [(71, 77, 137), (71, 78, 137)]
2024-11-04 17:23:26,647 - INFO - Removing eyes at centers: [(71, 77, 137), (71, 78, 137)] with radius 10 voxels.
2024-11-04 17:23:26,847 - INFO - ----- Step 13: Saving the Good Cluster Mask -----
2024-11-04 17:23:26,882 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-04 17:23:26,882 - INFO - ----- Step 14: Calculating CSF Volume -----
2024-11-04 17:23:26,890 - INFO - Total CSF Volume: 138790.4148575674 mm³
2024-11-04 17:23:26,890 - INFO - ----- Step 15: Final Visualization of the Good CSF Mask -----
2024-11-04 17:23:26,890 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-04 17:23:27,111 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster.html'.
2024-11-04 17:23:27,287 - INFO - Visualization successfully saved to 'good_cluster.html'.
2024-11-04 17:23:27,288 - INFO - Visualization process completed.
2024-11-04 17:23:27,289 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:23:27,289 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:23:27,289 - INFO - Final cleanup completed.
2024-11-04 17:23:27,290 - INFO - Current memory usage: 1259.25 MB
2024-11-04 17:26:38,107 - INFO - Logging initiated.
2024-11-04 17:26:38,107 - INFO - Pipeline started.
2024-11-04 17:26:38,107 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 17:26:38,355 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 17:26:38,457 - INFO - Denoised image loaded.
2024-11-04 17:26:38,457 - INFO - Current memory usage: 517.78 MB
2024-11-04 17:26:38,565 - INFO - Starting intensity normalization.
2024-11-04 17:26:38,953 - INFO - Intensity normalization complete.
2024-11-04 17:26:38,954 - INFO - Current memory usage: 654.14 MB
2024-11-04 17:26:38,956 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 17:26:38,956 - INFO - Computing neighborhood statistics.
2024-11-04 17:26:39,236 - INFO - Neighborhood statistics computed.
2024-11-04 17:26:39,236 - INFO - Current memory usage: 617.72 MB
2024-11-04 17:26:39,236 - INFO - Computing z-axis value for each voxel.
2024-11-04 17:26:42,261 - INFO - Z-axis value for each voxel computed.
2024-11-04 17:26:42,262 - INFO - Current memory usage: 690.22 MB
2024-11-04 17:26:42,262 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 17:26:42,707 - INFO - Features shape: (9509760, 4)
2024-11-04 17:26:42,707 - INFO - Current memory usage: 871.68 MB
2024-11-04 17:26:42,707 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 17:26:44,984 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 17:26:48,390 - INFO - Clustering complete with spatial connectivity.
2024-11-04 17:26:48,391 - INFO - Current memory usage: 1408.99 MB
2024-11-04 17:26:48,424 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 17:26:48,425 - INFO - Current memory usage: 901.11 MB
2024-11-04 17:26:48,434 - INFO - Processing Cluster 0.
2024-11-04 17:26:48,451 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 17:26:48,451 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:26:49,047 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:26:49,572 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:26:49,855 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 17:26:49,880 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 17:26:49,943 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 17:26:49,943 - INFO - Processing Cluster 1.
2024-11-04 17:26:49,959 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 17:26:49,959 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:26:50,422 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:26:50,817 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:26:51,038 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 17:26:51,067 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 17:26:51,107 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 17:26:51,108 - INFO - Processing Cluster 2.
2024-11-04 17:26:51,121 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 17:26:51,121 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:26:51,562 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:26:51,944 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:26:52,233 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 17:26:52,260 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 17:26:52,339 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 17:26:52,339 - INFO - Processing Cluster 3.
2024-11-04 17:26:52,355 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 17:26:52,356 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:26:52,805 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:26:53,192 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:26:53,422 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 17:26:53,450 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 17:26:53,498 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 17:26:53,499 - INFO - Processing Cluster 4.
2024-11-04 17:26:53,517 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 17:26:53,517 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:26:53,968 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:26:54,386 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:26:54,643 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 17:26:54,672 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 17:26:54,719 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 17:26:54,720 - INFO - CSF is identified as cluster 2.
2024-11-04 17:26:54,720 - INFO - Starting visualization with PyVista.
2024-11-04 17:26:55,045 - INFO - Adding Original MRI volume.
2024-11-04 17:26:55,224 - INFO - Adding Denoised MRI volume.
2024-11-04 17:26:55,357 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 17:26:55,608 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 17:26:55,608 - INFO - Current memory usage: 1009.04 MB
2024-11-04 17:26:57,073 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 17:26:57,074 - INFO - Current memory usage: 1138.39 MB
2024-11-04 17:26:57,082 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 17:26:57,161 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 17:26:57,162 - INFO - Current memory usage: 1149.16 MB
2024-11-04 17:26:57,355 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 17:26:57,355 - INFO - Current memory usage: 1149.16 MB
2024-11-04 17:26:57,360 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 17:26:57,568 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 17:26:57,569 - INFO - Current memory usage: 1152.32 MB
2024-11-04 17:26:59,590 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 17:26:59,590 - INFO - Current memory usage: 1218.52 MB
2024-11-04 17:26:59,598 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 17:26:59,676 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 17:26:59,677 - INFO - Current memory usage: 1218.59 MB
2024-11-04 17:26:59,801 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 17:26:59,802 - INFO - Current memory usage: 1218.59 MB
2024-11-04 17:26:59,807 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 17:26:59,864 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 17:26:59,864 - INFO - Current memory usage: 1218.59 MB
2024-11-04 17:26:59,982 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 17:26:59,982 - INFO - Current memory usage: 1218.59 MB
2024-11-04 17:26:59,987 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:27:00,267 - INFO - Translator(prefix=None)
2024-11-04 17:27:00,324 - INFO - awaiting runner setup
2024-11-04 17:27:00,324 - INFO - awaiting site startup
2024-11-04 17:27:00,325 - INFO - Print WSLINK_READY_MSG
2024-11-04 17:27:00,325 - INFO - Schedule auto shutdown with timout 0
2024-11-04 17:27:00,325 - INFO - awaiting running future
2024-11-04 17:27:07,791 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:27:07,795 - INFO - Current memory usage: 1230.32 MB
2024-11-04 17:27:07,799 - INFO - Selected slice indices for saving: [0, 143]
2024-11-04 17:27:08,252 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 17:27:08,389 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 17:27:08,533 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 17:27:08,679 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 17:27:08,825 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 17:27:08,977 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 17:27:09,131 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 17:27:09,286 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 17:27:09,442 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 17:27:09,597 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 17:27:09,601 - INFO - Pipeline completed successfully.
2024-11-04 17:27:09,602 - INFO - Current memory usage: 1196.52 MB
2024-11-04 17:27:09,602 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 17:27:09,615 - INFO - Computed density profiles along x and y axes.
2024-11-04 17:27:09,615 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 17:27:09,643 - INFO - Cluster 0: Score = 7854.579935312271 (X: 4291.768005371094, Y: 3562.8119299411774)
2024-11-04 17:27:09,663 - INFO - Cluster 0: Original Sum = 26953.162109375, Normalized Sum = 287217.1875
2024-11-04 17:27:09,704 - INFO - Cluster 1: Score = 18015.195642471313 (X: 5813.070747375488, Y: 12202.124895095825)
2024-11-04 17:27:09,720 - INFO - Cluster 1: Original Sum = 95300.546875, Normalized Sum = 1445173.0
2024-11-04 17:27:09,784 - INFO - Cluster 2: Score = 16857.78089904785 (X: 10301.632614135742, Y: 6556.148284912109)
2024-11-04 17:27:09,845 - INFO - Cluster 2: Original Sum = 59302.86328125, Normalized Sum = -999242.5625
2024-11-04 17:27:09,879 - INFO - Cluster 3: Score = 8342.984752178192 (X: 3712.395882129669, Y: 4630.588870048523)
2024-11-04 17:27:09,892 - INFO - Cluster 3: Original Sum = 19379.09375, Normalized Sum = 291598.5
2024-11-04 17:27:09,941 - INFO - Cluster 4: Score = 4529.082009792328 (X: 2220.5408577919006, Y: 2308.5411520004272)
2024-11-04 17:27:09,954 - INFO - Cluster 4: Original Sum = 10043.6123046875, Normalized Sum = 145919.890625
2024-11-04 17:27:09,955 - INFO - Good cluster identified as Cluster 1 with score 18015.195642471313.
2024-11-04 17:27:11,039 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/density_histogram.png'.
2024-11-04 17:27:11,039 - INFO - ----- Step 12: Removing Eyes from the Good Cluster Mask -----
2024-11-04 17:27:11,039 - INFO - Starting automated eye detection within the CSF mask.
2024-11-04 17:27:11,643 - INFO - Saved intensity histogram at 'eye_detection_histogram.png'.
2024-11-04 17:27:11,843 - INFO - Detected eye 1 at (71.34341764777608, 77.74785601062172, 137.43901315522078) with peak intensity 0.6586.
2024-11-04 17:27:12,034 - INFO - Detected eye 2 at (71.44170749348363, 78.72475674495408, 137.96507771879308) with peak intensity 0.6676.
2024-11-04 17:27:12,034 - INFO - Successfully detected eye centers: [(71, 77, 137), (71, 78, 137)]
2024-11-04 17:27:12,043 - INFO - Saved detected eyes mask at 'detected_eyes_mask.tif'.
2024-11-04 17:27:12,044 - INFO - Removing eyes at centers: [(71, 77, 137), (71, 78, 137)] with radius 10 voxels.
2024-11-04 17:27:12,170 - INFO - ----- Step 13: Saving the Good Cluster Mask -----
2024-11-04 17:27:12,210 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-04 17:27:12,211 - INFO - ----- Step 14: Calculating CSF Volume -----
2024-11-04 17:27:12,219 - INFO - Total CSF Volume: 138790.4148575674 mm³
2024-11-04 17:27:12,219 - INFO - ----- Step 15: Final Visualization of the Good CSF Mask -----
2024-11-04 17:27:12,219 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-04 17:27:12,452 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster.html'.
2024-11-04 17:27:12,582 - INFO - Visualization successfully saved to 'good_cluster.html'.
2024-11-04 17:27:12,583 - INFO - Visualization process completed.
2024-11-04 17:27:12,585 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:27:12,585 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:27:12,585 - INFO - Final cleanup completed.
2024-11-04 17:27:12,585 - INFO - Current memory usage: 1249.40 MB
2024-11-04 17:29:41,345 - INFO - Logging initiated.
2024-11-04 17:29:41,345 - INFO - Pipeline started.
2024-11-04 17:29:41,346 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 17:29:41,475 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 17:29:41,527 - INFO - Denoised image loaded.
2024-11-04 17:29:41,527 - INFO - Current memory usage: 518.21 MB
2024-11-04 17:29:41,584 - INFO - Starting intensity normalization.
2024-11-04 17:29:42,030 - INFO - Intensity normalization complete.
2024-11-04 17:29:42,030 - INFO - Current memory usage: 654.52 MB
2024-11-04 17:29:42,030 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 17:29:42,031 - INFO - Computing neighborhood statistics.
2024-11-04 17:29:42,241 - INFO - Neighborhood statistics computed.
2024-11-04 17:29:42,241 - INFO - Current memory usage: 618.10 MB
2024-11-04 17:29:42,241 - INFO - Computing z-axis value for each voxel.
2024-11-04 17:29:45,072 - INFO - Z-axis value for each voxel computed.
2024-11-04 17:29:45,072 - INFO - Current memory usage: 690.60 MB
2024-11-04 17:29:45,072 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 17:29:45,421 - INFO - Features shape: (9509760, 4)
2024-11-04 17:29:45,421 - INFO - Current memory usage: 872.04 MB
2024-11-04 17:29:45,421 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 17:29:47,250 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 17:29:49,592 - INFO - Clustering complete with spatial connectivity.
2024-11-04 17:29:49,593 - INFO - Current memory usage: 1401.80 MB
2024-11-04 17:29:49,618 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 17:29:49,619 - INFO - Current memory usage: 893.92 MB
2024-11-04 17:29:49,628 - INFO - Processing Cluster 0.
2024-11-04 17:29:49,644 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 17:29:49,644 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:29:50,112 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:29:50,455 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:29:50,611 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 17:29:50,630 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 17:29:50,671 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 17:29:50,671 - INFO - Processing Cluster 1.
2024-11-04 17:29:50,685 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 17:29:50,685 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:29:51,011 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:29:51,322 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:29:51,447 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 17:29:51,465 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 17:29:51,493 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 17:29:51,493 - INFO - Processing Cluster 2.
2024-11-04 17:29:51,507 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 17:29:51,507 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:29:51,826 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:29:52,127 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:29:52,300 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 17:29:52,308 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 17:29:52,353 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 17:29:52,353 - INFO - Processing Cluster 3.
2024-11-04 17:29:52,364 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 17:29:52,364 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:29:52,675 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:29:52,981 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:29:53,105 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 17:29:53,113 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 17:29:53,149 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 17:29:53,149 - INFO - Processing Cluster 4.
2024-11-04 17:29:53,160 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 17:29:53,161 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:29:53,478 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:29:53,775 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:29:53,896 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 17:29:53,905 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 17:29:53,943 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 17:29:53,943 - INFO - CSF is identified as cluster 2.
2024-11-04 17:29:53,943 - INFO - Starting visualization with PyVista.
2024-11-04 17:29:54,190 - INFO - Adding Original MRI volume.
2024-11-04 17:29:54,361 - INFO - Adding Denoised MRI volume.
2024-11-04 17:29:54,499 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 17:29:54,691 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 17:29:54,692 - INFO - Current memory usage: 1004.31 MB
2024-11-04 17:29:55,892 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 17:29:55,892 - INFO - Current memory usage: 1133.66 MB
2024-11-04 17:29:55,904 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 17:29:55,968 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 17:29:55,968 - INFO - Current memory usage: 1144.54 MB
2024-11-04 17:29:56,115 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 17:29:56,115 - INFO - Current memory usage: 1144.54 MB
2024-11-04 17:29:56,120 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 17:29:56,289 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 17:29:56,289 - INFO - Current memory usage: 1147.65 MB
2024-11-04 17:29:57,879 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 17:29:57,879 - INFO - Current memory usage: 1213.85 MB
2024-11-04 17:29:57,887 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 17:29:57,944 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 17:29:57,944 - INFO - Current memory usage: 1213.91 MB
2024-11-04 17:29:58,063 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 17:29:58,063 - INFO - Current memory usage: 1213.91 MB
2024-11-04 17:29:58,069 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 17:29:58,134 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 17:29:58,134 - INFO - Current memory usage: 1213.91 MB
2024-11-04 17:29:58,251 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 17:29:58,251 - INFO - Current memory usage: 1213.91 MB
2024-11-04 17:29:58,256 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:29:58,579 - INFO - Translator(prefix=None)
2024-11-04 17:29:58,630 - INFO - awaiting runner setup
2024-11-04 17:29:58,631 - INFO - awaiting site startup
2024-11-04 17:29:58,631 - INFO - Print WSLINK_READY_MSG
2024-11-04 17:29:58,631 - INFO - Schedule auto shutdown with timout 0
2024-11-04 17:29:58,631 - INFO - awaiting running future
2024-11-04 17:30:05,468 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:30:05,472 - INFO - Current memory usage: 1225.79 MB
2024-11-04 17:30:05,477 - INFO - Selected slice indices for saving: [0, 143]
2024-11-04 17:30:05,973 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 17:30:06,112 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 17:30:06,257 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 17:30:06,403 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 17:30:06,552 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 17:30:06,704 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 17:30:06,875 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 17:30:07,036 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 17:30:07,218 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 17:30:07,388 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 17:30:07,393 - INFO - Pipeline completed successfully.
2024-11-04 17:30:07,393 - INFO - Current memory usage: 1194.23 MB
2024-11-04 17:30:07,393 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 17:30:07,406 - INFO - Computed density profiles along x and y axes.
2024-11-04 17:30:07,406 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 17:30:07,438 - INFO - Cluster 0: Score = 7854.579935312271 (X: 4291.768005371094, Y: 3562.8119299411774)
2024-11-04 17:30:07,461 - INFO - Cluster 0: Original Sum = 26953.162109375, Normalized Sum = 287217.1875
2024-11-04 17:30:07,504 - INFO - Cluster 1: Score = 18015.195642471313 (X: 5813.070747375488, Y: 12202.124895095825)
2024-11-04 17:30:07,518 - INFO - Cluster 1: Original Sum = 95300.546875, Normalized Sum = 1445173.0
2024-11-04 17:30:07,571 - INFO - Cluster 2: Score = 16857.78089904785 (X: 10301.632614135742, Y: 6556.148284912109)
2024-11-04 17:30:07,627 - INFO - Cluster 2: Original Sum = 59302.86328125, Normalized Sum = -999242.5625
2024-11-04 17:30:07,662 - INFO - Cluster 3: Score = 8342.984752178192 (X: 3712.395882129669, Y: 4630.588870048523)
2024-11-04 17:30:07,675 - INFO - Cluster 3: Original Sum = 19379.09375, Normalized Sum = 291598.5
2024-11-04 17:30:07,737 - INFO - Cluster 4: Score = 4529.082009792328 (X: 2220.5408577919006, Y: 2308.5411520004272)
2024-11-04 17:30:07,751 - INFO - Cluster 4: Original Sum = 10043.6123046875, Normalized Sum = 145919.890625
2024-11-04 17:30:07,751 - INFO - Good cluster identified as Cluster 1 with score 18015.195642471313.
2024-11-04 17:30:08,820 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/density_histogram.png'.
2024-11-04 17:30:08,820 - INFO - ----- Step 12: Removing Eyes from the Good Cluster Mask -----
2024-11-04 17:30:08,821 - INFO - Starting automated eye detection within the CSF mask.
2024-11-04 17:30:09,377 - INFO - Saved intensity histogram at 'eye_detection_histogram.png'.
2024-11-04 17:30:09,625 - INFO - Detected eye 1 at (71.34341764777608, 77.74785601062172, 137.43901315522078) with peak intensity 0.6586.
2024-11-04 17:30:09,929 - INFO - Detected eye 2 at (71.44170749348363, 78.72475674495408, 137.96507771879308) with peak intensity 0.6676.
2024-11-04 17:30:09,929 - INFO - Successfully detected eye centers: [(71, 77, 137), (71, 78, 137)]
2024-11-04 17:30:09,950 - INFO - Saved detected eyes mask at 'detected_eyes_mask.tif'.
2024-11-04 17:30:11,571 - INFO - Saved overlaid 2D histogram with eyes mask at 'eye_detection_overlaid.png'.
2024-11-04 17:30:11,571 - INFO - Removing eyes at centers: [(71, 77, 137), (71, 78, 137)] with radius 10 voxels.
2024-11-04 17:30:11,626 - INFO - ----- Step 13: Saving the Good Cluster Mask -----
2024-11-04 17:30:11,653 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-04 17:30:11,654 - INFO - ----- Step 14: Calculating CSF Volume -----
2024-11-04 17:30:11,659 - INFO - Total CSF Volume: 138790.4148575674 mm³
2024-11-04 17:30:11,659 - INFO - ----- Step 15: Final Visualization of the Good CSF Mask -----
2024-11-04 17:30:11,659 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-04 17:30:11,892 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster.html'.
2024-11-04 17:30:12,037 - INFO - Visualization successfully saved to 'good_cluster.html'.
2024-11-04 17:30:12,038 - INFO - Visualization process completed.
2024-11-04 17:30:12,039 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:30:12,039 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:30:12,039 - INFO - Final cleanup completed.
2024-11-04 17:30:12,039 - INFO - Current memory usage: 1196.49 MB
2024-11-04 17:36:50,244 - INFO - Logging initiated.
2024-11-04 17:36:50,244 - INFO - Pipeline started.
2024-11-04 17:36:50,244 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 17:36:50,388 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 17:36:50,474 - INFO - Denoised image loaded.
2024-11-04 17:36:50,474 - INFO - Current memory usage: 518.30 MB
2024-11-04 17:36:50,527 - INFO - Starting intensity normalization.
2024-11-04 17:36:50,993 - INFO - Intensity normalization complete.
2024-11-04 17:36:50,993 - INFO - Current memory usage: 654.66 MB
2024-11-04 17:36:50,996 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 17:36:50,996 - INFO - Computing neighborhood statistics.
2024-11-04 17:36:51,276 - INFO - Neighborhood statistics computed.
2024-11-04 17:36:51,276 - INFO - Current memory usage: 618.23 MB
2024-11-04 17:36:51,276 - INFO - Computing z-axis value for each voxel.
2024-11-04 17:36:54,458 - INFO - Z-axis value for each voxel computed.
2024-11-04 17:36:54,459 - INFO - Current memory usage: 690.78 MB
2024-11-04 17:36:54,459 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 17:36:54,949 - INFO - Features shape: (9509760, 4)
2024-11-04 17:36:54,949 - INFO - Current memory usage: 872.22 MB
2024-11-04 17:36:54,949 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 17:36:57,074 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 17:36:59,356 - INFO - Clustering complete with spatial connectivity.
2024-11-04 17:36:59,356 - INFO - Current memory usage: 1394.99 MB
2024-11-04 17:36:59,382 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 17:36:59,383 - INFO - Current memory usage: 887.11 MB
2024-11-04 17:36:59,393 - INFO - Processing Cluster 0.
2024-11-04 17:36:59,408 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 17:36:59,408 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:36:59,900 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:37:00,245 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:37:00,391 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 17:37:00,402 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 17:37:00,442 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 17:37:00,443 - INFO - Processing Cluster 1.
2024-11-04 17:37:00,452 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 17:37:00,452 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:37:00,784 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:37:01,108 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:37:01,234 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 17:37:01,253 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 17:37:01,294 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 17:37:01,294 - INFO - Processing Cluster 2.
2024-11-04 17:37:01,311 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 17:37:01,311 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:37:01,657 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:37:01,961 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:37:02,132 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 17:37:02,151 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 17:37:02,197 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 17:37:02,197 - INFO - Processing Cluster 3.
2024-11-04 17:37:02,206 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 17:37:02,206 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:37:02,509 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:37:02,804 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:37:02,924 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 17:37:02,942 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 17:37:02,966 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 17:37:02,966 - INFO - Processing Cluster 4.
2024-11-04 17:37:02,978 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 17:37:02,978 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:37:03,278 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:37:03,570 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:37:03,691 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 17:37:03,710 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 17:37:03,744 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 17:37:03,744 - INFO - CSF is identified as cluster 2.
2024-11-04 17:37:03,744 - INFO - Starting visualization with PyVista.
2024-11-04 17:37:03,932 - INFO - Adding Original MRI volume.
2024-11-04 17:37:04,163 - INFO - Adding Denoised MRI volume.
2024-11-04 17:37:04,354 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 17:37:04,590 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 17:37:04,590 - INFO - Current memory usage: 993.54 MB
2024-11-04 17:37:05,916 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 17:37:05,916 - INFO - Current memory usage: 1123.43 MB
2024-11-04 17:37:05,924 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 17:37:05,989 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 17:37:05,989 - INFO - Current memory usage: 1133.82 MB
2024-11-04 17:37:06,126 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 17:37:06,126 - INFO - Current memory usage: 1133.82 MB
2024-11-04 17:37:06,131 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 17:37:06,323 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 17:37:06,324 - INFO - Current memory usage: 1136.89 MB
2024-11-04 17:37:07,956 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 17:37:07,956 - INFO - Current memory usage: 1202.82 MB
2024-11-04 17:37:07,963 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 17:37:08,031 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 17:37:08,031 - INFO - Current memory usage: 1202.92 MB
2024-11-04 17:37:08,149 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 17:37:08,150 - INFO - Current memory usage: 1202.92 MB
2024-11-04 17:37:08,155 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 17:37:08,218 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 17:37:08,219 - INFO - Current memory usage: 1202.92 MB
2024-11-04 17:37:08,339 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 17:37:08,340 - INFO - Current memory usage: 1202.92 MB
2024-11-04 17:37:08,346 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:37:08,582 - INFO - Translator(prefix=None)
2024-11-04 17:37:08,638 - INFO - awaiting runner setup
2024-11-04 17:37:08,638 - INFO - awaiting site startup
2024-11-04 17:37:08,639 - INFO - Print WSLINK_READY_MSG
2024-11-04 17:37:08,639 - INFO - Schedule auto shutdown with timout 0
2024-11-04 17:37:08,639 - INFO - awaiting running future
2024-11-04 17:37:15,572 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:37:15,575 - INFO - Current memory usage: 1214.35 MB
2024-11-04 17:37:15,579 - INFO - Selected slice indices for saving: [0, 143]
2024-11-04 17:37:15,914 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 17:37:16,065 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 17:37:16,223 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 17:37:16,380 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 17:37:16,533 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 17:37:16,694 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 17:37:16,857 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 17:37:17,014 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 17:37:17,171 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 17:37:17,326 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 17:37:17,331 - INFO - Pipeline completed successfully.
2024-11-04 17:37:17,331 - INFO - Current memory usage: 1180.90 MB
2024-11-04 17:37:17,331 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 17:37:17,344 - INFO - Computed density profiles along x and y axes.
2024-11-04 17:37:17,344 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 17:37:17,378 - INFO - Cluster 0: Score = 7854.579935312271 (X: 4291.768005371094, Y: 3562.8119299411774)
2024-11-04 17:37:17,398 - INFO - Cluster 0: Original Sum = 26953.162109375, Normalized Sum = 287217.1875
2024-11-04 17:37:17,443 - INFO - Cluster 1: Score = 18015.195642471313 (X: 5813.070747375488, Y: 12202.124895095825)
2024-11-04 17:37:17,459 - INFO - Cluster 1: Original Sum = 95300.546875, Normalized Sum = 1445173.0
2024-11-04 17:37:17,505 - INFO - Cluster 2: Score = 16857.78089904785 (X: 10301.632614135742, Y: 6556.148284912109)
2024-11-04 17:37:17,563 - INFO - Cluster 2: Original Sum = 59302.86328125, Normalized Sum = -999242.5625
2024-11-04 17:37:17,608 - INFO - Cluster 3: Score = 8342.984752178192 (X: 3712.395882129669, Y: 4630.588870048523)
2024-11-04 17:37:17,619 - INFO - Cluster 3: Original Sum = 19379.09375, Normalized Sum = 291598.5
2024-11-04 17:37:17,664 - INFO - Cluster 4: Score = 4529.082009792328 (X: 2220.5408577919006, Y: 2308.5411520004272)
2024-11-04 17:37:17,680 - INFO - Cluster 4: Original Sum = 10043.6123046875, Normalized Sum = 145919.890625
2024-11-04 17:37:17,681 - INFO - Good cluster identified as Cluster 1 with score 18015.195642471313.
2024-11-04 17:37:18,645 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/density_histogram.png'.
2024-11-04 17:37:18,645 - INFO - ----- Step 12: Removing Eyes from the Good Cluster Mask -----
2024-11-04 17:37:52,840 - INFO - Logging initiated.
2024-11-04 17:37:52,840 - INFO - Pipeline started.
2024-11-04 17:37:52,840 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 17:37:52,936 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 17:37:53,014 - INFO - Denoised image loaded.
2024-11-04 17:37:53,015 - INFO - Current memory usage: 517.79 MB
2024-11-04 17:37:53,050 - INFO - Starting intensity normalization.
2024-11-04 17:37:53,461 - INFO - Intensity normalization complete.
2024-11-04 17:37:53,462 - INFO - Current memory usage: 654.14 MB
2024-11-04 17:37:53,462 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 17:37:53,462 - INFO - Computing neighborhood statistics.
2024-11-04 17:37:53,654 - INFO - Neighborhood statistics computed.
2024-11-04 17:37:53,654 - INFO - Current memory usage: 617.72 MB
2024-11-04 17:37:53,654 - INFO - Computing z-axis value for each voxel.
2024-11-04 17:37:56,510 - INFO - Z-axis value for each voxel computed.
2024-11-04 17:37:56,510 - INFO - Current memory usage: 690.22 MB
2024-11-04 17:37:56,510 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 17:37:56,824 - INFO - Features shape: (9509760, 4)
2024-11-04 17:37:56,824 - INFO - Current memory usage: 871.66 MB
2024-11-04 17:37:56,824 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 17:37:58,603 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 17:38:00,460 - INFO - Clustering complete with spatial connectivity.
2024-11-04 17:38:00,460 - INFO - Current memory usage: 1425.95 MB
2024-11-04 17:38:00,479 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 17:38:00,479 - INFO - Current memory usage: 918.09 MB
2024-11-04 17:38:00,487 - INFO - Processing Cluster 0.
2024-11-04 17:38:00,498 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 17:38:00,498 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:38:00,798 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:38:01,073 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:38:01,190 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 17:38:01,198 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 17:38:01,245 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 17:38:01,245 - INFO - Processing Cluster 1.
2024-11-04 17:38:01,255 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 17:38:01,255 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:38:01,520 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:38:01,777 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:38:01,887 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 17:38:01,895 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 17:38:01,931 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 17:38:01,932 - INFO - Processing Cluster 2.
2024-11-04 17:38:01,944 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 17:38:01,944 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:38:02,219 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:38:02,473 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:38:02,625 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 17:38:02,655 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 17:38:02,714 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 17:38:02,714 - INFO - Processing Cluster 3.
2024-11-04 17:38:02,725 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 17:38:02,725 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:38:02,991 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:38:03,246 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:38:03,355 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 17:38:03,375 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 17:38:03,407 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 17:38:03,407 - INFO - Processing Cluster 4.
2024-11-04 17:38:03,419 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 17:38:03,419 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:38:03,687 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:38:03,946 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:38:04,056 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 17:38:04,065 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 17:38:04,102 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 17:38:04,103 - INFO - CSF is identified as cluster 2.
2024-11-04 17:38:04,103 - INFO - Starting visualization with PyVista.
2024-11-04 17:38:04,271 - INFO - Adding Original MRI volume.
2024-11-04 17:38:04,422 - INFO - Adding Denoised MRI volume.
2024-11-04 17:38:04,555 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 17:38:04,693 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 17:38:04,694 - INFO - Current memory usage: 1024.65 MB
2024-11-04 17:38:05,812 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 17:38:05,813 - INFO - Current memory usage: 1155.42 MB
2024-11-04 17:38:05,821 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 17:38:05,921 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 17:38:05,921 - INFO - Current memory usage: 1164.56 MB
2024-11-04 17:38:06,054 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 17:38:06,054 - INFO - Current memory usage: 1164.56 MB
2024-11-04 17:38:06,059 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 17:38:06,235 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 17:38:06,235 - INFO - Current memory usage: 1164.81 MB
2024-11-04 17:38:28,446 - INFO - Logging initiated.
2024-11-04 17:38:28,446 - INFO - Pipeline started.
2024-11-04 17:38:28,446 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 17:38:28,537 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 17:38:28,599 - INFO - Denoised image loaded.
2024-11-04 17:38:28,600 - INFO - Current memory usage: 518.16 MB
2024-11-04 17:38:28,634 - INFO - Starting intensity normalization.
2024-11-04 17:38:28,993 - INFO - Intensity normalization complete.
2024-11-04 17:38:28,994 - INFO - Current memory usage: 654.44 MB
2024-11-04 17:38:28,994 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 17:38:28,994 - INFO - Computing neighborhood statistics.
2024-11-04 17:38:29,213 - INFO - Neighborhood statistics computed.
2024-11-04 17:38:29,213 - INFO - Current memory usage: 618.12 MB
2024-11-04 17:38:29,213 - INFO - Computing z-axis value for each voxel.
2024-11-04 17:38:33,209 - INFO - Z-axis value for each voxel computed.
2024-11-04 17:38:33,209 - INFO - Current memory usage: 690.62 MB
2024-11-04 17:38:33,209 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 17:38:33,550 - INFO - Features shape: (9509760, 4)
2024-11-04 17:38:33,551 - INFO - Current memory usage: 871.97 MB
2024-11-04 17:38:33,551 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 17:38:35,993 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 17:38:39,445 - INFO - Clustering complete with spatial connectivity.
2024-11-04 17:38:39,445 - INFO - Current memory usage: 1426.60 MB
2024-11-04 17:38:39,480 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 17:38:39,480 - INFO - Current memory usage: 918.72 MB
2024-11-04 17:38:39,490 - INFO - Processing Cluster 0.
2024-11-04 17:38:39,503 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 17:38:39,503 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:38:39,972 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:38:40,379 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:38:40,565 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 17:38:40,589 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 17:38:40,631 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 17:38:40,631 - INFO - Processing Cluster 1.
2024-11-04 17:38:40,646 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 17:38:40,646 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:38:41,030 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:38:41,521 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:38:41,716 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 17:38:41,739 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 17:38:41,771 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 17:38:41,771 - INFO - Processing Cluster 2.
2024-11-04 17:38:41,783 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 17:38:41,784 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:38:42,351 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:38:42,811 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:38:43,048 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 17:38:43,060 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 17:38:43,107 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 17:38:43,108 - INFO - Processing Cluster 3.
2024-11-04 17:38:43,117 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 17:38:43,117 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:38:43,489 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:38:43,848 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:38:44,000 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 17:38:44,011 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 17:38:44,044 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 17:38:44,044 - INFO - Processing Cluster 4.
2024-11-04 17:38:44,057 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 17:38:44,058 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:38:44,427 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:38:44,790 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:38:44,945 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 17:38:44,956 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 17:38:44,989 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 17:38:44,989 - INFO - CSF is identified as cluster 2.
2024-11-04 17:38:44,989 - INFO - Starting visualization with PyVista.
2024-11-04 17:38:45,160 - INFO - Adding Original MRI volume.
2024-11-04 17:38:45,349 - INFO - Adding Denoised MRI volume.
2024-11-04 17:38:45,515 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 17:38:45,683 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 17:38:45,683 - INFO - Current memory usage: 1024.48 MB
2024-11-04 17:38:47,142 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 17:38:47,142 - INFO - Current memory usage: 1154.45 MB
2024-11-04 17:38:47,152 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 17:38:47,232 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 17:38:47,233 - INFO - Current memory usage: 1164.95 MB
2024-11-04 17:38:47,378 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 17:38:47,379 - INFO - Current memory usage: 1164.95 MB
2024-11-04 17:38:47,387 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 17:38:47,593 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 17:38:47,593 - INFO - Current memory usage: 1167.98 MB
2024-11-04 17:38:49,650 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 17:38:49,650 - INFO - Current memory usage: 1234.11 MB
2024-11-04 17:38:49,660 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 17:38:49,747 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 17:38:49,748 - INFO - Current memory usage: 1234.14 MB
2024-11-04 17:38:49,883 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 17:38:49,884 - INFO - Current memory usage: 1234.14 MB
2024-11-04 17:38:49,892 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 17:38:49,970 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 17:38:49,970 - INFO - Current memory usage: 1234.14 MB
2024-11-04 17:38:50,111 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 17:38:50,111 - INFO - Current memory usage: 1234.14 MB
2024-11-04 17:38:50,120 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:38:50,443 - INFO - Translator(prefix=None)
2024-11-04 17:38:50,504 - INFO - awaiting runner setup
2024-11-04 17:38:50,505 - INFO - awaiting site startup
2024-11-04 17:38:50,506 - INFO - Print WSLINK_READY_MSG
2024-11-04 17:38:50,506 - INFO - Schedule auto shutdown with timout 0
2024-11-04 17:38:50,506 - INFO - awaiting running future
2024-11-04 17:38:58,753 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:38:58,758 - INFO - Current memory usage: 1245.00 MB
2024-11-04 17:38:58,763 - INFO - Selected slice indices for saving: [0, 143]
2024-11-04 17:38:59,266 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 17:38:59,460 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 17:38:59,648 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 17:38:59,839 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 17:39:00,023 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 17:39:00,213 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 17:39:00,398 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 17:39:00,583 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 17:39:00,765 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 17:39:00,944 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 17:39:00,949 - INFO - Pipeline completed successfully.
2024-11-04 17:39:00,949 - INFO - Current memory usage: 1210.58 MB
2024-11-04 17:39:00,949 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 17:39:00,963 - INFO - Computed density profiles along x and y axes.
2024-11-04 17:39:00,963 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 17:39:00,991 - INFO - Cluster 0: Score = 7854.579935312271 (X: 4291.768005371094, Y: 3562.8119299411774)
2024-11-04 17:39:01,012 - INFO - Cluster 0: Original Sum = 26953.162109375, Normalized Sum = 287217.1875
2024-11-04 17:39:01,044 - INFO - Cluster 1: Score = 18015.195642471313 (X: 5813.070747375488, Y: 12202.124895095825)
2024-11-04 17:39:01,056 - INFO - Cluster 1: Original Sum = 95300.546875, Normalized Sum = 1445173.0
2024-11-04 17:39:01,090 - INFO - Cluster 2: Score = 16857.78089904785 (X: 10301.632614135742, Y: 6556.148284912109)
2024-11-04 17:39:01,142 - INFO - Cluster 2: Original Sum = 59302.86328125, Normalized Sum = -999242.5625
2024-11-04 17:39:01,181 - INFO - Cluster 3: Score = 8342.984752178192 (X: 3712.395882129669, Y: 4630.588870048523)
2024-11-04 17:39:01,192 - INFO - Cluster 3: Original Sum = 19379.09375, Normalized Sum = 291598.5
2024-11-04 17:39:01,228 - INFO - Cluster 4: Score = 4529.082009792328 (X: 2220.5408577919006, Y: 2308.5411520004272)
2024-11-04 17:39:01,241 - INFO - Cluster 4: Original Sum = 10043.6123046875, Normalized Sum = 145919.890625
2024-11-04 17:39:01,242 - INFO - Good cluster identified as Cluster 1 with score 18015.195642471313.
2024-11-04 17:39:02,320 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/density_histogram.png'.
2024-11-04 17:39:02,320 - INFO - ----- Step 12: Removing Eyes from the Good Cluster Mask -----
2024-11-04 17:39:02,320 - INFO - Starting automated eye detection within the CSF mask.
2024-11-04 17:39:03,192 - INFO - Saved intensity histograms at 'eye_detection_histogram.png'.
2024-11-04 17:39:03,193 - INFO - Adjusted min_peak_height_x to 0.1800 for peak detection.
2024-11-04 17:39:03,193 - INFO - Adjusted min_peak_height_x to 0.1620 for peak detection.
2024-11-04 17:39:03,193 - INFO - Adjusted min_peak_height_x to 0.1458 for peak detection.
2024-11-04 17:39:03,193 - INFO - Adjusted min_peak_height_x to 0.1312 for peak detection.
2024-11-04 17:39:03,193 - INFO - Adjusted min_peak_height_x to 0.1181 for peak detection.
2024-11-04 17:39:03,193 - INFO - Adjusted min_peak_height_x to 0.1063 for peak detection.
2024-11-04 17:39:03,193 - INFO - Adjusted min_peak_height_x to 0.0957 for peak detection.
2024-11-04 17:39:03,193 - INFO - Adjusted min_peak_height_x to 0.0861 for peak detection.
2024-11-04 17:39:03,193 - INFO - Adjusted min_peak_height_x to 0.0775 for peak detection.
2024-11-04 17:39:03,193 - INFO - Adjusted min_peak_height_x to 0.0697 for peak detection.
2024-11-04 17:39:03,194 - INFO - Adjusted min_peak_height_x to 0.0628 for peak detection.
2024-11-04 17:39:03,194 - INFO - Adjusted min_peak_height_x to 0.0565 for peak detection.
2024-11-04 17:39:03,194 - INFO - Adjusted min_peak_height_x to 0.0508 for peak detection.
2024-11-04 17:39:03,194 - INFO - Adjusted min_peak_height_x to 0.0458 for peak detection.
2024-11-04 17:39:03,194 - INFO - Adjusted min_peak_height_x to 0.0412 for peak detection.
2024-11-04 17:39:03,194 - INFO - Adjusted min_peak_height_x to 0.0371 for peak detection.
2024-11-04 17:39:03,194 - INFO - Adjusted min_peak_height_x to 0.0334 for peak detection.
2024-11-04 17:39:03,194 - INFO - Adjusted min_peak_height_x to 0.0300 for peak detection.
2024-11-04 17:39:03,194 - INFO - Adjusted min_peak_height_x to 0.0270 for peak detection.
2024-11-04 17:39:03,194 - INFO - Adjusted min_peak_height_x to 0.0243 for peak detection.
2024-11-04 17:39:03,195 - INFO - Adjusted min_peak_height_x to 0.0219 for peak detection.
2024-11-04 17:39:03,195 - INFO - Adjusted min_peak_height_x to 0.0197 for peak detection.
2024-11-04 17:39:03,195 - INFO - Adjusted min_peak_height_x to 0.0177 for peak detection.
2024-11-04 17:39:03,195 - INFO - Adjusted min_peak_height_x to 0.0160 for peak detection.
2024-11-04 17:39:03,195 - INFO - Adjusted min_peak_height_x to 0.0144 for peak detection.
2024-11-04 17:39:03,195 - INFO - Adjusted min_peak_height_x to 0.0129 for peak detection.
2024-11-04 17:39:03,195 - INFO - Adjusted min_peak_height_x to 0.0116 for peak detection.
2024-11-04 17:39:03,195 - INFO - Adjusted min_peak_height_x to 0.0105 for peak detection.
2024-11-04 17:39:03,195 - INFO - Adjusted min_peak_height_x to 0.0094 for peak detection.
2024-11-04 17:39:03,195 - INFO - Adjusted min_peak_height_x to 0.0085 for peak detection.
2024-11-04 17:39:03,196 - INFO - Adjusted min_peak_height_x to 0.0076 for peak detection.
2024-11-04 17:39:03,196 - INFO - Adjusted min_peak_height_x to 0.0069 for peak detection.
2024-11-04 17:39:03,196 - INFO - Adjusted min_peak_height_x to 0.0062 for peak detection.
2024-11-04 17:39:03,196 - INFO - Adjusted min_peak_height_x to 0.0056 for peak detection.
2024-11-04 17:39:03,196 - INFO - Adjusted min_peak_height_x to 0.0050 for peak detection.
2024-11-04 17:39:03,196 - INFO - Adjusted min_peak_height_x to 0.0045 for peak detection.
2024-11-04 17:39:03,196 - INFO - Adjusted min_peak_height_x to 0.0041 for peak detection.
2024-11-04 17:39:03,196 - INFO - Adjusted min_peak_height_x to 0.0036 for peak detection.
2024-11-04 17:39:03,196 - INFO - Adjusted min_peak_height_x to 0.0033 for peak detection.
2024-11-04 17:39:03,196 - INFO - Adjusted min_peak_height_x to 0.0030 for peak detection.
2024-11-04 17:39:03,197 - INFO - Adjusted min_peak_height_x to 0.0027 for peak detection.
2024-11-04 17:39:03,197 - INFO - Adjusted min_peak_height_x to 0.0024 for peak detection.
2024-11-04 17:39:03,197 - INFO - Adjusted min_peak_height_y to 0.1800 for peak detection.
2024-11-04 17:39:03,197 - INFO - Adjusted min_peak_height_y to 0.1620 for peak detection.
2024-11-04 17:39:03,197 - INFO - Adjusted min_peak_height_y to 0.1458 for peak detection.
2024-11-04 17:39:03,197 - INFO - Adjusted min_peak_height_y to 0.1312 for peak detection.
2024-11-04 17:39:03,197 - INFO - Adjusted min_peak_height_y to 0.1181 for peak detection.
2024-11-04 17:39:03,197 - INFO - Adjusted min_peak_height_y to 0.1063 for peak detection.
2024-11-04 17:39:03,197 - INFO - Adjusted min_peak_height_y to 0.0957 for peak detection.
2024-11-04 17:39:03,197 - INFO - Adjusted min_peak_height_y to 0.0861 for peak detection.
2024-11-04 17:39:03,197 - INFO - Adjusted min_peak_height_y to 0.0775 for peak detection.
2024-11-04 17:39:03,198 - INFO - Adjusted min_peak_height_y to 0.0697 for peak detection.
2024-11-04 17:39:03,198 - INFO - Adjusted min_peak_height_y to 0.0628 for peak detection.
2024-11-04 17:39:03,198 - INFO - Adjusted min_peak_height_y to 0.0565 for peak detection.
2024-11-04 17:39:03,198 - INFO - Adjusted min_peak_height_y to 0.0508 for peak detection.
2024-11-04 17:39:03,198 - INFO - Adjusted min_peak_height_y to 0.0458 for peak detection.
2024-11-04 17:39:03,198 - INFO - Adjusted min_peak_height_y to 0.0412 for peak detection.
2024-11-04 17:39:03,198 - INFO - Adjusted min_peak_height_y to 0.0371 for peak detection.
2024-11-04 17:39:03,198 - INFO - Adjusted min_peak_height_y to 0.0334 for peak detection.
2024-11-04 17:39:03,198 - INFO - Adjusted min_peak_height_y to 0.0300 for peak detection.
2024-11-04 17:39:03,198 - INFO - Adjusted min_peak_height_y to 0.0270 for peak detection.
2024-11-04 17:39:03,198 - INFO - Adjusted min_peak_height_y to 0.0243 for peak detection.
2024-11-04 17:39:03,199 - INFO - Adjusted min_peak_height_y to 0.0219 for peak detection.
2024-11-04 17:39:03,199 - INFO - Adjusted min_peak_height_y to 0.0197 for peak detection.
2024-11-04 17:39:03,199 - INFO - Adjusted min_peak_height_y to 0.0177 for peak detection.
2024-11-04 17:39:03,199 - INFO - Adjusted min_peak_height_y to 0.0160 for peak detection.
2024-11-04 17:39:03,199 - INFO - Adjusted min_peak_height_y to 0.0144 for peak detection.
2024-11-04 17:39:03,199 - INFO - Adjusted min_peak_height_y to 0.0129 for peak detection.
2024-11-04 17:39:03,199 - INFO - Adjusted min_peak_height_y to 0.0116 for peak detection.
2024-11-04 17:39:03,199 - INFO - Adjusted min_peak_height_y to 0.0105 for peak detection.
2024-11-04 17:39:03,199 - INFO - Adjusted min_peak_height_y to 0.0094 for peak detection.
2024-11-04 17:39:03,200 - INFO - Adjusted min_peak_height_y to 0.0085 for peak detection.
2024-11-04 17:39:03,200 - INFO - Adjusted min_peak_height_y to 0.0076 for peak detection.
2024-11-04 17:39:03,200 - INFO - Adjusted min_peak_height_y to 0.0069 for peak detection.
2024-11-04 17:39:03,200 - INFO - Adjusted min_peak_height_y to 0.0062 for peak detection.
2024-11-04 17:39:03,200 - INFO - Adjusted min_peak_height_y to 0.0056 for peak detection.
2024-11-04 17:39:03,200 - INFO - Adjusted min_peak_height_y to 0.0050 for peak detection.
2024-11-04 17:39:03,200 - INFO - Adjusted min_peak_height_y to 0.0045 for peak detection.
2024-11-04 17:39:03,200 - INFO - Adjusted min_peak_height_y to 0.0041 for peak detection.
2024-11-04 17:39:03,201 - INFO - Adjusted min_peak_height_y to 0.0036 for peak detection.
2024-11-04 17:39:03,201 - INFO - Adjusted min_peak_height_y to 0.0033 for peak detection.
2024-11-04 17:39:03,201 - INFO - Adjusted min_peak_height_y to 0.0030 for peak detection.
2024-11-04 17:39:03,201 - INFO - Adjusted min_peak_height_z to 0.1800 for peak detection.
2024-11-04 17:39:03,201 - INFO - Adjusted min_peak_height_z to 0.1620 for peak detection.
2024-11-04 17:39:03,201 - INFO - Adjusted min_peak_height_z to 0.1458 for peak detection.
2024-11-04 17:39:03,201 - INFO - Adjusted min_peak_height_z to 0.1312 for peak detection.
2024-11-04 17:39:03,201 - INFO - Adjusted min_peak_height_z to 0.1181 for peak detection.
2024-11-04 17:39:03,201 - INFO - Adjusted min_peak_height_z to 0.1063 for peak detection.
2024-11-04 17:39:03,202 - INFO - Adjusted min_peak_height_z to 0.0957 for peak detection.
2024-11-04 17:39:03,202 - INFO - Adjusted min_peak_height_z to 0.0861 for peak detection.
2024-11-04 17:39:03,202 - INFO - Adjusted min_peak_height_z to 0.0775 for peak detection.
2024-11-04 17:39:03,202 - INFO - Adjusted min_peak_height_z to 0.0697 for peak detection.
2024-11-04 17:39:03,202 - INFO - Adjusted min_peak_height_z to 0.0628 for peak detection.
2024-11-04 17:39:03,202 - INFO - Adjusted min_peak_height_z to 0.0565 for peak detection.
2024-11-04 17:39:03,202 - INFO - Adjusted min_peak_height_z to 0.0508 for peak detection.
2024-11-04 17:39:03,202 - INFO - Adjusted min_peak_height_z to 0.0458 for peak detection.
2024-11-04 17:39:03,202 - INFO - Adjusted min_peak_height_z to 0.0412 for peak detection.
2024-11-04 17:39:03,202 - INFO - Adjusted min_peak_height_z to 0.0371 for peak detection.
2024-11-04 17:39:03,202 - INFO - Adjusted min_peak_height_z to 0.0334 for peak detection.
2024-11-04 17:39:03,203 - INFO - Adjusted min_peak_height_z to 0.0300 for peak detection.
2024-11-04 17:39:03,203 - INFO - Adjusted min_peak_height_z to 0.0270 for peak detection.
2024-11-04 17:39:03,203 - INFO - Adjusted min_peak_height_z to 0.0243 for peak detection.
2024-11-04 17:39:03,203 - INFO - Adjusted min_peak_height_z to 0.0219 for peak detection.
2024-11-04 17:39:03,203 - INFO - Adjusted min_peak_height_z to 0.0197 for peak detection.
2024-11-04 17:39:03,203 - INFO - Adjusted min_peak_height_z to 0.0177 for peak detection.
2024-11-04 17:39:03,203 - INFO - Adjusted min_peak_height_z to 0.0160 for peak detection.
2024-11-04 17:39:03,203 - INFO - Adjusted min_peak_height_z to 0.0144 for peak detection.
2024-11-04 17:39:03,203 - INFO - Adjusted min_peak_height_z to 0.0129 for peak detection.
2024-11-04 17:39:03,203 - INFO - Adjusted min_peak_height_z to 0.0116 for peak detection.
2024-11-04 17:39:03,204 - INFO - Adjusted min_peak_height_z to 0.0105 for peak detection.
2024-11-04 17:39:03,204 - INFO - Adjusted min_peak_height_z to 0.0094 for peak detection.
2024-11-04 17:39:03,204 - INFO - Adjusted min_peak_height_z to 0.0085 for peak detection.
2024-11-04 17:39:03,204 - INFO - Adjusted min_peak_height_z to 0.0076 for peak detection.
2024-11-04 17:39:03,204 - INFO - Adjusted min_peak_height_z to 0.0069 for peak detection.
2024-11-04 17:39:03,204 - INFO - Adjusted min_peak_height_z to 0.0062 for peak detection.
2024-11-04 17:39:03,204 - INFO - Adjusted min_peak_height_z to 0.0056 for peak detection.
2024-11-04 17:39:03,204 - INFO - Adjusted min_peak_height_z to 0.0050 for peak detection.
2024-11-04 17:39:03,204 - INFO - Adjusted min_peak_height_z to 0.0045 for peak detection.
2024-11-04 17:39:03,204 - INFO - Adjusted min_peak_height_z to 0.0041 for peak detection.
2024-11-04 17:39:03,205 - INFO - Adjusted min_peak_height_z to 0.0036 for peak detection.
2024-11-04 17:39:03,205 - INFO - Adjusted min_peak_height_z to 0.0033 for peak detection.
2024-11-04 17:39:03,205 - INFO - Adjusted min_peak_height_z to 0.0030 for peak detection.
2024-11-04 17:39:03,205 - INFO - Adjusted min_peak_height_z to 0.0027 for peak detection.
2024-11-04 17:39:03,205 - INFO - Adjusted min_peak_height_z to 0.0024 for peak detection.
2024-11-04 17:39:03,205 - INFO - Detected first peak at X=366.5868
2024-11-04 17:39:03,205 - INFO - Detected first peak at Y=437.0531
2024-11-04 17:39:03,205 - INFO - Detected peak 1 at Z=142.5522 with height 0.0047
2024-11-04 17:39:03,205 - INFO - Detected peak 2 at Z=96.2830 with height 0.0025
2024-11-04 17:39:03,205 - INFO - Eye center detected at (Z=143, Y=437, X=367).
2024-11-04 17:39:03,205 - INFO - Eye center detected at (Z=96, Y=437, X=367).
2024-11-04 17:39:03,241 - INFO - Created spherical mask for eye at (Z=143, Y=437, X=367) with radius 10.
2024-11-04 17:39:03,311 - INFO - Created spherical mask for eye at (Z=96, Y=437, X=367) with radius 10.
2024-11-04 17:39:03,322 - INFO - Saved detected eyes mask at 'detected_eyes_mask.tif'.
2024-11-04 17:39:05,852 - INFO - Saved overlaid 2D histogram with eyes mask at 'eye_detection_overlaid.png'.
2024-11-04 17:39:05,856 - INFO - Removing eyes at centers: [(143, 437, 367), (96, 437, 367)] with radius 10 voxels.
2024-11-04 17:39:06,089 - INFO - ----- Step 13: Saving the Good Cluster Mask -----
2024-11-04 17:39:06,131 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-04 17:39:06,131 - INFO - ----- Step 14: Calculating CSF Volume -----
2024-11-04 17:39:06,145 - INFO - Total CSF Volume: 142531.68686294244 mm³
2024-11-04 17:39:06,145 - INFO - ----- Step 15: Final Visualization of the Good CSF Mask -----
2024-11-04 17:39:06,145 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-04 17:39:06,525 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster.html'.
2024-11-04 17:39:06,685 - INFO - Visualization successfully saved to 'good_cluster.html'.
2024-11-04 17:39:06,686 - INFO - Visualization process completed.
2024-11-04 17:39:06,687 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:39:06,687 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:39:06,687 - INFO - Final cleanup completed.
2024-11-04 17:39:06,688 - INFO - Current memory usage: 1254.39 MB
2024-11-04 17:44:03,998 - INFO - Logging initiated.
2024-11-04 17:44:03,999 - INFO - Pipeline started.
2024-11-04 17:44:03,999 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 17:44:04,161 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 17:44:04,224 - INFO - Denoised image loaded.
2024-11-04 17:44:04,225 - INFO - Current memory usage: 517.53 MB
2024-11-04 17:44:04,262 - INFO - Starting intensity normalization.
2024-11-04 17:44:04,832 - INFO - Intensity normalization complete.
2024-11-04 17:44:04,832 - INFO - Current memory usage: 653.88 MB
2024-11-04 17:44:04,832 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 17:44:04,832 - INFO - Computing neighborhood statistics.
2024-11-04 17:44:05,068 - INFO - Neighborhood statistics computed.
2024-11-04 17:44:05,068 - INFO - Current memory usage: 617.46 MB
2024-11-04 17:44:05,068 - INFO - Computing z-axis value for each voxel.
2024-11-04 17:44:08,037 - INFO - Z-axis value for each voxel computed.
2024-11-04 17:44:08,038 - INFO - Current memory usage: 689.96 MB
2024-11-04 17:44:08,038 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 17:44:08,556 - INFO - Features shape: (9509760, 4)
2024-11-04 17:44:08,556 - INFO - Current memory usage: 871.30 MB
2024-11-04 17:44:08,556 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 17:44:11,061 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 17:44:14,525 - INFO - Clustering complete with spatial connectivity.
2024-11-04 17:44:14,526 - INFO - Current memory usage: 1420.19 MB
2024-11-04 17:44:14,550 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 17:44:14,550 - INFO - Current memory usage: 912.31 MB
2024-11-04 17:44:14,559 - INFO - Processing Cluster 0.
2024-11-04 17:44:14,571 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 17:44:14,572 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:44:14,853 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:44:15,120 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:44:15,257 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 17:44:15,280 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 17:44:15,327 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 17:44:15,327 - INFO - Processing Cluster 1.
2024-11-04 17:44:15,342 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 17:44:15,343 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:44:15,621 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:44:15,914 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:44:16,058 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 17:44:16,083 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 17:44:16,126 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 17:44:16,126 - INFO - Processing Cluster 2.
2024-11-04 17:44:16,144 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 17:44:16,144 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:44:16,508 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:44:16,882 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:44:17,116 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 17:44:17,146 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 17:44:17,205 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 17:44:17,205 - INFO - Processing Cluster 3.
2024-11-04 17:44:17,216 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 17:44:17,216 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:44:17,591 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:44:17,966 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:44:18,124 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 17:44:18,145 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 17:44:18,179 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 17:44:18,179 - INFO - Processing Cluster 4.
2024-11-04 17:44:18,192 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 17:44:18,192 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:44:18,555 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:44:18,914 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:44:19,070 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 17:44:19,091 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 17:44:19,127 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 17:44:19,128 - INFO - CSF is identified as cluster 2.
2024-11-04 17:44:19,128 - INFO - Starting visualization with PyVista.
2024-11-04 17:44:19,317 - INFO - Adding Original MRI volume.
2024-11-04 17:44:19,526 - INFO - Adding Denoised MRI volume.
2024-11-04 17:44:19,717 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 17:44:19,904 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 17:44:19,905 - INFO - Current memory usage: 1018.67 MB
2024-11-04 17:44:21,395 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 17:44:21,396 - INFO - Current memory usage: 1149.59 MB
2024-11-04 17:44:21,405 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 17:44:21,483 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 17:44:21,483 - INFO - Current memory usage: 1158.44 MB
2024-11-04 17:44:21,631 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 17:44:21,631 - INFO - Current memory usage: 1158.44 MB
2024-11-04 17:44:21,638 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 17:44:21,851 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 17:44:21,851 - INFO - Current memory usage: 1158.57 MB
2024-11-04 17:44:23,942 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 17:44:23,942 - INFO - Current memory usage: 1226.99 MB
2024-11-04 17:44:23,951 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 17:44:24,033 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 17:44:24,033 - INFO - Current memory usage: 1227.04 MB
2024-11-04 17:44:24,208 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 17:44:24,209 - INFO - Current memory usage: 1227.04 MB
2024-11-04 17:44:24,218 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 17:44:24,302 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 17:44:24,303 - INFO - Current memory usage: 1227.04 MB
2024-11-04 17:44:24,453 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 17:44:24,454 - INFO - Current memory usage: 1227.04 MB
2024-11-04 17:44:24,462 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:44:24,788 - INFO - Translator(prefix=None)
2024-11-04 17:44:24,839 - INFO - awaiting runner setup
2024-11-04 17:44:24,839 - INFO - awaiting site startup
2024-11-04 17:44:24,840 - INFO - Print WSLINK_READY_MSG
2024-11-04 17:44:24,840 - INFO - Schedule auto shutdown with timout 0
2024-11-04 17:44:24,840 - INFO - awaiting running future
2024-11-04 17:44:33,634 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:44:33,638 - INFO - Current memory usage: 1238.57 MB
2024-11-04 17:44:33,646 - INFO - Selected slice indices for saving: [0, 143]
2024-11-04 17:44:34,052 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 17:44:34,230 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 17:44:34,410 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 17:44:34,588 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 17:44:34,770 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 17:44:34,954 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 17:44:35,139 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 17:44:35,322 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 17:44:35,508 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 17:44:35,692 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 17:44:35,698 - INFO - Pipeline completed successfully.
2024-11-04 17:44:35,698 - INFO - Current memory usage: 1206.59 MB
2024-11-04 17:44:35,698 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 17:44:35,713 - INFO - Computed density profiles along x and y axes.
2024-11-04 17:44:35,713 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 17:44:35,744 - INFO - Cluster 0: Score = 7854.579935312271 (X: 4291.768005371094, Y: 3562.8119299411774)
2024-11-04 17:44:35,766 - INFO - Cluster 0: Original Sum = 26953.162109375, Normalized Sum = 287217.1875
2024-11-04 17:44:35,804 - INFO - Cluster 1: Score = 18015.195642471313 (X: 5813.070747375488, Y: 12202.124895095825)
2024-11-04 17:44:35,820 - INFO - Cluster 1: Original Sum = 95300.546875, Normalized Sum = 1445173.0
2024-11-04 17:44:35,860 - INFO - Cluster 2: Score = 16857.78089904785 (X: 10301.632614135742, Y: 6556.148284912109)
2024-11-04 17:44:35,915 - INFO - Cluster 2: Original Sum = 59302.86328125, Normalized Sum = -999242.5625
2024-11-04 17:44:35,956 - INFO - Cluster 3: Score = 8342.984752178192 (X: 3712.395882129669, Y: 4630.588870048523)
2024-11-04 17:44:35,968 - INFO - Cluster 3: Original Sum = 19379.09375, Normalized Sum = 291598.5
2024-11-04 17:44:36,011 - INFO - Cluster 4: Score = 4529.082009792328 (X: 2220.5408577919006, Y: 2308.5411520004272)
2024-11-04 17:44:36,026 - INFO - Cluster 4: Original Sum = 10043.6123046875, Normalized Sum = 145919.890625
2024-11-04 17:44:36,026 - INFO - Good cluster identified as Cluster 1 with score 18015.195642471313.
2024-11-04 17:44:37,095 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/density_histogram.png'.
2024-11-04 17:44:37,095 - INFO - ----- Step 12: Removing Eyes from the Good Cluster Mask -----
2024-11-04 17:44:37,095 - INFO - Starting automated eye detection within the CSF mask.
2024-11-04 17:44:37,997 - INFO - Saved intensity histograms at 'eye_detection_histogram.png'.
2024-11-04 17:44:37,998 - INFO - Adjusted min_peak_height_x to 0.1800 for peak detection.
2024-11-04 17:44:37,998 - INFO - Adjusted min_peak_height_x to 0.1620 for peak detection.
2024-11-04 17:44:37,998 - INFO - Adjusted min_peak_height_x to 0.1458 for peak detection.
2024-11-04 17:44:37,998 - INFO - Adjusted min_peak_height_x to 0.1312 for peak detection.
2024-11-04 17:44:37,998 - INFO - Adjusted min_peak_height_x to 0.1181 for peak detection.
2024-11-04 17:44:37,998 - INFO - Adjusted min_peak_height_x to 0.1063 for peak detection.
2024-11-04 17:44:37,998 - INFO - Adjusted min_peak_height_x to 0.0957 for peak detection.
2024-11-04 17:44:37,998 - INFO - Adjusted min_peak_height_x to 0.0861 for peak detection.
2024-11-04 17:44:37,998 - INFO - Adjusted min_peak_height_x to 0.0775 for peak detection.
2024-11-04 17:44:37,999 - INFO - Adjusted min_peak_height_x to 0.0697 for peak detection.
2024-11-04 17:44:37,999 - INFO - Adjusted min_peak_height_x to 0.0628 for peak detection.
2024-11-04 17:44:37,999 - INFO - Adjusted min_peak_height_x to 0.0565 for peak detection.
2024-11-04 17:44:37,999 - INFO - Adjusted min_peak_height_x to 0.0508 for peak detection.
2024-11-04 17:44:37,999 - INFO - Adjusted min_peak_height_x to 0.0458 for peak detection.
2024-11-04 17:44:37,999 - INFO - Adjusted min_peak_height_x to 0.0412 for peak detection.
2024-11-04 17:44:37,999 - INFO - Adjusted min_peak_height_x to 0.0371 for peak detection.
2024-11-04 17:44:37,999 - INFO - Adjusted min_peak_height_x to 0.0334 for peak detection.
2024-11-04 17:44:37,999 - INFO - Adjusted min_peak_height_x to 0.0300 for peak detection.
2024-11-04 17:44:37,999 - INFO - Adjusted min_peak_height_x to 0.0270 for peak detection.
2024-11-04 17:44:37,999 - INFO - Adjusted min_peak_height_x to 0.0243 for peak detection.
2024-11-04 17:44:37,999 - INFO - Adjusted min_peak_height_x to 0.0219 for peak detection.
2024-11-04 17:44:38,000 - INFO - Adjusted min_peak_height_x to 0.0197 for peak detection.
2024-11-04 17:44:38,000 - INFO - Adjusted min_peak_height_x to 0.0177 for peak detection.
2024-11-04 17:44:38,000 - INFO - Adjusted min_peak_height_x to 0.0160 for peak detection.
2024-11-04 17:44:38,000 - INFO - Adjusted min_peak_height_x to 0.0144 for peak detection.
2024-11-04 17:44:38,000 - INFO - Adjusted min_peak_height_x to 0.0129 for peak detection.
2024-11-04 17:44:38,000 - INFO - Adjusted min_peak_height_x to 0.0116 for peak detection.
2024-11-04 17:44:38,000 - INFO - Adjusted min_peak_height_x to 0.0105 for peak detection.
2024-11-04 17:44:38,000 - INFO - Adjusted min_peak_height_x to 0.0094 for peak detection.
2024-11-04 17:44:38,000 - INFO - Adjusted min_peak_height_x to 0.0085 for peak detection.
2024-11-04 17:44:38,000 - INFO - Adjusted min_peak_height_x to 0.0076 for peak detection.
2024-11-04 17:44:38,000 - INFO - Adjusted min_peak_height_x to 0.0069 for peak detection.
2024-11-04 17:44:38,001 - INFO - Adjusted min_peak_height_x to 0.0062 for peak detection.
2024-11-04 17:44:38,001 - INFO - Adjusted min_peak_height_x to 0.0056 for peak detection.
2024-11-04 17:44:38,001 - INFO - Adjusted min_peak_height_x to 0.0050 for peak detection.
2024-11-04 17:44:38,001 - INFO - Adjusted min_peak_height_x to 0.0045 for peak detection.
2024-11-04 17:44:38,001 - INFO - Adjusted min_peak_height_x to 0.0041 for peak detection.
2024-11-04 17:44:38,001 - INFO - Adjusted min_peak_height_x to 0.0036 for peak detection.
2024-11-04 17:44:38,001 - INFO - Adjusted min_peak_height_x to 0.0033 for peak detection.
2024-11-04 17:44:38,001 - INFO - Adjusted min_peak_height_x to 0.0030 for peak detection.
2024-11-04 17:44:38,001 - INFO - Adjusted min_peak_height_x to 0.0027 for peak detection.
2024-11-04 17:44:38,001 - INFO - Adjusted min_peak_height_x to 0.0024 for peak detection.
2024-11-04 17:44:38,001 - INFO - Adjusted min_peak_height_y to 0.1800 for peak detection.
2024-11-04 17:44:38,001 - INFO - Adjusted min_peak_height_y to 0.1620 for peak detection.
2024-11-04 17:44:38,002 - INFO - Adjusted min_peak_height_y to 0.1458 for peak detection.
2024-11-04 17:44:38,002 - INFO - Adjusted min_peak_height_y to 0.1312 for peak detection.
2024-11-04 17:44:38,002 - INFO - Adjusted min_peak_height_y to 0.1181 for peak detection.
2024-11-04 17:44:38,002 - INFO - Adjusted min_peak_height_y to 0.1063 for peak detection.
2024-11-04 17:44:38,002 - INFO - Adjusted min_peak_height_y to 0.0957 for peak detection.
2024-11-04 17:44:38,002 - INFO - Adjusted min_peak_height_y to 0.0861 for peak detection.
2024-11-04 17:44:38,002 - INFO - Adjusted min_peak_height_y to 0.0775 for peak detection.
2024-11-04 17:44:38,002 - INFO - Adjusted min_peak_height_y to 0.0697 for peak detection.
2024-11-04 17:44:38,002 - INFO - Adjusted min_peak_height_y to 0.0628 for peak detection.
2024-11-04 17:44:38,002 - INFO - Adjusted min_peak_height_y to 0.0565 for peak detection.
2024-11-04 17:44:38,002 - INFO - Adjusted min_peak_height_y to 0.0508 for peak detection.
2024-11-04 17:44:38,003 - INFO - Adjusted min_peak_height_y to 0.0458 for peak detection.
2024-11-04 17:44:38,003 - INFO - Adjusted min_peak_height_y to 0.0412 for peak detection.
2024-11-04 17:44:38,003 - INFO - Adjusted min_peak_height_y to 0.0371 for peak detection.
2024-11-04 17:44:38,003 - INFO - Adjusted min_peak_height_y to 0.0334 for peak detection.
2024-11-04 17:44:38,003 - INFO - Adjusted min_peak_height_y to 0.0300 for peak detection.
2024-11-04 17:44:38,003 - INFO - Adjusted min_peak_height_y to 0.0270 for peak detection.
2024-11-04 17:44:38,003 - INFO - Adjusted min_peak_height_y to 0.0243 for peak detection.
2024-11-04 17:44:38,003 - INFO - Adjusted min_peak_height_y to 0.0219 for peak detection.
2024-11-04 17:44:38,003 - INFO - Adjusted min_peak_height_y to 0.0197 for peak detection.
2024-11-04 17:44:38,003 - INFO - Adjusted min_peak_height_y to 0.0177 for peak detection.
2024-11-04 17:44:38,003 - INFO - Adjusted min_peak_height_y to 0.0160 for peak detection.
2024-11-04 17:44:38,004 - INFO - Adjusted min_peak_height_y to 0.0144 for peak detection.
2024-11-04 17:44:38,004 - INFO - Adjusted min_peak_height_y to 0.0129 for peak detection.
2024-11-04 17:44:38,004 - INFO - Adjusted min_peak_height_y to 0.0116 for peak detection.
2024-11-04 17:44:38,004 - INFO - Adjusted min_peak_height_y to 0.0105 for peak detection.
2024-11-04 17:44:38,004 - INFO - Adjusted min_peak_height_y to 0.0094 for peak detection.
2024-11-04 17:44:38,004 - INFO - Adjusted min_peak_height_y to 0.0085 for peak detection.
2024-11-04 17:44:38,004 - INFO - Adjusted min_peak_height_y to 0.0076 for peak detection.
2024-11-04 17:44:38,004 - INFO - Adjusted min_peak_height_y to 0.0069 for peak detection.
2024-11-04 17:44:38,004 - INFO - Adjusted min_peak_height_y to 0.0062 for peak detection.
2024-11-04 17:44:38,004 - INFO - Adjusted min_peak_height_y to 0.0056 for peak detection.
2024-11-04 17:44:38,005 - INFO - Adjusted min_peak_height_y to 0.0050 for peak detection.
2024-11-04 17:44:38,005 - INFO - Adjusted min_peak_height_y to 0.0045 for peak detection.
2024-11-04 17:44:38,005 - INFO - Adjusted min_peak_height_y to 0.0041 for peak detection.
2024-11-04 17:44:38,005 - INFO - Adjusted min_peak_height_y to 0.0036 for peak detection.
2024-11-04 17:44:38,005 - INFO - Adjusted min_peak_height_y to 0.0033 for peak detection.
2024-11-04 17:44:38,005 - INFO - Adjusted min_peak_height_y to 0.0030 for peak detection.
2024-11-04 17:44:38,005 - INFO - Adjusted min_peak_height_z to 0.1800 for peak detection.
2024-11-04 17:44:38,005 - INFO - Adjusted min_peak_height_z to 0.1620 for peak detection.
2024-11-04 17:44:38,005 - INFO - Adjusted min_peak_height_z to 0.1458 for peak detection.
2024-11-04 17:44:38,006 - INFO - Adjusted min_peak_height_z to 0.1312 for peak detection.
2024-11-04 17:44:38,006 - INFO - Adjusted min_peak_height_z to 0.1181 for peak detection.
2024-11-04 17:44:38,006 - INFO - Adjusted min_peak_height_z to 0.1063 for peak detection.
2024-11-04 17:44:38,006 - INFO - Adjusted min_peak_height_z to 0.0957 for peak detection.
2024-11-04 17:44:38,006 - INFO - Adjusted min_peak_height_z to 0.0861 for peak detection.
2024-11-04 17:44:38,006 - INFO - Adjusted min_peak_height_z to 0.0775 for peak detection.
2024-11-04 17:44:38,006 - INFO - Adjusted min_peak_height_z to 0.0697 for peak detection.
2024-11-04 17:44:38,006 - INFO - Adjusted min_peak_height_z to 0.0628 for peak detection.
2024-11-04 17:44:38,007 - INFO - Adjusted min_peak_height_z to 0.0565 for peak detection.
2024-11-04 17:44:38,007 - INFO - Adjusted min_peak_height_z to 0.0508 for peak detection.
2024-11-04 17:44:38,007 - INFO - Adjusted min_peak_height_z to 0.0458 for peak detection.
2024-11-04 17:44:38,007 - INFO - Adjusted min_peak_height_z to 0.0412 for peak detection.
2024-11-04 17:44:38,007 - INFO - Adjusted min_peak_height_z to 0.0371 for peak detection.
2024-11-04 17:44:38,007 - INFO - Adjusted min_peak_height_z to 0.0334 for peak detection.
2024-11-04 17:44:38,007 - INFO - Adjusted min_peak_height_z to 0.0300 for peak detection.
2024-11-04 17:44:38,008 - INFO - Adjusted min_peak_height_z to 0.0270 for peak detection.
2024-11-04 17:44:38,008 - INFO - Adjusted min_peak_height_z to 0.0243 for peak detection.
2024-11-04 17:44:38,008 - INFO - Adjusted min_peak_height_z to 0.0219 for peak detection.
2024-11-04 17:44:38,008 - INFO - Adjusted min_peak_height_z to 0.0197 for peak detection.
2024-11-04 17:44:38,008 - INFO - Adjusted min_peak_height_z to 0.0177 for peak detection.
2024-11-04 17:44:38,008 - INFO - Adjusted min_peak_height_z to 0.0160 for peak detection.
2024-11-04 17:44:38,008 - INFO - Adjusted min_peak_height_z to 0.0144 for peak detection.
2024-11-04 17:44:38,008 - INFO - Adjusted min_peak_height_z to 0.0129 for peak detection.
2024-11-04 17:44:38,009 - INFO - Adjusted min_peak_height_z to 0.0116 for peak detection.
2024-11-04 17:44:38,009 - INFO - Adjusted min_peak_height_z to 0.0105 for peak detection.
2024-11-04 17:44:38,009 - INFO - Adjusted min_peak_height_z to 0.0094 for peak detection.
2024-11-04 17:44:38,009 - INFO - Adjusted min_peak_height_z to 0.0085 for peak detection.
2024-11-04 17:44:38,009 - INFO - Adjusted min_peak_height_z to 0.0076 for peak detection.
2024-11-04 17:44:38,009 - INFO - Adjusted min_peak_height_z to 0.0069 for peak detection.
2024-11-04 17:44:38,009 - INFO - Adjusted min_peak_height_z to 0.0062 for peak detection.
2024-11-04 17:44:38,009 - INFO - Adjusted min_peak_height_z to 0.0056 for peak detection.
2024-11-04 17:44:38,009 - INFO - Adjusted min_peak_height_z to 0.0050 for peak detection.
2024-11-04 17:44:38,010 - INFO - Adjusted min_peak_height_z to 0.0045 for peak detection.
2024-11-04 17:44:38,010 - INFO - Adjusted min_peak_height_z to 0.0041 for peak detection.
2024-11-04 17:44:38,010 - INFO - Adjusted min_peak_height_z to 0.0036 for peak detection.
2024-11-04 17:44:38,010 - INFO - Adjusted min_peak_height_z to 0.0033 for peak detection.
2024-11-04 17:44:38,010 - INFO - Adjusted min_peak_height_z to 0.0030 for peak detection.
2024-11-04 17:44:38,010 - INFO - Adjusted min_peak_height_z to 0.0027 for peak detection.
2024-11-04 17:44:38,010 - INFO - Adjusted min_peak_height_z to 0.0024 for peak detection.
2024-11-04 17:44:38,010 - INFO - Detected first peak at X=366.5868
2024-11-04 17:44:38,010 - INFO - Detected first peak at Y=437.0531
2024-11-04 17:44:38,011 - INFO - Detected peak 1 at Z=142.5522 with height 0.0047
2024-11-04 17:44:38,011 - INFO - Detected peak 2 at Z=96.2830 with height 0.0025
2024-11-04 17:44:38,011 - INFO - Eye center detected at (Z=143, Y=437, X=367).
2024-11-04 17:44:38,011 - INFO - Eye center detected at (Z=96, Y=437, X=367).
2024-11-04 17:44:38,056 - INFO - Created spherical mask for eye at (Z=143, Y=437, X=367) with radius 10.
2024-11-04 17:44:38,121 - INFO - Created spherical mask for eye at (Z=96, Y=437, X=367) with radius 10.
2024-11-04 17:44:38,133 - INFO - Saved detected eyes mask at 'detected_eyes_mask.tif'.
2024-11-04 17:44:40,076 - INFO - Saved overlaid 2D histogram with eyes mask at 'eye_detection_overlaid.png'.
2024-11-04 17:44:40,079 - INFO - Removing eyes at centers: [(143, 437, 367), (96, 437, 367)] with radius 50 voxels.
2024-11-04 17:44:40,176 - INFO - ----- Step 13: Saving the Good Cluster Mask -----
2024-11-04 17:44:40,207 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-04 17:44:40,208 - INFO - ----- Step 14: Calculating CSF Volume -----
2024-11-04 17:44:40,218 - INFO - Total CSF Volume: 142531.68686294244 mm³
2024-11-04 17:44:40,219 - INFO - ----- Step 15: Final Visualization of the Good CSF Mask -----
2024-11-04 17:44:40,219 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-04 17:44:40,480 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster.html'.
2024-11-04 17:44:40,621 - INFO - Visualization successfully saved to 'good_cluster.html'.
2024-11-04 17:44:40,622 - INFO - Visualization process completed.
2024-11-04 17:44:40,623 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:44:40,623 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:44:40,623 - INFO - Final cleanup completed.
2024-11-04 17:44:40,624 - INFO - Current memory usage: 1248.84 MB
2024-11-04 17:48:33,914 - INFO - Logging initiated.
2024-11-04 17:48:33,914 - INFO - Pipeline started.
2024-11-04 17:48:33,914 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 17:48:34,084 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 17:48:34,135 - INFO - Denoised image loaded.
2024-11-04 17:48:34,136 - INFO - Current memory usage: 517.85 MB
2024-11-04 17:48:34,179 - INFO - Starting intensity normalization.
2024-11-04 17:48:34,704 - INFO - Intensity normalization complete.
2024-11-04 17:48:34,705 - INFO - Current memory usage: 654.29 MB
2024-11-04 17:48:34,705 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 17:48:34,705 - INFO - Computing neighborhood statistics.
2024-11-04 17:48:34,935 - INFO - Neighborhood statistics computed.
2024-11-04 17:48:34,936 - INFO - Current memory usage: 617.88 MB
2024-11-04 17:48:34,936 - INFO - Computing z-axis value for each voxel.
2024-11-04 17:48:37,934 - INFO - Z-axis value for each voxel computed.
2024-11-04 17:48:37,934 - INFO - Current memory usage: 690.48 MB
2024-11-04 17:48:37,934 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 17:48:38,497 - INFO - Features shape: (9509760, 4)
2024-11-04 17:48:38,497 - INFO - Current memory usage: 872.03 MB
2024-11-04 17:48:38,497 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 17:48:40,958 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 17:48:43,756 - INFO - Clustering complete with spatial connectivity.
2024-11-04 17:48:43,757 - INFO - Current memory usage: 1411.30 MB
2024-11-04 17:48:43,808 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 17:48:43,808 - INFO - Current memory usage: 903.43 MB
2024-11-04 17:48:43,821 - INFO - Processing Cluster 0.
2024-11-04 17:48:43,840 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 17:48:43,840 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:48:44,313 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:48:44,655 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:48:44,805 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 17:48:44,826 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 17:48:44,864 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 17:48:44,865 - INFO - Processing Cluster 1.
2024-11-04 17:48:44,875 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 17:48:44,875 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:48:45,223 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:48:45,537 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:48:45,667 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 17:48:45,677 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 17:48:45,707 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 17:48:45,707 - INFO - Processing Cluster 2.
2024-11-04 17:48:45,718 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 17:48:45,718 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:48:46,086 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:48:46,525 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:48:46,794 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 17:48:46,823 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 17:48:46,874 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 17:48:46,874 - INFO - Processing Cluster 3.
2024-11-04 17:48:46,885 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 17:48:46,885 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:48:47,287 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:48:47,628 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:48:47,765 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 17:48:47,785 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 17:48:47,824 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 17:48:47,825 - INFO - Processing Cluster 4.
2024-11-04 17:48:47,836 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 17:48:47,836 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:48:48,213 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:48:48,565 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:48:48,705 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 17:48:48,724 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 17:48:48,773 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 17:48:48,773 - INFO - CSF is identified as cluster 2.
2024-11-04 17:48:48,773 - INFO - Starting visualization with PyVista.
2024-11-04 17:48:48,977 - INFO - Adding Original MRI volume.
2024-11-04 17:48:49,223 - INFO - Adding Denoised MRI volume.
2024-11-04 17:48:49,526 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 17:48:49,789 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 17:48:49,790 - INFO - Current memory usage: 1010.34 MB
2024-11-04 17:48:51,908 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 17:48:51,908 - INFO - Current memory usage: 1138.63 MB
2024-11-04 17:48:51,924 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 17:48:52,078 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 17:48:52,079 - INFO - Current memory usage: 1149.95 MB
2024-11-04 17:48:52,385 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 17:48:52,386 - INFO - Current memory usage: 1149.95 MB
2024-11-04 17:48:52,397 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 17:48:52,832 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 17:48:52,832 - INFO - Current memory usage: 1153.43 MB
2024-11-04 17:48:55,554 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 17:48:55,555 - INFO - Current memory usage: 1220.33 MB
2024-11-04 17:48:55,565 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 17:48:55,673 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 17:48:55,673 - INFO - Current memory usage: 1220.37 MB
2024-11-04 17:48:55,843 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 17:48:55,843 - INFO - Current memory usage: 1220.37 MB
2024-11-04 17:48:55,850 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 17:48:55,928 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 17:48:55,929 - INFO - Current memory usage: 1220.38 MB
2024-11-04 17:48:56,151 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 17:48:56,152 - INFO - Current memory usage: 1220.38 MB
2024-11-04 17:48:56,165 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:48:56,537 - INFO - Translator(prefix=None)
2024-11-04 17:48:56,652 - INFO - awaiting runner setup
2024-11-04 17:48:56,653 - INFO - awaiting site startup
2024-11-04 17:48:56,654 - INFO - Print WSLINK_READY_MSG
2024-11-04 17:48:56,654 - INFO - Schedule auto shutdown with timout 0
2024-11-04 17:48:56,654 - INFO - awaiting running future
2024-11-04 17:49:06,875 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:49:06,882 - INFO - Current memory usage: 1231.39 MB
2024-11-04 17:49:06,888 - INFO - Selected slice indices for saving: [0, 143]
2024-11-04 17:49:07,262 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 17:49:07,397 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 17:49:07,537 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 17:49:07,680 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 17:49:07,827 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 17:49:07,982 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 17:49:08,140 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 17:49:08,297 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 17:49:08,453 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 17:49:08,607 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 17:49:08,612 - INFO - Pipeline completed successfully.
2024-11-04 17:49:08,612 - INFO - Current memory usage: 1198.95 MB
2024-11-04 17:49:08,612 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 17:49:08,626 - INFO - Computed density profiles along x and y axes.
2024-11-04 17:49:08,626 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 17:49:08,653 - INFO - Cluster 0: Score = 7854.579935312271 (X: 4291.768005371094, Y: 3562.8119299411774)
2024-11-04 17:49:08,673 - INFO - Cluster 0: Original Sum = 26953.162109375, Normalized Sum = 287217.1875
2024-11-04 17:49:08,704 - INFO - Cluster 1: Score = 18015.195642471313 (X: 5813.070747375488, Y: 12202.124895095825)
2024-11-04 17:49:08,715 - INFO - Cluster 1: Original Sum = 95300.546875, Normalized Sum = 1445173.0
2024-11-04 17:49:08,749 - INFO - Cluster 2: Score = 16857.78089904785 (X: 10301.632614135742, Y: 6556.148284912109)
2024-11-04 17:49:08,795 - INFO - Cluster 2: Original Sum = 59302.86328125, Normalized Sum = -999242.5625
2024-11-04 17:49:08,826 - INFO - Cluster 3: Score = 8342.984752178192 (X: 3712.395882129669, Y: 4630.588870048523)
2024-11-04 17:49:08,838 - INFO - Cluster 3: Original Sum = 19379.09375, Normalized Sum = 291598.5
2024-11-04 17:49:08,873 - INFO - Cluster 4: Score = 4529.082009792328 (X: 2220.5408577919006, Y: 2308.5411520004272)
2024-11-04 17:49:08,886 - INFO - Cluster 4: Original Sum = 10043.6123046875, Normalized Sum = 145919.890625
2024-11-04 17:49:08,887 - INFO - Good cluster identified as Cluster 1 with score 18015.195642471313.
2024-11-04 17:49:09,780 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/density_histogram.png'.
2024-11-04 17:49:09,781 - INFO - ----- Step 12: Removing Eyes from the Good Cluster Mask -----
2024-11-04 17:49:09,781 - INFO - Starting eye detection using connected components analysis.
2024-11-04 17:49:09,837 - INFO - Number of connected components found: 158
2024-11-04 17:50:19,756 - INFO - Logging initiated.
2024-11-04 17:50:19,756 - INFO - Pipeline started.
2024-11-04 17:50:19,756 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 17:50:19,863 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 17:50:19,957 - INFO - Denoised image loaded.
2024-11-04 17:50:19,958 - INFO - Current memory usage: 518.54 MB
2024-11-04 17:50:19,993 - INFO - Starting intensity normalization.
2024-11-04 17:50:20,510 - INFO - Intensity normalization complete.
2024-11-04 17:50:20,511 - INFO - Current memory usage: 654.79 MB
2024-11-04 17:50:20,511 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 17:50:20,511 - INFO - Computing neighborhood statistics.
2024-11-04 17:50:20,715 - INFO - Neighborhood statistics computed.
2024-11-04 17:50:20,715 - INFO - Current memory usage: 618.35 MB
2024-11-04 17:50:20,715 - INFO - Computing z-axis value for each voxel.
2024-11-04 17:50:24,584 - INFO - Z-axis value for each voxel computed.
2024-11-04 17:50:24,585 - INFO - Current memory usage: 690.85 MB
2024-11-04 17:50:24,585 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 17:50:25,060 - INFO - Features shape: (9509760, 4)
2024-11-04 17:50:25,060 - INFO - Current memory usage: 872.29 MB
2024-11-04 17:50:25,060 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 17:50:27,520 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 17:50:30,752 - INFO - Clustering complete with spatial connectivity.
2024-11-04 17:50:30,753 - INFO - Current memory usage: 1407.88 MB
2024-11-04 17:50:30,783 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 17:50:30,783 - INFO - Current memory usage: 900.00 MB
2024-11-04 17:50:30,791 - INFO - Processing Cluster 0.
2024-11-04 17:50:30,812 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 17:50:30,812 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:50:31,274 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:50:31,673 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:50:31,844 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 17:50:31,870 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 17:50:31,905 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 17:50:31,905 - INFO - Processing Cluster 1.
2024-11-04 17:50:31,914 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 17:50:31,915 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:50:32,255 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:50:32,615 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:50:32,754 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 17:50:32,775 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 17:50:32,798 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 17:50:32,799 - INFO - Processing Cluster 2.
2024-11-04 17:50:32,807 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 17:50:32,807 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:50:33,134 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:50:33,463 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:50:33,653 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 17:50:33,664 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 17:50:33,707 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 17:50:33,708 - INFO - Processing Cluster 3.
2024-11-04 17:50:33,717 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 17:50:33,717 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:50:34,052 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:50:34,375 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:50:34,504 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 17:50:34,512 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 17:50:34,532 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 17:50:34,532 - INFO - Processing Cluster 4.
2024-11-04 17:50:34,540 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 17:50:34,540 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:50:34,857 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:50:35,199 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:50:35,347 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 17:50:35,356 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 17:50:35,380 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 17:50:35,380 - INFO - CSF is identified as cluster 2.
2024-11-04 17:50:35,380 - INFO - Starting visualization with PyVista.
2024-11-04 17:50:35,607 - INFO - Adding Original MRI volume.
2024-11-04 17:50:35,797 - INFO - Adding Denoised MRI volume.
2024-11-04 17:50:35,939 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 17:50:36,151 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 17:50:36,151 - INFO - Current memory usage: 1006.22 MB
2024-11-04 17:50:37,439 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 17:50:37,440 - INFO - Current memory usage: 1134.96 MB
2024-11-04 17:50:37,448 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 17:50:37,514 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 17:50:37,515 - INFO - Current memory usage: 1144.82 MB
2024-11-04 17:50:37,658 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 17:50:37,658 - INFO - Current memory usage: 1144.82 MB
2024-11-04 17:50:37,665 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 17:50:37,847 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 17:50:37,847 - INFO - Current memory usage: 1147.81 MB
2024-11-04 17:50:39,729 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 17:50:39,730 - INFO - Current memory usage: 1215.51 MB
2024-11-04 17:50:39,737 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 17:50:39,809 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 17:50:39,809 - INFO - Current memory usage: 1215.61 MB
2024-11-04 17:50:39,910 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 17:50:39,911 - INFO - Current memory usage: 1215.61 MB
2024-11-04 17:50:39,915 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 17:50:40,012 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 17:50:40,012 - INFO - Current memory usage: 1215.62 MB
2024-11-04 17:50:40,121 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 17:50:40,121 - INFO - Current memory usage: 1215.62 MB
2024-11-04 17:50:40,126 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:50:40,422 - INFO - Translator(prefix=None)
2024-11-04 17:50:40,481 - INFO - awaiting runner setup
2024-11-04 17:50:40,481 - INFO - awaiting site startup
2024-11-04 17:50:40,482 - INFO - Print WSLINK_READY_MSG
2024-11-04 17:50:40,482 - INFO - Schedule auto shutdown with timout 0
2024-11-04 17:50:40,482 - INFO - awaiting running future
2024-11-04 17:50:47,959 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:50:47,963 - INFO - Current memory usage: 1227.10 MB
2024-11-04 17:50:47,967 - INFO - Selected slice indices for saving: [0, 143]
2024-11-04 17:50:48,318 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 17:50:48,469 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 17:50:48,617 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 17:50:48,768 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 17:50:48,916 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 17:50:49,071 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 17:50:49,233 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 17:50:49,388 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 17:50:49,547 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 17:50:49,703 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 17:50:49,708 - INFO - Pipeline completed successfully.
2024-11-04 17:50:49,708 - INFO - Current memory usage: 1193.16 MB
2024-11-04 17:50:49,708 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 17:50:49,721 - INFO - Computed density profiles along x and y axes.
2024-11-04 17:50:49,721 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 17:50:49,750 - INFO - Cluster 0: Score = 7854.579935312271 (X: 4291.768005371094, Y: 3562.8119299411774)
2024-11-04 17:50:49,778 - INFO - Cluster 0: Original Sum = 26953.162109375, Normalized Sum = 287217.1875
2024-11-04 17:50:49,820 - INFO - Cluster 1: Score = 18015.195642471313 (X: 5813.070747375488, Y: 12202.124895095825)
2024-11-04 17:50:49,834 - INFO - Cluster 1: Original Sum = 95300.546875, Normalized Sum = 1445173.0
2024-11-04 17:50:49,891 - INFO - Cluster 2: Score = 16857.78089904785 (X: 10301.632614135742, Y: 6556.148284912109)
2024-11-04 17:50:49,947 - INFO - Cluster 2: Original Sum = 59302.86328125, Normalized Sum = -999242.5625
2024-11-04 17:50:49,997 - INFO - Cluster 3: Score = 8342.984752178192 (X: 3712.395882129669, Y: 4630.588870048523)
2024-11-04 17:50:50,008 - INFO - Cluster 3: Original Sum = 19379.09375, Normalized Sum = 291598.5
2024-11-04 17:50:50,043 - INFO - Cluster 4: Score = 4529.082009792328 (X: 2220.5408577919006, Y: 2308.5411520004272)
2024-11-04 17:50:50,058 - INFO - Cluster 4: Original Sum = 10043.6123046875, Normalized Sum = 145919.890625
2024-11-04 17:50:50,058 - INFO - Good cluster identified as Cluster 1 with score 18015.195642471313.
2024-11-04 17:50:51,004 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/density_histogram.png'.
2024-11-04 17:50:51,004 - INFO - ----- Step 12: Removing Eyes from the Good Cluster Mask -----
2024-11-04 17:50:51,004 - INFO - Starting eye detection using connected components analysis.
2024-11-04 17:50:51,070 - INFO - Number of connected components found: 158
2024-11-04 17:53:02,615 - INFO - Logging initiated.
2024-11-04 17:53:02,615 - INFO - Pipeline started.
2024-11-04 17:53:02,615 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 17:53:02,703 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 17:53:02,774 - INFO - Denoised image loaded.
2024-11-04 17:53:02,774 - INFO - Current memory usage: 517.91 MB
2024-11-04 17:53:02,805 - INFO - Starting intensity normalization.
2024-11-04 17:53:03,250 - INFO - Intensity normalization complete.
2024-11-04 17:53:03,250 - INFO - Current memory usage: 654.32 MB
2024-11-04 17:53:03,251 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 17:53:03,251 - INFO - Computing neighborhood statistics.
2024-11-04 17:53:03,456 - INFO - Neighborhood statistics computed.
2024-11-04 17:53:03,456 - INFO - Current memory usage: 618.06 MB
2024-11-04 17:53:03,456 - INFO - Computing z-axis value for each voxel.
2024-11-04 17:53:07,361 - INFO - Z-axis value for each voxel computed.
2024-11-04 17:53:07,362 - INFO - Current memory usage: 690.61 MB
2024-11-04 17:53:07,362 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 17:53:07,808 - INFO - Features shape: (9509760, 4)
2024-11-04 17:53:07,808 - INFO - Current memory usage: 872.05 MB
2024-11-04 17:53:07,808 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 17:53:10,102 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 17:53:13,470 - INFO - Clustering complete with spatial connectivity.
2024-11-04 17:53:13,470 - INFO - Current memory usage: 1415.16 MB
2024-11-04 17:53:13,512 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 17:53:13,512 - INFO - Current memory usage: 907.29 MB
2024-11-04 17:53:13,525 - INFO - Processing Cluster 0.
2024-11-04 17:53:13,542 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 17:53:13,542 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:53:14,023 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:53:14,391 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:53:14,542 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 17:53:14,564 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 17:53:14,630 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 17:53:14,630 - INFO - Processing Cluster 1.
2024-11-04 17:53:14,654 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 17:53:14,656 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:53:15,055 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:53:15,402 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:53:15,547 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 17:53:15,568 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 17:53:15,608 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 17:53:15,608 - INFO - Processing Cluster 2.
2024-11-04 17:53:15,626 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 17:53:15,626 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:53:16,170 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:53:16,601 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:53:16,822 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 17:53:16,835 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 17:53:16,910 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 17:53:16,910 - INFO - Processing Cluster 3.
2024-11-04 17:53:16,926 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 17:53:16,926 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:53:17,312 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:53:17,652 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:53:17,786 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 17:53:17,795 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 17:53:17,839 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 17:53:17,839 - INFO - Processing Cluster 4.
2024-11-04 17:53:17,855 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 17:53:17,855 - INFO - Applying morphological opening to remove small objects.
2024-11-04 17:53:18,226 - INFO - Applying morphological closing to fill small holes.
2024-11-04 17:53:18,561 - INFO - Removing objects smaller than 5 voxels.
2024-11-04 17:53:18,699 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 17:53:18,707 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 17:53:18,748 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 17:53:18,749 - INFO - CSF is identified as cluster 2.
2024-11-04 17:53:18,749 - INFO - Starting visualization with PyVista.
2024-11-04 17:53:18,940 - INFO - Adding Original MRI volume.
2024-11-04 17:53:19,107 - INFO - Adding Denoised MRI volume.
2024-11-04 17:53:19,244 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 17:53:19,408 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 17:53:19,408 - INFO - Current memory usage: 1013.44 MB
2024-11-04 17:53:20,589 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 17:53:20,590 - INFO - Current memory usage: 1144.81 MB
2024-11-04 17:53:20,599 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 17:53:20,668 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 17:53:20,669 - INFO - Current memory usage: 1152.46 MB
2024-11-04 17:53:20,833 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 17:53:20,833 - INFO - Current memory usage: 1152.46 MB
2024-11-04 17:53:20,838 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 17:53:21,058 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 17:53:21,058 - INFO - Current memory usage: 1153.09 MB
2024-11-04 17:53:22,951 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 17:53:22,951 - INFO - Current memory usage: 1219.59 MB
2024-11-04 17:53:22,960 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 17:53:23,091 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 17:53:23,091 - INFO - Current memory usage: 1219.55 MB
2024-11-04 17:53:23,202 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 17:53:23,202 - INFO - Current memory usage: 1219.55 MB
2024-11-04 17:53:23,207 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 17:53:23,266 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 17:53:23,266 - INFO - Current memory usage: 1219.55 MB
2024-11-04 17:53:23,397 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 17:53:23,398 - INFO - Current memory usage: 1219.55 MB
2024-11-04 17:53:23,404 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:53:23,689 - INFO - Translator(prefix=None)
2024-11-04 17:53:23,743 - INFO - awaiting runner setup
2024-11-04 17:53:23,743 - INFO - awaiting site startup
2024-11-04 17:53:23,743 - INFO - Print WSLINK_READY_MSG
2024-11-04 17:53:23,743 - INFO - Schedule auto shutdown with timout 0
2024-11-04 17:53:23,743 - INFO - awaiting running future
2024-11-04 17:53:30,899 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:53:30,902 - INFO - Current memory usage: 1231.80 MB
2024-11-04 17:53:30,907 - INFO - Selected slice indices for saving: [0, 143]
2024-11-04 17:53:31,284 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 17:53:31,432 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 17:53:31,577 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 17:53:31,727 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 17:53:31,874 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 17:53:32,033 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 17:53:32,206 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 17:53:32,372 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 17:53:32,536 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 17:53:32,696 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 17:53:32,701 - INFO - Pipeline completed successfully.
2024-11-04 17:53:32,701 - INFO - Current memory usage: 1197.64 MB
2024-11-04 17:53:32,701 - INFO - ----- Step 11: Selecting and Refining the Good Mask -----
2024-11-04 17:53:32,715 - INFO - Computed density profiles along x and y axes.
2024-11-04 17:53:32,715 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 17:53:32,746 - INFO - Cluster 0: Score = 7854.579935312271 (X: 4291.768005371094, Y: 3562.8119299411774)
2024-11-04 17:53:32,765 - INFO - Cluster 0: Original Sum = 26953.162109375, Normalized Sum = 287217.1875
2024-11-04 17:53:32,800 - INFO - Cluster 1: Score = 18015.195642471313 (X: 5813.070747375488, Y: 12202.124895095825)
2024-11-04 17:53:32,810 - INFO - Cluster 1: Original Sum = 95300.546875, Normalized Sum = 1445173.0
2024-11-04 17:53:32,843 - INFO - Cluster 2: Score = 16857.78089904785 (X: 10301.632614135742, Y: 6556.148284912109)
2024-11-04 17:53:32,884 - INFO - Cluster 2: Original Sum = 59302.86328125, Normalized Sum = -999242.5625
2024-11-04 17:53:32,912 - INFO - Cluster 3: Score = 8342.984752178192 (X: 3712.395882129669, Y: 4630.588870048523)
2024-11-04 17:53:32,921 - INFO - Cluster 3: Original Sum = 19379.09375, Normalized Sum = 291598.5
2024-11-04 17:53:32,954 - INFO - Cluster 4: Score = 4529.082009792328 (X: 2220.5408577919006, Y: 2308.5411520004272)
2024-11-04 17:53:32,964 - INFO - Cluster 4: Original Sum = 10043.6123046875, Normalized Sum = 145919.890625
2024-11-04 17:53:32,964 - INFO - Good cluster identified as Cluster 1 with score 18015.195642471313.
2024-11-04 17:53:33,891 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/density_histogram.png'.
2024-11-04 17:53:33,891 - INFO - ----- Step 12: Removing Eyes from the Good Cluster Mask -----
2024-11-04 17:53:33,891 - INFO - Starting eye detection using connected components analysis.
2024-11-04 17:53:33,952 - INFO - Number of connected components found: 158
2024-11-04 17:53:36,068 - INFO - Detected potential eye at centroid: (40.46729162421031, 115.63378846545751, 63.31893213776238) with Volume: 4907.0 and Sphericity: 0.88
2024-11-04 17:53:49,641 - INFO - Detected potential eye at centroid: (100.71919530595139, 112.75754400670579, 60.84807208717519) with Volume: 4772.0 and Sphericity: 0.88
2024-11-04 17:53:55,503 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-04 17:53:55,508 - INFO - Eyes have been removed from the CSF mask.
2024-11-04 17:53:55,508 - INFO - Detected eyes at centroids: [(40, 115, 63), (100, 112, 60)]
2024-11-04 17:53:57,182 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/refined_csf_with_eyes_removed.png'.
2024-11-04 17:53:57,183 - INFO - ----- Step 13: Saving the Good Cluster Mask -----
2024-11-04 17:53:57,216 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-04 17:53:57,216 - INFO - ----- Step 14: Calculating CSF Volume -----
2024-11-04 17:53:57,226 - INFO - Total CSF Volume: 133301.05425013977 mm³
2024-11-04 17:53:57,227 - INFO - ----- Step 15: Final Visualization of the Good CSF Mask -----
2024-11-04 17:53:57,227 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-04 17:53:57,589 - INFO - Exporting the Good CSF Mask visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_cluster.html'.
2024-11-04 17:53:57,777 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_cluster.html'.
2024-11-04 17:53:57,778 - INFO - Visualization process completed.
2024-11-04 17:53:57,779 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:53:57,779 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:53:57,779 - INFO - Final cleanup completed.
2024-11-04 17:53:57,780 - INFO - Current memory usage: 1126.76 MB
2024-11-04 17:57:10,056 - INFO - Logging initiated.
2024-11-04 17:57:10,056 - INFO - Pipeline started.
2024-11-04 17:57:10,056 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 17:57:10,233 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 17:57:10,345 - INFO - Denoised image loaded.
2024-11-04 17:57:10,345 - INFO - Current memory usage: 449.25 MB
2024-11-04 17:57:10,389 - INFO - Starting intensity normalization.
2024-11-04 17:57:10,817 - INFO - Intensity normalization complete.
2024-11-04 17:57:10,817 - INFO - Current memory usage: 585.60 MB
2024-11-04 17:57:10,820 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 17:58:50,077 - INFO - Logging initiated.
2024-11-04 17:58:50,077 - INFO - Pipeline started.
2024-11-04 17:58:50,077 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 17:58:50,396 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 17:58:50,485 - INFO - Denoised image loaded.
2024-11-04 17:58:50,485 - INFO - Current memory usage: 450.04 MB
2024-11-04 17:58:50,605 - INFO - Starting intensity normalization.
2024-11-04 17:58:51,169 - INFO - Intensity normalization complete.
2024-11-04 17:58:51,169 - INFO - Current memory usage: 586.40 MB
2024-11-04 17:58:51,172 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 17:58:51,172 - INFO - Computing neighborhood statistics.
2024-11-04 17:58:51,463 - INFO - Neighborhood statistics computed.
2024-11-04 17:58:51,463 - INFO - Current memory usage: 550.04 MB
2024-11-04 17:58:51,463 - INFO - Computing z-axis value for each voxel.
2024-11-04 17:58:51,473 - INFO - Z-axis value for each voxel computed.
2024-11-04 17:58:51,474 - INFO - Current memory usage: 586.29 MB
2024-11-04 17:58:51,474 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 17:58:51,785 - INFO - Features shape: (9509760, 4)
2024-11-04 17:58:51,786 - INFO - Current memory usage: 803.27 MB
2024-11-04 17:58:51,786 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 17:58:53,911 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 17:58:56,491 - INFO - Clustering complete with spatial connectivity.
2024-11-04 17:58:56,492 - INFO - Current memory usage: 1338.50 MB
2024-11-04 17:58:56,515 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 17:58:56,515 - INFO - Current memory usage: 830.62 MB
2024-11-04 17:58:56,525 - INFO - Processing Cluster 0.
2024-11-04 17:58:56,538 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 17:58:57,520 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 17:58:57,529 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 17:58:57,676 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 17:58:57,676 - INFO - Processing Cluster 1.
2024-11-04 17:58:57,686 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 17:58:58,538 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 17:58:58,548 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 17:58:58,582 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 17:58:58,583 - INFO - Processing Cluster 2.
2024-11-04 17:58:58,596 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 17:58:59,586 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 17:58:59,595 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 17:58:59,652 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 17:58:59,652 - INFO - Processing Cluster 3.
2024-11-04 17:58:59,664 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 17:59:00,578 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 17:59:00,589 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 17:59:00,773 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 17:59:00,773 - INFO - Processing Cluster 4.
2024-11-04 17:59:00,786 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 17:59:01,824 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 17:59:01,833 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 17:59:01,941 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 17:59:01,941 - INFO - CSF is identified as cluster 2.
2024-11-04 17:59:01,941 - INFO - Starting visualization with PyVista.
2024-11-04 17:59:02,539 - INFO - Adding Original MRI volume.
2024-11-04 17:59:02,900 - INFO - Adding Denoised MRI volume.
2024-11-04 17:59:03,221 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 17:59:03,512 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 17:59:03,512 - INFO - Current memory usage: 1004.98 MB
2024-11-04 17:59:04,823 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 17:59:04,824 - INFO - Current memory usage: 1131.36 MB
2024-11-04 17:59:04,838 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 17:59:04,979 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 17:59:04,979 - INFO - Current memory usage: 1143.41 MB
2024-11-04 17:59:05,136 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 17:59:05,136 - INFO - Current memory usage: 1143.41 MB
2024-11-04 17:59:05,141 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 17:59:05,310 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 17:59:05,311 - INFO - Current memory usage: 1143.41 MB
2024-11-04 17:59:07,117 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 17:59:07,117 - INFO - Current memory usage: 1208.29 MB
2024-11-04 17:59:07,125 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 17:59:07,283 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 17:59:07,283 - INFO - Current memory usage: 1208.39 MB
2024-11-04 17:59:07,433 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 17:59:07,433 - INFO - Current memory usage: 1208.39 MB
2024-11-04 17:59:07,438 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 17:59:07,511 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 17:59:07,511 - INFO - Current memory usage: 1208.39 MB
2024-11-04 17:59:07,642 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 17:59:07,643 - INFO - Current memory usage: 1208.39 MB
2024-11-04 17:59:07,648 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:59:07,936 - INFO - Translator(prefix=None)
2024-11-04 17:59:07,993 - INFO - awaiting runner setup
2024-11-04 17:59:07,994 - INFO - awaiting site startup
2024-11-04 17:59:07,994 - INFO - Print WSLINK_READY_MSG
2024-11-04 17:59:07,994 - INFO - Schedule auto shutdown with timout 0
2024-11-04 17:59:07,994 - INFO - awaiting running future
2024-11-04 17:59:17,296 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/mri_csf_visualization_2_wip.html'.
2024-11-04 17:59:17,300 - INFO - Current memory usage: 1220.31 MB
2024-11-04 17:59:17,307 - INFO - Selected slice indices for saving: [0, 143]
2024-11-04 17:59:17,784 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 17:59:17,936 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 17:59:18,095 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 17:59:18,264 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 17:59:18,439 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 17:59:18,614 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 17:59:18,794 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 17:59:18,977 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 17:59:19,158 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 17:59:19,334 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 17:59:19,339 - INFO - Pipeline completed successfully.
2024-11-04 17:59:19,339 - INFO - Current memory usage: 1187.11 MB
2024-11-04 17:59:19,339 - INFO - Selecting and refining the good mask based on density profile.
2024-11-04 17:59:19,354 - INFO - Computed density profiles along x and y axes.
2024-11-04 17:59:19,354 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 17:59:19,387 - INFO - Cluster 0: Score = 7854.579935312271 (X: 4291.768005371094, Y: 3562.8119299411774)
2024-11-04 17:59:19,416 - INFO - Cluster 0: Original Sum = 26953.162109375, Normalized Sum = 287217.1875
2024-11-04 17:59:19,470 - INFO - Cluster 1: Score = 18015.195642471313 (X: 5813.070747375488, Y: 12202.124895095825)
2024-11-04 17:59:19,487 - INFO - Cluster 1: Original Sum = 95300.546875, Normalized Sum = 1445173.0
2024-11-04 17:59:19,546 - INFO - Cluster 2: Score = 16857.78089904785 (X: 10301.632614135742, Y: 6556.148284912109)
2024-11-04 17:59:19,610 - INFO - Cluster 2: Original Sum = 59302.86328125, Normalized Sum = -999242.5625
2024-11-04 17:59:19,651 - INFO - Cluster 3: Score = 8342.984752178192 (X: 3712.395882129669, Y: 4630.588870048523)
2024-11-04 17:59:19,669 - INFO - Cluster 3: Original Sum = 19379.09375, Normalized Sum = 291598.5
2024-11-04 17:59:19,720 - INFO - Cluster 4: Score = 4529.082009792328 (X: 2220.5408577919006, Y: 2308.5411520004272)
2024-11-04 17:59:19,740 - INFO - Cluster 4: Original Sum = 10043.6123046875, Normalized Sum = 145919.890625
2024-11-04 17:59:19,740 - INFO - Good cluster identified as Cluster 1 with score 18015.195642471313.
2024-11-04 17:59:20,851 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/density_histogram.png'.
2024-11-04 17:59:20,851 - INFO - Removing eyes from the good cluster mask.
2024-11-04 17:59:20,851 - INFO - Starting eye detection using connected components analysis.
2024-11-04 17:59:20,925 - INFO - Number of connected components found: 158
2024-11-04 17:59:23,210 - INFO - Detected potential eye at centroid: (40.46729162421031, 115.63378846545751, 63.31893213776238) with Volume: 4907.0 and Sphericity: 0.88
2024-11-04 17:59:36,655 - INFO - Detected potential eye at centroid: (100.71919530595139, 112.75754400670579, 60.84807208717519) with Volume: 4772.0 and Sphericity: 0.88
2024-11-04 17:59:42,244 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-04 17:59:42,249 - INFO - Eyes have been removed from the CSF mask.
2024-11-04 17:59:42,249 - INFO - Detected eyes at centroids: [(40, 115, 63), (100, 112, 60)]
2024-11-04 17:59:43,984 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/refined_csf_with_eyes_removed.png'.
2024-11-04 17:59:43,984 - INFO - Saving the good cluster mask as TIFF.
2024-11-04 17:59:44,005 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-04 17:59:44,005 - INFO - Calculating the volume of CSF in the MRI.
2024-11-04 17:59:44,012 - INFO - Total CSF Volume: 133301.05425013977 mm³
2024-11-04 17:59:44,012 - INFO - Final visualization of the Good CSF Mask.
2024-11-04 17:59:44,012 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-04 17:59:44,199 - INFO - Exporting the Good CSF Mask visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_cluster.html'.
2024-11-04 17:59:44,306 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_cluster.html'.
2024-11-04 17:59:44,307 - INFO - Visualization process completed.
2024-11-04 17:59:44,308 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:59:44,308 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 17:59:44,308 - INFO - Final cleanup completed.
2024-11-04 17:59:44,308 - INFO - Current memory usage: 1118.43 MB
2024-11-04 18:04:22,981 - INFO - Logging initiated.
2024-11-04 18:04:22,981 - INFO - Pipeline started.
2024-11-04 18:04:22,981 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-04 18:04:23,233 - INFO - Image loaded with shape (144, 763, 260).
2024-11-04 18:04:23,383 - INFO - Denoised image loaded.
2024-11-04 18:04:23,384 - INFO - Current memory usage: 449.23 MB
2024-11-04 18:04:23,498 - INFO - Starting intensity normalization.
2024-11-04 18:04:24,250 - INFO - Intensity normalization complete.
2024-11-04 18:04:24,250 - INFO - Current memory usage: 585.60 MB
2024-11-04 18:04:24,254 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-04 18:04:24,254 - INFO - Computing neighborhood statistics.
2024-11-04 18:04:24,500 - INFO - Neighborhood statistics computed.
2024-11-04 18:04:24,500 - INFO - Current memory usage: 549.18 MB
2024-11-04 18:04:24,500 - INFO - Computing z-axis value for each voxel.
2024-11-04 18:04:24,519 - INFO - Z-axis value for each voxel computed.
2024-11-04 18:04:24,520 - INFO - Current memory usage: 585.43 MB
2024-11-04 18:04:24,520 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 18:04:24,820 - INFO - Features shape: (9509760, 4)
2024-11-04 18:04:24,820 - INFO - Current memory usage: 803.12 MB
2024-11-04 18:04:24,820 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 18:04:26,779 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-04 18:04:28,775 - INFO - Clustering complete with spatial connectivity.
2024-11-04 18:04:28,775 - INFO - Current memory usage: 1344.55 MB
2024-11-04 18:04:28,794 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 18:04:28,794 - INFO - Current memory usage: 836.68 MB
2024-11-04 18:04:28,802 - INFO - Processing Cluster 0.
2024-11-04 18:04:28,813 - INFO - Cluster 0: Initial voxel count = 937786.
2024-11-04 18:04:29,471 - INFO - Cluster 0: Refined voxel count = 542877.
2024-11-04 18:04:29,477 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 18:04:29,507 - INFO - Cluster 0: Mean Intensity = 0.4113081991672516
2024-11-04 18:04:29,507 - INFO - Processing Cluster 1.
2024-11-04 18:04:29,519 - INFO - Cluster 1: Initial voxel count = 174105.
2024-11-04 18:04:30,198 - INFO - Cluster 1: Refined voxel count = 149455.
2024-11-04 18:04:30,203 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 18:04:30,231 - INFO - Cluster 1: Mean Intensity = 9.519166946411133
2024-11-04 18:04:30,232 - INFO - Processing Cluster 2.
2024-11-04 18:04:30,240 - INFO - Cluster 2: Initial voxel count = 7999076.
2024-11-04 18:04:30,957 - INFO - Cluster 2: Refined voxel count = 7914709.
2024-11-04 18:04:30,962 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 18:04:31,005 - INFO - Cluster 2: Mean Intensity = -0.12836012244224548
2024-11-04 18:04:31,005 - INFO - Processing Cluster 3.
2024-11-04 18:04:31,017 - INFO - Cluster 3: Initial voxel count = 148986.
2024-11-04 18:04:31,704 - INFO - Cluster 3: Refined voxel count = 39757.
2024-11-04 18:04:31,711 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 18:04:31,735 - INFO - Cluster 3: Mean Intensity = 6.887768745422363
2024-11-04 18:04:31,735 - INFO - Processing Cluster 4.
2024-11-04 18:04:31,744 - INFO - Cluster 4: Initial voxel count = 249807.
2024-11-04 18:04:32,461 - INFO - Cluster 4: Refined voxel count = 42057.
2024-11-04 18:04:32,466 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 18:04:32,496 - INFO - Cluster 4: Mean Intensity = 2.0402116775512695
2024-11-04 18:04:32,496 - INFO - CSF is identified as cluster 2.
2024-11-04 18:04:32,496 - INFO - Starting visualization with PyVista.
2024-11-04 18:04:33,182 - INFO - Adding Original MRI volume.
2024-11-04 18:04:33,354 - INFO - Adding Denoised MRI volume.
2024-11-04 18:04:33,492 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 18:04:33,781 - INFO - Initial mesh has 134961 points and 272768 faces.
2024-11-04 18:04:33,781 - INFO - Current memory usage: 1013.30 MB
2024-11-04 18:04:35,086 - INFO - Decimated mesh has 66746 points and 136384 faces.
2024-11-04 18:04:35,087 - INFO - Current memory usage: 1143.16 MB
2024-11-04 18:04:35,095 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 18:04:35,174 - INFO - Initial mesh has 19781 points and 39482 faces.
2024-11-04 18:04:35,174 - INFO - Current memory usage: 1155.21 MB
2024-11-04 18:04:35,298 - INFO - Decimated mesh has 9910 points and 19740 faces.
2024-11-04 18:04:35,299 - INFO - Current memory usage: 1155.21 MB
2024-11-04 18:04:35,304 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 18:04:35,491 - INFO - Initial mesh has 195612 points and 396532 faces.
2024-11-04 18:04:35,492 - INFO - Current memory usage: 1155.21 MB
2024-11-04 18:04:37,202 - INFO - Decimated mesh has 96311 points and 198266 faces.
2024-11-04 18:04:37,203 - INFO - Current memory usage: 1219.04 MB
2024-11-04 18:04:37,210 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 18:04:37,280 - INFO - Initial mesh has 18882 points and 37244 faces.
2024-11-04 18:04:37,280 - INFO - Current memory usage: 1219.04 MB
2024-11-04 18:04:37,396 - INFO - Decimated mesh has 9643 points and 18622 faces.
2024-11-04 18:04:37,396 - INFO - Current memory usage: 1219.04 MB
2024-11-04 18:04:37,401 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 18:04:37,462 - INFO - Initial mesh has 21562 points and 40616 faces.
2024-11-04 18:04:37,463 - INFO - Current memory usage: 1219.04 MB
2024-11-04 18:04:37,589 - INFO - Decimated mesh has 11493 points and 20307 faces.
2024-11-04 18:04:37,590 - INFO - Current memory usage: 1219.04 MB
2024-11-04 18:04:37,595 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 18:04:37,912 - INFO - Translator(prefix=None)
2024-11-04 18:04:37,971 - INFO - awaiting runner setup
2024-11-04 18:04:37,971 - INFO - awaiting site startup
2024-11-04 18:04:37,972 - INFO - Print WSLINK_READY_MSG
2024-11-04 18:04:37,972 - INFO - Schedule auto shutdown with timout 0
2024-11-04 18:04:37,972 - INFO - awaiting running future
2024-11-04 18:04:44,546 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 18:04:44,549 - INFO - Current memory usage: 1228.52 MB
2024-11-04 18:04:44,553 - INFO - Selected slice indices for saving: [0, 143]
2024-11-04 18:04:45,082 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 18:04:45,249 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 18:04:45,390 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 18:04:45,525 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 18:04:45,671 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 18:04:45,825 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-04 18:04:45,965 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-04 18:04:46,109 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-04 18:04:46,251 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-04 18:04:46,390 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-04 18:04:46,394 - INFO - Pipeline completed successfully.
2024-11-04 18:04:46,395 - INFO - Current memory usage: 1194.84 MB
2024-11-04 18:04:46,395 - INFO - Selecting and refining the good mask based on density profile.
2024-11-04 18:04:46,405 - INFO - Computed density profiles along x and y axes.
2024-11-04 18:04:46,405 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 18:04:46,435 - INFO - Cluster 0: Score = 7854.579935312271 (X: 4291.768005371094, Y: 3562.8119299411774)
2024-11-04 18:04:46,455 - INFO - Cluster 0: Original Sum = 26953.162109375, Normalized Sum = 287217.1875
2024-11-04 18:04:46,487 - INFO - Cluster 1: Score = 18015.195642471313 (X: 5813.070747375488, Y: 12202.124895095825)
2024-11-04 18:04:46,497 - INFO - Cluster 1: Original Sum = 95300.546875, Normalized Sum = 1445173.0
2024-11-04 18:04:46,531 - INFO - Cluster 2: Score = 16857.78089904785 (X: 10301.632614135742, Y: 6556.148284912109)
2024-11-04 18:04:46,579 - INFO - Cluster 2: Original Sum = 59302.86328125, Normalized Sum = -999242.5625
2024-11-04 18:04:46,612 - INFO - Cluster 3: Score = 8342.984752178192 (X: 3712.395882129669, Y: 4630.588870048523)
2024-11-04 18:04:46,622 - INFO - Cluster 3: Original Sum = 19379.09375, Normalized Sum = 291598.5
2024-11-04 18:04:46,663 - INFO - Cluster 4: Score = 4529.082009792328 (X: 2220.5408577919006, Y: 2308.5411520004272)
2024-11-04 18:04:46,678 - INFO - Cluster 4: Original Sum = 10043.6123046875, Normalized Sum = 145919.890625
2024-11-04 18:04:46,679 - INFO - Good cluster identified as Cluster 1 with score 18015.195642471313.
2024-11-04 18:04:47,544 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/density_histogram.png'.
2024-11-04 18:04:47,545 - INFO - Removing eyes from the good cluster mask.
2024-11-04 18:04:47,545 - INFO - Starting eye detection using connected components analysis.
2024-11-04 18:04:47,600 - INFO - Number of connected components found: 158
2024-11-04 18:04:49,849 - INFO - Detected potential eye at centroid: (40.46729162421031, 115.63378846545751, 63.31893213776238) with Volume: 4907.0 and Sphericity: 0.88
2024-11-04 18:05:04,911 - INFO - Detected potential eye at centroid: (100.71919530595139, 112.75754400670579, 60.84807208717519) with Volume: 4772.0 and Sphericity: 0.88
2024-11-04 18:05:11,698 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-04 18:05:11,703 - INFO - Eyes have been removed from the CSF mask.
2024-11-04 18:05:11,704 - INFO - Detected eyes at centroids: [(40, 115, 63), (100, 112, 60)]
2024-11-04 18:05:13,507 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/refined_csf_with_eyes_removed.png'.
2024-11-04 18:05:13,507 - INFO - Saving the good cluster mask as TIFF.
2024-11-04 18:05:13,524 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-04 18:05:13,524 - INFO - Calculating the volume of CSF in the MRI.
2024-11-04 18:05:13,531 - INFO - Total CSF Volume: 133301.05425013977 mm³
2024-11-04 18:05:13,531 - INFO - Final visualization of the Good CSF Mask.
2024-11-04 18:05:13,531 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-04 18:05:13,750 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster.html'.
2024-11-04 18:05:13,877 - INFO - Visualization successfully saved to 'good_cluster.html'.
2024-11-04 18:05:13,877 - INFO - Visualization process completed.
2024-11-04 18:05:13,879 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 18:05:13,879 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 18:05:13,879 - INFO - Final cleanup completed.
2024-11-04 18:05:13,880 - INFO - Current memory usage: 1091.84 MB
2024-11-04 18:09:20,238 - INFO - Logging initiated.
2024-11-04 18:09:20,238 - INFO - Pipeline started.
2024-11-04 18:09:20,238 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-04 18:09:20,449 - INFO - Image loaded with shape (160, 790, 260).
2024-11-04 18:09:20,449 - INFO - Denoised image not found. Performing denoising.
2024-11-04 20:13:46,052 - INFO - Logging initiated.
2024-11-04 20:13:46,052 - INFO - Pipeline started.
2024-11-04 20:13:46,053 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-04 20:13:46,530 - INFO - Image loaded with shape (160, 790, 260).
2024-11-04 20:13:46,530 - INFO - Denoised image not found. Performing denoising.
2024-11-04 20:14:40,489 - INFO - Logging initiated.
2024-11-04 20:14:40,489 - INFO - Pipeline started.
2024-11-04 20:14:40,489 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-04 20:14:40,917 - INFO - Image loaded with shape (160, 790, 260).
2024-11-04 20:14:40,917 - INFO - Denoised image not found. Performing denoising.
2024-11-04 20:14:41,252 - INFO - Slice 0: Estimated noise sigma = 0.0022515759226074757
2024-11-04 20:14:53,326 - INFO - Logging initiated.
2024-11-04 20:14:53,326 - INFO - Pipeline started.
2024-11-04 20:14:53,326 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-04 20:14:53,698 - INFO - Image loaded with shape (160, 790, 260).
2024-11-04 20:14:53,699 - INFO - Denoised image not found. Performing denoising.
2024-11-04 20:14:53,834 - INFO - Slice 0: Estimated noise sigma = 0.0022515759226074757
2024-11-04 20:14:54,350 - INFO - Slice 0: Denoising complete.
2024-11-04 20:14:54,355 - INFO - Slice 1: Estimated noise sigma = 0.002180297595394675
2024-11-04 20:14:54,875 - INFO - Slice 1: Denoising complete.
2024-11-04 20:14:54,881 - INFO - Slice 2: Estimated noise sigma = 0.002180297595394675
2024-11-04 20:14:55,389 - INFO - Slice 2: Denoising complete.
2024-11-04 20:14:55,395 - INFO - Slice 3: Estimated noise sigma = 0.0022515759226074757
2024-11-04 20:14:55,964 - INFO - Slice 3: Denoising complete.
2024-11-04 20:14:55,970 - INFO - Slice 4: Estimated noise sigma = 0.0021802969050042174
2024-11-04 20:14:56,491 - INFO - Slice 4: Denoising complete.
2024-11-04 20:14:56,496 - INFO - Slice 5: Estimated noise sigma = 0.0021672524951000544
2024-11-04 20:14:57,014 - INFO - Slice 5: Denoising complete.
2024-11-04 20:14:57,020 - INFO - Slice 6: Estimated noise sigma = 0.0022515759226074757
2024-11-04 20:14:57,534 - INFO - Slice 6: Denoising complete.
2024-11-04 20:14:57,539 - INFO - Slice 7: Estimated noise sigma = 0.0021802977679922894
2024-11-04 20:14:58,050 - INFO - Slice 7: Denoising complete.
2024-11-04 20:14:58,056 - INFO - Slice 8: Estimated noise sigma = 0.0021802977679922894
2024-11-04 20:14:58,570 - INFO - Slice 8: Denoising complete.
2024-11-04 20:14:58,575 - INFO - Slice 9: Estimated noise sigma = 0.0022776654328062595
2024-11-04 20:14:59,086 - INFO - Slice 9: Denoising complete.
2024-11-04 20:14:59,091 - INFO - Slice 10: Estimated noise sigma = 0.0022776650876110307
2024-11-04 20:14:59,604 - INFO - Slice 10: Denoising complete.
2024-11-04 20:14:59,610 - INFO - Slice 11: Estimated noise sigma = 0.002180297595394675
2024-11-04 20:15:00,129 - INFO - Slice 11: Denoising complete.
2024-11-04 20:15:00,134 - INFO - Slice 12: Estimated noise sigma = 0.002322854422417891
2024-11-04 20:15:00,665 - INFO - Slice 12: Denoising complete.
2024-11-04 20:15:00,671 - INFO - Slice 13: Estimated noise sigma = 0.002180297250199446
2024-11-04 20:15:01,202 - INFO - Slice 13: Denoising complete.
2024-11-04 20:15:01,209 - INFO - Slice 14: Estimated noise sigma = 0.0020829290675926327
2024-11-04 20:15:01,728 - INFO - Slice 14: Denoising complete.
2024-11-04 20:15:01,734 - INFO - Slice 15: Estimated noise sigma = 0.001985561230181048
2024-11-04 20:15:02,248 - INFO - Slice 15: Denoising complete.
2024-11-04 20:15:02,254 - INFO - Slice 16: Estimated noise sigma = 0.001985561230181048
2024-11-04 20:15:02,769 - INFO - Slice 16: Denoising complete.
2024-11-04 20:15:02,775 - INFO - Slice 17: Estimated noise sigma = 0.002011651603367904
2024-11-04 20:15:03,294 - INFO - Slice 17: Denoising complete.
2024-11-04 20:15:03,300 - INFO - Slice 18: Estimated noise sigma = 0.0020829294127878615
2024-11-04 20:15:03,839 - INFO - Slice 18: Denoising complete.
2024-11-04 20:15:03,845 - INFO - Slice 19: Estimated noise sigma = 0.0021281173668138064
2024-11-04 20:15:04,366 - INFO - Slice 19: Denoising complete.
2024-11-04 20:15:04,372 - INFO - Slice 20: Estimated noise sigma = 0.002180297595394675
2024-11-04 20:15:04,901 - INFO - Slice 20: Denoising complete.
2024-11-04 20:15:04,907 - INFO - Slice 21: Estimated noise sigma = 0.0022741699859192555
2024-11-04 20:15:05,434 - INFO - Slice 21: Denoising complete.
2024-11-04 20:15:05,440 - INFO - Slice 22: Estimated noise sigma = 0.002348940653262001
2024-11-04 20:15:05,965 - INFO - Slice 22: Denoising complete.
2024-11-04 20:15:05,971 - INFO - Slice 23: Estimated noise sigma = 0.0023489442778119036
2024-11-04 20:15:06,509 - INFO - Slice 23: Denoising complete.
2024-11-04 20:15:06,514 - INFO - Slice 24: Estimated noise sigma = 0.0024202226050247045
2024-11-04 20:15:07,019 - INFO - Slice 24: Denoising complete.
2024-11-04 20:15:07,024 - INFO - Slice 25: Estimated noise sigma = 0.0024151083651121614
2024-11-04 20:15:07,526 - INFO - Slice 25: Denoising complete.
2024-11-04 20:15:07,532 - INFO - Slice 26: Estimated noise sigma = 0.002472402488410344
2024-11-04 20:15:08,036 - INFO - Slice 26: Denoising complete.
2024-11-04 20:15:08,042 - INFO - Slice 27: Estimated noise sigma = 0.0024463122878211024
2024-11-04 20:15:08,544 - INFO - Slice 27: Denoising complete.
2024-11-04 20:15:08,549 - INFO - Slice 28: Estimated noise sigma = 0.0025436797800374583
2024-11-04 20:15:09,142 - INFO - Slice 28: Denoising complete.
2024-11-04 20:15:09,150 - INFO - Slice 29: Estimated noise sigma = 0.0026149600058240174
2024-11-04 20:15:09,680 - INFO - Slice 29: Denoising complete.
2024-11-04 20:15:09,685 - INFO - Slice 30: Estimated noise sigma = 0.002641048480437115
2024-11-04 20:15:10,219 - INFO - Slice 30: Denoising complete.
2024-11-04 20:15:10,225 - INFO - Slice 31: Estimated noise sigma = 0.0026410488256323437
2024-11-04 20:15:10,737 - INFO - Slice 31: Denoising complete.
2024-11-04 20:15:10,743 - INFO - Slice 32: Estimated noise sigma = 0.0027123266350523013
2024-11-04 20:15:11,261 - INFO - Slice 32: Denoising complete.
2024-11-04 20:15:11,267 - INFO - Slice 33: Estimated noise sigma = 0.0027384166630439284
2024-11-04 20:15:11,781 - INFO - Slice 33: Denoising complete.
2024-11-04 20:15:11,787 - INFO - Slice 34: Estimated noise sigma = 0.002764506173242712
2024-11-04 20:15:12,302 - INFO - Slice 34: Denoising complete.
2024-11-04 20:15:12,308 - INFO - Slice 35: Estimated noise sigma = 0.0028357850182483563
2024-11-04 20:15:12,823 - INFO - Slice 35: Denoising complete.
2024-11-04 20:15:12,829 - INFO - Slice 36: Estimated noise sigma = 0.002880973662664759
2024-11-04 20:15:13,336 - INFO - Slice 36: Denoising complete.
2024-11-04 20:15:13,342 - INFO - Slice 37: Estimated noise sigma = 0.002880973662664759
2024-11-04 20:15:13,862 - INFO - Slice 37: Denoising complete.
2024-11-04 20:15:13,868 - INFO - Slice 38: Estimated noise sigma = 0.002907063345461157
2024-11-04 20:15:14,374 - INFO - Slice 38: Denoising complete.
2024-11-04 20:15:14,380 - INFO - Slice 39: Estimated noise sigma = 0.0029522521624751738
2024-11-04 20:15:14,883 - INFO - Slice 39: Denoising complete.
2024-11-04 20:15:14,890 - INFO - Slice 40: Estimated noise sigma = 0.004600520027821765
2024-11-04 20:15:15,323 - INFO - Slice 40: Denoising complete.
2024-11-04 20:15:15,330 - INFO - Slice 41: Estimated noise sigma = 0.004723977375432133
2024-11-04 20:15:15,765 - INFO - Slice 41: Denoising complete.
2024-11-04 20:15:15,772 - INFO - Slice 42: Estimated noise sigma = 0.004671800426205939
2024-11-04 20:15:16,209 - INFO - Slice 42: Denoising complete.
2024-11-04 20:15:16,217 - INFO - Slice 43: Estimated noise sigma = 0.00462660919282532
2024-11-04 20:15:16,656 - INFO - Slice 43: Denoising complete.
2024-11-04 20:15:16,663 - INFO - Slice 44: Estimated noise sigma = 0.004626609883215778
2024-11-04 20:15:17,093 - INFO - Slice 44: Denoising complete.
2024-11-04 20:15:17,100 - INFO - Slice 45: Estimated noise sigma = 0.0046005203730169935
2024-11-04 20:15:17,535 - INFO - Slice 45: Denoising complete.
2024-11-04 20:15:17,542 - INFO - Slice 46: Estimated noise sigma = 0.004645709880421468
2024-11-04 20:15:17,985 - INFO - Slice 46: Denoising complete.
2024-11-04 20:15:17,992 - INFO - Slice 47: Estimated noise sigma = 0.004697887520038121
2024-11-04 20:15:18,431 - INFO - Slice 47: Denoising complete.
2024-11-04 20:15:18,438 - INFO - Slice 48: Estimated noise sigma = 0.004581420030616074
2024-11-04 20:15:18,872 - INFO - Slice 48: Denoising complete.
2024-11-04 20:15:18,878 - INFO - Slice 49: Estimated noise sigma = 0.004600521063407451
2024-11-04 20:15:19,318 - INFO - Slice 49: Denoising complete.
2024-11-04 20:15:19,325 - INFO - Slice 50: Estimated noise sigma = 0.004555331210807748
2024-11-04 20:15:19,760 - INFO - Slice 50: Denoising complete.
2024-11-04 20:15:19,768 - INFO - Slice 51: Estimated noise sigma = 0.004405783317412909
2024-11-04 20:15:20,210 - INFO - Slice 51: Denoising complete.
2024-11-04 20:15:20,217 - INFO - Slice 52: Estimated noise sigma = 0.0046266095380205485
2024-11-04 20:15:20,659 - INFO - Slice 52: Denoising complete.
2024-11-04 20:15:20,666 - INFO - Slice 53: Estimated noise sigma = 0.004529242045804193
2024-11-04 20:15:21,108 - INFO - Slice 53: Denoising complete.
2024-11-04 20:15:21,115 - INFO - Slice 54: Estimated noise sigma = 0.004723977030236905
2024-11-04 20:15:21,557 - INFO - Slice 54: Denoising complete.
2024-11-04 20:15:21,564 - INFO - Slice 55: Estimated noise sigma = 0.004769166537641379
2024-11-04 20:15:22,007 - INFO - Slice 55: Denoising complete.
2024-11-04 20:15:22,014 - INFO - Slice 56: Estimated noise sigma = 0.004795256047840163
2024-11-04 20:15:22,463 - INFO - Slice 56: Denoising complete.
2024-11-04 20:15:22,470 - INFO - Slice 57: Estimated noise sigma = 0.004769165847250921
2024-11-04 20:15:22,913 - INFO - Slice 57: Denoising complete.
2024-11-04 20:15:22,920 - INFO - Slice 58: Estimated noise sigma = 0.004840445210049409
2024-11-04 20:15:23,359 - INFO - Slice 58: Denoising complete.
2024-11-04 20:15:23,367 - INFO - Slice 59: Estimated noise sigma = 0.004795255357449705
2024-11-04 20:15:23,809 - INFO - Slice 59: Denoising complete.
2024-11-04 20:15:23,816 - INFO - Slice 60: Estimated noise sigma = 0.004840443829268493
2024-11-04 20:15:24,259 - INFO - Slice 60: Denoising complete.
2024-11-04 20:15:24,266 - INFO - Slice 61: Estimated noise sigma = 0.004963902902855006
2024-11-04 20:15:24,707 - INFO - Slice 61: Denoising complete.
2024-11-04 20:15:24,714 - INFO - Slice 62: Estimated noise sigma = 0.005009091374673794
2024-11-04 20:15:25,153 - INFO - Slice 62: Denoising complete.
2024-11-04 20:15:25,160 - INFO - Slice 63: Estimated noise sigma = 0.005042172469037044
2024-11-04 20:15:25,602 - INFO - Slice 63: Denoising complete.
2024-11-04 20:15:25,609 - INFO - Slice 64: Estimated noise sigma = 0.004970892415848099
2024-11-04 20:15:26,051 - INFO - Slice 64: Denoising complete.
2024-11-04 20:15:26,058 - INFO - Slice 65: Estimated noise sigma = 0.005158639613263861
2024-11-04 20:15:26,501 - INFO - Slice 65: Denoising complete.
2024-11-04 20:15:26,508 - INFO - Slice 66: Estimated noise sigma = 0.005210819324051887
2024-11-04 20:15:26,942 - INFO - Slice 66: Denoising complete.
2024-11-04 20:15:26,949 - INFO - Slice 67: Estimated noise sigma = 0.0050682595628692255
2024-11-04 20:15:27,370 - INFO - Slice 67: Denoising complete.
2024-11-04 20:15:27,377 - INFO - Slice 68: Estimated noise sigma = 0.0050160815780573445
2024-11-04 20:15:27,834 - INFO - Slice 68: Denoising complete.
2024-11-04 20:15:27,841 - INFO - Slice 69: Estimated noise sigma = 0.004963903248050234
2024-11-04 20:15:28,261 - INFO - Slice 69: Denoising complete.
2024-11-04 20:15:28,268 - INFO - Slice 70: Estimated noise sigma = 0.00522292808228834
2024-11-04 20:15:28,688 - INFO - Slice 70: Denoising complete.
2024-11-04 20:15:28,694 - INFO - Slice 71: Estimated noise sigma = 0.005229917940476662
2024-11-04 20:15:29,122 - INFO - Slice 71: Denoising complete.
2024-11-04 20:15:29,129 - INFO - Slice 72: Estimated noise sigma = 0.0051847294686578746
2024-11-04 20:15:29,545 - INFO - Slice 72: Denoising complete.
2024-11-04 20:15:29,551 - INFO - Slice 73: Estimated noise sigma = 0.0051777368489077215
2024-11-04 20:15:29,974 - INFO - Slice 73: Denoising complete.
2024-11-04 20:15:29,981 - INFO - Slice 74: Estimated noise sigma = 0.00515863995845909
2024-11-04 20:15:30,444 - INFO - Slice 74: Denoising complete.
2024-11-04 20:15:30,450 - INFO - Slice 75: Estimated noise sigma = 0.005275109173857281
2024-11-04 20:15:30,880 - INFO - Slice 75: Denoising complete.
2024-11-04 20:15:30,887 - INFO - Slice 76: Estimated noise sigma = 0.005256007450675446
2024-11-04 20:15:31,334 - INFO - Slice 76: Denoising complete.
2024-11-04 20:15:31,340 - INFO - Slice 77: Estimated noise sigma = 0.005113450105859387
2024-11-04 20:15:31,772 - INFO - Slice 77: Denoising complete.
2024-11-04 20:15:31,778 - INFO - Slice 78: Estimated noise sigma = 0.00491871374064576
2024-11-04 20:15:32,214 - INFO - Slice 78: Denoising complete.
2024-11-04 20:15:32,220 - INFO - Slice 79: Estimated noise sigma = 0.004795255702644934
2024-11-04 20:15:32,656 - INFO - Slice 79: Denoising complete.
2024-11-04 20:15:32,662 - INFO - Slice 80: Estimated noise sigma = 0.004802244870442798
2024-11-04 20:15:33,098 - INFO - Slice 80: Denoising complete.
2024-11-04 20:15:33,105 - INFO - Slice 81: Estimated noise sigma = 0.004795255702644934
2024-11-04 20:15:33,614 - INFO - Slice 81: Denoising complete.
2024-11-04 20:15:33,621 - INFO - Slice 82: Estimated noise sigma = 0.004847436449018646
2024-11-04 20:15:34,155 - INFO - Slice 82: Denoising complete.
2024-11-04 20:15:34,163 - INFO - Slice 83: Estimated noise sigma = 0.004814353973874481
2024-11-04 20:15:34,764 - INFO - Slice 83: Denoising complete.
2024-11-04 20:15:34,777 - INFO - Slice 84: Estimated noise sigma = 0.004873524578436515
2024-11-04 20:15:35,400 - INFO - Slice 84: Denoising complete.
2024-11-04 20:15:35,409 - INFO - Slice 85: Estimated noise sigma = 0.00476916619244615
2024-11-04 20:15:35,937 - INFO - Slice 85: Denoising complete.
2024-11-04 20:15:35,944 - INFO - Slice 86: Estimated noise sigma = 0.004769166537641379
2024-11-04 20:15:36,374 - INFO - Slice 86: Denoising complete.
2024-11-04 20:15:36,380 - INFO - Slice 87: Estimated noise sigma = 0.004776157776610616
2024-11-04 20:15:36,799 - INFO - Slice 87: Denoising complete.
2024-11-04 20:15:36,805 - INFO - Slice 88: Estimated noise sigma = 0.004795256393035392
2024-11-04 20:15:37,304 - INFO - Slice 88: Denoising complete.
2024-11-04 20:15:37,313 - INFO - Slice 89: Estimated noise sigma = 0.004769168954007981
2024-11-04 20:15:37,822 - INFO - Slice 89: Denoising complete.
2024-11-04 20:15:37,831 - INFO - Slice 90: Estimated noise sigma = 0.00472397841101782
2024-11-04 20:15:38,254 - INFO - Slice 90: Denoising complete.
2024-11-04 20:15:38,261 - INFO - Slice 91: Estimated noise sigma = 0.004697889246014265
2024-11-04 20:15:38,678 - INFO - Slice 91: Denoising complete.
2024-11-04 20:15:38,684 - INFO - Slice 92: Estimated noise sigma = 0.00476916619244615
2024-11-04 20:15:39,103 - INFO - Slice 92: Denoising complete.
2024-11-04 20:15:39,109 - INFO - Slice 93: Estimated noise sigma = 0.004795257083425849
2024-11-04 20:15:39,523 - INFO - Slice 93: Denoising complete.
2024-11-04 20:15:39,530 - INFO - Slice 94: Estimated noise sigma = 0.004944803250844544
2024-11-04 20:15:39,966 - INFO - Slice 94: Denoising complete.
2024-11-04 20:15:39,972 - INFO - Slice 95: Estimated noise sigma = 0.005158638577678175
2024-11-04 20:15:40,395 - INFO - Slice 95: Denoising complete.
2024-11-04 20:15:40,401 - INFO - Slice 96: Estimated noise sigma = 0.005301195577299005
2024-11-04 20:15:40,815 - INFO - Slice 96: Denoising complete.
2024-11-04 20:15:40,821 - INFO - Slice 97: Estimated noise sigma = 0.005398565485881963
2024-11-04 20:15:41,256 - INFO - Slice 97: Denoising complete.
2024-11-04 20:15:41,262 - INFO - Slice 98: Estimated noise sigma = 0.005450745196669988
2024-11-04 20:15:41,683 - INFO - Slice 98: Denoising complete.
2024-11-04 20:15:41,689 - INFO - Slice 99: Estimated noise sigma = 0.005229918976062349
2024-11-04 20:15:42,113 - INFO - Slice 99: Denoising complete.
2024-11-04 20:15:42,120 - INFO - Slice 100: Estimated noise sigma = 0.005301196267689463
2024-11-04 20:15:42,591 - INFO - Slice 100: Denoising complete.
2024-11-04 20:15:42,599 - INFO - Slice 101: Estimated noise sigma = 0.005379464798285815
2024-11-04 20:15:43,115 - INFO - Slice 101: Denoising complete.
2024-11-04 20:15:43,125 - INFO - Slice 102: Estimated noise sigma = 0.005353376323672717
2024-11-04 20:15:43,628 - INFO - Slice 102: Denoising complete.
2024-11-04 20:15:43,634 - INFO - Slice 103: Estimated noise sigma = 0.005276044652927376
2024-11-04 20:15:44,074 - INFO - Slice 103: Denoising complete.
2024-11-04 20:15:44,082 - INFO - Slice 104: Estimated noise sigma = 0.005327286123083475
2024-11-04 20:15:44,507 - INFO - Slice 104: Denoising complete.
2024-11-04 20:15:44,513 - INFO - Slice 105: Estimated noise sigma = 0.005275107102685908
2024-11-04 20:15:44,926 - INFO - Slice 105: Denoising complete.
2024-11-04 20:15:44,933 - INFO - Slice 106: Estimated noise sigma = 0.005158638922873404
2024-11-04 20:15:45,392 - INFO - Slice 106: Denoising complete.
2024-11-04 20:15:45,399 - INFO - Slice 107: Estimated noise sigma = 0.005087360940855832
2024-11-04 20:15:45,819 - INFO - Slice 107: Denoising complete.
2024-11-04 20:15:45,825 - INFO - Slice 108: Estimated noise sigma = 0.0051586403036543195
2024-11-04 20:15:46,241 - INFO - Slice 108: Denoising complete.
2024-11-04 20:15:46,247 - INFO - Slice 109: Estimated noise sigma = 0.005035182610848722
2024-11-04 20:15:46,660 - INFO - Slice 109: Denoising complete.
2024-11-04 20:15:46,666 - INFO - Slice 110: Estimated noise sigma = 0.005054280191687811
2024-11-04 20:15:47,077 - INFO - Slice 110: Denoising complete.
2024-11-04 20:15:47,083 - INFO - Slice 111: Estimated noise sigma = 0.004963900831683633
2024-11-04 20:15:47,508 - INFO - Slice 111: Denoising complete.
2024-11-04 20:15:47,515 - INFO - Slice 112: Estimated noise sigma = 0.004769167228031837
2024-11-04 20:15:47,944 - INFO - Slice 112: Denoising complete.
2024-11-04 20:15:47,951 - INFO - Slice 113: Estimated noise sigma = 0.004866534029857735
2024-11-04 20:15:48,378 - INFO - Slice 113: Denoising complete.
2024-11-04 20:15:48,385 - INFO - Slice 114: Estimated noise sigma = 0.004918716502207591
2024-11-04 20:15:48,799 - INFO - Slice 114: Denoising complete.
2024-11-04 20:15:48,805 - INFO - Slice 115: Estimated noise sigma = 0.004956912009080998
2024-11-04 20:15:49,224 - INFO - Slice 115: Denoising complete.
2024-11-04 20:15:49,230 - INFO - Slice 116: Estimated noise sigma = 0.004911723537262209
2024-11-04 20:15:49,644 - INFO - Slice 116: Denoising complete.
2024-11-04 20:15:49,650 - INFO - Slice 117: Estimated noise sigma = 0.004937814083046679
2024-11-04 20:15:50,062 - INFO - Slice 117: Denoising complete.
2024-11-04 20:15:50,068 - INFO - Slice 118: Estimated noise sigma = 0.0049899924130537895
2024-11-04 20:15:50,484 - INFO - Slice 118: Denoising complete.
2024-11-04 20:15:50,490 - INFO - Slice 119: Estimated noise sigma = 0.004892623885251747
2024-11-04 20:15:50,899 - INFO - Slice 119: Denoising complete.
2024-11-04 20:15:50,904 - INFO - Slice 120: Estimated noise sigma = 0.0029331545816360847
2024-11-04 20:15:51,394 - INFO - Slice 120: Denoising complete.
2024-11-04 20:15:51,399 - INFO - Slice 121: Estimated noise sigma = 0.0029783416726739576
2024-11-04 20:15:51,894 - INFO - Slice 121: Denoising complete.
2024-11-04 20:15:51,899 - INFO - Slice 122: Estimated noise sigma = 0.0029783420178691867
2024-11-04 20:15:52,393 - INFO - Slice 122: Denoising complete.
2024-11-04 20:15:52,398 - INFO - Slice 123: Estimated noise sigma = 0.0028357843278578984
2024-11-04 20:15:52,910 - INFO - Slice 123: Denoising complete.
2024-11-04 20:15:52,915 - INFO - Slice 124: Estimated noise sigma = 0.002828797921621865
2024-11-04 20:15:53,413 - INFO - Slice 124: Denoising complete.
2024-11-04 20:15:53,418 - INFO - Slice 125: Estimated noise sigma = 0.0028096948176591146
2024-11-04 20:15:53,921 - INFO - Slice 125: Denoising complete.
2024-11-04 20:15:53,926 - INFO - Slice 126: Estimated noise sigma = 0.0027836056526555596
2024-11-04 20:15:54,464 - INFO - Slice 126: Denoising complete.
2024-11-04 20:15:54,470 - INFO - Slice 127: Estimated noise sigma = 0.002757516660249619
2024-11-04 20:15:54,973 - INFO - Slice 127: Denoising complete.
2024-11-04 20:15:54,978 - INFO - Slice 128: Estimated noise sigma = 0.0026862378152439754
2024-11-04 20:15:55,486 - INFO - Slice 128: Denoising complete.
2024-11-04 20:15:55,492 - INFO - Slice 129: Estimated noise sigma = 0.002614958970238331
2024-11-04 20:15:55,999 - INFO - Slice 129: Denoising complete.
2024-11-04 20:15:56,004 - INFO - Slice 130: Estimated noise sigma = 0.002614958452445488
2024-11-04 20:15:56,523 - INFO - Slice 130: Denoising complete.
2024-11-04 20:15:56,529 - INFO - Slice 131: Estimated noise sigma = 0.0025888682518562466
2024-11-04 20:15:57,051 - INFO - Slice 131: Denoising complete.
2024-11-04 20:15:57,057 - INFO - Slice 132: Estimated noise sigma = 0.0024463122878211024
2024-11-04 20:15:57,574 - INFO - Slice 132: Denoising complete.
2024-11-04 20:15:57,580 - INFO - Slice 133: Estimated noise sigma = 0.002517590442436289
2024-11-04 20:15:58,096 - INFO - Slice 133: Denoising complete.
2024-11-04 20:15:58,102 - INFO - Slice 134: Estimated noise sigma = 0.0024463122878211024
2024-11-04 20:15:58,613 - INFO - Slice 134: Denoising complete.
2024-11-04 20:15:58,619 - INFO - Slice 135: Estimated noise sigma = 0.0024202227776223186
2024-11-04 20:15:59,130 - INFO - Slice 135: Denoising complete.
2024-11-04 20:15:59,136 - INFO - Slice 136: Estimated noise sigma = 0.002348944105214289
2024-11-04 20:15:59,648 - INFO - Slice 136: Denoising complete.
2024-11-04 20:15:59,653 - INFO - Slice 137: Estimated noise sigma = 0.002348943932616675
2024-11-04 20:16:00,171 - INFO - Slice 137: Denoising complete.
2024-11-04 20:16:00,178 - INFO - Slice 138: Estimated noise sigma = 0.002348943932616675
2024-11-04 20:16:00,686 - INFO - Slice 138: Denoising complete.
2024-11-04 20:16:00,692 - INFO - Slice 139: Estimated noise sigma = 0.002348943932616675
2024-11-04 20:16:01,210 - INFO - Slice 139: Denoising complete.
2024-11-04 20:16:01,216 - INFO - Slice 140: Estimated noise sigma = 0.0022515759226074757
2024-11-04 20:16:01,736 - INFO - Slice 140: Denoising complete.
2024-11-04 20:16:01,742 - INFO - Slice 141: Estimated noise sigma = 0.002154207912598277
2024-11-04 20:16:02,304 - INFO - Slice 141: Denoising complete.
2024-11-04 20:16:02,310 - INFO - Slice 142: Estimated noise sigma = 0.0020829294127878615
2024-11-04 20:16:02,866 - INFO - Slice 142: Denoising complete.
2024-11-04 20:16:02,874 - INFO - Slice 143: Estimated noise sigma = 0.002082928722397404
2024-11-04 20:16:03,452 - INFO - Slice 143: Denoising complete.
2024-11-04 20:16:03,457 - INFO - Slice 144: Estimated noise sigma = 0.0020568402477843064
2024-11-04 20:16:03,991 - INFO - Slice 144: Denoising complete.
2024-11-04 20:16:04,000 - INFO - Slice 145: Estimated noise sigma = 0.0020568399025890777
2024-11-04 20:16:04,512 - INFO - Slice 145: Denoising complete.
2024-11-04 20:16:04,518 - INFO - Slice 146: Estimated noise sigma = 0.001985561230181048
2024-11-04 20:16:05,031 - INFO - Slice 146: Denoising complete.
2024-11-04 20:16:05,036 - INFO - Slice 147: Estimated noise sigma = 0.0021185671956133467
2024-11-04 20:16:05,549 - INFO - Slice 147: Denoising complete.
2024-11-04 20:16:05,555 - INFO - Slice 148: Estimated noise sigma = 0.0024202227776223186
2024-11-04 20:16:06,104 - INFO - Slice 148: Denoising complete.
2024-11-04 20:16:06,109 - INFO - Slice 149: Estimated noise sigma = 0.0024463128056139457
2024-11-04 20:16:06,618 - INFO - Slice 149: Denoising complete.
2024-11-04 20:16:06,623 - INFO - Slice 150: Estimated noise sigma = 0.0024202231228175474
2024-11-04 20:16:07,133 - INFO - Slice 150: Denoising complete.
2024-11-04 20:16:07,138 - INFO - Slice 151: Estimated noise sigma = 0.0024202227776223186
2024-11-04 20:16:07,650 - INFO - Slice 151: Denoising complete.
2024-11-04 20:16:07,656 - INFO - Slice 152: Estimated noise sigma = 0.0023750337880106874
2024-11-04 20:16:08,171 - INFO - Slice 152: Denoising complete.
2024-11-04 20:16:08,176 - INFO - Slice 153: Estimated noise sigma = 0.0022515762678027044
2024-11-04 20:16:08,696 - INFO - Slice 153: Denoising complete.
2024-11-04 20:16:08,702 - INFO - Slice 154: Estimated noise sigma = 0.002303755288200272
2024-11-04 20:16:09,215 - INFO - Slice 154: Denoising complete.
2024-11-04 20:16:09,220 - INFO - Slice 155: Estimated noise sigma = 0.0024463119426258737
2024-11-04 20:16:09,736 - INFO - Slice 155: Denoising complete.
2024-11-04 20:16:09,741 - INFO - Slice 156: Estimated noise sigma = 0.002375033615413073
2024-11-04 20:16:10,281 - INFO - Slice 156: Denoising complete.
2024-11-04 20:16:10,287 - INFO - Slice 157: Estimated noise sigma = 0.0024463117700282595
2024-11-04 20:16:10,804 - INFO - Slice 157: Denoising complete.
2024-11-04 20:16:10,810 - INFO - Slice 158: Estimated noise sigma = 0.002348944105214289
2024-11-04 20:16:11,340 - INFO - Slice 158: Denoising complete.
2024-11-04 20:16:11,345 - INFO - Slice 159: Estimated noise sigma = 0.0022515759226074757
2024-11-04 20:16:11,878 - INFO - Slice 159: Denoising complete.
2024-11-04 20:16:11,879 - INFO - Saving image to 'mri_data/denoised_nl_1.tif'.
2024-11-04 20:16:12,125 - INFO - Image saved.
2024-11-04 20:16:12,129 - INFO - Current memory usage: 492.40 MB
2024-11-04 20:16:12,240 - INFO - Starting intensity normalization.
2024-11-04 20:16:13,049 - INFO - Intensity normalization complete.
2024-11-04 20:16:13,049 - INFO - Current memory usage: 641.50 MB
2024-11-04 20:16:13,058 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-04 20:16:13,058 - INFO - Computing neighborhood statistics.
2024-11-04 20:16:13,781 - INFO - Neighborhood statistics computed.
2024-11-04 20:16:13,781 - INFO - Current memory usage: 599.61 MB
2024-11-04 20:16:13,782 - INFO - Computing z-axis value for each voxel.
2024-11-04 20:16:13,856 - INFO - Z-axis value for each voxel computed.
2024-11-04 20:16:13,857 - INFO - Current memory usage: 641.23 MB
2024-11-04 20:16:13,857 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 20:16:14,353 - INFO - Features shape: (10940800, 4)
2024-11-04 20:16:14,353 - INFO - Current memory usage: 891.77 MB
2024-11-04 20:16:14,354 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-04 20:16:18,204 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-04 20:16:23,844 - INFO - Clustering complete with spatial connectivity.
2024-11-04 20:16:23,845 - INFO - Current memory usage: 1523.24 MB
2024-11-04 20:16:23,889 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 20:16:23,889 - INFO - Current memory usage: 938.95 MB
2024-11-04 20:16:23,905 - INFO - Processing Cluster 0.
2024-11-04 20:16:23,925 - INFO - Cluster 0: Initial voxel count = 3047796.
2024-11-04 20:16:25,118 - INFO - Cluster 0: Refined voxel count = 2742425.
2024-11-04 20:16:25,144 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 20:16:25,228 - INFO - Cluster 0: Mean Intensity = 0.14956600964069366
2024-11-04 20:16:25,228 - INFO - Processing Cluster 1.
2024-11-04 20:16:25,244 - INFO - Cluster 1: Initial voxel count = 695237.
2024-11-04 20:16:26,533 - INFO - Cluster 1: Refined voxel count = 327837.
2024-11-04 20:16:26,557 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 20:16:26,639 - INFO - Cluster 1: Mean Intensity = 0.9320721626281738
2024-11-04 20:16:26,639 - INFO - Processing Cluster 2.
2024-11-04 20:16:26,662 - INFO - Cluster 2: Initial voxel count = 6840913.
2024-11-04 20:16:28,150 - INFO - Cluster 2: Refined voxel count = 6549549.
2024-11-04 20:16:28,175 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 20:16:28,253 - INFO - Cluster 2: Mean Intensity = -0.24320223927497864
2024-11-04 20:16:28,254 - INFO - Processing Cluster 3.
2024-11-04 20:16:28,269 - INFO - Cluster 3: Initial voxel count = 136678.
2024-11-04 20:16:29,603 - INFO - Cluster 3: Refined voxel count = 89289.
2024-11-04 20:16:29,627 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 20:16:29,673 - INFO - Cluster 3: Mean Intensity = 8.199379920959473
2024-11-04 20:16:29,673 - INFO - Processing Cluster 4.
2024-11-04 20:16:29,698 - INFO - Cluster 4: Initial voxel count = 220176.
2024-11-04 20:16:31,003 - INFO - Cluster 4: Refined voxel count = 108292.
2024-11-04 20:16:31,026 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 20:16:31,089 - INFO - Cluster 4: Mean Intensity = 5.356634140014648
2024-11-04 20:16:31,090 - INFO - CSF is identified as cluster 2.
2024-11-04 20:16:31,090 - INFO - Starting visualization with PyVista.
2024-11-04 20:16:32,272 - INFO - Adding Original MRI volume.
2024-11-04 20:16:32,557 - INFO - Adding Denoised MRI volume.
2024-11-04 20:16:32,783 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 20:16:33,453 - INFO - Initial mesh has 296979 points and 607036 faces.
2024-11-04 20:16:33,454 - INFO - Current memory usage: 1161.32 MB
2024-11-04 20:16:37,125 - INFO - Decimated mesh has 145030 points and 303518 faces.
2024-11-04 20:16:37,125 - INFO - Current memory usage: 1412.75 MB
2024-11-04 20:16:37,134 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 20:16:37,326 - INFO - Initial mesh has 86072 points and 170024 faces.
2024-11-04 20:16:37,327 - INFO - Current memory usage: 1426.54 MB
2024-11-04 20:16:38,172 - INFO - Decimated mesh has 43683 points and 85012 faces.
2024-11-04 20:16:38,173 - INFO - Current memory usage: 1426.66 MB
2024-11-04 20:16:38,180 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 20:16:38,399 - INFO - Initial mesh has 111524 points and 223012 faces.
2024-11-04 20:16:38,399 - INFO - Current memory usage: 1426.66 MB
2024-11-04 20:16:39,567 - INFO - Decimated mesh has 55560 points and 111505 faces.
2024-11-04 20:16:39,568 - INFO - Current memory usage: 1426.66 MB
2024-11-04 20:16:39,575 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 20:16:39,696 - INFO - Initial mesh has 29202 points and 58912 faces.
2024-11-04 20:16:39,696 - INFO - Current memory usage: 1426.66 MB
2024-11-04 20:16:39,977 - INFO - Decimated mesh has 14511 points and 29455 faces.
2024-11-04 20:16:39,977 - INFO - Current memory usage: 1426.66 MB
2024-11-04 20:16:39,985 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 20:16:40,108 - INFO - Initial mesh has 35414 points and 69038 faces.
2024-11-04 20:16:40,108 - INFO - Current memory usage: 1426.66 MB
2024-11-04 20:16:40,431 - INFO - Decimated mesh has 18188 points and 34518 faces.
2024-11-04 20:16:40,432 - INFO - Current memory usage: 1426.66 MB
2024-11-04 20:16:40,440 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:16:40,953 - INFO - Translator(prefix=None)
2024-11-04 20:16:41,058 - INFO - awaiting runner setup
2024-11-04 20:16:41,059 - INFO - awaiting site startup
2024-11-04 20:16:41,060 - INFO - Print WSLINK_READY_MSG
2024-11-04 20:16:41,060 - INFO - Schedule auto shutdown with timout 0
2024-11-04 20:16:41,060 - INFO - awaiting running future
2024-11-04 20:16:57,530 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:16:57,536 - INFO - Current memory usage: 1425.57 MB
2024-11-04 20:16:57,545 - INFO - Selected slice indices for saving: [0, 159]
2024-11-04 20:16:58,430 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 20:16:58,710 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 20:16:58,998 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 20:16:59,302 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 20:16:59,570 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 20:16:59,851 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-04 20:17:00,123 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-04 20:17:00,419 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-04 20:17:00,688 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-04 20:17:00,976 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-04 20:17:00,984 - INFO - Pipeline completed successfully.
2024-11-04 20:17:00,984 - INFO - Current memory usage: 1382.28 MB
2024-11-04 20:17:00,984 - INFO - Selecting and refining the good mask based on density profile.
2024-11-04 20:17:01,009 - INFO - Computed density profiles along x and y axes.
2024-11-04 20:17:01,009 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 20:17:01,063 - INFO - Cluster 0: Score = 15903.90413403511 (X: 10302.905418395996, Y: 5600.998715639114)
2024-11-04 20:17:01,117 - INFO - Cluster 0: Original Sum = 57500.234375, Normalized Sum = 447597.8125
2024-11-04 20:17:01,196 - INFO - Cluster 1: Score = 5745.296651005745 (X: 3049.385917186737, Y: 2695.910733819008)
2024-11-04 20:17:01,219 - INFO - Cluster 1: Original Sum = 19893.03125, Normalized Sum = 380121.09375
2024-11-04 20:17:01,283 - INFO - Cluster 2: Score = 6153.163726806641 (X: 4187.176574707031, Y: 1965.9871520996094)
2024-11-04 20:17:01,341 - INFO - Cluster 2: Original Sum = 31266.80859375, Normalized Sum = -1591677.5
2024-11-04 20:17:01,434 - INFO - Cluster 3: Score = 11807.557518959045 (X: 5640.321232318878, Y: 6167.236286640167)
2024-11-04 20:17:01,449 - INFO - Cluster 3: Original Sum = 33361.25, Normalized Sum = 804538.375
2024-11-04 20:17:01,514 - INFO - Cluster 4: Score = 10752.674980401993 (X: 5359.64146065712, Y: 5393.033519744873)
2024-11-04 20:17:01,530 - INFO - Cluster 4: Original Sum = 35795.40234375, Normalized Sum = 858709.625
2024-11-04 20:17:01,530 - INFO - Good cluster identified as Cluster 0 with score 15903.90413403511.
2024-11-04 20:17:02,994 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-04 20:17:02,995 - INFO - Removing eyes from the good cluster mask.
2024-11-04 20:17:02,995 - INFO - Starting eye detection using connected components analysis.
2024-11-04 20:17:03,182 - INFO - Number of connected components found: 769
2024-11-04 20:21:09,184 - INFO - Logging initiated.
2024-11-04 20:21:09,185 - INFO - Pipeline started.
2024-11-04 20:21:09,185 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-04 20:21:09,522 - INFO - Image loaded with shape (160, 790, 260).
2024-11-04 20:21:09,633 - INFO - Denoised image loaded.
2024-11-04 20:21:09,633 - INFO - Current memory usage: 483.26 MB
2024-11-04 20:21:09,718 - INFO - Starting intensity normalization.
2024-11-04 20:21:10,891 - INFO - Intensity normalization complete.
2024-11-04 20:21:10,892 - INFO - Current memory usage: 639.97 MB
2024-11-04 20:21:10,893 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-04 20:21:10,894 - INFO - Computing neighborhood statistics.
2024-11-04 20:21:11,392 - INFO - Neighborhood statistics computed.
2024-11-04 20:21:11,392 - INFO - Current memory usage: 597.97 MB
2024-11-04 20:21:11,392 - INFO - Computing z-axis value for each voxel.
2024-11-04 20:21:11,403 - INFO - Z-axis value for each voxel computed.
2024-11-04 20:21:11,403 - INFO - Current memory usage: 639.60 MB
2024-11-04 20:21:11,404 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 20:21:11,902 - INFO - Features shape: (10940800, 4)
2024-11-04 20:21:11,902 - INFO - Current memory usage: 890.13 MB
2024-11-04 20:21:11,902 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-04 20:21:16,616 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-04 20:21:27,247 - INFO - Clustering complete with spatial connectivity.
2024-11-04 20:21:27,250 - INFO - Current memory usage: 1455.91 MB
2024-11-04 20:21:27,328 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 20:21:27,329 - INFO - Current memory usage: 871.61 MB
2024-11-04 20:21:27,357 - INFO - Processing Cluster 0.
2024-11-04 20:21:27,384 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-04 20:21:29,534 - INFO - Cluster 0: Refined voxel count = 118908.
2024-11-04 20:21:29,563 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 20:21:29,638 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-04 20:21:29,638 - INFO - Processing Cluster 1.
2024-11-04 20:21:29,666 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-04 20:21:31,780 - INFO - Cluster 1: Refined voxel count = 6950404.
2024-11-04 20:21:31,818 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 20:21:31,967 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-04 20:21:31,967 - INFO - Processing Cluster 2.
2024-11-04 20:21:32,003 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-04 20:21:34,761 - INFO - Cluster 2: Refined voxel count = 2731631.
2024-11-04 20:21:34,795 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 20:21:34,931 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-04 20:21:34,932 - INFO - Processing Cluster 3.
2024-11-04 20:21:34,973 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-04 20:21:37,742 - INFO - Cluster 3: Refined voxel count = 183320.
2024-11-04 20:21:37,778 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 20:21:37,949 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-04 20:21:37,951 - INFO - CSF is identified as cluster 1.
2024-11-04 20:21:37,952 - INFO - Starting visualization with PyVista.
2024-11-04 20:21:39,744 - INFO - Adding Original MRI volume.
2024-11-04 20:21:40,621 - INFO - Adding Denoised MRI volume.
2024-11-04 20:21:41,401 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 20:21:42,133 - INFO - Initial mesh has 47151 points and 91898 faces.
2024-11-04 20:21:42,134 - INFO - Current memory usage: 1025.23 MB
2024-11-04 20:21:43,055 - INFO - Decimated mesh has 24225 points and 45949 faces.
2024-11-04 20:21:43,056 - INFO - Current memory usage: 1061.29 MB
2024-11-04 20:21:43,078 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 20:21:43,665 - INFO - Initial mesh has 145698 points and 292686 faces.
2024-11-04 20:21:43,666 - INFO - Current memory usage: 1083.66 MB
2024-11-04 20:21:46,550 - INFO - Decimated mesh has 72356 points and 146342 faces.
2024-11-04 20:21:46,551 - INFO - Current memory usage: 1188.61 MB
2024-11-04 20:21:46,563 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 20:21:47,231 - INFO - Initial mesh has 243544 points and 497238 faces.
2024-11-04 20:21:47,232 - INFO - Current memory usage: 1195.36 MB
2024-11-04 20:21:51,924 - INFO - Decimated mesh has 119103 points and 248619 faces.
2024-11-04 20:21:51,925 - INFO - Current memory usage: 1288.48 MB
2024-11-04 20:21:51,939 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 20:21:52,164 - INFO - Initial mesh has 48762 points and 99420 faces.
2024-11-04 20:21:52,165 - INFO - Current memory usage: 1291.17 MB
2024-11-04 20:21:53,001 - INFO - Decimated mesh has 23913 points and 49709 faces.
2024-11-04 20:21:53,001 - INFO - Current memory usage: 1291.17 MB
2024-11-04 20:21:53,015 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:21:53,626 - INFO - Translator(prefix=None)
2024-11-04 20:21:53,777 - INFO - awaiting runner setup
2024-11-04 20:21:53,779 - INFO - awaiting site startup
2024-11-04 20:21:53,780 - INFO - Print WSLINK_READY_MSG
2024-11-04 20:21:53,780 - INFO - Schedule auto shutdown with timout 0
2024-11-04 20:21:53,780 - INFO - awaiting running future
2024-11-04 20:22:17,762 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:22:17,779 - INFO - Current memory usage: 1269.26 MB
2024-11-04 20:22:17,814 - INFO - Selected slice indices for saving: [0, 159]
2024-11-04 20:22:18,929 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 20:22:19,308 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 20:22:19,673 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 20:22:20,056 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 20:22:20,470 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-04 20:22:20,888 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-04 20:22:21,236 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-04 20:22:21,513 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-04 20:22:21,521 - INFO - Pipeline completed successfully.
2024-11-04 20:22:21,522 - INFO - Current memory usage: 1238.23 MB
2024-11-04 20:22:21,522 - INFO - Selecting and refining the good mask based on density profile.
2024-11-04 20:22:21,546 - INFO - Computed density profiles along x and y axes.
2024-11-04 20:22:21,546 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 20:22:21,590 - INFO - Cluster 0: Score = 8051.194685935974 (X: 3870.322650909424, Y: 4180.87203502655)
2024-11-04 20:22:21,608 - INFO - Cluster 0: Original Sum = 22383.982421875, Normalized Sum = 518416.4375
2024-11-04 20:22:21,650 - INFO - Cluster 1: Score = 6277.027099609375 (X: 3116.1955184936523, Y: 3160.8315811157227)
2024-11-04 20:22:21,699 - INFO - Cluster 1: Original Sum = 36149.25, Normalized Sum = -1613922.0
2024-11-04 20:22:21,738 - INFO - Cluster 2: Score = 19985.643627405167 (X: 8875.729888916016, Y: 11109.913738489151)
2024-11-04 20:22:21,781 - INFO - Cluster 2: Original Sum = 75970.1015625, Normalized Sum = 915132.0625
2024-11-04 20:22:21,820 - INFO - Cluster 3: Score = 18274.40859603882 (X: 8237.314144134521, Y: 10037.094451904297)
2024-11-04 20:22:21,836 - INFO - Cluster 3: Original Sum = 62718.70703125, Normalized Sum = 1506924.0
2024-11-04 20:22:21,836 - INFO - Good cluster identified as Cluster 2 with score 19985.643627405167.
2024-11-04 20:22:23,238 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-04 20:22:23,238 - INFO - Removing eyes from the good cluster mask.
2024-11-04 20:22:23,238 - INFO - Starting eye detection using connected components analysis.
2024-11-04 20:22:23,416 - INFO - Number of connected components found: 1247
2024-11-04 20:28:12,878 - ERROR - Expected to detect 2 eyes, but found 0.
2024-11-04 20:29:29,778 - INFO - Logging initiated.
2024-11-04 20:29:29,778 - INFO - Pipeline started.
2024-11-04 20:29:29,778 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-04 20:29:30,156 - INFO - Image loaded with shape (160, 790, 260).
2024-11-04 20:29:30,338 - INFO - Denoised image loaded.
2024-11-04 20:29:30,339 - INFO - Current memory usage: 483.04 MB
2024-11-04 20:29:30,450 - INFO - Starting intensity normalization.
2024-11-04 20:29:31,427 - INFO - Intensity normalization complete.
2024-11-04 20:29:31,428 - INFO - Current memory usage: 639.87 MB
2024-11-04 20:29:31,436 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-04 20:29:31,436 - INFO - Computing neighborhood statistics.
2024-11-04 20:29:31,991 - INFO - Neighborhood statistics computed.
2024-11-04 20:29:31,992 - INFO - Current memory usage: 597.98 MB
2024-11-04 20:29:31,992 - INFO - Computing z-axis value for each voxel.
2024-11-04 20:29:32,097 - INFO - Z-axis value for each voxel computed.
2024-11-04 20:29:32,098 - INFO - Current memory usage: 639.61 MB
2024-11-04 20:29:32,098 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 20:29:32,590 - INFO - Features shape: (10940800, 4)
2024-11-04 20:29:32,591 - INFO - Current memory usage: 885.64 MB
2024-11-04 20:29:32,591 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-04 20:29:36,938 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-04 20:29:42,480 - INFO - Clustering complete with spatial connectivity.
2024-11-04 20:29:42,480 - INFO - Current memory usage: 1455.15 MB
2024-11-04 20:29:42,530 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 20:29:42,530 - INFO - Current memory usage: 870.85 MB
2024-11-04 20:29:42,548 - INFO - Processing Cluster 0.
2024-11-04 20:29:42,572 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-04 20:29:46,875 - INFO - Cluster 0: Refined voxel count = 24889.
2024-11-04 20:29:46,905 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 20:29:46,945 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-04 20:29:46,945 - INFO - Processing Cluster 1.
2024-11-04 20:29:46,966 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-04 20:29:51,205 - INFO - Cluster 1: Refined voxel count = 6674068.
2024-11-04 20:29:51,230 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 20:29:51,329 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-04 20:29:51,329 - INFO - Processing Cluster 2.
2024-11-04 20:29:51,355 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-04 20:29:55,474 - INFO - Cluster 2: Refined voxel count = 2099678.
2024-11-04 20:29:55,499 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 20:29:55,577 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-04 20:29:55,577 - INFO - Processing Cluster 3.
2024-11-04 20:29:55,594 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-04 20:29:59,754 - INFO - Cluster 3: Refined voxel count = 90877.
2024-11-04 20:29:59,803 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 20:29:59,845 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-04 20:29:59,845 - INFO - CSF is identified as cluster 1.
2024-11-04 20:29:59,846 - INFO - Starting visualization with PyVista.
2024-11-04 20:30:01,309 - INFO - Adding Original MRI volume.
2024-11-04 20:30:01,633 - INFO - Adding Denoised MRI volume.
2024-11-04 20:30:01,855 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 20:30:02,034 - INFO - Initial mesh has 6290 points and 12146 faces.
2024-11-04 20:30:02,034 - INFO - Current memory usage: 1014.54 MB
2024-11-04 20:30:02,092 - INFO - Decimated mesh has 3247 points and 6073 faces.
2024-11-04 20:30:02,093 - INFO - Current memory usage: 1014.92 MB
2024-11-04 20:30:02,102 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 20:30:02,619 - INFO - Initial mesh has 88185 points and 175486 faces.
2024-11-04 20:30:02,620 - INFO - Current memory usage: 1038.04 MB
2024-11-04 20:30:03,908 - INFO - Decimated mesh has 44121 points and 87742 faces.
2024-11-04 20:30:03,909 - INFO - Current memory usage: 1109.29 MB
2024-11-04 20:30:03,922 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 20:30:04,204 - INFO - Initial mesh has 149854 points and 300072 faces.
2024-11-04 20:30:04,204 - INFO - Current memory usage: 1119.78 MB
2024-11-04 20:30:06,218 - INFO - Decimated mesh has 74660 points and 150036 faces.
2024-11-04 20:30:06,219 - INFO - Current memory usage: 1202.03 MB
2024-11-04 20:30:06,230 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 20:30:06,418 - INFO - Initial mesh has 21195 points and 41950 faces.
2024-11-04 20:30:06,419 - INFO - Current memory usage: 1202.03 MB
2024-11-04 20:30:06,620 - INFO - Decimated mesh has 10707 points and 20974 faces.
2024-11-04 20:30:06,620 - INFO - Current memory usage: 1202.03 MB
2024-11-04 20:30:06,629 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:30:07,153 - INFO - Translator(prefix=None)
2024-11-04 20:30:07,281 - INFO - awaiting runner setup
2024-11-04 20:30:07,283 - INFO - awaiting site startup
2024-11-04 20:30:07,284 - INFO - Print WSLINK_READY_MSG
2024-11-04 20:30:07,284 - INFO - Schedule auto shutdown with timout 0
2024-11-04 20:30:07,284 - INFO - awaiting running future
2024-11-04 20:30:19,313 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:30:19,320 - INFO - Current memory usage: 1212.39 MB
2024-11-04 20:30:19,326 - INFO - Selected slice indices for saving: [0, 159]
2024-11-04 20:30:20,372 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 20:30:20,662 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 20:30:20,973 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 20:30:21,301 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 20:30:21,578 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-04 20:30:21,840 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-04 20:30:22,119 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-04 20:30:22,390 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-04 20:30:22,398 - INFO - Pipeline completed successfully.
2024-11-04 20:30:22,399 - INFO - Current memory usage: 1169.46 MB
2024-11-04 20:30:22,399 - INFO - Selecting and refining the good mask based on density profile.
2024-11-04 20:30:22,422 - INFO - Computed density profiles along x and y axes.
2024-11-04 20:30:22,422 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 20:30:22,466 - INFO - Cluster 0: Score = 2206.4403860569 (X: 1088.7439663410187, Y: 1117.6964197158813)
2024-11-04 20:30:22,478 - INFO - Cluster 0: Original Sum = 8248.6416015625, Normalized Sum = 197905.140625
2024-11-04 20:30:22,520 - INFO - Cluster 1: Score = 5297.1672286987305 (X: 3066.4296951293945, Y: 2230.737533569336)
2024-11-04 20:30:22,564 - INFO - Cluster 1: Original Sum = 33210.40625, Normalized Sum = -1587423.125
2024-11-04 20:30:22,607 - INFO - Cluster 2: Score = 15479.370524644852 (X: 6512.238784790039, Y: 8967.131739854813)
2024-11-04 20:30:22,648 - INFO - Cluster 2: Original Sum = 62281.765625, Normalized Sum = 800933.875
2024-11-04 20:30:22,703 - INFO - Cluster 3: Score = 8710.378657341003 (X: 3755.886233329773, Y: 4954.4924240112305)
2024-11-04 20:30:22,717 - INFO - Cluster 3: Original Sum = 34984.60546875, Normalized Sum = 844692.0
2024-11-04 20:30:22,717 - INFO - Good cluster identified as Cluster 2 with score 15479.370524644852.
2024-11-04 20:30:24,153 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-04 20:30:24,153 - INFO - Removing eyes from the good cluster mask.
2024-11-04 20:30:24,154 - INFO - Starting eye detection using connected components analysis.
2024-11-04 20:30:24,316 - INFO - Number of connected components found: 164
2024-11-04 20:30:39,669 - INFO - Detected potential eye at centroid: (72.80429594272077, 259.7601431980907, 210.45823389021479) with Volume: 1676.0 and Sphericity: 0.72
2024-11-04 20:31:13,539 - WARNING - Expected to detect 2 eyes, but found 1. Skipping eye removal.
2024-11-04 20:31:13,549 - INFO - Detected eyes at centroids: []
2024-11-04 20:31:17,359 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-04 20:31:17,359 - INFO - Saving the good cluster mask as TIFF.
2024-11-04 20:31:17,401 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-04 20:31:17,401 - INFO - Calculating the volume of CSF in the MRI.
2024-11-04 20:31:17,412 - INFO - Total CSF Volume: 2002413.0822589358 mm³
2024-11-04 20:31:17,412 - INFO - Final visualization of the Good CSF Mask.
2024-11-04 20:31:17,412 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-04 20:31:20,079 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-04 20:31:21,408 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-04 20:31:21,409 - INFO - Visualization process completed.
2024-11-04 20:31:21,411 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:31:21,411 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:31:21,412 - INFO - Final cleanup completed.
2024-11-04 20:31:21,412 - INFO - Current memory usage: 1076.91 MB
2024-11-04 20:31:58,952 - INFO - Logging initiated.
2024-11-04 20:31:58,952 - INFO - Pipeline started.
2024-11-04 20:31:58,952 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-04 20:31:59,382 - INFO - Image loaded with shape (160, 790, 260).
2024-11-04 20:31:59,567 - INFO - Denoised image loaded.
2024-11-04 20:31:59,567 - INFO - Current memory usage: 482.99 MB
2024-11-04 20:31:59,746 - INFO - Starting intensity normalization.
2024-11-04 20:32:00,554 - INFO - Intensity normalization complete.
2024-11-04 20:32:00,555 - INFO - Current memory usage: 639.90 MB
2024-11-04 20:32:00,562 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-04 20:32:00,562 - INFO - Computing neighborhood statistics.
2024-11-04 20:32:01,166 - INFO - Neighborhood statistics computed.
2024-11-04 20:32:01,166 - INFO - Current memory usage: 598.02 MB
2024-11-04 20:32:01,166 - INFO - Computing z-axis value for each voxel.
2024-11-04 20:32:01,197 - INFO - Z-axis value for each voxel computed.
2024-11-04 20:32:01,198 - INFO - Current memory usage: 639.77 MB
2024-11-04 20:32:01,198 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 20:32:01,738 - INFO - Features shape: (10940800, 4)
2024-11-04 20:32:01,738 - INFO - Current memory usage: 890.11 MB
2024-11-04 20:32:01,738 - INFO - Performing MiniBatch K-Means clustering with k=10, batch_size=10000, connectivity_weight=0.1.
2024-11-04 20:32:05,491 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-04 20:32:10,975 - INFO - Clustering complete with spatial connectivity.
2024-11-04 20:32:10,975 - INFO - Current memory usage: 1498.03 MB
2024-11-04 20:32:11,010 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 20:32:11,010 - INFO - Current memory usage: 913.73 MB
2024-11-04 20:32:11,031 - INFO - Processing Cluster 0.
2024-11-04 20:32:11,060 - INFO - Cluster 0: Initial voxel count = 1909354.
2024-11-04 20:32:14,706 - INFO - Cluster 0: Refined voxel count = 622854.
2024-11-04 20:32:14,731 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 20:32:14,809 - INFO - Cluster 0: Mean Intensity = -0.04940186068415642
2024-11-04 20:32:14,809 - INFO - Processing Cluster 1.
2024-11-04 20:32:14,826 - INFO - Cluster 1: Initial voxel count = 105578.
2024-11-04 20:32:18,382 - INFO - Cluster 1: Refined voxel count = 6949.
2024-11-04 20:32:18,401 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 20:32:18,450 - INFO - Cluster 1: Mean Intensity = 7.35879373550415
2024-11-04 20:32:18,450 - INFO - Processing Cluster 2.
2024-11-04 20:32:18,474 - INFO - Cluster 2: Initial voxel count = 1014784.
2024-11-04 20:32:21,742 - INFO - Cluster 2: Refined voxel count = 843874.
2024-11-04 20:32:21,766 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 20:32:21,816 - INFO - Cluster 2: Mean Intensity = -0.21598051488399506
2024-11-04 20:32:21,816 - INFO - Processing Cluster 3.
2024-11-04 20:32:21,836 - INFO - Cluster 3: Initial voxel count = 2278516.
2024-11-04 20:32:25,188 - INFO - Cluster 3: Refined voxel count = 2184499.
2024-11-04 20:32:25,216 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 20:32:25,263 - INFO - Cluster 3: Mean Intensity = -0.29593348503112793
2024-11-04 20:32:25,263 - INFO - Processing Cluster 4.
2024-11-04 20:32:25,288 - INFO - Cluster 4: Initial voxel count = 1591242.
2024-11-04 20:32:29,288 - INFO - Cluster 4: Refined voxel count = 1401242.
2024-11-04 20:32:29,302 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 20:32:29,364 - INFO - Cluster 4: Mean Intensity = -0.24076223373413086
2024-11-04 20:32:29,365 - INFO - Processing Cluster 5.
2024-11-04 20:32:29,393 - INFO - Cluster 5: Initial voxel count = 196852.
2024-11-04 20:32:33,003 - INFO - Cluster 5: Refined voxel count = 0.
2024-11-04 20:32:33,003 - WARNING - Refined mask for Cluster 5 is empty.
2024-11-04 20:32:33,015 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-04 20:32:33,064 - INFO - Cluster 5: Mean Intensity = 1.2145843505859375
2024-11-04 20:32:33,064 - INFO - Processing Cluster 6.
2024-11-04 20:32:33,090 - INFO - Cluster 6: Initial voxel count = 1290198.
2024-11-04 20:32:37,194 - INFO - Cluster 6: Refined voxel count = 1176211.
2024-11-04 20:32:37,202 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-11-04 20:32:37,254 - INFO - Cluster 6: Mean Intensity = -0.23890778422355652
2024-11-04 20:32:37,255 - INFO - Processing Cluster 7.
2024-11-04 20:32:37,278 - INFO - Cluster 7: Initial voxel count = 127996.
2024-11-04 20:32:41,458 - INFO - Cluster 7: Refined voxel count = 47283.
2024-11-04 20:32:41,466 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-11-04 20:32:41,522 - INFO - Cluster 7: Mean Intensity = 10.312946319580078
2024-11-04 20:32:41,523 - INFO - Processing Cluster 8.
2024-11-04 20:32:41,549 - INFO - Cluster 8: Initial voxel count = 724774.
2024-11-04 20:32:45,637 - INFO - Cluster 8: Refined voxel count = 167885.
2024-11-04 20:32:45,646 - INFO - Refined mask for Cluster 8 saved as 'csf_mask_class_8_refined_2.tif'.
2024-11-04 20:32:45,701 - INFO - Cluster 8: Mean Intensity = 0.9747843146324158
2024-11-04 20:32:45,701 - INFO - Processing Cluster 9.
2024-11-04 20:32:45,719 - INFO - Cluster 9: Initial voxel count = 1701506.
2024-11-04 20:32:49,954 - INFO - Cluster 9: Refined voxel count = 119722.
2024-11-04 20:32:49,963 - INFO - Refined mask for Cluster 9 saved as 'csf_mask_class_9_refined_2.tif'.
2024-11-04 20:32:50,043 - INFO - Cluster 9: Mean Intensity = 0.2211219221353531
2024-11-04 20:32:50,043 - INFO - CSF is identified as cluster 3.
2024-11-04 20:32:50,043 - INFO - Starting visualization with PyVista.
2024-11-04 20:32:51,102 - INFO - Adding Original MRI volume.
2024-11-04 20:32:51,507 - INFO - Adding Denoised MRI volume.
2024-11-04 20:32:51,849 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 20:32:52,315 - INFO - Initial mesh has 91282 points and 182342 faces.
2024-11-04 20:32:52,316 - INFO - Current memory usage: 1142.64 MB
2024-11-04 20:32:53,363 - INFO - Decimated mesh has 45630 points and 91171 faces.
2024-11-04 20:32:53,363 - INFO - Current memory usage: 1220.29 MB
2024-11-04 20:32:53,372 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 20:32:53,470 - INFO - Initial mesh has 2546 points and 4916 faces.
2024-11-04 20:32:53,471 - INFO - Current memory usage: 1221.17 MB
2024-11-04 20:32:53,499 - INFO - Decimated mesh has 1318 points and 2458 faces.
2024-11-04 20:32:53,499 - INFO - Current memory usage: 1221.17 MB
2024-11-04 20:32:53,510 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 20:32:53,632 - INFO - Initial mesh has 26949 points and 52671 faces.
2024-11-04 20:32:53,633 - INFO - Current memory usage: 1221.18 MB
2024-11-04 20:32:53,909 - INFO - Decimated mesh has 13553 points and 26335 faces.
2024-11-04 20:32:53,909 - INFO - Current memory usage: 1221.18 MB
2024-11-04 20:32:53,917 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 20:32:54,033 - INFO - Initial mesh has 25850 points and 50628 faces.
2024-11-04 20:32:54,034 - INFO - Current memory usage: 1224.63 MB
2024-11-04 20:32:54,289 - INFO - Decimated mesh has 12975 points and 25313 faces.
2024-11-04 20:32:54,290 - INFO - Current memory usage: 1225.51 MB
2024-11-04 20:32:54,297 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 20:32:54,416 - INFO - Initial mesh has 31627 points and 61822 faces.
2024-11-04 20:32:54,417 - INFO - Current memory usage: 1225.58 MB
2024-11-04 20:32:54,725 - INFO - Decimated mesh has 15830 points and 30911 faces.
2024-11-04 20:32:54,725 - INFO - Current memory usage: 1225.58 MB
2024-11-04 20:32:54,733 - INFO - Adding Mask 5 mesh to visualization.
2024-11-04 20:36:18,100 - INFO - Logging initiated.
2024-11-04 20:36:18,101 - INFO - Pipeline started.
2024-11-04 20:36:18,101 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-04 20:36:18,269 - INFO - Image loaded with shape (160, 790, 260).
2024-11-04 20:36:18,389 - INFO - Denoised image loaded.
2024-11-04 20:36:18,390 - INFO - Current memory usage: 482.88 MB
2024-11-04 20:36:18,436 - INFO - Starting intensity normalization.
2024-11-04 20:36:19,196 - INFO - Intensity normalization complete.
2024-11-04 20:36:19,197 - INFO - Current memory usage: 639.81 MB
2024-11-04 20:36:19,197 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-04 20:36:19,197 - INFO - Computing neighborhood statistics.
2024-11-04 20:36:19,573 - INFO - Neighborhood statistics computed.
2024-11-04 20:36:19,574 - INFO - Current memory usage: 597.93 MB
2024-11-04 20:36:19,574 - INFO - Computing z-axis value for each voxel.
2024-11-04 20:36:19,584 - INFO - Z-axis value for each voxel computed.
2024-11-04 20:36:19,585 - INFO - Current memory usage: 639.55 MB
2024-11-04 20:36:19,585 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 20:36:19,951 - INFO - Features shape: (10940800, 4)
2024-11-04 20:36:19,952 - INFO - Current memory usage: 890.09 MB
2024-11-04 20:36:19,952 - INFO - Performing MiniBatch K-Means clustering with k=10, batch_size=10000, connectivity_weight=0.1.
2024-11-04 20:36:23,558 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-04 20:36:30,274 - INFO - Clustering complete with spatial connectivity.
2024-11-04 20:36:30,274 - INFO - Current memory usage: 1511.52 MB
2024-11-04 20:36:30,333 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 20:36:30,333 - INFO - Current memory usage: 927.23 MB
2024-11-04 20:36:30,353 - INFO - Processing Cluster 0.
2024-11-04 20:36:30,374 - INFO - Cluster 0: Initial voxel count = 1909354.
2024-11-04 20:36:32,082 - INFO - Cluster 0: Refined voxel count = 1146635.
2024-11-04 20:36:32,124 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 20:36:32,240 - INFO - Cluster 0: Mean Intensity = -0.04940186068415642
2024-11-04 20:36:32,240 - INFO - Processing Cluster 1.
2024-11-04 20:36:32,270 - INFO - Cluster 1: Initial voxel count = 105578.
2024-11-04 20:36:33,895 - INFO - Cluster 1: Refined voxel count = 51868.
2024-11-04 20:36:33,934 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 20:36:34,006 - INFO - Cluster 1: Mean Intensity = 7.35879373550415
2024-11-04 20:36:34,006 - INFO - Processing Cluster 2.
2024-11-04 20:36:34,038 - INFO - Cluster 2: Initial voxel count = 1014784.
2024-11-04 20:36:35,692 - INFO - Cluster 2: Refined voxel count = 936457.
2024-11-04 20:36:35,744 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 20:36:35,851 - INFO - Cluster 2: Mean Intensity = -0.21598051488399506
2024-11-04 20:36:35,851 - INFO - Processing Cluster 3.
2024-11-04 20:36:35,892 - INFO - Cluster 3: Initial voxel count = 2278516.
2024-11-04 20:36:37,673 - INFO - Cluster 3: Refined voxel count = 2231670.
2024-11-04 20:36:37,700 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 20:36:37,793 - INFO - Cluster 3: Mean Intensity = -0.29593348503112793
2024-11-04 20:36:37,793 - INFO - Processing Cluster 4.
2024-11-04 20:36:37,820 - INFO - Cluster 4: Initial voxel count = 1591242.
2024-11-04 20:36:39,401 - INFO - Cluster 4: Refined voxel count = 1511127.
2024-11-04 20:36:39,424 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 20:36:39,504 - INFO - Cluster 4: Mean Intensity = -0.24076223373413086
2024-11-04 20:36:39,505 - INFO - Processing Cluster 5.
2024-11-04 20:36:39,529 - INFO - Cluster 5: Initial voxel count = 196852.
2024-11-04 20:36:40,990 - INFO - Cluster 5: Refined voxel count = 6776.
2024-11-04 20:36:41,012 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-04 20:36:41,064 - INFO - Cluster 5: Mean Intensity = 1.2145843505859375
2024-11-04 20:36:41,064 - INFO - Processing Cluster 6.
2024-11-04 20:36:41,083 - INFO - Cluster 6: Initial voxel count = 1290198.
2024-11-04 20:36:42,546 - INFO - Cluster 6: Refined voxel count = 1229949.
2024-11-04 20:36:42,569 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-11-04 20:36:42,628 - INFO - Cluster 6: Mean Intensity = -0.23890778422355652
2024-11-04 20:36:42,629 - INFO - Processing Cluster 7.
2024-11-04 20:36:42,652 - INFO - Cluster 7: Initial voxel count = 127996.
2024-11-04 20:36:44,105 - INFO - Cluster 7: Refined voxel count = 79575.
2024-11-04 20:36:44,128 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-11-04 20:36:44,176 - INFO - Cluster 7: Mean Intensity = 10.312946319580078
2024-11-04 20:36:44,176 - INFO - Processing Cluster 8.
2024-11-04 20:36:44,201 - INFO - Cluster 8: Initial voxel count = 724774.
2024-11-04 20:36:45,692 - INFO - Cluster 8: Refined voxel count = 364917.
2024-11-04 20:36:45,714 - INFO - Refined mask for Cluster 8 saved as 'csf_mask_class_8_refined_2.tif'.
2024-11-04 20:36:45,778 - INFO - Cluster 8: Mean Intensity = 0.9747843146324158
2024-11-04 20:36:45,778 - INFO - Processing Cluster 9.
2024-11-04 20:36:45,802 - INFO - Cluster 9: Initial voxel count = 1701506.
2024-11-04 20:36:47,379 - INFO - Cluster 9: Refined voxel count = 779585.
2024-11-04 20:36:47,402 - INFO - Refined mask for Cluster 9 saved as 'csf_mask_class_9_refined_2.tif'.
2024-11-04 20:36:47,486 - INFO - Cluster 9: Mean Intensity = 0.2211219221353531
2024-11-04 20:36:47,486 - INFO - CSF is identified as cluster 3.
2024-11-04 20:36:47,487 - INFO - Starting visualization with PyVista.
2024-11-04 20:36:48,739 - INFO - Adding Original MRI volume.
2024-11-04 20:36:49,117 - INFO - Adding Denoised MRI volume.
2024-11-04 20:36:49,596 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 20:36:50,246 - INFO - Initial mesh has 224304 points and 457902 faces.
2024-11-04 20:36:50,247 - INFO - Current memory usage: 1184.32 MB
2024-11-04 20:36:53,397 - INFO - Decimated mesh has 109906 points and 228951 faces.
2024-11-04 20:36:53,398 - INFO - Current memory usage: 1373.30 MB
2024-11-04 20:36:53,407 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 20:36:53,537 - INFO - Initial mesh has 18612 points and 38256 faces.
2024-11-04 20:36:53,537 - INFO - Current memory usage: 1373.05 MB
2024-11-04 20:36:53,767 - INFO - Decimated mesh has 9086 points and 19127 faces.
2024-11-04 20:36:53,767 - INFO - Current memory usage: 1373.05 MB
2024-11-04 20:36:53,776 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 20:36:53,928 - INFO - Initial mesh has 38598 points and 76041 faces.
2024-11-04 20:36:53,928 - INFO - Current memory usage: 1373.05 MB
2024-11-04 20:36:54,314 - INFO - Decimated mesh has 19236 points and 38020 faces.
2024-11-04 20:36:54,315 - INFO - Current memory usage: 1373.05 MB
2024-11-04 20:36:54,322 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 20:36:54,470 - INFO - Initial mesh has 31722 points and 62336 faces.
2024-11-04 20:36:54,470 - INFO - Current memory usage: 1372.80 MB
2024-11-04 20:36:54,857 - INFO - Decimated mesh has 15864 points and 31168 faces.
2024-11-04 20:36:54,857 - INFO - Current memory usage: 1372.80 MB
2024-11-04 20:36:54,866 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 20:36:55,023 - INFO - Initial mesh has 44753 points and 88508 faces.
2024-11-04 20:36:55,024 - INFO - Current memory usage: 1372.18 MB
2024-11-04 20:36:55,503 - INFO - Decimated mesh has 22208 points and 44254 faces.
2024-11-04 20:36:55,504 - INFO - Current memory usage: 1372.18 MB
2024-11-04 20:36:55,512 - INFO - Adding Mask 5 mesh to visualization.
2024-11-04 20:36:55,626 - INFO - Initial mesh has 3946 points and 6724 faces.
2024-11-04 20:36:55,627 - INFO - Current memory usage: 1372.06 MB
2024-11-04 20:36:55,658 - INFO - Decimated mesh has 2291 points and 3362 faces.
2024-11-04 20:36:55,658 - INFO - Current memory usage: 1372.06 MB
2024-11-04 20:36:55,667 - INFO - Adding Mask 6 mesh to visualization.
2024-11-04 20:36:55,809 - INFO - Initial mesh has 30031 points and 59353 faces.
2024-11-04 20:36:55,809 - INFO - Current memory usage: 1371.33 MB
2024-11-04 20:36:56,202 - INFO - Decimated mesh has 14995 points and 29675 faces.
2024-11-04 20:36:56,203 - INFO - Current memory usage: 1371.33 MB
2024-11-04 20:36:56,211 - INFO - Adding Mask 7 mesh to visualization.
2024-11-04 20:36:56,334 - INFO - Initial mesh has 20651 points and 41464 faces.
2024-11-04 20:36:56,334 - INFO - Current memory usage: 1371.23 MB
2024-11-04 20:36:56,540 - INFO - Decimated mesh has 10295 points and 20730 faces.
2024-11-04 20:36:56,541 - INFO - Current memory usage: 1371.23 MB
2024-11-04 20:36:56,551 - INFO - Adding Mask 8 mesh to visualization.
2024-11-04 20:36:56,802 - INFO - Initial mesh has 86416 points and 171398 faces.
2024-11-04 20:36:56,803 - INFO - Current memory usage: 1370.79 MB
2024-11-04 20:36:57,704 - INFO - Decimated mesh has 43647 points and 85699 faces.
2024-11-04 20:36:57,704 - INFO - Current memory usage: 1370.79 MB
2024-11-04 20:36:57,712 - INFO - Adding Mask 9 mesh to visualization.
2024-11-04 20:36:58,099 - INFO - Initial mesh has 228052 points and 471302 faces.
2024-11-04 20:36:58,100 - INFO - Current memory usage: 1370.54 MB
2024-11-04 20:37:01,339 - INFO - Decimated mesh has 110796 points and 235650 faces.
2024-11-04 20:37:01,339 - INFO - Current memory usage: 1422.04 MB
2024-11-04 20:37:01,349 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:37:01,889 - INFO - Translator(prefix=None)
2024-11-04 20:37:02,024 - INFO - awaiting runner setup
2024-11-04 20:37:02,026 - INFO - awaiting site startup
2024-11-04 20:37:02,027 - INFO - Print WSLINK_READY_MSG
2024-11-04 20:37:02,027 - INFO - Schedule auto shutdown with timout 0
2024-11-04 20:37:02,027 - INFO - awaiting running future
2024-11-04 20:37:17,272 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:37:17,283 - INFO - Current memory usage: 1401.64 MB
2024-11-04 20:37:17,298 - INFO - Selected slice indices for saving: [0, 159]
2024-11-04 20:37:18,440 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 20:37:18,758 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 20:37:19,021 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 20:37:19,294 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 20:37:19,587 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 20:37:19,874 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-04 20:37:20,159 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-11-04 20:37:20,497 - INFO - Saved slice 0 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_7_overlay.png'.
2024-11-04 20:37:20,872 - INFO - Saved slice 0 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_8_overlay.png'.
2024-11-04 20:37:21,215 - INFO - Saved slice 0 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_9_overlay.png'.
2024-11-04 20:37:21,503 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-04 20:37:21,829 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-04 20:37:22,169 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-04 20:37:22,603 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-04 20:37:22,920 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-04 20:37:23,279 - INFO - Saved slice 159 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_5_overlay.png'.
2024-11-04 20:37:23,637 - INFO - Saved slice 159 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_6_overlay.png'.
2024-11-04 20:37:23,953 - INFO - Saved slice 159 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_7_overlay.png'.
2024-11-04 20:37:24,234 - INFO - Saved slice 159 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_8_overlay.png'.
2024-11-04 20:37:24,515 - INFO - Saved slice 159 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_9_overlay.png'.
2024-11-04 20:37:24,523 - INFO - Pipeline completed successfully.
2024-11-04 20:37:24,523 - INFO - Current memory usage: 1338.24 MB
2024-11-04 20:37:24,523 - INFO - Selecting and refining the good mask based on density profile.
2024-11-04 20:37:24,547 - INFO - Computed density profiles along x and y axes.
2024-11-04 20:37:24,547 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 20:37:24,664 - INFO - Cluster 0: Score = 3511.2101192474365 (X: 1508.0053043365479, Y: 2003.2048149108887)
2024-11-04 20:37:24,704 - INFO - Cluster 0: Original Sum = 15163.2880859375, Normalized Sum = -35466.1328125
2024-11-04 20:37:24,852 - INFO - Cluster 1: Score = 6513.589218139648 (X: 3389.776490211487, Y: 3123.8127279281616)
2024-11-04 20:37:24,865 - INFO - Cluster 1: Original Sum = 19056.130859375, Normalized Sum = 459245.5
2024-11-04 20:37:25,026 - INFO - Cluster 2: Score = 1136.0665044784546 (X: 604.2681121826172, Y: 531.7983922958374)
2024-11-04 20:37:25,050 - INFO - Cluster 2: Original Sum = 5569.27880859375, Normalized Sum = -199921.078125
2024-11-04 20:37:25,212 - INFO - Cluster 3: Score = 871.9922771453857 (X: 737.7608623504639, Y: 134.23141479492188)
2024-11-04 20:37:25,247 - INFO - Cluster 3: Original Sum = 5982.94189453125, Normalized Sum = -659294.625
2024-11-04 20:37:25,378 - INFO - Cluster 4: Score = 1639.50514793396 (X: 1209.894329071045, Y: 429.61081886291504)
2024-11-04 20:37:25,401 - INFO - Cluster 4: Original Sum = 7517.08642578125, Normalized Sum = -359479.59375
2024-11-04 20:37:25,533 - INFO - Cluster 5: Score = 588.8541074991226 (X: 304.9679151773453, Y: 283.88619232177734)
2024-11-04 20:37:25,544 - INFO - Cluster 5: Original Sum = 827.6446533203125, Normalized Sum = 18305.412109375
2024-11-04 20:37:25,678 - INFO - Cluster 6: Score = 759.5972995758057 (X: 199.71360778808594, Y: 559.8836917877197)
2024-11-04 20:37:25,713 - INFO - Cluster 6: Original Sum = 6230.4765625, Normalized Sum = -289778.1875
2024-11-04 20:37:26,036 - INFO - Cluster 7: Score = 10937.257184267044 (X: 6169.412616014481, Y: 4767.8445682525635)
2024-11-04 20:37:26,050 - INFO - Cluster 7: Original Sum = 36266.203125, Normalized Sum = 880942.3125
2024-11-04 20:37:26,227 - INFO - Cluster 8: Score = 6706.912404060364 (X: 3369.6872301101685, Y: 3337.2251739501953)
2024-11-04 20:37:26,252 - INFO - Cluster 8: Original Sum = 21052.15625, Normalized Sum = 395782.03125
2024-11-04 20:37:26,420 - INFO - Cluster 9: Score = 5477.086189866066 (X: 3121.530735015869, Y: 2355.555454850197)
2024-11-04 20:37:26,469 - INFO - Cluster 9: Original Sum = 18730.3671875, Normalized Sum = 187143.203125
2024-11-04 20:37:26,470 - INFO - Good cluster identified as Cluster 7 with score 10937.257184267044.
2024-11-04 20:37:28,102 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-04 20:37:28,102 - INFO - Removing eyes from the good cluster mask.
2024-11-04 20:37:28,102 - INFO - Starting eye detection using connected components analysis.
2024-11-04 20:37:28,237 - INFO - Number of connected components found: 359
2024-11-04 20:37:54,280 - INFO - Detected potential eye at centroid: (50.30681081081081, 113.38832432432433, 58.67091891891892) with Volume: 4625.0 and Sphericity: 0.84
2024-11-04 20:38:40,057 - INFO - Detected potential eye at centroid: (109.52577989601386, 112.2551993067591, 60.4040294627383) with Volume: 4616.0 and Sphericity: 0.84
2024-11-04 20:39:12,366 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-04 20:39:12,381 - INFO - Eyes have been removed from the CSF mask.
2024-11-04 20:39:12,382 - INFO - Detected eyes at centroids: [(50, 113, 58), (109, 112, 60)]
2024-11-04 20:39:16,176 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-04 20:39:16,178 - INFO - Saving the good cluster mask as TIFF.
2024-11-04 20:39:16,224 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-04 20:39:16,224 - INFO - Calculating the volume of CSF in the MRI.
2024-11-04 20:39:16,240 - INFO - Total CSF Volume: 67075.86674128128 mm³
2024-11-04 20:39:16,240 - INFO - Final visualization of the Good CSF Mask.
2024-11-04 20:39:16,240 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-04 20:39:16,753 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-04 20:39:16,946 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-04 20:39:16,947 - INFO - Visualization process completed.
2024-11-04 20:39:16,949 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:39:16,950 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:39:16,950 - INFO - Final cleanup completed.
2024-11-04 20:39:16,950 - INFO - Current memory usage: 1145.07 MB
2024-11-04 20:40:15,967 - INFO - Logging initiated.
2024-11-04 20:40:15,967 - INFO - Pipeline started.
2024-11-04 20:40:15,967 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-04 20:40:16,287 - INFO - Image loaded with shape (160, 790, 260).
2024-11-04 20:40:16,412 - INFO - Denoised image loaded.
2024-11-04 20:40:16,413 - INFO - Current memory usage: 483.41 MB
2024-11-04 20:40:16,463 - INFO - Starting intensity normalization.
2024-11-04 20:40:17,647 - INFO - Intensity normalization complete.
2024-11-04 20:40:17,648 - INFO - Current memory usage: 640.24 MB
2024-11-04 20:40:17,649 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-04 20:40:17,649 - INFO - Computing neighborhood statistics.
2024-11-04 20:40:18,071 - INFO - Neighborhood statistics computed.
2024-11-04 20:40:18,071 - INFO - Current memory usage: 598.35 MB
2024-11-04 20:40:18,071 - INFO - Computing z-axis value for each voxel.
2024-11-04 20:40:18,082 - INFO - Z-axis value for each voxel computed.
2024-11-04 20:40:18,083 - INFO - Current memory usage: 639.97 MB
2024-11-04 20:40:18,083 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 20:40:18,531 - INFO - Features shape: (10940800, 4)
2024-11-04 20:40:18,531 - INFO - Current memory usage: 890.59 MB
2024-11-04 20:40:18,531 - INFO - Performing MiniBatch K-Means clustering with k=8, batch_size=10000, connectivity_weight=0.1.
2024-11-04 20:40:23,550 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-04 20:40:30,439 - INFO - Clustering complete with spatial connectivity.
2024-11-04 20:40:30,441 - INFO - Current memory usage: 1515.75 MB
2024-11-04 20:40:30,503 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 20:40:30,504 - INFO - Current memory usage: 931.46 MB
2024-11-04 20:40:30,519 - INFO - Processing Cluster 0.
2024-11-04 20:40:30,543 - INFO - Cluster 0: Initial voxel count = 3060560.
2024-11-04 20:40:35,301 - INFO - Cluster 0: Refined voxel count = 1977609.
2024-11-04 20:40:35,331 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 20:40:35,401 - INFO - Cluster 0: Mean Intensity = -0.1685502827167511
2024-11-04 20:40:35,401 - INFO - Processing Cluster 1.
2024-11-04 20:40:35,417 - INFO - Cluster 1: Initial voxel count = 102475.
2024-11-04 20:40:40,257 - INFO - Cluster 1: Refined voxel count = 5262.
2024-11-04 20:40:40,283 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 20:40:40,330 - INFO - Cluster 1: Mean Intensity = 7.662893772125244
2024-11-04 20:40:40,330 - INFO - Processing Cluster 2.
2024-11-04 20:40:40,351 - INFO - Cluster 2: Initial voxel count = 952912.
2024-11-04 20:40:44,951 - INFO - Cluster 2: Refined voxel count = 70422.
2024-11-04 20:40:44,988 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 20:40:45,075 - INFO - Cluster 2: Mean Intensity = 0.615472674369812
2024-11-04 20:40:45,076 - INFO - Processing Cluster 3.
2024-11-04 20:40:45,099 - INFO - Cluster 3: Initial voxel count = 2296231.
2024-11-04 20:40:49,658 - INFO - Cluster 3: Refined voxel count = 730767.
2024-11-04 20:40:49,683 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 20:40:49,772 - INFO - Cluster 3: Mean Intensity = 0.09241435676813126
2024-11-04 20:40:49,772 - INFO - Processing Cluster 4.
2024-11-04 20:40:49,788 - INFO - Cluster 4: Initial voxel count = 168006.
2024-11-04 20:40:53,690 - INFO - Cluster 4: Refined voxel count = 0.
2024-11-04 20:40:53,691 - WARNING - Refined mask for Cluster 4 is empty.
2024-11-04 20:40:53,715 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 20:40:53,772 - INFO - Cluster 4: Mean Intensity = 1.5685715675354004
2024-11-04 20:40:53,773 - INFO - Processing Cluster 5.
2024-11-04 20:40:53,793 - INFO - Cluster 5: Initial voxel count = 243081.
2024-11-04 20:40:57,693 - INFO - Cluster 5: Refined voxel count = 4742.
2024-11-04 20:40:57,717 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-04 20:40:57,767 - INFO - Cluster 5: Mean Intensity = 1.4495556354522705
2024-11-04 20:40:57,767 - INFO - Processing Cluster 6.
2024-11-04 20:40:57,783 - INFO - Cluster 6: Initial voxel count = 4009271.
2024-11-04 20:41:01,847 - INFO - Cluster 6: Refined voxel count = 3606592.
2024-11-04 20:41:01,870 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-11-04 20:41:01,931 - INFO - Cluster 6: Mean Intensity = -0.2895546555519104
2024-11-04 20:41:01,931 - INFO - Processing Cluster 7.
2024-11-04 20:41:01,948 - INFO - Cluster 7: Initial voxel count = 108264.
2024-11-04 20:41:05,893 - INFO - Cluster 7: Refined voxel count = 41127.
2024-11-04 20:41:05,917 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-11-04 20:41:05,967 - INFO - Cluster 7: Mean Intensity = 11.236955642700195
2024-11-04 20:41:05,968 - INFO - CSF is identified as cluster 6.
2024-11-04 20:41:05,968 - INFO - Starting visualization with PyVista.
2024-11-04 20:41:07,205 - INFO - Adding Original MRI volume.
2024-11-04 20:41:07,490 - INFO - Adding Denoised MRI volume.
2024-11-04 20:41:07,826 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 20:41:08,137 - INFO - Initial mesh has 120260 points and 238538 faces.
2024-11-04 20:41:08,138 - INFO - Current memory usage: 1136.40 MB
2024-11-04 20:41:09,549 - INFO - Decimated mesh has 60265 points and 119268 faces.
2024-11-04 20:41:09,550 - INFO - Current memory usage: 1252.79 MB
2024-11-04 20:41:09,559 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 20:41:09,666 - INFO - Initial mesh has 2032 points and 3920 faces.
2024-11-04 20:41:09,667 - INFO - Current memory usage: 1255.30 MB
2024-11-04 20:41:09,685 - INFO - Decimated mesh has 1052 points and 1960 faces.
2024-11-04 20:41:09,685 - INFO - Current memory usage: 1255.30 MB
2024-11-04 20:41:09,695 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 20:41:09,988 - INFO - Initial mesh has 16883 points and 33252 faces.
2024-11-04 20:41:09,989 - INFO - Current memory usage: 1255.32 MB
2024-11-04 20:41:10,150 - INFO - Decimated mesh has 8570 points and 16626 faces.
2024-11-04 20:41:10,150 - INFO - Current memory usage: 1255.32 MB
2024-11-04 20:41:10,158 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 20:41:10,458 - INFO - Initial mesh has 110113 points and 220316 faces.
2024-11-04 20:41:10,458 - INFO - Current memory usage: 1255.27 MB
2024-11-04 20:41:11,692 - INFO - Decimated mesh has 54974 points and 110157 faces.
2024-11-04 20:41:11,692 - INFO - Current memory usage: 1264.02 MB
2024-11-04 20:41:11,701 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 20:44:23,439 - INFO - Logging initiated.
2024-11-04 20:44:23,440 - INFO - Pipeline started.
2024-11-04 20:44:23,440 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-04 20:44:23,682 - INFO - Image loaded with shape (160, 790, 260).
2024-11-04 20:44:23,786 - INFO - Denoised image loaded.
2024-11-04 20:44:23,787 - INFO - Current memory usage: 483.08 MB
2024-11-04 20:44:23,829 - INFO - Starting intensity normalization.
2024-11-04 20:44:25,041 - INFO - Intensity normalization complete.
2024-11-04 20:44:25,042 - INFO - Current memory usage: 639.96 MB
2024-11-04 20:44:25,043 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-04 20:44:25,043 - INFO - Computing neighborhood statistics.
2024-11-04 20:44:25,459 - INFO - Neighborhood statistics computed.
2024-11-04 20:44:25,460 - INFO - Current memory usage: 598.07 MB
2024-11-04 20:44:25,460 - INFO - Computing z-axis value for each voxel.
2024-11-04 20:44:25,470 - INFO - Z-axis value for each voxel computed.
2024-11-04 20:44:25,471 - INFO - Current memory usage: 639.70 MB
2024-11-04 20:44:25,471 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 20:44:26,179 - INFO - Features shape: (10940800, 4)
2024-11-04 20:44:26,180 - INFO - Current memory usage: 890.23 MB
2024-11-04 20:44:26,180 - INFO - Performing MiniBatch K-Means clustering with k=8, batch_size=10000, connectivity_weight=0.1.
2024-11-04 20:44:31,304 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-04 20:44:36,467 - INFO - Clustering complete with spatial connectivity.
2024-11-04 20:44:36,467 - INFO - Current memory usage: 1518.22 MB
2024-11-04 20:44:36,517 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 20:44:36,518 - INFO - Current memory usage: 934.03 MB
2024-11-04 20:44:36,544 - INFO - Processing Cluster 0.
2024-11-04 20:44:36,570 - INFO - Cluster 0: Initial voxel count = 3060560.
2024-11-04 20:44:41,008 - INFO - Cluster 0: Refined voxel count = 1977609.
2024-11-04 20:44:41,059 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 20:44:41,159 - INFO - Cluster 0: Mean Intensity = -0.1685502827167511
2024-11-04 20:44:41,159 - INFO - Processing Cluster 1.
2024-11-04 20:44:41,191 - INFO - Cluster 1: Initial voxel count = 102475.
2024-11-04 20:44:45,454 - INFO - Cluster 1: Refined voxel count = 5262.
2024-11-04 20:44:45,479 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 20:44:45,640 - INFO - Cluster 1: Mean Intensity = 7.662893772125244
2024-11-04 20:44:45,641 - INFO - Processing Cluster 2.
2024-11-04 20:44:45,657 - INFO - Cluster 2: Initial voxel count = 952912.
2024-11-04 20:44:49,886 - INFO - Cluster 2: Refined voxel count = 70422.
2024-11-04 20:44:49,906 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 20:44:50,126 - INFO - Cluster 2: Mean Intensity = 0.615472674369812
2024-11-04 20:44:50,127 - INFO - Processing Cluster 3.
2024-11-04 20:44:50,142 - INFO - Cluster 3: Initial voxel count = 2296231.
2024-11-04 20:44:54,501 - INFO - Cluster 3: Refined voxel count = 730767.
2024-11-04 20:44:54,516 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 20:44:54,710 - INFO - Cluster 3: Mean Intensity = 0.09241435676813126
2024-11-04 20:44:54,710 - INFO - Processing Cluster 4.
2024-11-04 20:44:54,732 - INFO - Cluster 4: Initial voxel count = 168006.
2024-11-04 20:44:59,168 - INFO - Cluster 4: Refined voxel count = 0.
2024-11-04 20:44:59,169 - WARNING - Refined mask for Cluster 4 is empty.
2024-11-04 20:44:59,194 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 20:44:59,338 - INFO - Cluster 4: Mean Intensity = 1.5685715675354004
2024-11-04 20:44:59,338 - INFO - Processing Cluster 5.
2024-11-04 20:44:59,353 - INFO - Cluster 5: Initial voxel count = 243081.
2024-11-04 20:45:03,670 - INFO - Cluster 5: Refined voxel count = 4742.
2024-11-04 20:45:03,696 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-04 20:45:03,856 - INFO - Cluster 5: Mean Intensity = 1.4495556354522705
2024-11-04 20:45:03,856 - INFO - Processing Cluster 6.
2024-11-04 20:45:03,872 - INFO - Cluster 6: Initial voxel count = 4009271.
2024-11-04 20:45:08,245 - INFO - Cluster 6: Refined voxel count = 3606592.
2024-11-04 20:45:08,273 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-11-04 20:45:08,458 - INFO - Cluster 6: Mean Intensity = -0.2895546555519104
2024-11-04 20:45:08,458 - INFO - Processing Cluster 7.
2024-11-04 20:45:08,472 - INFO - Cluster 7: Initial voxel count = 108264.
2024-11-04 20:45:12,806 - INFO - Cluster 7: Refined voxel count = 41127.
2024-11-04 20:45:12,833 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-11-04 20:45:13,064 - INFO - Cluster 7: Mean Intensity = 11.236955642700195
2024-11-04 20:45:13,065 - INFO - CSF is identified as cluster 6.
2024-11-04 20:45:13,065 - INFO - Starting visualization with PyVista.
2024-11-04 20:45:13,587 - INFO - Adding Original MRI volume.
2024-11-04 20:45:14,206 - INFO - Adding Denoised MRI volume.
2024-11-04 20:45:14,739 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 20:45:15,051 - INFO - Initial mesh has 120260 points and 238538 faces.
2024-11-04 20:45:15,052 - INFO - Current memory usage: 1138.23 MB
2024-11-04 20:45:16,669 - INFO - Decimated mesh has 60265 points and 119268 faces.
2024-11-04 20:45:16,670 - INFO - Current memory usage: 1254.52 MB
2024-11-04 20:45:16,679 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 20:45:16,819 - INFO - Initial mesh has 2032 points and 3920 faces.
2024-11-04 20:45:16,819 - INFO - Current memory usage: 1257.30 MB
2024-11-04 20:45:16,837 - INFO - Decimated mesh has 1052 points and 1960 faces.
2024-11-04 20:45:16,837 - INFO - Current memory usage: 1257.30 MB
2024-11-04 20:45:16,848 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 20:45:17,042 - INFO - Initial mesh has 16883 points and 33252 faces.
2024-11-04 20:45:17,042 - INFO - Current memory usage: 1257.31 MB
2024-11-04 20:45:17,201 - INFO - Decimated mesh has 8570 points and 16626 faces.
2024-11-04 20:45:17,201 - INFO - Current memory usage: 1257.31 MB
2024-11-04 20:45:17,209 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 20:45:17,513 - INFO - Initial mesh has 110113 points and 220316 faces.
2024-11-04 20:45:17,514 - INFO - Current memory usage: 1257.31 MB
2024-11-04 20:45:18,984 - INFO - Decimated mesh has 54974 points and 110157 faces.
2024-11-04 20:45:18,985 - INFO - Current memory usage: 1265.94 MB
2024-11-04 20:45:18,996 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 20:45:19,023 - WARNING - Mask 4 is empty. Skipping visualization.
2024-11-04 20:45:19,023 - INFO - Adding Mask 5 mesh to visualization.
2024-11-04 20:45:19,196 - INFO - Initial mesh has 1356 points and 2626 faces.
2024-11-04 20:45:19,197 - INFO - Current memory usage: 1266.07 MB
2024-11-04 20:45:19,210 - INFO - Decimated mesh has 692 points and 1312 faces.
2024-11-04 20:45:19,211 - INFO - Current memory usage: 1266.07 MB
2024-11-04 20:45:19,221 - INFO - Adding Mask 6 mesh to visualization.
2024-11-04 20:45:19,411 - INFO - Initial mesh has 68754 points and 134660 faces.
2024-11-04 20:45:19,412 - INFO - Current memory usage: 1266.07 MB
2024-11-04 20:45:20,306 - INFO - Decimated mesh has 34473 points and 67329 faces.
2024-11-04 20:45:20,306 - INFO - Current memory usage: 1266.07 MB
2024-11-04 20:45:20,320 - INFO - Adding Mask 7 mesh to visualization.
2024-11-04 20:45:20,510 - INFO - Initial mesh has 9058 points and 18028 faces.
2024-11-04 20:45:20,510 - INFO - Current memory usage: 1266.10 MB
2024-11-04 20:45:20,600 - INFO - Decimated mesh has 4551 points and 9014 faces.
2024-11-04 20:45:20,601 - INFO - Current memory usage: 1266.10 MB
2024-11-04 20:45:20,608 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:45:21,151 - INFO - Translator(prefix=None)
2024-11-04 20:45:21,313 - INFO - awaiting runner setup
2024-11-04 20:45:21,314 - INFO - awaiting site startup
2024-11-04 20:45:21,316 - INFO - Print WSLINK_READY_MSG
2024-11-04 20:45:21,316 - INFO - Schedule auto shutdown with timout 0
2024-11-04 20:45:21,316 - INFO - awaiting running future
2024-11-04 20:45:34,225 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:45:34,239 - INFO - Current memory usage: 1280.70 MB
2024-11-04 20:45:34,264 - INFO - Selected slice indices for saving: [0, 39, 79, 119, 159]
2024-11-04 20:45:35,137 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 20:45:35,413 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 20:45:35,688 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 20:45:35,951 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 20:45:36,231 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 20:45:36,498 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-04 20:45:36,773 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-11-04 20:45:37,041 - INFO - Saved slice 0 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_7_overlay.png'.
2024-11-04 20:45:37,276 - INFO - Saved slice 39 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_0_overlay.png'.
2024-11-04 20:45:37,509 - INFO - Saved slice 39 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_1_overlay.png'.
2024-11-04 20:45:37,743 - INFO - Saved slice 39 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_2_overlay.png'.
2024-11-04 20:45:38,004 - INFO - Saved slice 39 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_3_overlay.png'.
2024-11-04 20:45:38,256 - INFO - Saved slice 39 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_4_overlay.png'.
2024-11-04 20:45:38,486 - INFO - Saved slice 39 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_5_overlay.png'.
2024-11-04 20:45:38,721 - INFO - Saved slice 39 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_6_overlay.png'.
2024-11-04 20:45:38,953 - INFO - Saved slice 39 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_7_overlay.png'.
2024-11-04 20:45:39,209 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-04 20:45:39,461 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-04 20:45:39,697 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-04 20:45:39,941 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-04 20:45:40,297 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-04 20:45:40,533 - INFO - Saved slice 79 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_5_overlay.png'.
2024-11-04 20:45:40,809 - INFO - Saved slice 79 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_6_overlay.png'.
2024-11-04 20:45:41,065 - INFO - Saved slice 79 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_7_overlay.png'.
2024-11-04 20:45:41,373 - INFO - Saved slice 119 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_0_overlay.png'.
2024-11-04 20:45:41,604 - INFO - Saved slice 119 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_1_overlay.png'.
2024-11-04 20:45:41,882 - INFO - Saved slice 119 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_2_overlay.png'.
2024-11-04 20:45:42,118 - INFO - Saved slice 119 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_3_overlay.png'.
2024-11-04 20:45:42,375 - INFO - Saved slice 119 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_4_overlay.png'.
2024-11-04 20:45:42,618 - INFO - Saved slice 119 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_5_overlay.png'.
2024-11-04 20:45:42,856 - INFO - Saved slice 119 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_6_overlay.png'.
2024-11-04 20:45:43,099 - INFO - Saved slice 119 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_7_overlay.png'.
2024-11-04 20:45:43,364 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-04 20:45:43,628 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-04 20:45:43,890 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-04 20:45:44,167 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-04 20:45:44,439 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-04 20:45:44,705 - INFO - Saved slice 159 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_5_overlay.png'.
2024-11-04 20:45:44,977 - INFO - Saved slice 159 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_6_overlay.png'.
2024-11-04 20:45:45,249 - INFO - Saved slice 159 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_7_overlay.png'.
2024-11-04 20:45:45,258 - INFO - Pipeline completed successfully.
2024-11-04 20:45:45,259 - INFO - Current memory usage: 1239.21 MB
2024-11-04 20:45:45,259 - INFO - Selecting and refining the good mask based on density profile.
2024-11-04 20:45:45,284 - INFO - Computed density profiles along x and y axes.
2024-11-04 20:45:45,284 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 20:45:45,488 - INFO - Cluster 0: Score = 2072.155167579651 (X: 985.7691040039062, Y: 1086.3860635757446)
2024-11-04 20:45:45,524 - INFO - Cluster 0: Original Sum = 14903.9794921875, Normalized Sum = -343350.96875
2024-11-04 20:45:45,650 - INFO - Cluster 1: Score = 1011.8902654647827 (X: 486.34121227264404, Y: 525.5490531921387)
2024-11-04 20:45:45,660 - INFO - Cluster 1: Original Sum = 2131.074462890625, Normalized Sum = 51553.390625
2024-11-04 20:45:45,799 - INFO - Cluster 2: Score = 674.9968809485435 (X: 288.2466027736664, Y: 386.75027817487717)
2024-11-04 20:45:45,812 - INFO - Cluster 2: Original Sum = 3144.9287109375, Normalized Sum = 53355.35546875
2024-11-04 20:45:45,948 - INFO - Cluster 3: Score = 2432.0768045186996 (X: 1612.811562538147, Y: 819.2652419805527)
2024-11-04 20:45:45,974 - INFO - Cluster 3: Original Sum = 13379.478515625, Normalized Sum = 70611.859375
2024-11-04 20:45:46,094 - INFO - Cluster 4: Score = 0 (X: 0, Y: 0)
2024-11-04 20:45:46,097 - INFO - Cluster 4: Original Sum = 0.0, Normalized Sum = 0.0
2024-11-04 20:45:46,216 - INFO - Cluster 5: Score = 234.1649305820465 (X: 93.78346335887909, Y: 140.38146722316742)
2024-11-04 20:45:46,226 - INFO - Cluster 5: Original Sum = 608.8087768554688, Normalized Sum = 13553.2177734375
2024-11-04 20:45:46,333 - INFO - Cluster 6: Score = 1156.059395313263 (X: 836.2656154632568, Y: 319.7937798500061)
2024-11-04 20:45:46,368 - INFO - Cluster 6: Original Sum = 10428.9833984375, Normalized Sum = -1046417.9375
2024-11-04 20:45:46,485 - INFO - Cluster 7: Score = 6059.385009765625 (X: 3248.433490753174, Y: 2810.951519012451)
2024-11-04 20:45:46,496 - INFO - Cluster 7: Original Sum = 19734.431640625, Normalized Sum = 480157.46875
2024-11-04 20:45:46,496 - INFO - Good cluster identified as Cluster 7 with score 6059.385009765625.
2024-11-04 20:45:47,923 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-04 20:45:47,923 - INFO - Removing eyes from the good cluster mask.
2024-11-04 20:45:47,923 - INFO - Starting eye detection using connected components analysis.
2024-11-04 20:45:48,055 - INFO - Number of connected components found: 37
2024-11-04 20:45:50,155 - INFO - Detected potential eye at centroid: (50.308498773142986, 113.38590229756859, 58.890475128262324) with Volume: 4483.0 and Sphericity: 0.88
2024-11-04 20:45:58,268 - INFO - Detected potential eye at centroid: (105.16976127320955, 108.60079575596816, 163.157824933687) with Volume: 754.0 and Sphericity: 0.73
2024-11-04 20:45:58,621 - INFO - Detected potential eye at centroid: (109.48303571428572, 112.24040178571428, 60.58683035714286) with Volume: 4480.0 and Sphericity: 0.87
2024-11-04 20:46:00,315 - WARNING - Expected to detect 2 eyes, but found 3. Skipping eye removal.
2024-11-04 20:46:00,318 - INFO - Detected eyes at centroids: []
2024-11-04 20:46:03,416 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-04 20:46:03,416 - INFO - Saving the good cluster mask as TIFF.
2024-11-04 20:46:03,446 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-04 20:46:03,446 - INFO - Calculating the volume of CSF in the MRI.
2024-11-04 20:46:03,456 - INFO - Total CSF Volume: 39221.84393705285 mm³
2024-11-04 20:46:03,456 - INFO - Final visualization of the Good CSF Mask.
2024-11-04 20:46:03,456 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-04 20:46:03,639 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-04 20:46:03,730 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-04 20:46:03,730 - INFO - Visualization process completed.
2024-11-04 20:46:03,732 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:46:03,732 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:46:03,732 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:46:03,732 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:46:03,732 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:46:03,732 - INFO - Final cleanup completed.
2024-11-04 20:46:03,732 - INFO - Current memory usage: 1203.51 MB
2024-11-04 20:47:12,066 - INFO - Logging initiated.
2024-11-04 20:47:12,067 - INFO - Pipeline started.
2024-11-04 20:47:12,067 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-04 20:47:12,194 - INFO - Image loaded with shape (160, 790, 260).
2024-11-04 20:47:12,265 - INFO - Denoised image loaded.
2024-11-04 20:47:12,266 - INFO - Current memory usage: 482.48 MB
2024-11-04 20:47:12,300 - INFO - Starting intensity normalization.
2024-11-04 20:47:13,239 - INFO - Intensity normalization complete.
2024-11-04 20:47:13,239 - INFO - Current memory usage: 639.32 MB
2024-11-04 20:47:13,240 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-04 20:47:13,240 - INFO - Computing neighborhood statistics.
2024-11-04 20:47:13,616 - INFO - Neighborhood statistics computed.
2024-11-04 20:47:13,616 - INFO - Current memory usage: 597.43 MB
2024-11-04 20:47:13,616 - INFO - Computing z-axis value for each voxel.
2024-11-04 20:47:13,627 - INFO - Z-axis value for each voxel computed.
2024-11-04 20:47:13,627 - INFO - Current memory usage: 639.06 MB
2024-11-04 20:47:13,628 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 20:47:14,003 - INFO - Features shape: (10940800, 4)
2024-11-04 20:47:14,003 - INFO - Current memory usage: 889.59 MB
2024-11-04 20:47:14,003 - INFO - Performing MiniBatch K-Means clustering with k=8, batch_size=10000, connectivity_weight=0.1.
2024-11-04 20:47:18,137 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-04 20:47:23,705 - INFO - Clustering complete with spatial connectivity.
2024-11-04 20:47:23,706 - INFO - Current memory usage: 1506.33 MB
2024-11-04 20:47:23,753 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 20:47:23,754 - INFO - Current memory usage: 922.05 MB
2024-11-04 20:47:23,771 - INFO - Processing Cluster 0.
2024-11-04 20:47:23,789 - INFO - Cluster 0: Initial voxel count = 3060560.
2024-11-04 20:47:27,666 - INFO - Cluster 0: Refined voxel count = 1977609.
2024-11-04 20:47:27,690 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 20:47:27,783 - INFO - Cluster 0: Mean Intensity = -0.1685502827167511
2024-11-04 20:47:27,783 - INFO - Processing Cluster 1.
2024-11-04 20:47:27,800 - INFO - Cluster 1: Initial voxel count = 102475.
2024-11-04 20:47:31,357 - INFO - Cluster 1: Refined voxel count = 5262.
2024-11-04 20:47:31,381 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 20:47:31,647 - INFO - Cluster 1: Mean Intensity = 7.662893772125244
2024-11-04 20:47:31,647 - INFO - Processing Cluster 2.
2024-11-04 20:47:31,662 - INFO - Cluster 2: Initial voxel count = 952912.
2024-11-04 20:47:35,533 - INFO - Cluster 2: Refined voxel count = 70422.
2024-11-04 20:47:35,551 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 20:47:35,631 - INFO - Cluster 2: Mean Intensity = 0.615472674369812
2024-11-04 20:47:35,631 - INFO - Processing Cluster 3.
2024-11-04 20:47:35,647 - INFO - Cluster 3: Initial voxel count = 2296231.
2024-11-04 20:47:39,928 - INFO - Cluster 3: Refined voxel count = 730767.
2024-11-04 20:47:39,952 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 20:47:40,108 - INFO - Cluster 3: Mean Intensity = 0.09241435676813126
2024-11-04 20:47:40,108 - INFO - Processing Cluster 4.
2024-11-04 20:47:40,122 - INFO - Cluster 4: Initial voxel count = 168006.
2024-11-04 20:47:44,135 - INFO - Cluster 4: Refined voxel count = 0.
2024-11-04 20:47:44,135 - WARNING - Refined mask for Cluster 4 is empty.
2024-11-04 20:47:44,152 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 20:47:44,257 - INFO - Cluster 4: Mean Intensity = 1.5685715675354004
2024-11-04 20:47:44,257 - INFO - Processing Cluster 5.
2024-11-04 20:47:44,272 - INFO - Cluster 5: Initial voxel count = 243081.
2024-11-04 20:47:47,784 - INFO - Cluster 5: Refined voxel count = 4742.
2024-11-04 20:47:47,807 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-04 20:47:47,886 - INFO - Cluster 5: Mean Intensity = 1.4495556354522705
2024-11-04 20:47:47,886 - INFO - Processing Cluster 6.
2024-11-04 20:47:47,903 - INFO - Cluster 6: Initial voxel count = 4009271.
2024-11-04 20:47:51,466 - INFO - Cluster 6: Refined voxel count = 3606592.
2024-11-04 20:47:51,489 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-11-04 20:47:51,629 - INFO - Cluster 6: Mean Intensity = -0.2895546555519104
2024-11-04 20:47:51,630 - INFO - Processing Cluster 7.
2024-11-04 20:47:51,645 - INFO - Cluster 7: Initial voxel count = 108264.
2024-11-04 20:47:55,557 - INFO - Cluster 7: Refined voxel count = 41127.
2024-11-04 20:47:55,580 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-11-04 20:47:55,714 - INFO - Cluster 7: Mean Intensity = 11.236955642700195
2024-11-04 20:47:55,715 - INFO - CSF is identified as cluster 6.
2024-11-04 20:47:55,715 - INFO - Starting visualization with PyVista.
2024-11-04 20:47:56,621 - INFO - Adding Original MRI volume.
2024-11-04 20:47:57,289 - INFO - Adding Denoised MRI volume.
2024-11-04 20:47:57,806 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 20:47:58,310 - INFO - Initial mesh has 120260 points and 238538 faces.
2024-11-04 20:47:58,311 - INFO - Current memory usage: 1128.88 MB
2024-11-04 20:47:59,755 - INFO - Decimated mesh has 60265 points and 119268 faces.
2024-11-04 20:47:59,756 - INFO - Current memory usage: 1245.02 MB
2024-11-04 20:47:59,765 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 20:47:59,923 - INFO - Initial mesh has 2032 points and 3920 faces.
2024-11-04 20:47:59,923 - INFO - Current memory usage: 1247.80 MB
2024-11-04 20:47:59,941 - INFO - Decimated mesh has 1052 points and 1960 faces.
2024-11-04 20:47:59,941 - INFO - Current memory usage: 1247.80 MB
2024-11-04 20:47:59,950 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 20:48:00,130 - INFO - Initial mesh has 16883 points and 33252 faces.
2024-11-04 20:48:00,131 - INFO - Current memory usage: 1247.82 MB
2024-11-04 20:48:00,284 - INFO - Decimated mesh has 8570 points and 16626 faces.
2024-11-04 20:48:00,285 - INFO - Current memory usage: 1247.82 MB
2024-11-04 20:48:00,293 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 20:48:00,576 - INFO - Initial mesh has 110113 points and 220316 faces.
2024-11-04 20:48:00,576 - INFO - Current memory usage: 1247.82 MB
2024-11-04 20:48:01,851 - INFO - Decimated mesh has 54974 points and 110157 faces.
2024-11-04 20:48:01,852 - INFO - Current memory usage: 1256.57 MB
2024-11-04 20:48:01,860 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 20:48:01,882 - WARNING - Mask 4 is empty. Skipping visualization.
2024-11-04 20:48:01,882 - INFO - Adding Mask 5 mesh to visualization.
2024-11-04 20:48:02,011 - INFO - Initial mesh has 1356 points and 2626 faces.
2024-11-04 20:48:02,011 - INFO - Current memory usage: 1256.60 MB
2024-11-04 20:48:02,026 - INFO - Decimated mesh has 692 points and 1312 faces.
2024-11-04 20:48:02,027 - INFO - Current memory usage: 1256.60 MB
2024-11-04 20:48:02,041 - INFO - Adding Mask 6 mesh to visualization.
2024-11-04 20:48:02,242 - INFO - Initial mesh has 68754 points and 134660 faces.
2024-11-04 20:48:02,243 - INFO - Current memory usage: 1256.60 MB
2024-11-04 20:48:03,022 - INFO - Decimated mesh has 34473 points and 67329 faces.
2024-11-04 20:48:03,023 - INFO - Current memory usage: 1256.60 MB
2024-11-04 20:48:03,030 - INFO - Adding Mask 7 mesh to visualization.
2024-11-04 20:48:03,218 - INFO - Initial mesh has 9058 points and 18028 faces.
2024-11-04 20:48:03,218 - INFO - Current memory usage: 1256.61 MB
2024-11-04 20:48:03,308 - INFO - Decimated mesh has 4551 points and 9014 faces.
2024-11-04 20:48:03,309 - INFO - Current memory usage: 1256.61 MB
2024-11-04 20:48:03,317 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:48:03,737 - INFO - Translator(prefix=None)
2024-11-04 20:48:03,820 - INFO - awaiting runner setup
2024-11-04 20:48:03,820 - INFO - awaiting site startup
2024-11-04 20:48:03,821 - INFO - Print WSLINK_READY_MSG
2024-11-04 20:48:03,821 - INFO - Schedule auto shutdown with timout 0
2024-11-04 20:48:03,821 - INFO - awaiting running future
2024-11-04 20:48:15,843 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:48:15,856 - INFO - Current memory usage: 1271.80 MB
2024-11-04 20:48:15,875 - INFO - Selected slice indices for saving: [0, 39, 79, 119, 159]
2024-11-04 20:48:16,484 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 20:48:16,761 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 20:48:17,028 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 20:48:17,296 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 20:48:17,575 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 20:48:17,851 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-04 20:48:18,126 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-11-04 20:48:18,406 - INFO - Saved slice 0 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_7_overlay.png'.
2024-11-04 20:48:18,643 - INFO - Saved slice 39 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_0_overlay.png'.
2024-11-04 20:48:18,877 - INFO - Saved slice 39 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_1_overlay.png'.
2024-11-04 20:48:19,111 - INFO - Saved slice 39 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_2_overlay.png'.
2024-11-04 20:48:19,355 - INFO - Saved slice 39 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_3_overlay.png'.
2024-11-04 20:48:19,588 - INFO - Saved slice 39 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_4_overlay.png'.
2024-11-04 20:48:19,817 - INFO - Saved slice 39 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_5_overlay.png'.
2024-11-04 20:48:20,054 - INFO - Saved slice 39 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_6_overlay.png'.
2024-11-04 20:48:20,286 - INFO - Saved slice 39 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_7_overlay.png'.
2024-11-04 20:48:20,528 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-04 20:48:20,769 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-04 20:48:21,006 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-04 20:48:21,263 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-04 20:48:21,503 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-04 20:48:21,740 - INFO - Saved slice 79 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_5_overlay.png'.
2024-11-04 20:48:21,986 - INFO - Saved slice 79 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_6_overlay.png'.
2024-11-04 20:48:22,359 - INFO - Saved slice 79 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_7_overlay.png'.
2024-11-04 20:48:22,594 - INFO - Saved slice 119 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_0_overlay.png'.
2024-11-04 20:48:22,830 - INFO - Saved slice 119 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_1_overlay.png'.
2024-11-04 20:48:23,060 - INFO - Saved slice 119 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_2_overlay.png'.
2024-11-04 20:48:23,295 - INFO - Saved slice 119 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_3_overlay.png'.
2024-11-04 20:48:23,526 - INFO - Saved slice 119 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_4_overlay.png'.
2024-11-04 20:48:23,755 - INFO - Saved slice 119 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_5_overlay.png'.
2024-11-04 20:48:23,987 - INFO - Saved slice 119 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_6_overlay.png'.
2024-11-04 20:48:24,214 - INFO - Saved slice 119 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_7_overlay.png'.
2024-11-04 20:48:24,488 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-04 20:48:24,752 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-04 20:48:25,011 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-04 20:48:25,273 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-04 20:48:25,534 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-04 20:48:25,796 - INFO - Saved slice 159 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_5_overlay.png'.
2024-11-04 20:48:26,084 - INFO - Saved slice 159 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_6_overlay.png'.
2024-11-04 20:48:26,350 - INFO - Saved slice 159 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_7_overlay.png'.
2024-11-04 20:48:26,357 - INFO - Pipeline completed successfully.
2024-11-04 20:48:26,358 - INFO - Current memory usage: 1231.41 MB
2024-11-04 20:48:26,358 - INFO - Selecting and refining the good mask based on density profile.
2024-11-04 20:48:26,382 - INFO - Computed density profiles along x and y axes.
2024-11-04 20:48:26,383 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 20:48:26,440 - INFO - Cluster 0: Score = 2072.155167579651 (X: 985.7691040039062, Y: 1086.3860635757446)
2024-11-04 20:48:26,478 - INFO - Cluster 0: Original Sum = 14903.9794921875, Normalized Sum = -343350.96875
2024-11-04 20:48:26,543 - INFO - Cluster 1: Score = 1011.8902654647827 (X: 486.34121227264404, Y: 525.5490531921387)
2024-11-04 20:48:26,553 - INFO - Cluster 1: Original Sum = 2131.074462890625, Normalized Sum = 51553.390625
2024-11-04 20:48:26,619 - INFO - Cluster 2: Score = 674.9968809485435 (X: 288.2466027736664, Y: 386.75027817487717)
2024-11-04 20:48:26,632 - INFO - Cluster 2: Original Sum = 3144.9287109375, Normalized Sum = 53355.35546875
2024-11-04 20:48:26,718 - INFO - Cluster 3: Score = 2432.0768045186996 (X: 1612.811562538147, Y: 819.2652419805527)
2024-11-04 20:48:26,744 - INFO - Cluster 3: Original Sum = 13379.478515625, Normalized Sum = 70611.859375
2024-11-04 20:48:26,804 - INFO - Cluster 4: Score = 0 (X: 0, Y: 0)
2024-11-04 20:48:26,808 - INFO - Cluster 4: Original Sum = 0.0, Normalized Sum = 0.0
2024-11-04 20:48:26,869 - INFO - Cluster 5: Score = 234.1649305820465 (X: 93.78346335887909, Y: 140.38146722316742)
2024-11-04 20:48:26,879 - INFO - Cluster 5: Original Sum = 608.8087768554688, Normalized Sum = 13553.2177734375
2024-11-04 20:48:26,946 - INFO - Cluster 6: Score = 1156.059395313263 (X: 836.2656154632568, Y: 319.7937798500061)
2024-11-04 20:48:26,979 - INFO - Cluster 6: Original Sum = 10428.9833984375, Normalized Sum = -1046417.9375
2024-11-04 20:48:27,043 - INFO - Cluster 7: Score = 6059.385009765625 (X: 3248.433490753174, Y: 2810.951519012451)
2024-11-04 20:48:27,054 - INFO - Cluster 7: Original Sum = 19734.431640625, Normalized Sum = 480157.46875
2024-11-04 20:48:27,054 - INFO - Good cluster identified as Cluster 7 with score 6059.385009765625.
2024-11-04 20:48:28,367 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-04 20:48:28,367 - INFO - Removing eyes from the good cluster mask.
2024-11-04 20:48:28,367 - INFO - Starting eye detection using connected components analysis.
2024-11-04 20:48:28,484 - INFO - Number of connected components found: 37
2024-11-04 20:48:30,275 - INFO - Detected potential eye at centroid: (50.308498773142986, 113.38590229756859, 58.890475128262324) with Volume: 4483.0 and Sphericity: 0.88
2024-11-04 20:48:37,540 - INFO - Detected potential eye at centroid: (105.16976127320955, 108.60079575596816, 163.157824933687) with Volume: 754.0 and Sphericity: 0.73
2024-11-04 20:48:37,820 - INFO - Detected potential eye at centroid: (109.48303571428572, 112.24040178571428, 60.58683035714286) with Volume: 4480.0 and Sphericity: 0.87
2024-11-04 20:48:39,282 - WARNING - Expected to detect 2 eyes, but found 3. Skipping eye removal.
2024-11-04 20:48:39,284 - INFO - Detected eyes at centroids: []
2024-11-04 20:48:42,198 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-04 20:48:42,198 - INFO - Saving the good cluster mask as TIFF.
2024-11-04 20:48:42,234 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-04 20:48:42,234 - INFO - Calculating the volume of CSF in the MRI.
2024-11-04 20:48:42,245 - INFO - Total CSF Volume: 39221.84393705285 mm³
2024-11-04 20:48:42,245 - INFO - Final visualization of the Good CSF Mask.
2024-11-04 20:48:42,245 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-04 20:48:42,459 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-04 20:48:42,553 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-04 20:48:42,554 - INFO - Visualization process completed.
2024-11-04 20:48:42,555 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:48:42,555 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:48:42,555 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:48:42,555 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:48:42,555 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:48:42,555 - INFO - Final cleanup completed.
2024-11-04 20:48:42,556 - INFO - Current memory usage: 1194.64 MB
2024-11-04 20:49:19,639 - INFO - Logging initiated.
2024-11-04 20:49:19,639 - INFO - Pipeline started.
2024-11-04 20:49:19,639 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-04 20:49:20,064 - INFO - Image loaded with shape (160, 790, 260).
2024-11-04 20:49:20,225 - INFO - Denoised image loaded.
2024-11-04 20:49:20,226 - INFO - Current memory usage: 482.67 MB
2024-11-04 20:49:20,336 - INFO - Starting intensity normalization.
2024-11-04 20:49:21,120 - INFO - Intensity normalization complete.
2024-11-04 20:49:21,120 - INFO - Current memory usage: 639.42 MB
2024-11-04 20:49:21,129 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-04 20:49:21,129 - INFO - Computing neighborhood statistics.
2024-11-04 20:49:21,610 - INFO - Neighborhood statistics computed.
2024-11-04 20:49:21,611 - INFO - Current memory usage: 597.54 MB
2024-11-04 20:49:21,611 - INFO - Computing z-axis value for each voxel.
2024-11-04 20:49:21,647 - INFO - Z-axis value for each voxel computed.
2024-11-04 20:49:21,647 - INFO - Current memory usage: 639.16 MB
2024-11-04 20:49:21,648 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 20:49:22,159 - INFO - Features shape: (10940800, 4)
2024-11-04 20:49:22,159 - INFO - Current memory usage: 889.70 MB
2024-11-04 20:49:22,159 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-04 20:49:25,741 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-04 20:49:31,564 - INFO - Clustering complete with spatial connectivity.
2024-11-04 20:49:31,564 - INFO - Current memory usage: 1500.32 MB
2024-11-04 20:49:31,608 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 20:49:31,609 - INFO - Current memory usage: 916.01 MB
2024-11-04 20:49:31,620 - INFO - Processing Cluster 0.
2024-11-04 20:49:31,640 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-04 20:49:35,673 - INFO - Cluster 0: Refined voxel count = 24889.
2024-11-04 20:49:35,704 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 20:49:35,746 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-04 20:49:35,746 - INFO - Processing Cluster 1.
2024-11-04 20:49:35,763 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-04 20:49:39,940 - INFO - Cluster 1: Refined voxel count = 6674068.
2024-11-04 20:49:39,965 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 20:49:40,036 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-04 20:49:40,036 - INFO - Processing Cluster 2.
2024-11-04 20:49:40,053 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-04 20:49:44,144 - INFO - Cluster 2: Refined voxel count = 2099678.
2024-11-04 20:49:44,193 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 20:49:44,257 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-04 20:49:44,257 - INFO - Processing Cluster 3.
2024-11-04 20:49:44,273 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-04 20:49:48,331 - INFO - Cluster 3: Refined voxel count = 90877.
2024-11-04 20:49:48,358 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 20:49:48,397 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-04 20:49:48,397 - INFO - CSF is identified as cluster 1.
2024-11-04 20:49:48,397 - INFO - Starting visualization with PyVista.
2024-11-04 20:49:49,568 - INFO - Adding Original MRI volume.
2024-11-04 20:49:49,838 - INFO - Adding Denoised MRI volume.
2024-11-04 20:49:50,056 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 20:49:50,144 - INFO - Initial mesh has 6290 points and 12146 faces.
2024-11-04 20:49:50,144 - INFO - Current memory usage: 1058.18 MB
2024-11-04 20:49:50,203 - INFO - Decimated mesh has 3247 points and 6073 faces.
2024-11-04 20:49:50,203 - INFO - Current memory usage: 1058.48 MB
2024-11-04 20:49:50,212 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 20:49:50,491 - INFO - Initial mesh has 88185 points and 175486 faces.
2024-11-04 20:49:50,492 - INFO - Current memory usage: 1080.86 MB
2024-11-04 20:49:51,586 - INFO - Decimated mesh has 44121 points and 87742 faces.
2024-11-04 20:49:51,586 - INFO - Current memory usage: 1154.92 MB
2024-11-04 20:49:51,597 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 20:49:51,860 - INFO - Initial mesh has 149854 points and 300072 faces.
2024-11-04 20:49:51,860 - INFO - Current memory usage: 1160.11 MB
2024-11-04 20:49:53,608 - INFO - Decimated mesh has 74660 points and 150036 faces.
2024-11-04 20:49:53,609 - INFO - Current memory usage: 1244.07 MB
2024-11-04 20:49:53,618 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 20:49:53,728 - INFO - Initial mesh has 21195 points and 41950 faces.
2024-11-04 20:49:53,729 - INFO - Current memory usage: 1244.07 MB
2024-11-04 20:49:53,929 - INFO - Decimated mesh has 10707 points and 20974 faces.
2024-11-04 20:49:53,929 - INFO - Current memory usage: 1244.07 MB
2024-11-04 20:49:53,938 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:49:54,464 - INFO - Translator(prefix=None)
2024-11-04 20:49:54,611 - INFO - awaiting runner setup
2024-11-04 20:49:54,613 - INFO - awaiting site startup
2024-11-04 20:49:54,614 - INFO - Print WSLINK_READY_MSG
2024-11-04 20:49:54,615 - INFO - Schedule auto shutdown with timout 0
2024-11-04 20:49:54,615 - INFO - awaiting running future
2024-11-04 20:50:06,499 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:50:06,506 - INFO - Current memory usage: 1257.75 MB
2024-11-04 20:50:06,516 - INFO - Selected slice indices for saving: [0, 39, 79, 119, 159]
2024-11-04 20:50:07,418 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 20:50:07,713 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 20:50:08,003 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 20:50:08,322 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 20:50:08,574 - INFO - Saved slice 39 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_0_overlay.png'.
2024-11-04 20:50:08,874 - INFO - Saved slice 39 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_1_overlay.png'.
2024-11-04 20:50:09,120 - INFO - Saved slice 39 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_2_overlay.png'.
2024-11-04 20:50:09,394 - INFO - Saved slice 39 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_3_overlay.png'.
2024-11-04 20:50:09,669 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-04 20:50:09,952 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-04 20:50:10,242 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-04 20:50:10,549 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-04 20:50:10,827 - INFO - Saved slice 119 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_0_overlay.png'.
2024-11-04 20:50:11,111 - INFO - Saved slice 119 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_1_overlay.png'.
2024-11-04 20:50:11,422 - INFO - Saved slice 119 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_2_overlay.png'.
2024-11-04 20:50:11,748 - INFO - Saved slice 119 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_3_overlay.png'.
2024-11-04 20:50:12,020 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-04 20:50:12,311 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-04 20:50:12,638 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-04 20:50:12,988 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-04 20:50:12,997 - INFO - Pipeline completed successfully.
2024-11-04 20:50:12,998 - INFO - Current memory usage: 1218.23 MB
2024-11-04 20:50:12,998 - INFO - Selecting and refining the good mask based on density profile.
2024-11-04 20:50:13,028 - INFO - Computed density profiles along x and y axes.
2024-11-04 20:50:13,028 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 20:50:13,103 - INFO - Cluster 0: Score = 2206.4403860569 (X: 1088.7439663410187, Y: 1117.6964197158813)
2024-11-04 20:50:13,114 - INFO - Cluster 0: Original Sum = 8248.6416015625, Normalized Sum = 197905.140625
2024-11-04 20:50:13,173 - INFO - Cluster 1: Score = 5297.1672286987305 (X: 3066.4296951293945, Y: 2230.737533569336)
2024-11-04 20:50:13,218 - INFO - Cluster 1: Original Sum = 33210.40625, Normalized Sum = -1587423.125
2024-11-04 20:50:13,270 - INFO - Cluster 2: Score = 15479.370524644852 (X: 6512.238784790039, Y: 8967.131739854813)
2024-11-04 20:50:13,305 - INFO - Cluster 2: Original Sum = 62281.765625, Normalized Sum = 800933.875
2024-11-04 20:50:13,358 - INFO - Cluster 3: Score = 8710.378657341003 (X: 3755.886233329773, Y: 4954.4924240112305)
2024-11-04 20:50:13,372 - INFO - Cluster 3: Original Sum = 34984.60546875, Normalized Sum = 844692.0
2024-11-04 20:50:13,372 - INFO - Good cluster identified as Cluster 2 with score 15479.370524644852.
2024-11-04 20:50:15,063 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-04 20:50:15,063 - INFO - Removing eyes from the good cluster mask.
2024-11-04 20:50:15,063 - INFO - Starting eye detection using connected components analysis.
2024-11-04 20:50:15,214 - INFO - Number of connected components found: 164
2024-11-04 20:50:29,074 - INFO - Detected potential eye at centroid: (72.80429594272077, 259.7601431980907, 210.45823389021479) with Volume: 1676.0 and Sphericity: 0.72
2024-11-04 20:50:59,366 - WARNING - Expected to detect 2 eyes, but found 1. Skipping eye removal.
2024-11-04 20:50:59,368 - INFO - Detected eyes at centroids: []
2024-11-04 20:51:01,739 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-04 20:51:01,739 - INFO - Saving the good cluster mask as TIFF.
2024-11-04 20:51:01,777 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-04 20:51:01,777 - INFO - Calculating the volume of CSF in the MRI.
2024-11-04 20:51:01,788 - INFO - Total CSF Volume: 2002413.0822589358 mm³
2024-11-04 20:51:01,788 - INFO - Final visualization of the Good CSF Mask.
2024-11-04 20:51:01,788 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-04 20:51:03,954 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-04 20:51:05,097 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-04 20:51:05,098 - INFO - Visualization process completed.
2024-11-04 20:51:05,101 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:51:05,101 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:51:05,101 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:51:05,101 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:51:05,101 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-04 20:51:05,101 - INFO - Final cleanup completed.
2024-11-04 20:51:05,102 - INFO - Current memory usage: 1208.80 MB
2024-11-04 20:51:32,629 - INFO - Logging initiated.
2024-11-04 20:51:32,629 - INFO - Pipeline started.
2024-11-04 20:51:32,629 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-04 20:51:32,815 - INFO - Image loaded with shape (160, 790, 260).
2024-11-04 20:51:32,905 - INFO - Denoised image loaded.
2024-11-04 20:51:32,906 - INFO - Current memory usage: 482.98 MB
2024-11-04 20:51:32,947 - INFO - Starting intensity normalization.
2024-11-04 20:51:34,219 - INFO - Intensity normalization complete.
2024-11-04 20:51:34,219 - INFO - Current memory usage: 639.93 MB
2024-11-04 20:51:34,220 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-04 20:51:34,220 - INFO - Computing neighborhood statistics.
2024-11-04 20:51:34,597 - INFO - Neighborhood statistics computed.
2024-11-04 20:51:34,597 - INFO - Current memory usage: 598.04 MB
2024-11-04 20:51:34,597 - INFO - Computing z-axis value for each voxel.
2024-11-04 20:51:34,608 - INFO - Z-axis value for each voxel computed.
2024-11-04 20:51:34,609 - INFO - Current memory usage: 639.67 MB
2024-11-04 20:51:34,609 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 20:51:35,483 - INFO - Features shape: (10940800, 4)
2024-11-04 20:51:35,483 - INFO - Current memory usage: 890.14 MB
2024-11-04 20:51:35,483 - INFO - Performing MiniBatch K-Means clustering with k=6, batch_size=10000, connectivity_weight=0.1.
2024-11-04 20:51:39,483 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-04 20:51:44,180 - INFO - Clustering complete with spatial connectivity.
2024-11-04 20:51:44,181 - INFO - Current memory usage: 1516.45 MB
2024-11-04 20:51:44,224 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 20:51:44,225 - INFO - Current memory usage: 932.14 MB
2024-11-04 20:51:44,240 - INFO - Processing Cluster 0.
2024-11-04 20:51:44,259 - INFO - Cluster 0: Initial voxel count = 2855997.
2024-11-04 20:51:45,883 - INFO - Cluster 0: Refined voxel count = 2493713.
2024-11-04 20:51:45,911 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 20:51:45,995 - INFO - Cluster 0: Mean Intensity = 0.22112345695495605
2024-11-04 20:51:45,996 - INFO - Processing Cluster 1.
2024-11-04 20:51:46,011 - INFO - Cluster 1: Initial voxel count = 515592.
2024-11-04 20:51:47,397 - INFO - Cluster 1: Refined voxel count = 194744.
2024-11-04 20:51:47,423 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 20:51:47,489 - INFO - Cluster 1: Mean Intensity = 1.018616795539856
2024-11-04 20:51:47,489 - INFO - Processing Cluster 2.
2024-11-04 20:51:47,505 - INFO - Cluster 2: Initial voxel count = 212461.
2024-11-04 20:51:49,097 - INFO - Cluster 2: Refined voxel count = 116372.
2024-11-04 20:51:49,111 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 20:51:49,162 - INFO - Cluster 2: Mean Intensity = 6.104070663452148
2024-11-04 20:51:49,163 - INFO - Processing Cluster 3.
2024-11-04 20:51:49,180 - INFO - Cluster 3: Initial voxel count = 4471174.
2024-11-04 20:51:50,530 - INFO - Cluster 3: Refined voxel count = 3976845.
2024-11-04 20:51:50,548 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 20:51:50,634 - INFO - Cluster 3: Mean Intensity = -0.19626358151435852
2024-11-04 20:51:50,634 - INFO - Processing Cluster 4.
2024-11-04 20:51:50,650 - INFO - Cluster 4: Initial voxel count = 2765041.
2024-11-04 20:51:51,961 - INFO - Cluster 4: Refined voxel count = 2671140.
2024-11-04 20:51:51,984 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 20:51:52,079 - INFO - Cluster 4: Mean Intensity = -0.29271402955055237
2024-11-04 20:51:52,079 - INFO - Processing Cluster 5.
2024-11-04 20:51:52,095 - INFO - Cluster 5: Initial voxel count = 120535.
2024-11-04 20:51:53,406 - INFO - Cluster 5: Refined voxel count = 72978.
2024-11-04 20:51:53,433 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-04 20:51:53,562 - INFO - Cluster 5: Mean Intensity = 8.071805953979492
2024-11-04 20:51:53,563 - INFO - CSF is identified as cluster 4.
2024-11-04 20:51:53,563 - INFO - Starting visualization with PyVista.
2024-11-04 20:51:54,111 - INFO - Adding Original MRI volume.
2024-11-04 20:51:54,455 - INFO - Adding Denoised MRI volume.
2024-11-04 20:51:55,084 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 20:51:55,645 - INFO - Initial mesh has 281506 points and 574956 faces.
2024-11-04 20:51:55,645 - INFO - Current memory usage: 1157.48 MB
2024-11-04 20:51:59,195 - INFO - Decimated mesh has 137654 points and 287478 faces.
2024-11-04 20:51:59,195 - INFO - Current memory usage: 1400.33 MB
2024-11-04 20:51:59,204 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 20:51:59,362 - INFO - Initial mesh has 65110 points and 127878 faces.
2024-11-04 20:51:59,363 - INFO - Current memory usage: 1400.45 MB
2024-11-04 20:51:59,989 - INFO - Decimated mesh has 33259 points and 63938 faces.
2024-11-04 20:51:59,989 - INFO - Current memory usage: 1400.45 MB
2024-11-04 20:51:59,998 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 20:52:00,133 - INFO - Initial mesh has 35673 points and 70024 faces.
2024-11-04 20:52:00,133 - INFO - Current memory usage: 1400.45 MB
2024-11-04 20:52:00,472 - INFO - Decimated mesh has 18207 points and 35011 faces.
2024-11-04 20:52:00,473 - INFO - Current memory usage: 1400.45 MB
2024-11-04 20:52:00,481 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 20:52:00,769 - INFO - Initial mesh has 169873 points and 339815 faces.
2024-11-04 20:52:00,769 - INFO - Current memory usage: 1400.45 MB
2024-11-04 20:52:02,646 - INFO - Decimated mesh has 84094 points and 169906 faces.
2024-11-04 20:52:02,646 - INFO - Current memory usage: 1409.95 MB
2024-11-04 20:52:02,654 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 20:52:02,790 - INFO - Initial mesh has 44785 points and 87133 faces.
2024-11-04 20:52:02,790 - INFO - Current memory usage: 1410.70 MB
2024-11-04 20:52:03,253 - INFO - Decimated mesh has 22478 points and 43565 faces.
2024-11-04 20:52:03,254 - INFO - Current memory usage: 1410.70 MB
2024-11-04 20:52:03,262 - INFO - Adding Mask 5 mesh to visualization.
2024-11-04 20:52:03,377 - INFO - Initial mesh has 24562 points and 49556 faces.
2024-11-04 20:52:03,377 - INFO - Current memory usage: 1410.70 MB
2024-11-04 20:52:03,617 - INFO - Decimated mesh has 12210 points and 24777 faces.
2024-11-04 20:52:03,618 - INFO - Current memory usage: 1410.70 MB
2024-11-04 20:52:03,626 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:52:03,939 - INFO - Translator(prefix=None)
2024-11-04 20:52:04,005 - INFO - awaiting runner setup
2024-11-04 20:52:04,005 - INFO - awaiting site startup
2024-11-04 20:52:04,006 - INFO - Print WSLINK_READY_MSG
2024-11-04 20:52:04,006 - INFO - Schedule auto shutdown with timout 0
2024-11-04 20:52:04,006 - INFO - awaiting running future
2024-11-04 20:52:17,111 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:52:17,121 - INFO - Current memory usage: 1422.00 MB
2024-11-04 20:52:17,137 - INFO - Selected slice indices for saving: [0, 39, 79, 119, 159]
2024-11-04 20:52:17,676 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 20:52:17,949 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 20:52:18,227 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 20:52:18,505 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 20:52:18,778 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 20:52:19,045 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-04 20:52:19,293 - INFO - Saved slice 39 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_0_overlay.png'.
2024-11-04 20:52:19,527 - INFO - Saved slice 39 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_1_overlay.png'.
2024-11-04 20:52:19,759 - INFO - Saved slice 39 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_2_overlay.png'.
2024-11-04 20:52:19,994 - INFO - Saved slice 39 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_3_overlay.png'.
2024-11-04 20:52:20,238 - INFO - Saved slice 39 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_4_overlay.png'.
2024-11-04 20:52:20,488 - INFO - Saved slice 39 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_39_cluster_5_overlay.png'.
2024-11-04 20:52:20,732 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-04 20:52:20,973 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-04 20:52:21,212 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-04 20:52:21,463 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-04 20:52:21,704 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-04 20:52:21,944 - INFO - Saved slice 79 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_5_overlay.png'.
2024-11-04 20:52:22,246 - INFO - Saved slice 119 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_0_overlay.png'.
2024-11-04 20:52:22,488 - INFO - Saved slice 119 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_1_overlay.png'.
2024-11-04 20:52:22,717 - INFO - Saved slice 119 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_2_overlay.png'.
2024-11-04 20:52:22,981 - INFO - Saved slice 119 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_3_overlay.png'.
2024-11-04 20:52:23,214 - INFO - Saved slice 119 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_4_overlay.png'.
2024-11-04 20:52:23,447 - INFO - Saved slice 119 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_119_cluster_5_overlay.png'.
2024-11-04 20:52:23,849 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-04 20:52:24,109 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-04 20:52:24,373 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-04 20:52:24,641 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-04 20:52:24,906 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-04 20:52:25,171 - INFO - Saved slice 159 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_5_overlay.png'.
2024-11-04 20:52:25,180 - INFO - Pipeline completed successfully.
2024-11-04 20:52:25,180 - INFO - Current memory usage: 1338.14 MB
2024-11-04 20:52:25,180 - INFO - Selecting and refining the good mask based on density profile.
2024-11-04 20:52:25,204 - INFO - Computed density profiles along x and y axes.
2024-11-04 20:52:25,204 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 20:52:25,266 - INFO - Cluster 0: Score = 14673.253210306168 (X: 8572.878280639648, Y: 6100.374929666519)
2024-11-04 20:52:25,314 - INFO - Cluster 0: Original Sum = 59601.65625, Normalized Sum = 590788.4375
2024-11-04 20:52:25,371 - INFO - Cluster 1: Score = 4714.55749809742 (X: 2261.61243224144, Y: 2452.94506585598)
2024-11-04 20:52:25,391 - INFO - Cluster 1: Original Sum = 13627.0859375, Normalized Sum = 271229.71875
2024-11-04 20:52:25,451 - INFO - Cluster 2: Score = 11183.875143766403 (X: 5017.620959043503, Y: 6166.2541847229)
2024-11-04 20:52:25,466 - INFO - Cluster 2: Original Sum = 40395.3515625, Normalized Sum = 971183.8125
2024-11-04 20:52:25,519 - INFO - Cluster 3: Score = 5661.876728057861 (X: 3485.322135925293, Y: 2176.5545921325684)
2024-11-04 20:52:25,571 - INFO - Cluster 3: Original Sum = 25769.509765625, Normalized Sum = -795857.875
2024-11-04 20:52:25,623 - INFO - Cluster 4: Score = 1204.9234862327576 (X: 802.3174057006836, Y: 402.606080532074)
2024-11-04 20:52:25,656 - INFO - Cluster 4: Original Sum = 7565.361328125, Normalized Sum = -778984.6875
2024-11-04 20:52:25,717 - INFO - Cluster 5: Score = 10195.177257657051 (X: 5259.392768979073, Y: 4935.7844886779785)
2024-11-04 20:52:25,731 - INFO - Cluster 5: Original Sum = 27421.947265625, Normalized Sum = 661460.8125
2024-11-04 20:52:25,731 - INFO - Good cluster identified as Cluster 0 with score 14673.253210306168.
2024-11-04 20:52:27,002 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-04 20:52:27,002 - INFO - Removing eyes from the good cluster mask.
2024-11-04 20:52:27,002 - INFO - Starting eye detection using connected components analysis.
2024-11-04 20:52:27,163 - INFO - Number of connected components found: 1371
2024-11-04 20:54:20,114 - INFO - Logging initiated.
2024-11-04 20:54:20,115 - INFO - Pipeline started.
2024-11-04 20:54:20,115 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-04 20:54:20,382 - INFO - Image loaded with shape (160, 790, 260).
2024-11-04 20:54:20,495 - INFO - Denoised image loaded.
2024-11-04 20:54:20,495 - INFO - Current memory usage: 481.84 MB
2024-11-04 20:54:20,535 - INFO - Starting intensity normalization.
2024-11-04 20:54:21,628 - INFO - Intensity normalization complete.
2024-11-04 20:54:21,629 - INFO - Current memory usage: 638.65 MB
2024-11-04 20:54:21,629 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-04 20:54:21,629 - INFO - Computing neighborhood statistics.
2024-11-04 20:54:22,014 - INFO - Neighborhood statistics computed.
2024-11-04 20:54:22,014 - INFO - Current memory usage: 596.77 MB
2024-11-04 20:54:22,014 - INFO - Computing z-axis value for each voxel.
2024-11-04 20:54:22,025 - INFO - Z-axis value for each voxel computed.
2024-11-04 20:54:22,025 - INFO - Current memory usage: 638.39 MB
2024-11-04 20:54:22,025 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-04 20:54:22,377 - INFO - Features shape: (10940800, 4)
2024-11-04 20:54:22,377 - INFO - Current memory usage: 889.00 MB
2024-11-04 20:54:22,377 - INFO - Performing MiniBatch K-Means clustering with k=6, batch_size=10000, connectivity_weight=0.1.
2024-11-04 20:54:26,174 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-04 20:54:30,347 - INFO - Clustering complete with spatial connectivity.
2024-11-04 20:54:30,347 - INFO - Current memory usage: 1517.58 MB
2024-11-04 20:54:30,394 - INFO - Cluster labels reshaped to image dimensions.
2024-11-04 20:54:30,395 - INFO - Current memory usage: 933.28 MB
2024-11-04 20:54:30,408 - INFO - Processing Cluster 0.
2024-11-04 20:54:30,428 - INFO - Cluster 0: Initial voxel count = 2855997.
2024-11-04 20:54:31,760 - INFO - Cluster 0: Refined voxel count = 2493767.
2024-11-04 20:54:31,789 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-04 20:54:31,876 - INFO - Cluster 0: Mean Intensity = 0.22112345695495605
2024-11-04 20:54:31,876 - INFO - Processing Cluster 1.
2024-11-04 20:54:31,892 - INFO - Cluster 1: Initial voxel count = 515592.
2024-11-04 20:54:33,183 - INFO - Cluster 1: Refined voxel count = 194756.
2024-11-04 20:54:33,211 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-04 20:54:33,277 - INFO - Cluster 1: Mean Intensity = 1.018616795539856
2024-11-04 20:54:33,277 - INFO - Processing Cluster 2.
2024-11-04 20:54:33,300 - INFO - Cluster 2: Initial voxel count = 212461.
2024-11-04 20:54:34,655 - INFO - Cluster 2: Refined voxel count = 116372.
2024-11-04 20:54:34,684 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-04 20:54:34,733 - INFO - Cluster 2: Mean Intensity = 6.104070663452148
2024-11-04 20:54:34,734 - INFO - Processing Cluster 3.
2024-11-04 20:54:34,759 - INFO - Cluster 3: Initial voxel count = 4471174.
2024-11-04 20:54:36,172 - INFO - Cluster 3: Refined voxel count = 3977073.
2024-11-04 20:54:36,196 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-04 20:54:36,286 - INFO - Cluster 3: Mean Intensity = -0.19626358151435852
2024-11-04 20:54:36,286 - INFO - Processing Cluster 4.
2024-11-04 20:54:36,301 - INFO - Cluster 4: Initial voxel count = 2765041.
2024-11-04 20:54:37,721 - INFO - Cluster 4: Refined voxel count = 2671356.
2024-11-04 20:54:37,745 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-04 20:54:37,808 - INFO - Cluster 4: Mean Intensity = -0.29271402955055237
2024-11-04 20:54:37,809 - INFO - Processing Cluster 5.
2024-11-04 20:54:37,824 - INFO - Cluster 5: Initial voxel count = 120535.
2024-11-04 20:54:39,129 - INFO - Cluster 5: Refined voxel count = 72978.
2024-11-04 20:54:39,152 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-04 20:54:39,196 - INFO - Cluster 5: Mean Intensity = 8.071805953979492
2024-11-04 20:54:39,196 - INFO - CSF is identified as cluster 4.
2024-11-04 20:54:39,196 - INFO - Starting visualization with PyVista.
2024-11-04 20:54:39,875 - INFO - Adding Original MRI volume.
2024-11-04 20:54:40,171 - INFO - Adding Denoised MRI volume.
2024-11-04 20:54:40,369 - INFO - Adding Mask 0 mesh to visualization.
2024-11-04 20:54:40,878 - INFO - Initial mesh has 281540 points and 574994 faces.
2024-11-04 20:54:40,878 - INFO - Current memory usage: 1163.78 MB
2024-11-04 20:54:44,372 - INFO - Decimated mesh has 137673 points and 287496 faces.
2024-11-04 20:54:44,372 - INFO - Current memory usage: 1408.45 MB
2024-11-04 20:54:44,381 - INFO - Adding Mask 1 mesh to visualization.
2024-11-04 20:54:44,541 - INFO - Initial mesh has 65118 points and 127886 faces.
2024-11-04 20:54:44,541 - INFO - Current memory usage: 1419.67 MB
2024-11-04 20:54:45,146 - INFO - Decimated mesh has 33264 points and 63943 faces.
2024-11-04 20:54:45,147 - INFO - Current memory usage: 1419.67 MB
2024-11-04 20:54:45,155 - INFO - Adding Mask 2 mesh to visualization.
2024-11-04 20:54:45,280 - INFO - Initial mesh has 35673 points and 70024 faces.
2024-11-04 20:54:45,280 - INFO - Current memory usage: 1419.67 MB
2024-11-04 20:54:45,612 - INFO - Decimated mesh has 18207 points and 35011 faces.
2024-11-04 20:54:45,613 - INFO - Current memory usage: 1419.67 MB
2024-11-04 20:54:45,620 - INFO - Adding Mask 3 mesh to visualization.
2024-11-04 20:54:45,898 - INFO - Initial mesh has 169992 points and 339959 faces.
2024-11-04 20:54:45,898 - INFO - Current memory usage: 1419.67 MB
2024-11-04 20:54:47,780 - INFO - Decimated mesh has 84162 points and 169978 faces.
2024-11-04 20:54:47,781 - INFO - Current memory usage: 1432.42 MB
2024-11-04 20:54:47,789 - INFO - Adding Mask 4 mesh to visualization.
2024-11-04 20:54:47,921 - INFO - Initial mesh has 44916 points and 87261 faces.
2024-11-04 20:54:47,921 - INFO - Current memory usage: 1432.42 MB
2024-11-04 20:54:48,358 - INFO - Decimated mesh has 22571 points and 43629 faces.
2024-11-04 20:54:48,359 - INFO - Current memory usage: 1432.55 MB
2024-11-04 20:54:48,367 - INFO - Adding Mask 5 mesh to visualization.
2024-11-04 20:54:48,477 - INFO - Initial mesh has 24562 points and 49556 faces.
2024-11-04 20:54:48,477 - INFO - Current memory usage: 1432.55 MB
2024-11-04 20:54:48,703 - INFO - Decimated mesh has 12210 points and 24777 faces.
2024-11-04 20:54:48,704 - INFO - Current memory usage: 1432.55 MB
2024-11-04 20:54:48,712 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:54:49,091 - INFO - Translator(prefix=None)
2024-11-04 20:54:49,184 - INFO - awaiting runner setup
2024-11-04 20:54:49,185 - INFO - awaiting site startup
2024-11-04 20:54:49,186 - INFO - Print WSLINK_READY_MSG
2024-11-04 20:54:49,186 - INFO - Schedule auto shutdown with timout 0
2024-11-04 20:54:49,186 - INFO - awaiting running future
2024-11-04 20:55:01,662 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-04 20:55:01,670 - INFO - Current memory usage: 1446.10 MB
2024-11-04 20:55:01,680 - INFO - Selected slice indices for saving: [0, 159]
2024-11-04 20:55:02,393 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-04 20:55:02,660 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-04 20:55:02,929 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-04 20:55:03,201 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-04 20:55:03,471 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-04 20:55:03,739 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-04 20:55:04,008 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-04 20:55:04,267 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-04 20:55:04,530 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-04 20:55:04,809 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-04 20:55:05,088 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-04 20:55:05,371 - INFO - Saved slice 159 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_5_overlay.png'.
2024-11-04 20:55:05,379 - INFO - Pipeline completed successfully.
2024-11-04 20:55:05,379 - INFO - Current memory usage: 1401.82 MB
2024-11-04 20:55:05,379 - INFO - Selecting and refining the good mask based on density profile.
2024-11-04 20:55:05,401 - INFO - Computed density profiles along x and y axes.
2024-11-04 20:55:05,401 - INFO - Identifying the good cluster based on density concentration.
2024-11-04 20:55:05,449 - INFO - Cluster 0: Score = 14673.46655869484 (X: 8573.033828735352, Y: 6100.432729959488)
2024-11-04 20:55:05,502 - INFO - Cluster 0: Original Sum = 59602.66796875, Normalized Sum = 590794.9375
2024-11-04 20:55:05,578 - INFO - Cluster 1: Score = 4714.6045562028885 (X: 2261.61243224144, Y: 2452.9921239614487)
2024-11-04 20:55:05,607 - INFO - Cluster 1: Original Sum = 13627.8447265625, Normalized Sum = 271244.34375
2024-11-04 20:55:05,673 - INFO - Cluster 2: Score = 11183.875143766403 (X: 5017.620959043503, Y: 6166.2541847229)
2024-11-04 20:55:05,689 - INFO - Cluster 2: Original Sum = 40395.3515625, Normalized Sum = 971183.8125
2024-11-04 20:55:05,743 - INFO - Cluster 3: Score = 5748.113742828369 (X: 3571.3720321655273, Y: 2176.741710662842)
2024-11-04 20:55:05,815 - INFO - Cluster 3: Original Sum = 25771.548828125, Normalized Sum = -795888.5
2024-11-04 20:55:05,889 - INFO - Cluster 4: Score = 1204.9918150901794 (X: 802.365608215332, Y: 402.6262068748474)
2024-11-04 20:55:05,916 - INFO - Cluster 4: Original Sum = 7565.9912109375, Normalized Sum = -779047.5
2024-11-04 20:55:05,965 - INFO - Cluster 5: Score = 10195.177257657051 (X: 5259.392768979073, Y: 4935.7844886779785)
2024-11-04 20:55:05,981 - INFO - Cluster 5: Original Sum = 27421.947265625, Normalized Sum = 661460.8125
2024-11-04 20:55:05,981 - INFO - Good cluster identified as Cluster 0 with score 14673.46655869484.
2024-11-04 20:55:07,505 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-04 20:55:07,505 - INFO - Removing eyes from the good cluster mask.
2024-11-04 20:55:07,505 - INFO - Starting eye detection using connected components analysis.
2024-11-04 20:55:07,676 - INFO - Number of connected components found: 1380
2024-11-05 15:55:36,828 - INFO - Logging initiated.
2024-11-05 15:55:36,828 - INFO - Pipeline started.
2024-11-05 15:55:36,828 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 15:55:36,968 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 15:55:37,056 - INFO - Denoised image loaded.
2024-11-05 15:55:37,057 - INFO - Current memory usage: 482.82 MB
2024-11-05 15:55:37,091 - INFO - Starting intensity normalization.
2024-11-05 15:55:37,734 - INFO - Intensity normalization complete.
2024-11-05 15:55:37,734 - INFO - Current memory usage: 639.66 MB
2024-11-05 15:55:37,735 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 15:55:37,735 - INFO - Computing neighborhood statistics.
2024-11-05 15:55:38,177 - INFO - Neighborhood statistics computed.
2024-11-05 15:55:38,178 - INFO - Current memory usage: 597.77 MB
2024-11-05 15:55:38,178 - INFO - Computing z-axis value for each voxel.
2024-11-05 15:55:38,191 - INFO - Z-axis value for each voxel computed.
2024-11-05 15:55:38,191 - INFO - Current memory usage: 639.39 MB
2024-11-05 15:55:38,191 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 15:55:38,576 - INFO - Features shape: (10940800, 4)
2024-11-05 15:55:38,576 - INFO - Current memory usage: 889.93 MB
2024-11-05 15:55:38,577 - INFO - Performing MiniBatch K-Means clustering with k=6, batch_size=10000, connectivity_weight=0.1.
2024-11-05 15:55:43,422 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 15:55:49,770 - INFO - Clustering complete with spatial connectivity.
2024-11-05 15:55:49,771 - INFO - Current memory usage: 1526.29 MB
2024-11-05 15:55:49,795 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 15:55:49,795 - INFO - Current memory usage: 941.98 MB
2024-11-05 15:55:49,803 - INFO - Processing Cluster 0.
2024-11-05 15:55:49,822 - INFO - Cluster 0: Initial voxel count = 2855997.
2024-11-05 15:55:51,358 - INFO - Cluster 0: Refined voxel count = 2493767.
2024-11-05 15:55:51,381 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 15:55:51,458 - INFO - Cluster 0: Mean Intensity = 0.22112345695495605
2024-11-05 15:55:51,458 - INFO - Processing Cluster 1.
2024-11-05 15:55:51,479 - INFO - Cluster 1: Initial voxel count = 515592.
2024-11-05 15:55:52,819 - INFO - Cluster 1: Refined voxel count = 194756.
2024-11-05 15:55:52,842 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 15:55:52,885 - INFO - Cluster 1: Mean Intensity = 1.018616795539856
2024-11-05 15:55:52,885 - INFO - Processing Cluster 2.
2024-11-05 15:55:52,899 - INFO - Cluster 2: Initial voxel count = 212461.
2024-11-05 15:55:54,195 - INFO - Cluster 2: Refined voxel count = 116372.
2024-11-05 15:55:54,220 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 15:55:54,266 - INFO - Cluster 2: Mean Intensity = 6.104070663452148
2024-11-05 15:55:54,266 - INFO - Processing Cluster 3.
2024-11-05 15:55:54,284 - INFO - Cluster 3: Initial voxel count = 4471174.
2024-11-05 15:55:55,654 - INFO - Cluster 3: Refined voxel count = 3977073.
2024-11-05 15:55:55,679 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 15:55:55,754 - INFO - Cluster 3: Mean Intensity = -0.19626358151435852
2024-11-05 15:55:55,754 - INFO - Processing Cluster 4.
2024-11-05 15:55:55,770 - INFO - Cluster 4: Initial voxel count = 2765041.
2024-11-05 15:55:57,213 - INFO - Cluster 4: Refined voxel count = 2671356.
2024-11-05 15:55:57,238 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-05 15:55:57,291 - INFO - Cluster 4: Mean Intensity = -0.29271402955055237
2024-11-05 15:55:57,291 - INFO - Processing Cluster 5.
2024-11-05 15:55:57,310 - INFO - Cluster 5: Initial voxel count = 120535.
2024-11-05 15:55:58,721 - INFO - Cluster 5: Refined voxel count = 72978.
2024-11-05 15:55:58,747 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-05 15:55:58,790 - INFO - Cluster 5: Mean Intensity = 8.071805953979492
2024-11-05 15:55:58,791 - INFO - CSF is identified as cluster 4.
2024-11-05 15:55:58,791 - INFO - Starting visualization with PyVista.
2024-11-05 15:55:59,565 - INFO - Adding Original MRI volume.
2024-11-05 15:55:59,813 - INFO - Adding Denoised MRI volume.
2024-11-05 15:56:00,017 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 15:56:00,453 - INFO - Initial mesh has 281540 points and 574994 faces.
2024-11-05 15:56:00,454 - INFO - Current memory usage: 1170.36 MB
2024-11-05 15:56:03,814 - INFO - Decimated mesh has 137673 points and 287496 faces.
2024-11-05 15:56:03,815 - INFO - Current memory usage: 1419.02 MB
2024-11-05 15:56:03,824 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 15:56:03,964 - INFO - Initial mesh has 65118 points and 127886 faces.
2024-11-05 15:56:03,965 - INFO - Current memory usage: 1431.40 MB
2024-11-05 15:56:04,567 - INFO - Decimated mesh has 33264 points and 63943 faces.
2024-11-05 15:56:04,568 - INFO - Current memory usage: 1431.40 MB
2024-11-05 15:56:04,576 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 15:56:04,687 - INFO - Initial mesh has 35673 points and 70024 faces.
2024-11-05 15:56:04,688 - INFO - Current memory usage: 1431.40 MB
2024-11-05 15:56:05,028 - INFO - Decimated mesh has 18207 points and 35011 faces.
2024-11-05 15:56:05,028 - INFO - Current memory usage: 1431.40 MB
2024-11-05 15:56:05,036 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 15:56:05,310 - INFO - Initial mesh has 169992 points and 339959 faces.
2024-11-05 15:56:05,310 - INFO - Current memory usage: 1433.51 MB
2024-11-05 15:56:07,289 - INFO - Decimated mesh has 84162 points and 169978 faces.
2024-11-05 15:56:07,290 - INFO - Current memory usage: 1444.78 MB
2024-11-05 15:56:07,299 - INFO - Adding Mask 4 mesh to visualization.
2024-11-05 15:56:07,406 - INFO - Initial mesh has 44916 points and 87261 faces.
2024-11-05 15:56:07,406 - INFO - Current memory usage: 1444.78 MB
2024-11-05 15:56:07,787 - INFO - Decimated mesh has 22571 points and 43629 faces.
2024-11-05 15:56:07,788 - INFO - Current memory usage: 1444.78 MB
2024-11-05 15:56:07,795 - INFO - Adding Mask 5 mesh to visualization.
2024-11-05 15:56:07,888 - INFO - Initial mesh has 24562 points and 49556 faces.
2024-11-05 15:56:07,889 - INFO - Current memory usage: 1444.78 MB
2024-11-05 15:56:08,131 - INFO - Decimated mesh has 12210 points and 24777 faces.
2024-11-05 15:56:08,131 - INFO - Current memory usage: 1444.78 MB
2024-11-05 15:56:08,139 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 15:56:08,500 - INFO - Translator(prefix=None)
2024-11-05 15:56:08,574 - INFO - awaiting runner setup
2024-11-05 15:56:08,575 - INFO - awaiting site startup
2024-11-05 15:56:08,576 - INFO - Print WSLINK_READY_MSG
2024-11-05 15:56:08,576 - INFO - Schedule auto shutdown with timout 0
2024-11-05 15:56:08,576 - INFO - awaiting running future
2024-11-05 15:56:23,455 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 15:56:23,463 - INFO - Current memory usage: 1455.90 MB
2024-11-05 15:56:23,471 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 15:56:24,025 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 15:56:24,281 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 15:56:24,557 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 15:56:24,819 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 15:56:25,087 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-05 15:56:25,353 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-05 15:56:25,621 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 15:56:25,875 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 15:56:26,138 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 15:56:26,395 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 15:56:26,661 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-05 15:56:26,919 - INFO - Saved slice 159 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_5_overlay.png'.
2024-11-05 15:56:26,927 - INFO - Pipeline completed successfully.
2024-11-05 15:56:26,928 - INFO - Current memory usage: 1413.13 MB
2024-11-05 15:56:26,928 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 15:56:26,949 - INFO - Computed density profiles along x and y axes.
2024-11-05 15:56:26,949 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 15:59:34,495 - INFO - Logging initiated.
2024-11-05 15:59:34,495 - INFO - Pipeline started.
2024-11-05 15:59:34,495 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 15:59:34,773 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 15:59:34,910 - INFO - Denoised image loaded.
2024-11-05 15:59:34,911 - INFO - Current memory usage: 482.87 MB
2024-11-05 15:59:34,941 - INFO - Starting intensity normalization.
2024-11-05 15:59:35,410 - INFO - Intensity normalization complete.
2024-11-05 15:59:35,410 - INFO - Current memory usage: 639.70 MB
2024-11-05 15:59:35,413 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 15:59:35,413 - INFO - Computing neighborhood statistics.
2024-11-05 15:59:35,640 - INFO - Neighborhood statistics computed.
2024-11-05 15:59:35,641 - INFO - Current memory usage: 597.82 MB
2024-11-05 15:59:35,641 - INFO - Computing z-axis value for each voxel.
2024-11-05 15:59:35,647 - INFO - Z-axis value for each voxel computed.
2024-11-05 15:59:35,647 - INFO - Current memory usage: 639.45 MB
2024-11-05 15:59:35,648 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 15:59:35,950 - INFO - Features shape: (10940800, 4)
2024-11-05 15:59:35,950 - INFO - Current memory usage: 889.98 MB
2024-11-05 15:59:35,950 - INFO - Performing MiniBatch K-Means clustering with k=6, batch_size=10000, connectivity_weight=0.1.
2024-11-05 15:59:37,793 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 15:59:40,232 - INFO - Clustering complete with spatial connectivity.
2024-11-05 15:59:40,233 - INFO - Current memory usage: 1524.38 MB
2024-11-05 15:59:40,240 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 15:59:40,241 - INFO - Current memory usage: 940.07 MB
2024-11-05 15:59:40,251 - INFO - Processing Cluster 0.
2024-11-05 15:59:40,263 - INFO - Cluster 0: Initial voxel count = 2855997.
2024-11-05 15:59:41,005 - INFO - Cluster 0: Refined voxel count = 2493767.
2024-11-05 15:59:41,017 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 15:59:41,061 - INFO - Cluster 0: Mean Intensity = 0.22112345695495605
2024-11-05 15:59:41,062 - INFO - Processing Cluster 1.
2024-11-05 15:59:41,071 - INFO - Cluster 1: Initial voxel count = 515592.
2024-11-05 15:59:41,771 - INFO - Cluster 1: Refined voxel count = 194756.
2024-11-05 15:59:41,793 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 15:59:41,829 - INFO - Cluster 1: Mean Intensity = 1.018616795539856
2024-11-05 15:59:41,829 - INFO - Processing Cluster 2.
2024-11-05 15:59:41,841 - INFO - Cluster 2: Initial voxel count = 212461.
2024-11-05 15:59:42,550 - INFO - Cluster 2: Refined voxel count = 116372.
2024-11-05 15:59:42,560 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 15:59:42,589 - INFO - Cluster 2: Mean Intensity = 6.104070663452148
2024-11-05 15:59:42,589 - INFO - Processing Cluster 3.
2024-11-05 15:59:42,602 - INFO - Cluster 3: Initial voxel count = 4471174.
2024-11-05 15:59:43,375 - INFO - Cluster 3: Refined voxel count = 3977073.
2024-11-05 15:59:43,384 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 15:59:43,440 - INFO - Cluster 3: Mean Intensity = -0.19626358151435852
2024-11-05 15:59:43,440 - INFO - Processing Cluster 4.
2024-11-05 15:59:43,450 - INFO - Cluster 4: Initial voxel count = 2765041.
2024-11-05 15:59:44,166 - INFO - Cluster 4: Refined voxel count = 2671356.
2024-11-05 15:59:44,188 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-05 15:59:44,222 - INFO - Cluster 4: Mean Intensity = -0.29271402955055237
2024-11-05 15:59:44,222 - INFO - Processing Cluster 5.
2024-11-05 15:59:44,233 - INFO - Cluster 5: Initial voxel count = 120535.
2024-11-05 15:59:44,936 - INFO - Cluster 5: Refined voxel count = 72978.
2024-11-05 15:59:44,955 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-05 15:59:44,984 - INFO - Cluster 5: Mean Intensity = 8.071805953979492
2024-11-05 15:59:44,984 - INFO - CSF is identified as cluster 4.
2024-11-05 15:59:44,984 - INFO - Starting visualization with PyVista.
2024-11-05 15:59:45,600 - INFO - Adding Original MRI volume.
2024-11-05 15:59:45,759 - INFO - Adding Denoised MRI volume.
2024-11-05 15:59:45,894 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 15:59:46,247 - INFO - Initial mesh has 281540 points and 574994 faces.
2024-11-05 15:59:46,247 - INFO - Current memory usage: 1170.92 MB
2024-11-05 15:59:48,725 - INFO - Decimated mesh has 137673 points and 287496 faces.
2024-11-05 15:59:48,726 - INFO - Current memory usage: 1418.36 MB
2024-11-05 15:59:48,734 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 15:59:48,824 - INFO - Initial mesh has 65118 points and 127886 faces.
2024-11-05 15:59:48,825 - INFO - Current memory usage: 1430.36 MB
2024-11-05 15:59:49,250 - INFO - Decimated mesh has 33264 points and 63943 faces.
2024-11-05 15:59:49,251 - INFO - Current memory usage: 1430.36 MB
2024-11-05 15:59:49,257 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 15:59:49,337 - INFO - Initial mesh has 35673 points and 70024 faces.
2024-11-05 15:59:49,337 - INFO - Current memory usage: 1430.36 MB
2024-11-05 15:59:49,541 - INFO - Decimated mesh has 18207 points and 35011 faces.
2024-11-05 15:59:49,541 - INFO - Current memory usage: 1430.36 MB
2024-11-05 15:59:49,546 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 15:59:49,740 - INFO - Initial mesh has 169992 points and 339959 faces.
2024-11-05 15:59:49,740 - INFO - Current memory usage: 1430.36 MB
2024-11-05 15:59:51,411 - INFO - Decimated mesh has 84162 points and 169978 faces.
2024-11-05 15:59:51,411 - INFO - Current memory usage: 1443.94 MB
2024-11-05 15:59:51,419 - INFO - Adding Mask 4 mesh to visualization.
2024-11-05 15:59:51,529 - INFO - Initial mesh has 44916 points and 87261 faces.
2024-11-05 15:59:51,529 - INFO - Current memory usage: 1443.94 MB
2024-11-05 15:59:51,843 - INFO - Decimated mesh has 22571 points and 43629 faces.
2024-11-05 15:59:51,844 - INFO - Current memory usage: 1443.94 MB
2024-11-05 15:59:51,849 - INFO - Adding Mask 5 mesh to visualization.
2024-11-05 15:59:51,912 - INFO - Initial mesh has 24562 points and 49556 faces.
2024-11-05 15:59:51,912 - INFO - Current memory usage: 1444.06 MB
2024-11-05 15:59:52,058 - INFO - Decimated mesh has 12210 points and 24777 faces.
2024-11-05 15:59:52,058 - INFO - Current memory usage: 1444.06 MB
2024-11-05 15:59:52,063 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 15:59:52,345 - INFO - Translator(prefix=None)
2024-11-05 15:59:52,443 - INFO - awaiting runner setup
2024-11-05 15:59:52,444 - INFO - awaiting site startup
2024-11-05 15:59:52,445 - INFO - Print WSLINK_READY_MSG
2024-11-05 15:59:52,445 - INFO - Schedule auto shutdown with timout 0
2024-11-05 15:59:52,445 - INFO - awaiting running future
2024-11-05 16:00:02,244 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:00:02,248 - INFO - Current memory usage: 1454.83 MB
2024-11-05 16:00:02,253 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 16:00:02,752 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 16:00:02,896 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 16:00:03,053 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 16:00:03,229 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 16:00:03,411 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-05 16:00:03,590 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-05 16:00:03,751 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 16:00:03,906 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 16:00:04,063 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 16:00:04,223 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 16:00:04,382 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-05 16:00:04,539 - INFO - Saved slice 159 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_5_overlay.png'.
2024-11-05 16:00:04,544 - INFO - Pipeline completed successfully.
2024-11-05 16:00:04,544 - INFO - Current memory usage: 1410.60 MB
2024-11-05 16:00:04,544 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 16:00:04,558 - INFO - Computed density profiles along x and y axes.
2024-11-05 16:00:04,558 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 16:00:37,103 - INFO - Logging initiated.
2024-11-05 16:00:37,103 - INFO - Pipeline started.
2024-11-05 16:00:37,104 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 16:00:37,185 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 16:00:37,238 - INFO - Denoised image loaded.
2024-11-05 16:00:37,239 - INFO - Current memory usage: 483.30 MB
2024-11-05 16:00:37,273 - INFO - Starting intensity normalization.
2024-11-05 16:00:37,581 - INFO - Intensity normalization complete.
2024-11-05 16:00:37,581 - INFO - Current memory usage: 640.14 MB
2024-11-05 16:00:37,582 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 16:00:37,582 - INFO - Computing neighborhood statistics.
2024-11-05 16:00:37,791 - INFO - Neighborhood statistics computed.
2024-11-05 16:00:37,791 - INFO - Current memory usage: 598.25 MB
2024-11-05 16:00:37,791 - INFO - Computing z-axis value for each voxel.
2024-11-05 16:00:37,797 - INFO - Z-axis value for each voxel computed.
2024-11-05 16:00:37,798 - INFO - Current memory usage: 639.88 MB
2024-11-05 16:00:37,798 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 16:00:37,942 - INFO - Features shape: (10940800, 4)
2024-11-05 16:00:37,942 - INFO - Current memory usage: 890.41 MB
2024-11-05 16:00:37,942 - INFO - Performing MiniBatch K-Means clustering with k=6, batch_size=10000, connectivity_weight=0.1.
2024-11-05 16:00:39,721 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 16:00:42,218 - INFO - Clustering complete with spatial connectivity.
2024-11-05 16:00:42,218 - INFO - Current memory usage: 1515.58 MB
2024-11-05 16:00:42,242 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 16:00:42,243 - INFO - Current memory usage: 931.28 MB
2024-11-05 16:00:42,244 - INFO - Processing Cluster 0.
2024-11-05 16:00:42,256 - INFO - Cluster 0: Initial voxel count = 2855997.
2024-11-05 16:00:43,211 - INFO - Cluster 0: Refined voxel count = 2493767.
2024-11-05 16:00:43,231 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 16:00:43,289 - INFO - Cluster 0: Mean Intensity = 0.22112345695495605
2024-11-05 16:00:43,289 - INFO - Processing Cluster 1.
2024-11-05 16:00:43,305 - INFO - Cluster 1: Initial voxel count = 515592.
2024-11-05 16:00:44,144 - INFO - Cluster 1: Refined voxel count = 194756.
2024-11-05 16:00:44,154 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 16:00:44,199 - INFO - Cluster 1: Mean Intensity = 1.018616795539856
2024-11-05 16:00:44,199 - INFO - Processing Cluster 2.
2024-11-05 16:00:44,211 - INFO - Cluster 2: Initial voxel count = 212461.
2024-11-05 16:00:45,038 - INFO - Cluster 2: Refined voxel count = 116372.
2024-11-05 16:00:45,056 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 16:00:45,085 - INFO - Cluster 2: Mean Intensity = 6.104070663452148
2024-11-05 16:00:45,085 - INFO - Processing Cluster 3.
2024-11-05 16:00:45,097 - INFO - Cluster 3: Initial voxel count = 4471174.
2024-11-05 16:00:45,932 - INFO - Cluster 3: Refined voxel count = 3977073.
2024-11-05 16:00:45,940 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 16:00:45,999 - INFO - Cluster 3: Mean Intensity = -0.19626358151435852
2024-11-05 16:00:45,999 - INFO - Processing Cluster 4.
2024-11-05 16:00:46,016 - INFO - Cluster 4: Initial voxel count = 2765041.
2024-11-05 16:00:46,838 - INFO - Cluster 4: Refined voxel count = 2671356.
2024-11-05 16:00:46,847 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-05 16:00:46,890 - INFO - Cluster 4: Mean Intensity = -0.29271402955055237
2024-11-05 16:00:46,891 - INFO - Processing Cluster 5.
2024-11-05 16:00:46,911 - INFO - Cluster 5: Initial voxel count = 120535.
2024-11-05 16:00:47,757 - INFO - Cluster 5: Refined voxel count = 72978.
2024-11-05 16:00:47,766 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-05 16:00:47,794 - INFO - Cluster 5: Mean Intensity = 8.071805953979492
2024-11-05 16:00:47,794 - INFO - CSF is identified as cluster 4.
2024-11-05 16:00:47,794 - INFO - Starting visualization with PyVista.
2024-11-05 16:00:48,095 - INFO - Adding Original MRI volume.
2024-11-05 16:00:48,253 - INFO - Adding Denoised MRI volume.
2024-11-05 16:00:48,390 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 16:00:48,642 - INFO - Initial mesh has 281540 points and 574994 faces.
2024-11-05 16:00:48,642 - INFO - Current memory usage: 1159.35 MB
2024-11-05 16:00:51,136 - INFO - Decimated mesh has 137673 points and 287496 faces.
2024-11-05 16:00:51,136 - INFO - Current memory usage: 1407.68 MB
2024-11-05 16:00:51,144 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 16:00:51,238 - INFO - Initial mesh has 65118 points and 127886 faces.
2024-11-05 16:00:51,238 - INFO - Current memory usage: 1418.56 MB
2024-11-05 16:00:51,661 - INFO - Decimated mesh has 33264 points and 63943 faces.
2024-11-05 16:00:51,661 - INFO - Current memory usage: 1418.56 MB
2024-11-05 16:00:51,667 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 16:00:51,744 - INFO - Initial mesh has 35673 points and 70024 faces.
2024-11-05 16:00:51,744 - INFO - Current memory usage: 1418.56 MB
2024-11-05 16:00:51,950 - INFO - Decimated mesh has 18207 points and 35011 faces.
2024-11-05 16:00:51,951 - INFO - Current memory usage: 1418.56 MB
2024-11-05 16:00:51,955 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 16:00:52,111 - INFO - Initial mesh has 169992 points and 339959 faces.
2024-11-05 16:00:52,111 - INFO - Current memory usage: 1420.64 MB
2024-11-05 16:00:53,409 - INFO - Decimated mesh has 84162 points and 169978 faces.
2024-11-05 16:00:53,409 - INFO - Current memory usage: 1433.31 MB
2024-11-05 16:00:53,416 - INFO - Adding Mask 4 mesh to visualization.
2024-11-05 16:00:53,502 - INFO - Initial mesh has 44916 points and 87261 faces.
2024-11-05 16:00:53,502 - INFO - Current memory usage: 1433.31 MB
2024-11-05 16:00:53,751 - INFO - Decimated mesh has 22571 points and 43629 faces.
2024-11-05 16:00:53,751 - INFO - Current memory usage: 1433.31 MB
2024-11-05 16:00:53,756 - INFO - Adding Mask 5 mesh to visualization.
2024-11-05 16:00:53,820 - INFO - Initial mesh has 24562 points and 49556 faces.
2024-11-05 16:00:53,820 - INFO - Current memory usage: 1433.31 MB
2024-11-05 16:00:53,962 - INFO - Decimated mesh has 12210 points and 24777 faces.
2024-11-05 16:00:53,962 - INFO - Current memory usage: 1433.31 MB
2024-11-05 16:00:53,967 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:00:54,197 - INFO - Translator(prefix=None)
2024-11-05 16:00:54,229 - INFO - awaiting runner setup
2024-11-05 16:00:54,229 - INFO - awaiting site startup
2024-11-05 16:00:54,229 - INFO - Print WSLINK_READY_MSG
2024-11-05 16:00:54,229 - INFO - Schedule auto shutdown with timout 0
2024-11-05 16:00:54,229 - INFO - awaiting running future
2024-11-05 16:01:02,448 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:01:02,453 - INFO - Current memory usage: 1444.28 MB
2024-11-05 16:01:02,459 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 16:01:02,785 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 16:01:02,943 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 16:01:03,118 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 16:01:03,318 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 16:01:03,489 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-05 16:01:03,655 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-05 16:01:03,825 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 16:01:04,004 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 16:01:04,174 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 16:01:04,342 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 16:01:04,505 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-05 16:01:04,666 - INFO - Saved slice 159 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_5_overlay.png'.
2024-11-05 16:01:04,671 - INFO - Pipeline completed successfully.
2024-11-05 16:01:04,671 - INFO - Current memory usage: 1399.74 MB
2024-11-05 16:01:04,671 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 16:01:04,686 - INFO - Computed density profiles along x and y axes.
2024-11-05 16:01:04,686 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 16:01:04,717 - INFO - Cluster 0: Score = 14673.46655869484 (X: 8573.033828735352, Y: 6100.432729959488)
2024-11-05 16:01:04,748 - INFO - Cluster 0: Original Sum = 59602.66796875, Normalized Sum = 590794.9375
2024-11-05 16:01:04,791 - INFO - Cluster 1: Score = 4714.6045562028885 (X: 2261.61243224144, Y: 2452.9921239614487)
2024-11-05 16:01:04,809 - INFO - Cluster 1: Original Sum = 13627.8447265625, Normalized Sum = 271244.34375
2024-11-05 16:01:04,857 - INFO - Cluster 2: Score = 11183.875143766403 (X: 5017.620959043503, Y: 6166.2541847229)
2024-11-05 16:01:04,871 - INFO - Cluster 2: Original Sum = 40395.3515625, Normalized Sum = 971183.8125
2024-11-05 16:01:04,916 - INFO - Cluster 3: Score = 5748.113742828369 (X: 3571.3720321655273, Y: 2176.741710662842)
2024-11-05 16:01:04,954 - INFO - Cluster 3: Original Sum = 25771.548828125, Normalized Sum = -795888.5
2024-11-05 16:01:04,988 - INFO - Cluster 4: Score = 1204.9918150901794 (X: 802.365608215332, Y: 402.6262068748474)
2024-11-05 16:01:05,013 - INFO - Cluster 4: Original Sum = 7565.9912109375, Normalized Sum = -779047.5
2024-11-05 16:01:05,047 - INFO - Cluster 5: Score = 10195.177257657051 (X: 5259.392768979073, Y: 4935.7844886779785)
2024-11-05 16:01:05,060 - INFO - Cluster 5: Original Sum = 27421.947265625, Normalized Sum = 661460.8125
2024-11-05 16:01:05,060 - INFO - Good cluster identified as Cluster 5 with score 0.18589441384578514.
2024-11-05 16:01:05,923 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 16:01:05,923 - INFO - Removing eyes from the good cluster mask.
2024-11-05 16:01:05,923 - INFO - Starting eye detection using connected components analysis.
2024-11-05 16:01:05,988 - INFO - Number of connected components found: 443
2024-11-05 16:02:10,719 - WARNING - Expected to detect 2 eyes, but found 0. Skipping eye removal.
2024-11-05 16:02:10,721 - INFO - Detected eyes at centroids: []
2024-11-05 16:02:11,948 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 16:02:11,948 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 16:02:11,970 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 16:02:11,970 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 16:02:11,976 - INFO - Total CSF Volume: 69597.38679792454 mm³
2024-11-05 16:02:11,976 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 16:02:11,976 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 16:02:12,195 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 16:02:12,319 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 16:02:12,320 - INFO - Visualization process completed.
2024-11-05 16:02:12,321 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 16:02:12,321 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 16:02:12,321 - INFO - Final cleanup completed.
2024-11-05 16:02:12,321 - INFO - Current memory usage: 1338.07 MB
2024-11-05 16:06:10,012 - INFO - Logging initiated.
2024-11-05 16:06:10,012 - INFO - Pipeline started.
2024-11-05 16:06:10,012 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 16:06:10,278 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 16:06:10,435 - INFO - Denoised image loaded.
2024-11-05 16:06:10,436 - INFO - Current memory usage: 482.52 MB
2024-11-05 16:06:10,537 - INFO - Starting intensity normalization.
2024-11-05 16:06:11,056 - INFO - Intensity normalization complete.
2024-11-05 16:06:11,056 - INFO - Current memory usage: 639.35 MB
2024-11-05 16:06:11,061 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 16:06:11,061 - INFO - Computing neighborhood statistics.
2024-11-05 16:06:11,361 - INFO - Neighborhood statistics computed.
2024-11-05 16:06:11,361 - INFO - Current memory usage: 597.46 MB
2024-11-05 16:06:11,361 - INFO - Computing z-axis value for each voxel.
2024-11-05 16:06:11,370 - INFO - Z-axis value for each voxel computed.
2024-11-05 16:06:11,370 - INFO - Current memory usage: 639.09 MB
2024-11-05 16:06:11,370 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 16:06:11,699 - INFO - Features shape: (10940800, 4)
2024-11-05 16:06:11,700 - INFO - Current memory usage: 889.62 MB
2024-11-05 16:06:11,700 - INFO - Performing MiniBatch K-Means clustering with k=7, batch_size=10000, connectivity_weight=0.1.
2024-11-05 16:06:13,910 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 16:06:16,800 - INFO - Clustering complete with spatial connectivity.
2024-11-05 16:06:16,800 - INFO - Current memory usage: 1496.69 MB
2024-11-05 16:06:16,827 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 16:06:16,827 - INFO - Current memory usage: 912.39 MB
2024-11-05 16:06:16,837 - INFO - Processing Cluster 0.
2024-11-05 16:06:16,848 - INFO - Cluster 0: Initial voxel count = 2821496.
2024-11-05 16:06:17,606 - INFO - Cluster 0: Refined voxel count = 2444612.
2024-11-05 16:06:17,628 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 16:06:17,685 - INFO - Cluster 0: Mean Intensity = 0.2103038877248764
2024-11-05 16:06:17,685 - INFO - Processing Cluster 1.
2024-11-05 16:06:17,701 - INFO - Cluster 1: Initial voxel count = 548612.
2024-11-05 16:06:18,417 - INFO - Cluster 1: Refined voxel count = 216642.
2024-11-05 16:06:18,428 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 16:06:18,474 - INFO - Cluster 1: Mean Intensity = 1.0037091970443726
2024-11-05 16:06:18,474 - INFO - Processing Cluster 2.
2024-11-05 16:06:18,494 - INFO - Cluster 2: Initial voxel count = 215457.
2024-11-05 16:06:19,204 - INFO - Cluster 2: Refined voxel count = 110487.
2024-11-05 16:06:19,213 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 16:06:19,243 - INFO - Cluster 2: Mean Intensity = 5.768034934997559
2024-11-05 16:06:19,244 - INFO - Processing Cluster 3.
2024-11-05 16:06:19,260 - INFO - Cluster 3: Initial voxel count = 2189858.
2024-11-05 16:06:19,987 - INFO - Cluster 3: Refined voxel count = 2135083.
2024-11-05 16:06:20,010 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 16:06:20,046 - INFO - Cluster 3: Mean Intensity = -0.2915406823158264
2024-11-05 16:06:20,047 - INFO - Processing Cluster 4.
2024-11-05 16:06:20,058 - INFO - Cluster 4: Initial voxel count = 2136206.
2024-11-05 16:06:20,803 - INFO - Cluster 4: Refined voxel count = 2025251.
2024-11-05 16:06:20,825 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-05 16:06:20,860 - INFO - Cluster 4: Mean Intensity = -0.2527254819869995
2024-11-05 16:06:20,860 - INFO - Processing Cluster 5.
2024-11-05 16:06:20,871 - INFO - Cluster 5: Initial voxel count = 127307.
2024-11-05 16:06:21,668 - INFO - Cluster 5: Refined voxel count = 79066.
2024-11-05 16:06:21,712 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-05 16:06:21,759 - INFO - Cluster 5: Mean Intensity = 8.163053512573242
2024-11-05 16:06:21,759 - INFO - Processing Cluster 6.
2024-11-05 16:06:21,776 - INFO - Cluster 6: Initial voxel count = 2901864.
2024-11-05 16:06:22,613 - INFO - Cluster 6: Refined voxel count = 2400669.
2024-11-05 16:06:22,622 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-11-05 16:06:22,673 - INFO - Cluster 6: Mean Intensity = -0.17507819831371307
2024-11-05 16:06:22,673 - INFO - CSF is identified as cluster 3.
2024-11-05 16:06:22,673 - INFO - Starting visualization with PyVista.
2024-11-05 16:06:23,281 - INFO - Adding Original MRI volume.
2024-11-05 16:06:23,467 - INFO - Adding Denoised MRI volume.
2024-11-05 16:06:23,640 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 16:06:23,943 - INFO - Initial mesh has 283298 points and 579764 faces.
2024-11-05 16:06:23,944 - INFO - Current memory usage: 1152.04 MB
2024-11-05 16:06:26,673 - INFO - Decimated mesh has 138235 points and 289881 faces.
2024-11-05 16:06:26,673 - INFO - Current memory usage: 1397.82 MB
2024-11-05 16:06:26,681 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 16:06:26,787 - INFO - Initial mesh has 64947 points and 128458 faces.
2024-11-05 16:06:26,787 - INFO - Current memory usage: 1409.37 MB
2024-11-05 16:06:27,218 - INFO - Decimated mesh has 32913 points and 64229 faces.
2024-11-05 16:06:27,219 - INFO - Current memory usage: 1409.37 MB
2024-11-05 16:06:27,224 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 16:06:27,298 - INFO - Initial mesh has 34363 points and 67424 faces.
2024-11-05 16:06:27,299 - INFO - Current memory usage: 1409.37 MB
2024-11-05 16:06:27,497 - INFO - Decimated mesh has 17523 points and 33712 faces.
2024-11-05 16:06:27,497 - INFO - Current memory usage: 1409.37 MB
2024-11-05 16:06:27,502 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 16:06:27,576 - INFO - Initial mesh has 42846 points and 84040 faces.
2024-11-05 16:06:27,577 - INFO - Current memory usage: 1409.87 MB
2024-11-05 16:06:27,832 - INFO - Decimated mesh has 21398 points and 42020 faces.
2024-11-05 16:06:27,832 - INFO - Current memory usage: 1411.00 MB
2024-11-05 16:06:27,837 - INFO - Adding Mask 4 mesh to visualization.
2024-11-05 16:06:27,922 - INFO - Initial mesh has 48885 points and 97077 faces.
2024-11-05 16:06:27,922 - INFO - Current memory usage: 1411.00 MB
2024-11-05 16:06:28,223 - INFO - Decimated mesh has 24369 points and 48538 faces.
2024-11-05 16:06:28,223 - INFO - Current memory usage: 1411.00 MB
2024-11-05 16:06:28,229 - INFO - Adding Mask 5 mesh to visualization.
2024-11-05 16:06:28,300 - INFO - Initial mesh has 26010 points and 52700 faces.
2024-11-05 16:06:28,301 - INFO - Current memory usage: 1411.00 MB
2024-11-05 16:06:28,456 - INFO - Decimated mesh has 12863 points and 26350 faces.
2024-11-05 16:06:28,456 - INFO - Current memory usage: 1411.00 MB
2024-11-05 16:06:28,461 - INFO - Adding Mask 6 mesh to visualization.
2024-11-05 16:06:28,605 - INFO - Initial mesh has 139216 points and 279501 faces.
2024-11-05 16:06:28,605 - INFO - Current memory usage: 1411.00 MB
2024-11-05 16:06:29,666 - INFO - Decimated mesh has 68937 points and 139749 faces.
2024-11-05 16:06:29,666 - INFO - Current memory usage: 1411.00 MB
2024-11-05 16:06:29,673 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:06:29,952 - INFO - Translator(prefix=None)
2024-11-05 16:06:30,003 - INFO - awaiting runner setup
2024-11-05 16:06:30,004 - INFO - awaiting site startup
2024-11-05 16:06:30,004 - INFO - Print WSLINK_READY_MSG
2024-11-05 16:06:30,004 - INFO - Schedule auto shutdown with timout 0
2024-11-05 16:06:30,004 - INFO - awaiting running future
2024-11-05 16:06:38,146 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:06:38,151 - INFO - Current memory usage: 1422.95 MB
2024-11-05 16:06:38,157 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 16:06:38,648 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 16:06:38,788 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 16:06:38,932 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 16:06:39,082 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 16:06:39,246 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-05 16:06:39,405 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-05 16:06:39,566 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-11-05 16:06:39,732 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 16:06:39,887 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 16:06:40,043 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 16:06:40,203 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 16:06:40,363 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-05 16:06:40,521 - INFO - Saved slice 159 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_5_overlay.png'.
2024-11-05 16:06:40,683 - INFO - Saved slice 159 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_6_overlay.png'.
2024-11-05 16:06:40,687 - INFO - Pipeline completed successfully.
2024-11-05 16:06:40,688 - INFO - Current memory usage: 1381.97 MB
2024-11-05 16:06:40,688 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 16:06:40,703 - INFO - Computed density profiles along x and y axes.
2024-11-05 16:06:40,703 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 16:06:40,736 - INFO - Cluster 0: Score = 13886.411625385284 (X: 8031.084777832031, Y: 5855.326847553253)
2024-11-05 16:06:40,768 - INFO - Cluster 0: Original Sum = 57382.98046875, Normalized Sum = 552937.0
2024-11-05 16:06:40,800 - INFO - Cluster 1: Score = 5111.015994369984 (X: 2292.327850341797, Y: 2818.688144028187)
2024-11-05 16:06:40,815 - INFO - Cluster 1: Original Sum = 14559.0673828125, Normalized Sum = 286667.96875
2024-11-05 16:06:40,848 - INFO - Cluster 2: Score = 12561.158473491669 (X: 6056.658633708954, Y: 6504.499839782715)
2024-11-05 16:06:40,859 - INFO - Cluster 2: Original Sum = 37779.5390625, Normalized Sum = 907695.75
2024-11-05 16:06:40,892 - INFO - Cluster 3: Score = 1016.7646582126617 (X: 675.6649236679077, Y: 341.099734544754)
2024-11-05 16:06:40,912 - INFO - Cluster 3: Original Sum = 6137.52490234375, Normalized Sum = -620386.25
2024-11-05 16:06:40,946 - INFO - Cluster 4: Score = 1541.2727298736572 (X: 696.856315612793, Y: 844.4164142608643)
2024-11-05 16:06:40,965 - INFO - Cluster 4: Original Sum = 8944.9169921875, Normalized Sum = -510123.46875
2024-11-05 16:06:40,998 - INFO - Cluster 5: Score = 9720.091209888458 (X: 5051.270822525024, Y: 4668.820387363434)
2024-11-05 16:06:41,009 - INFO - Cluster 5: Original Sum = 29679.390625, Normalized Sum = 715884.75
2024-11-05 16:06:41,042 - INFO - Cluster 6: Score = 3869.4033308029175 (X: 2278.4090003967285, Y: 1590.994330406189)
2024-11-05 16:06:41,070 - INFO - Cluster 6: Original Sum = 17467.419921875, Normalized Sum = -432478.71875
2024-11-05 16:06:41,070 - INFO - Good cluster identified as Cluster 1 with score 0.17552766752730548.
2024-11-05 16:06:41,987 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 16:06:41,987 - INFO - Removing eyes from the good cluster mask.
2024-11-05 16:06:41,987 - INFO - Starting eye detection using connected components analysis.
2024-11-05 16:06:42,057 - INFO - Number of connected components found: 1264
2024-11-05 16:10:03,647 - INFO - Logging initiated.
2024-11-05 16:10:03,647 - INFO - Pipeline started.
2024-11-05 16:10:03,647 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 16:10:03,765 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 16:10:03,832 - INFO - Denoised image loaded.
2024-11-05 16:10:03,833 - INFO - Current memory usage: 482.52 MB
2024-11-05 16:10:03,868 - INFO - Starting intensity normalization.
2024-11-05 16:10:04,456 - INFO - Intensity normalization complete.
2024-11-05 16:10:04,457 - INFO - Current memory usage: 639.37 MB
2024-11-05 16:10:04,457 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 16:10:04,457 - INFO - Computing neighborhood statistics.
2024-11-05 16:10:04,668 - INFO - Neighborhood statistics computed.
2024-11-05 16:10:04,668 - INFO - Current memory usage: 597.48 MB
2024-11-05 16:10:04,668 - INFO - Computing z-axis value for each voxel.
2024-11-05 16:10:04,675 - INFO - Z-axis value for each voxel computed.
2024-11-05 16:10:04,675 - INFO - Current memory usage: 639.11 MB
2024-11-05 16:10:04,675 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 16:10:05,039 - INFO - Features shape: (10940800, 4)
2024-11-05 16:10:05,039 - INFO - Current memory usage: 889.64 MB
2024-11-05 16:10:05,039 - INFO - Performing MiniBatch K-Means clustering with k=7, batch_size=10000, connectivity_weight=0.1.
2024-11-05 16:10:07,031 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 16:10:10,133 - INFO - Clustering complete with spatial connectivity.
2024-11-05 16:10:10,134 - INFO - Current memory usage: 1516.30 MB
2024-11-05 16:10:10,157 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 16:10:10,158 - INFO - Current memory usage: 932.00 MB
2024-11-05 16:10:10,170 - INFO - Processing Cluster 0.
2024-11-05 16:10:10,187 - INFO - Cluster 0: Initial voxel count = 2821496.
2024-11-05 16:10:11,263 - INFO - Cluster 0: Refined voxel count = 2450475.
2024-11-05 16:10:11,277 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 16:10:11,338 - INFO - Cluster 0: Mean Intensity = 0.2103038877248764
2024-11-05 16:10:11,338 - INFO - Processing Cluster 1.
2024-11-05 16:10:11,355 - INFO - Cluster 1: Initial voxel count = 548612.
2024-11-05 16:10:12,198 - INFO - Cluster 1: Refined voxel count = 222373.
2024-11-05 16:10:12,209 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 16:10:12,255 - INFO - Cluster 1: Mean Intensity = 1.0037091970443726
2024-11-05 16:10:12,256 - INFO - Processing Cluster 2.
2024-11-05 16:10:12,273 - INFO - Cluster 2: Initial voxel count = 215457.
2024-11-05 16:10:13,117 - INFO - Cluster 2: Refined voxel count = 112482.
2024-11-05 16:10:13,127 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 16:10:13,156 - INFO - Cluster 2: Mean Intensity = 5.768034934997559
2024-11-05 16:10:13,156 - INFO - Processing Cluster 3.
2024-11-05 16:10:13,170 - INFO - Cluster 3: Initial voxel count = 2189858.
2024-11-05 16:10:14,004 - INFO - Cluster 3: Refined voxel count = 2135686.
2024-11-05 16:10:14,022 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 16:10:14,054 - INFO - Cluster 3: Mean Intensity = -0.2915406823158264
2024-11-05 16:10:14,054 - INFO - Processing Cluster 4.
2024-11-05 16:10:14,067 - INFO - Cluster 4: Initial voxel count = 2136206.
2024-11-05 16:10:14,888 - INFO - Cluster 4: Refined voxel count = 2026682.
2024-11-05 16:10:14,909 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-05 16:10:14,948 - INFO - Cluster 4: Mean Intensity = -0.2527254819869995
2024-11-05 16:10:14,948 - INFO - Processing Cluster 5.
2024-11-05 16:10:14,961 - INFO - Cluster 5: Initial voxel count = 127307.
2024-11-05 16:10:15,809 - INFO - Cluster 5: Refined voxel count = 79913.
2024-11-05 16:10:15,822 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-05 16:10:15,861 - INFO - Cluster 5: Mean Intensity = 8.163053512573242
2024-11-05 16:10:15,861 - INFO - Processing Cluster 6.
2024-11-05 16:10:15,880 - INFO - Cluster 6: Initial voxel count = 2901864.
2024-11-05 16:10:16,737 - INFO - Cluster 6: Refined voxel count = 2406673.
2024-11-05 16:10:16,747 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-11-05 16:10:16,802 - INFO - Cluster 6: Mean Intensity = -0.17507819831371307
2024-11-05 16:10:16,802 - INFO - CSF is identified as cluster 3.
2024-11-05 16:10:16,802 - INFO - Starting visualization with PyVista.
2024-11-05 16:10:17,393 - INFO - Adding Original MRI volume.
2024-11-05 16:10:17,604 - INFO - Adding Denoised MRI volume.
2024-11-05 16:10:17,752 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 16:10:18,016 - INFO - Initial mesh has 286599 points and 586158 faces.
2024-11-05 16:10:18,016 - INFO - Current memory usage: 1173.32 MB
2024-11-05 16:10:20,523 - INFO - Decimated mesh has 139959 points and 293078 faces.
2024-11-05 16:10:20,524 - INFO - Current memory usage: 1431.59 MB
2024-11-05 16:10:20,531 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 16:10:20,631 - INFO - Initial mesh has 68483 points and 134662 faces.
2024-11-05 16:10:20,632 - INFO - Current memory usage: 1441.72 MB
2024-11-05 16:10:21,060 - INFO - Decimated mesh has 34942 points and 67331 faces.
2024-11-05 16:10:21,060 - INFO - Current memory usage: 1441.72 MB
2024-11-05 16:10:21,066 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 16:10:21,141 - INFO - Initial mesh has 35498 points and 69354 faces.
2024-11-05 16:10:21,141 - INFO - Current memory usage: 1441.72 MB
2024-11-05 16:10:21,341 - INFO - Decimated mesh has 18191 points and 34677 faces.
2024-11-05 16:10:21,341 - INFO - Current memory usage: 1441.72 MB
2024-11-05 16:10:21,346 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 16:10:21,441 - INFO - Initial mesh has 43197 points and 84650 faces.
2024-11-05 16:10:21,441 - INFO - Current memory usage: 1443.74 MB
2024-11-05 16:10:21,697 - INFO - Decimated mesh has 21593 points and 42324 faces.
2024-11-05 16:10:21,698 - INFO - Current memory usage: 1443.99 MB
2024-11-05 16:10:21,702 - INFO - Adding Mask 4 mesh to visualization.
2024-11-05 16:10:21,783 - INFO - Initial mesh has 49694 points and 98463 faces.
2024-11-05 16:10:21,783 - INFO - Current memory usage: 1443.99 MB
2024-11-05 16:10:22,082 - INFO - Decimated mesh has 24825 points and 49230 faces.
2024-11-05 16:10:22,083 - INFO - Current memory usage: 1443.99 MB
2024-11-05 16:10:22,088 - INFO - Adding Mask 5 mesh to visualization.
2024-11-05 16:10:22,164 - INFO - Initial mesh has 26516 points and 53544 faces.
2024-11-05 16:10:22,165 - INFO - Current memory usage: 1443.99 MB
2024-11-05 16:10:22,316 - INFO - Decimated mesh has 13162 points and 26772 faces.
2024-11-05 16:10:22,317 - INFO - Current memory usage: 1443.99 MB
2024-11-05 16:10:22,322 - INFO - Adding Mask 6 mesh to visualization.
2024-11-05 16:10:22,463 - INFO - Initial mesh has 142761 points and 285713 faces.
2024-11-05 16:10:22,463 - INFO - Current memory usage: 1443.99 MB
2024-11-05 16:10:23,519 - INFO - Decimated mesh has 70926 points and 142855 faces.
2024-11-05 16:10:23,519 - INFO - Current memory usage: 1443.99 MB
2024-11-05 16:10:23,526 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:10:23,789 - INFO - Translator(prefix=None)
2024-11-05 16:10:23,837 - INFO - awaiting runner setup
2024-11-05 16:10:23,837 - INFO - awaiting site startup
2024-11-05 16:10:23,838 - INFO - Print WSLINK_READY_MSG
2024-11-05 16:10:23,838 - INFO - Schedule auto shutdown with timout 0
2024-11-05 16:10:23,838 - INFO - awaiting running future
2024-11-05 16:10:32,240 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:10:32,245 - INFO - Current memory usage: 1459.61 MB
2024-11-05 16:10:32,251 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 16:10:32,604 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 16:10:32,753 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 16:10:32,901 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 16:10:33,059 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 16:10:33,223 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-05 16:10:33,386 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-05 16:10:33,547 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-11-05 16:10:33,708 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 16:10:33,866 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 16:10:34,022 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 16:10:34,179 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 16:10:34,334 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-05 16:10:34,496 - INFO - Saved slice 159 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_5_overlay.png'.
2024-11-05 16:10:34,657 - INFO - Saved slice 159 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_6_overlay.png'.
2024-11-05 16:10:34,661 - INFO - Pipeline completed successfully.
2024-11-05 16:10:34,662 - INFO - Current memory usage: 1418.11 MB
2024-11-05 16:10:34,662 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 16:10:34,676 - INFO - Computed density profiles along x and y axes.
2024-11-05 16:10:34,676 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 16:10:34,709 - INFO - Cluster 0: Score = 14271.175273418427 (X: 8407.104110717773, Y: 5864.071162700653)
2024-11-05 16:10:34,745 - INFO - Cluster 0: Original Sum = 57508.6015625, Normalized Sum = 553962.5625
2024-11-05 16:10:34,797 - INFO - Cluster 1: Score = 5583.028627514839 (X: 2348.5493524074554, Y: 3234.4792751073837)
2024-11-05 16:10:34,821 - INFO - Cluster 1: Original Sum = 14961.0126953125, Normalized Sum = 294673.0
2024-11-05 16:10:34,883 - INFO - Cluster 2: Score = 12450.169322490692 (X: 5601.603522777557, Y: 6848.565799713135)
2024-11-05 16:10:34,897 - INFO - Cluster 2: Original Sum = 38269.35546875, Normalized Sum = 919260.0625
2024-11-05 16:10:34,942 - INFO - Cluster 3: Score = 1029.903783082962 (X: 675.8406972885132, Y: 354.06308579444885)
2024-11-05 16:10:34,973 - INFO - Cluster 3: Original Sum = 6139.7822265625, Normalized Sum = -620548.1875
2024-11-05 16:10:35,027 - INFO - Cluster 4: Score = 1631.8804697990417 (X: 715.3818125724792, Y: 916.4986572265625)
2024-11-05 16:10:35,047 - INFO - Cluster 4: Original Sum = 8952.80078125, Normalized Sum = -510445.0625
2024-11-05 16:10:35,090 - INFO - Cluster 5: Score = 10124.310700535774 (X: 5425.1490877866745, Y: 4699.1616127491)
2024-11-05 16:10:35,108 - INFO - Cluster 5: Original Sum = 30008.009765625, Normalized Sum = 723821.5625
2024-11-05 16:10:35,164 - INFO - Cluster 6: Score = 4083.362582206726 (X: 2343.331569671631, Y: 1740.0310125350952)
2024-11-05 16:10:35,205 - INFO - Cluster 6: Original Sum = 17526.99609375, Normalized Sum = -433161.9375
2024-11-05 16:10:35,205 - INFO - Good cluster identified as Cluster 1 with score 0.18658671137382907.
2024-11-05 16:10:36,071 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 16:10:36,071 - INFO - Removing eyes from the good cluster mask.
2024-11-05 16:10:36,071 - INFO - Starting eye detection using connected components analysis.
2024-11-05 16:10:36,141 - INFO - Number of connected components found: 2083
2024-11-05 16:12:15,421 - INFO - Logging initiated.
2024-11-05 16:12:15,421 - INFO - Pipeline started.
2024-11-05 16:12:15,421 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 16:12:15,505 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 16:12:15,560 - INFO - Denoised image loaded.
2024-11-05 16:12:15,560 - INFO - Current memory usage: 482.66 MB
2024-11-05 16:12:15,594 - INFO - Starting intensity normalization.
2024-11-05 16:12:15,901 - INFO - Intensity normalization complete.
2024-11-05 16:12:15,902 - INFO - Current memory usage: 639.50 MB
2024-11-05 16:12:15,902 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 16:12:15,902 - INFO - Computing neighborhood statistics.
2024-11-05 16:12:16,165 - INFO - Neighborhood statistics computed.
2024-11-05 16:12:16,166 - INFO - Current memory usage: 597.61 MB
2024-11-05 16:12:16,166 - INFO - Computing z-axis value for each voxel.
2024-11-05 16:12:16,176 - INFO - Z-axis value for each voxel computed.
2024-11-05 16:12:16,177 - INFO - Current memory usage: 639.23 MB
2024-11-05 16:12:16,177 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 16:12:16,331 - INFO - Features shape: (10940800, 4)
2024-11-05 16:12:16,332 - INFO - Current memory usage: 889.77 MB
2024-11-05 16:12:16,332 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 16:12:18,349 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 16:12:21,803 - INFO - Clustering complete with spatial connectivity.
2024-11-05 16:12:21,804 - INFO - Current memory usage: 1515.79 MB
2024-11-05 16:12:21,835 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 16:12:21,836 - INFO - Current memory usage: 931.49 MB
2024-11-05 16:12:21,837 - INFO - Processing Cluster 0.
2024-11-05 16:12:21,851 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-05 16:12:22,878 - INFO - Cluster 0: Refined voxel count = 118908.
2024-11-05 16:12:22,900 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 16:12:22,935 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-05 16:12:22,935 - INFO - Processing Cluster 1.
2024-11-05 16:12:22,947 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-05 16:12:23,837 - INFO - Cluster 1: Refined voxel count = 6950404.
2024-11-05 16:12:23,857 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 16:12:23,911 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-05 16:12:23,912 - INFO - Processing Cluster 2.
2024-11-05 16:12:23,923 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-05 16:12:24,758 - INFO - Cluster 2: Refined voxel count = 2731631.
2024-11-05 16:12:24,781 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 16:12:24,829 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-05 16:12:24,829 - INFO - Processing Cluster 3.
2024-11-05 16:12:24,845 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-05 16:12:25,660 - INFO - Cluster 3: Refined voxel count = 183320.
2024-11-05 16:12:25,687 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 16:12:25,724 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-05 16:12:25,724 - INFO - CSF is identified as cluster 1.
2024-11-05 16:12:25,725 - INFO - Starting visualization with PyVista.
2024-11-05 16:12:26,046 - INFO - Adding Original MRI volume.
2024-11-05 16:12:26,207 - INFO - Adding Denoised MRI volume.
2024-11-05 16:12:26,343 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 16:12:26,462 - INFO - Initial mesh has 47151 points and 91898 faces.
2024-11-05 16:12:26,462 - INFO - Current memory usage: 1078.89 MB
2024-11-05 16:12:26,752 - INFO - Decimated mesh has 24225 points and 45949 faces.
2024-11-05 16:12:26,753 - INFO - Current memory usage: 1116.87 MB
2024-11-05 16:12:26,760 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 16:12:26,908 - INFO - Initial mesh has 145698 points and 292686 faces.
2024-11-05 16:12:26,908 - INFO - Current memory usage: 1136.39 MB
2024-11-05 16:12:28,105 - INFO - Decimated mesh has 72356 points and 146342 faces.
2024-11-05 16:12:28,105 - INFO - Current memory usage: 1245.86 MB
2024-11-05 16:12:28,112 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 16:12:28,362 - INFO - Initial mesh has 243544 points and 497238 faces.
2024-11-05 16:12:28,362 - INFO - Current memory usage: 1252.12 MB
2024-11-05 16:12:30,437 - INFO - Decimated mesh has 119103 points and 248619 faces.
2024-11-05 16:12:30,437 - INFO - Current memory usage: 1368.82 MB
2024-11-05 16:12:30,443 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 16:12:30,530 - INFO - Initial mesh has 48762 points and 99420 faces.
2024-11-05 16:12:30,531 - INFO - Current memory usage: 1369.44 MB
2024-11-05 16:12:30,848 - INFO - Decimated mesh has 23913 points and 49709 faces.
2024-11-05 16:12:30,849 - INFO - Current memory usage: 1369.44 MB
2024-11-05 16:12:30,854 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:12:31,085 - INFO - Translator(prefix=None)
2024-11-05 16:12:31,117 - INFO - awaiting runner setup
2024-11-05 16:12:31,117 - INFO - awaiting site startup
2024-11-05 16:12:31,117 - INFO - Print WSLINK_READY_MSG
2024-11-05 16:12:31,118 - INFO - Schedule auto shutdown with timout 0
2024-11-05 16:12:31,118 - INFO - awaiting running future
2024-11-05 16:12:38,933 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:12:38,940 - INFO - Current memory usage: 1380.36 MB
2024-11-05 16:12:38,949 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 16:12:39,250 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 16:12:39,398 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 16:12:39,546 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 16:12:39,699 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 16:12:39,849 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 16:12:40,003 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 16:12:40,160 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 16:12:40,315 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 16:12:40,319 - INFO - Pipeline completed successfully.
2024-11-05 16:12:40,320 - INFO - Current memory usage: 1335.78 MB
2024-11-05 16:12:40,320 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 16:12:40,333 - INFO - Computed density profiles along x and y axes.
2024-11-05 16:12:40,333 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 16:12:40,366 - INFO - Cluster 0: Score = 8051.194685935974 (X: 3870.322650909424, Y: 4180.87203502655)
2024-11-05 16:12:40,379 - INFO - Cluster 0: Original Sum = 22383.982421875, Normalized Sum = 518416.4375
2024-11-05 16:12:40,418 - INFO - Cluster 1: Score = 6277.027099609375 (X: 3116.1955184936523, Y: 3160.8315811157227)
2024-11-05 16:12:40,478 - INFO - Cluster 1: Original Sum = 36149.25, Normalized Sum = -1613922.0
2024-11-05 16:12:40,528 - INFO - Cluster 2: Score = 19985.643627405167 (X: 8875.729888916016, Y: 11109.913738489151)
2024-11-05 16:12:40,569 - INFO - Cluster 2: Original Sum = 75970.1015625, Normalized Sum = 915132.0625
2024-11-05 16:12:40,617 - INFO - Cluster 3: Score = 18274.40859603882 (X: 8237.314144134521, Y: 10037.094451904297)
2024-11-05 16:12:40,633 - INFO - Cluster 3: Original Sum = 62718.70703125, Normalized Sum = 1506924.0
2024-11-05 16:12:40,633 - INFO - Good cluster identified as Cluster 0 with score 0.17984297134541022.
2024-11-05 16:12:41,406 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 16:12:41,406 - INFO - Removing eyes from the good cluster mask.
2024-11-05 16:12:41,406 - INFO - Starting eye detection using connected components analysis.
2024-11-05 16:12:41,476 - INFO - Number of connected components found: 1261
2024-11-05 16:13:15,785 - INFO - Detected potential eye at centroid: (50.33444722918407, 113.38735728209413, 58.9766081871345) with Volume: 3591.0 and Sphericity: 0.84
2024-11-05 16:14:51,974 - INFO - Detected potential eye at centroid: (109.42103770910121, 112.26453076268784, 60.672526226254604) with Volume: 3527.0 and Sphericity: 0.87
2024-11-05 16:15:48,035 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-05 16:15:48,039 - INFO - Eyes have been removed from the CSF mask.
2024-11-05 16:15:48,040 - INFO - Detected eyes at centroids: [(50, 113, 58), (109, 112, 60)]
2024-11-05 16:15:49,287 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 16:15:49,287 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 16:15:49,308 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 16:15:49,308 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 16:15:49,313 - INFO - Total CSF Volume: 106611.47017101024 mm³
2024-11-05 16:15:49,313 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 16:15:49,313 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 16:15:49,692 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 16:15:49,879 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 16:15:49,880 - INFO - Visualization process completed.
2024-11-05 16:15:50,017 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 16:15:50,159 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 16:15:50,163 - INFO - Final cleanup completed.
2024-11-05 16:15:50,164 - INFO - Current memory usage: 1295.04 MB
2024-11-05 16:17:47,594 - INFO - Logging initiated.
2024-11-05 16:17:47,594 - INFO - Pipeline started.
2024-11-05 16:17:47,594 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 16:17:47,804 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 16:17:47,911 - INFO - Denoised image loaded.
2024-11-05 16:17:47,912 - INFO - Current memory usage: 482.68 MB
2024-11-05 16:17:48,075 - INFO - Starting intensity normalization.
2024-11-05 16:17:48,677 - INFO - Intensity normalization complete.
2024-11-05 16:17:48,678 - INFO - Current memory usage: 639.63 MB
2024-11-05 16:17:48,682 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 16:17:48,682 - INFO - Computing neighborhood statistics.
2024-11-05 16:17:48,961 - INFO - Neighborhood statistics computed.
2024-11-05 16:17:48,961 - INFO - Current memory usage: 597.75 MB
2024-11-05 16:17:48,961 - INFO - Computing z-axis value for each voxel.
2024-11-05 16:17:48,996 - INFO - Z-axis value for each voxel computed.
2024-11-05 16:17:48,996 - INFO - Current memory usage: 639.37 MB
2024-11-05 16:17:48,996 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 16:17:49,340 - INFO - Features shape: (10940800, 4)
2024-11-05 16:17:49,341 - INFO - Current memory usage: 889.91 MB
2024-11-05 16:17:49,341 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 16:17:52,031 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 16:17:56,153 - INFO - Clustering complete with spatial connectivity.
2024-11-05 16:17:56,154 - INFO - Current memory usage: 1506.39 MB
2024-11-05 16:17:56,182 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 16:17:56,182 - INFO - Current memory usage: 922.09 MB
2024-11-05 16:17:56,192 - INFO - Processing Cluster 0.
2024-11-05 16:17:56,211 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-05 16:17:57,008 - INFO - Cluster 0: Refined voxel count = 118908.
2024-11-05 16:17:57,028 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 16:17:57,053 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-05 16:17:57,053 - INFO - Processing Cluster 1.
2024-11-05 16:17:57,063 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-05 16:17:57,962 - INFO - Cluster 1: Refined voxel count = 6950404.
2024-11-05 16:17:57,978 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 16:17:58,029 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-05 16:17:58,029 - INFO - Processing Cluster 2.
2024-11-05 16:17:58,041 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-05 16:17:59,008 - INFO - Cluster 2: Refined voxel count = 2731631.
2024-11-05 16:17:59,028 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 16:17:59,067 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-05 16:17:59,067 - INFO - Processing Cluster 3.
2024-11-05 16:17:59,076 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-05 16:18:00,059 - INFO - Cluster 3: Refined voxel count = 183320.
2024-11-05 16:18:00,078 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 16:18:00,119 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-05 16:18:00,120 - INFO - CSF is identified as cluster 1.
2024-11-05 16:18:00,120 - INFO - Starting visualization with PyVista.
2024-11-05 16:18:00,731 - INFO - Adding Original MRI volume.
2024-11-05 16:18:00,929 - INFO - Adding Denoised MRI volume.
2024-11-05 16:18:01,105 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 16:18:01,311 - INFO - Initial mesh has 47151 points and 91898 faces.
2024-11-05 16:18:01,311 - INFO - Current memory usage: 1072.60 MB
2024-11-05 16:18:01,678 - INFO - Decimated mesh has 24225 points and 45949 faces.
2024-11-05 16:18:01,679 - INFO - Current memory usage: 1111.62 MB
2024-11-05 16:18:01,688 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 16:18:01,857 - INFO - Initial mesh has 145698 points and 292686 faces.
2024-11-05 16:18:01,857 - INFO - Current memory usage: 1130.30 MB
2024-11-05 16:18:03,298 - INFO - Decimated mesh has 72356 points and 146342 faces.
2024-11-05 16:18:03,298 - INFO - Current memory usage: 1238.25 MB
2024-11-05 16:18:03,306 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 16:18:03,546 - INFO - Initial mesh has 243544 points and 497238 faces.
2024-11-05 16:18:03,547 - INFO - Current memory usage: 1245.22 MB
2024-11-05 16:18:06,001 - INFO - Decimated mesh has 119103 points and 248619 faces.
2024-11-05 16:18:06,001 - INFO - Current memory usage: 1361.90 MB
2024-11-05 16:18:06,009 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 16:18:06,092 - INFO - Initial mesh has 48762 points and 99420 faces.
2024-11-05 16:18:06,092 - INFO - Current memory usage: 1362.90 MB
2024-11-05 16:18:06,507 - INFO - Decimated mesh has 23913 points and 49709 faces.
2024-11-05 16:18:06,507 - INFO - Current memory usage: 1362.90 MB
2024-11-05 16:18:06,516 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:18:06,812 - INFO - Translator(prefix=None)
2024-11-05 16:18:06,897 - INFO - awaiting runner setup
2024-11-05 16:18:06,898 - INFO - awaiting site startup
2024-11-05 16:18:06,899 - INFO - Print WSLINK_READY_MSG
2024-11-05 16:18:06,899 - INFO - Schedule auto shutdown with timout 0
2024-11-05 16:18:06,899 - INFO - awaiting running future
2024-11-05 16:18:17,983 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:18:17,987 - INFO - Current memory usage: 1374.61 MB
2024-11-05 16:18:17,991 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 16:18:18,382 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 16:18:18,563 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 16:18:18,717 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 16:18:18,870 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 16:18:19,016 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 16:18:19,177 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 16:18:19,353 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 16:18:19,506 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 16:18:19,510 - INFO - Pipeline completed successfully.
2024-11-05 16:18:19,510 - INFO - Current memory usage: 1330.35 MB
2024-11-05 16:18:19,511 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 16:18:19,525 - INFO - Computed density profiles along x and y axes.
2024-11-05 16:18:19,525 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 16:18:19,549 - INFO - Cluster 0: Score = 8047.131940841675 (X: 3870.322650909424, Y: 4176.809289932251)
2024-11-05 16:18:19,559 - INFO - Cluster 0: Original Sum = 22383.982421875, Normalized Sum = 518416.4375
2024-11-05 16:18:19,583 - INFO - Cluster 1: Score = 6277.027099609375 (X: 3116.1955184936523, Y: 3160.8315811157227)
2024-11-05 16:18:19,612 - INFO - Cluster 1: Original Sum = 36149.25, Normalized Sum = -1613922.0
2024-11-05 16:18:19,636 - INFO - Cluster 2: Score = 19978.378410339355 (X: 8875.729888916016, Y: 11102.64852142334)
2024-11-05 16:18:19,662 - INFO - Cluster 2: Original Sum = 75970.1015625, Normalized Sum = 915132.0625
2024-11-05 16:18:19,686 - INFO - Cluster 3: Score = 18270.020360946655 (X: 8232.925909042358, Y: 10037.094451904297)
2024-11-05 16:18:19,696 - INFO - Cluster 3: Original Sum = 62718.70703125, Normalized Sum = 1506924.0
2024-11-05 16:18:19,696 - INFO - Good cluster identified as Cluster 0 with score 0.17975222007456415.
2024-11-05 16:18:20,447 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 16:18:20,447 - INFO - Removing eyes from the good cluster mask.
2024-11-05 16:18:20,447 - INFO - Starting eye detection using connected components analysis.
2024-11-05 16:18:20,522 - INFO - Number of connected components found: 1261
2024-11-05 16:19:04,823 - INFO - Detected potential eye at centroid: (50.33444722918407, 113.38735728209413, 58.9766081871345) with Volume: 3591.0 and Sphericity: 0.84
2024-11-05 16:21:27,915 - INFO - Detected potential eye at centroid: (109.42103770910121, 112.26453076268784, 60.672526226254604) with Volume: 3527.0 and Sphericity: 0.87
2024-11-05 16:22:26,683 - INFO - Logging initiated.
2024-11-05 16:22:26,683 - INFO - Pipeline started.
2024-11-05 16:22:26,683 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 16:22:26,887 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 16:22:26,970 - INFO - Denoised image loaded.
2024-11-05 16:22:26,971 - INFO - Current memory usage: 482.58 MB
2024-11-05 16:22:27,012 - INFO - Starting intensity normalization.
2024-11-05 16:22:27,576 - INFO - Intensity normalization complete.
2024-11-05 16:22:27,576 - INFO - Current memory usage: 639.42 MB
2024-11-05 16:22:27,577 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 16:22:27,577 - INFO - Computing neighborhood statistics.
2024-11-05 16:22:27,824 - INFO - Neighborhood statistics computed.
2024-11-05 16:22:27,824 - INFO - Current memory usage: 597.53 MB
2024-11-05 16:22:27,824 - INFO - Computing z-axis value for each voxel.
2024-11-05 16:22:27,831 - INFO - Z-axis value for each voxel computed.
2024-11-05 16:22:27,832 - INFO - Current memory usage: 639.16 MB
2024-11-05 16:22:27,832 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 16:22:28,126 - INFO - Features shape: (10940800, 4)
2024-11-05 16:22:28,126 - INFO - Current memory usage: 889.69 MB
2024-11-05 16:22:28,126 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 16:22:31,415 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 16:22:36,460 - INFO - Clustering complete with spatial connectivity.
2024-11-05 16:22:36,461 - INFO - Current memory usage: 1503.72 MB
2024-11-05 16:22:36,511 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 16:22:36,512 - INFO - Current memory usage: 919.41 MB
2024-11-05 16:22:36,526 - INFO - Processing Cluster 0.
2024-11-05 16:22:36,544 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-05 16:22:38,074 - INFO - Cluster 0: Refined voxel count = 118908.
2024-11-05 16:22:38,107 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 16:22:38,156 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-05 16:22:38,156 - INFO - Processing Cluster 1.
2024-11-05 16:22:38,176 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-05 16:22:40,028 - INFO - Cluster 1: Refined voxel count = 6950404.
2024-11-05 16:22:40,043 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 16:22:40,124 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-05 16:22:40,125 - INFO - Processing Cluster 2.
2024-11-05 16:22:40,146 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-05 16:22:41,516 - INFO - Cluster 2: Refined voxel count = 2731631.
2024-11-05 16:22:41,537 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 16:22:41,587 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-05 16:22:41,588 - INFO - Processing Cluster 3.
2024-11-05 16:22:41,600 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-05 16:22:42,725 - INFO - Cluster 3: Refined voxel count = 183320.
2024-11-05 16:22:42,737 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 16:22:42,769 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-05 16:22:42,770 - INFO - CSF is identified as cluster 1.
2024-11-05 16:22:42,770 - INFO - Starting visualization with PyVista.
2024-11-05 16:22:43,439 - INFO - Adding Original MRI volume.
2024-11-05 16:22:43,667 - INFO - Adding Denoised MRI volume.
2024-11-05 16:22:43,834 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 16:22:44,046 - INFO - Initial mesh has 47151 points and 91898 faces.
2024-11-05 16:22:44,046 - INFO - Current memory usage: 1069.83 MB
2024-11-05 16:22:44,347 - INFO - Decimated mesh has 24225 points and 45949 faces.
2024-11-05 16:22:44,347 - INFO - Current memory usage: 1107.84 MB
2024-11-05 16:22:44,356 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 16:22:44,505 - INFO - Initial mesh has 145698 points and 292686 faces.
2024-11-05 16:22:44,505 - INFO - Current memory usage: 1128.81 MB
2024-11-05 16:22:45,800 - INFO - Decimated mesh has 72356 points and 146342 faces.
2024-11-05 16:22:45,800 - INFO - Current memory usage: 1231.80 MB
2024-11-05 16:22:45,808 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 16:22:46,030 - INFO - Initial mesh has 243544 points and 497238 faces.
2024-11-05 16:22:46,030 - INFO - Current memory usage: 1238.18 MB
2024-11-05 16:22:48,284 - INFO - Decimated mesh has 119103 points and 248619 faces.
2024-11-05 16:22:48,285 - INFO - Current memory usage: 1356.27 MB
2024-11-05 16:22:48,292 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 16:22:48,384 - INFO - Initial mesh has 48762 points and 99420 faces.
2024-11-05 16:22:48,384 - INFO - Current memory usage: 1358.89 MB
2024-11-05 16:22:48,718 - INFO - Decimated mesh has 23913 points and 49709 faces.
2024-11-05 16:22:48,718 - INFO - Current memory usage: 1358.89 MB
2024-11-05 16:22:48,724 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:22:49,003 - INFO - Translator(prefix=None)
2024-11-05 16:22:49,054 - INFO - awaiting runner setup
2024-11-05 16:22:49,054 - INFO - awaiting site startup
2024-11-05 16:22:49,055 - INFO - Print WSLINK_READY_MSG
2024-11-05 16:22:49,055 - INFO - Schedule auto shutdown with timout 0
2024-11-05 16:22:49,055 - INFO - awaiting running future
2024-11-05 16:22:56,914 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:22:56,919 - INFO - Current memory usage: 1360.05 MB
2024-11-05 16:22:56,924 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 16:22:57,363 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 16:22:57,509 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 16:22:57,656 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 16:22:57,803 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 16:22:57,953 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 16:22:58,113 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 16:22:58,268 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 16:22:58,422 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 16:22:58,427 - INFO - Pipeline completed successfully.
2024-11-05 16:22:58,427 - INFO - Current memory usage: 1316.79 MB
2024-11-05 16:22:58,427 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 16:22:58,441 - INFO - Computed density profiles along x and y axes.
2024-11-05 16:22:58,441 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 16:22:58,471 - INFO - Cluster 0: Score = 0 (X: 0, Y: 0)
2024-11-05 16:22:58,483 - INFO - Cluster 0: Original Sum = 22383.982421875, Normalized Sum = 518416.4375
2024-11-05 16:22:58,512 - INFO - Cluster 1: Score = 0 (X: 0, Y: 0)
2024-11-05 16:22:58,544 - INFO - Cluster 1: Original Sum = 36149.25, Normalized Sum = -1613922.0
2024-11-05 16:22:58,571 - INFO - Cluster 2: Score = 0 (X: 0, Y: 0)
2024-11-05 16:22:58,599 - INFO - Cluster 2: Original Sum = 75970.1015625, Normalized Sum = 915132.0625
2024-11-05 16:22:58,626 - INFO - Cluster 3: Score = 0 (X: 0, Y: 0)
2024-11-05 16:22:58,638 - INFO - Cluster 3: Original Sum = 62718.70703125, Normalized Sum = 1506924.0
2024-11-05 16:22:58,638 - INFO - Good cluster identified as Cluster 0 with score 0.
2024-11-05 16:22:59,408 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 16:22:59,408 - INFO - Removing eyes from the good cluster mask.
2024-11-05 16:22:59,408 - INFO - Starting eye detection using connected components analysis.
2024-11-05 16:22:59,481 - INFO - Number of connected components found: 1261
2024-11-05 16:23:52,164 - INFO - Detected potential eye at centroid: (50.33444722918407, 113.38735728209413, 58.9766081871345) with Volume: 3591.0 and Sphericity: 0.84
2024-11-05 16:24:23,507 - INFO - Logging initiated.
2024-11-05 16:24:23,507 - INFO - Pipeline started.
2024-11-05 16:24:23,507 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 16:24:23,697 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 16:24:23,819 - INFO - Denoised image loaded.
2024-11-05 16:24:23,820 - INFO - Current memory usage: 482.11 MB
2024-11-05 16:24:23,866 - INFO - Starting intensity normalization.
2024-11-05 16:24:24,802 - INFO - Intensity normalization complete.
2024-11-05 16:24:24,802 - INFO - Current memory usage: 639.03 MB
2024-11-05 16:24:24,803 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 16:24:24,803 - INFO - Computing neighborhood statistics.
2024-11-05 16:24:25,292 - INFO - Neighborhood statistics computed.
2024-11-05 16:24:25,292 - INFO - Current memory usage: 597.14 MB
2024-11-05 16:24:25,293 - INFO - Computing z-axis value for each voxel.
2024-11-05 16:24:25,304 - INFO - Z-axis value for each voxel computed.
2024-11-05 16:24:25,305 - INFO - Current memory usage: 638.77 MB
2024-11-05 16:24:25,305 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 16:24:25,812 - INFO - Features shape: (10940800, 4)
2024-11-05 16:24:25,813 - INFO - Current memory usage: 889.30 MB
2024-11-05 16:24:25,813 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 16:24:31,367 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 16:24:38,725 - INFO - Clustering complete with spatial connectivity.
2024-11-05 16:24:38,726 - INFO - Current memory usage: 1505.06 MB
2024-11-05 16:24:38,773 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 16:24:38,773 - INFO - Current memory usage: 920.75 MB
2024-11-05 16:24:38,788 - INFO - Processing Cluster 0.
2024-11-05 16:24:38,807 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-05 16:24:40,206 - INFO - Cluster 0: Refined voxel count = 118908.
2024-11-05 16:24:40,234 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 16:24:40,289 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-05 16:24:40,289 - INFO - Processing Cluster 1.
2024-11-05 16:24:40,313 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-05 16:24:42,125 - INFO - Cluster 1: Refined voxel count = 6950404.
2024-11-05 16:24:42,161 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 16:24:42,248 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-05 16:24:42,248 - INFO - Processing Cluster 2.
2024-11-05 16:24:42,268 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-05 16:24:44,125 - INFO - Cluster 2: Refined voxel count = 2731631.
2024-11-05 16:24:44,158 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 16:24:44,238 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-05 16:24:44,238 - INFO - Processing Cluster 3.
2024-11-05 16:24:44,261 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-05 16:24:46,134 - INFO - Cluster 3: Refined voxel count = 183320.
2024-11-05 16:24:46,158 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 16:24:46,219 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-05 16:24:46,219 - INFO - CSF is identified as cluster 1.
2024-11-05 16:24:46,220 - INFO - Starting visualization with PyVista.
2024-11-05 16:24:47,001 - INFO - Adding Original MRI volume.
2024-11-05 16:24:47,326 - INFO - Adding Denoised MRI volume.
2024-11-05 16:24:47,601 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 16:24:47,826 - INFO - Initial mesh has 47151 points and 91898 faces.
2024-11-05 16:24:47,827 - INFO - Current memory usage: 1068.89 MB
2024-11-05 16:24:48,430 - INFO - Decimated mesh has 24225 points and 45949 faces.
2024-11-05 16:24:48,430 - INFO - Current memory usage: 1106.97 MB
2024-11-05 16:24:48,441 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 16:24:48,746 - INFO - Initial mesh has 145698 points and 292686 faces.
2024-11-05 16:24:48,747 - INFO - Current memory usage: 1127.35 MB
2024-11-05 16:24:50,563 - INFO - Decimated mesh has 72356 points and 146342 faces.
2024-11-05 16:24:50,563 - INFO - Current memory usage: 1235.52 MB
2024-11-05 16:24:50,572 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 16:24:50,793 - INFO - Initial mesh has 243544 points and 497238 faces.
2024-11-05 16:24:50,794 - INFO - Current memory usage: 1240.98 MB
2024-11-05 16:24:53,248 - INFO - Decimated mesh has 119103 points and 248619 faces.
2024-11-05 16:24:53,248 - INFO - Current memory usage: 1356.66 MB
2024-11-05 16:24:53,257 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 16:24:53,362 - INFO - Initial mesh has 48762 points and 99420 faces.
2024-11-05 16:24:53,363 - INFO - Current memory usage: 1358.91 MB
2024-11-05 16:24:53,862 - INFO - Decimated mesh has 23913 points and 49709 faces.
2024-11-05 16:24:53,862 - INFO - Current memory usage: 1358.91 MB
2024-11-05 16:24:53,871 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:24:54,213 - INFO - Translator(prefix=None)
2024-11-05 16:24:54,281 - INFO - awaiting runner setup
2024-11-05 16:24:54,281 - INFO - awaiting site startup
2024-11-05 16:24:54,282 - INFO - Print WSLINK_READY_MSG
2024-11-05 16:24:54,282 - INFO - Schedule auto shutdown with timout 0
2024-11-05 16:24:54,282 - INFO - awaiting running future
2024-11-05 16:25:05,322 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:25:05,326 - INFO - Current memory usage: 1370.55 MB
2024-11-05 16:25:05,332 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 16:25:05,822 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 16:25:06,081 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 16:25:06,314 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 16:25:06,549 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 16:25:06,779 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 16:25:06,989 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 16:25:07,199 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 16:25:07,403 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 16:25:07,410 - INFO - Pipeline completed successfully.
2024-11-05 16:25:07,410 - INFO - Current memory usage: 1327.83 MB
2024-11-05 16:25:07,411 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 16:25:07,427 - INFO - Computed density profiles along x and y axes.
2024-11-05 16:25:07,428 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 16:25:08,012 - INFO - Cluster 0: Score = 6040.328254699707 (X: 2600.102584838867, Y: 3440.22566986084)
2024-11-05 16:25:08,028 - INFO - Cluster 0: Original Sum = 22383.982421875, Normalized Sum = 518416.4375
2024-11-05 16:25:08,742 - INFO - Cluster 1: Score = 5147.535820007324 (X: 3116.1955184936523, Y: 2031.3403015136719)
2024-11-05 16:25:08,812 - INFO - Cluster 1: Original Sum = 36149.25, Normalized Sum = -1613922.0
2024-11-05 16:25:09,722 - INFO - Cluster 2: Score = 19902.266479492188 (X: 8875.729888916016, Y: 11026.536590576172)
2024-11-05 16:25:09,778 - INFO - Cluster 2: Original Sum = 75970.1015625, Normalized Sum = 915132.0625
2024-11-05 16:25:10,712 - INFO - Cluster 3: Score = 17884.565338134766 (X: 8019.172798156738, Y: 9865.392539978027)
2024-11-05 16:25:10,735 - INFO - Cluster 3: Original Sum = 62718.70703125, Normalized Sum = 1506924.0
2024-11-05 16:25:10,735 - INFO - Good cluster identified as Cluster 2 with score 19902.266479492188.
2024-11-05 16:25:12,665 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 16:25:12,665 - INFO - Removing eyes from the good cluster mask.
2024-11-05 16:25:12,666 - INFO - Starting eye detection using connected components analysis.
2024-11-05 16:25:12,884 - INFO - Number of connected components found: 1247
2024-11-05 16:27:34,890 - INFO - Logging initiated.
2024-11-05 16:27:34,890 - INFO - Pipeline started.
2024-11-05 16:27:34,890 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 16:27:35,159 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 16:27:35,302 - INFO - Denoised image loaded.
2024-11-05 16:27:35,303 - INFO - Current memory usage: 482.71 MB
2024-11-05 16:27:35,352 - INFO - Starting intensity normalization.
2024-11-05 16:27:36,514 - INFO - Intensity normalization complete.
2024-11-05 16:27:36,514 - INFO - Current memory usage: 639.45 MB
2024-11-05 16:27:36,516 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 16:27:36,516 - INFO - Computing neighborhood statistics.
2024-11-05 16:27:36,978 - INFO - Neighborhood statistics computed.
2024-11-05 16:27:36,979 - INFO - Current memory usage: 597.57 MB
2024-11-05 16:27:36,979 - INFO - Computing z-axis value for each voxel.
2024-11-05 16:27:36,997 - INFO - Z-axis value for each voxel computed.
2024-11-05 16:27:36,998 - INFO - Current memory usage: 639.20 MB
2024-11-05 16:27:36,998 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 16:27:37,601 - INFO - Features shape: (10940800, 4)
2024-11-05 16:27:37,602 - INFO - Current memory usage: 889.51 MB
2024-11-05 16:27:37,602 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 16:27:53,214 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 16:27:59,180 - INFO - Clustering complete with spatial connectivity.
2024-11-05 16:27:59,181 - INFO - Current memory usage: 1456.24 MB
2024-11-05 16:27:59,249 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 16:27:59,250 - INFO - Current memory usage: 871.94 MB
2024-11-05 16:27:59,271 - INFO - Processing Cluster 0.
2024-11-05 16:27:59,292 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-05 16:28:01,224 - INFO - Cluster 0: Refined voxel count = 118908.
2024-11-05 16:28:01,253 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 16:28:01,319 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-05 16:28:01,320 - INFO - Processing Cluster 1.
2024-11-05 16:28:01,357 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-05 16:28:03,523 - INFO - Cluster 1: Refined voxel count = 6950404.
2024-11-05 16:28:03,547 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 16:28:03,649 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-05 16:28:03,650 - INFO - Processing Cluster 2.
2024-11-05 16:28:03,673 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-05 16:28:06,854 - INFO - Cluster 2: Refined voxel count = 2731631.
2024-11-05 16:28:06,892 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 16:28:07,007 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-05 16:28:07,009 - INFO - Processing Cluster 3.
2024-11-05 16:28:07,042 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-05 16:28:09,519 - INFO - Cluster 3: Refined voxel count = 183320.
2024-11-05 16:28:09,543 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 16:28:09,597 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-05 16:28:09,598 - INFO - CSF is identified as cluster 1.
2024-11-05 16:28:09,598 - INFO - Starting visualization with PyVista.
2024-11-05 16:28:10,661 - INFO - Adding Original MRI volume.
2024-11-05 16:28:11,124 - INFO - Adding Denoised MRI volume.
2024-11-05 16:28:11,561 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 16:28:12,420 - INFO - Initial mesh has 47151 points and 91898 faces.
2024-11-05 16:28:12,421 - INFO - Current memory usage: 1027.12 MB
2024-11-05 16:28:13,258 - INFO - Decimated mesh has 24225 points and 45949 faces.
2024-11-05 16:28:13,259 - INFO - Current memory usage: 1065.17 MB
2024-11-05 16:28:13,277 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 16:28:13,761 - INFO - Initial mesh has 145698 points and 292686 faces.
2024-11-05 16:28:13,762 - INFO - Current memory usage: 1086.32 MB
2024-11-05 16:28:16,868 - INFO - Decimated mesh has 72356 points and 146342 faces.
2024-11-05 16:28:16,869 - INFO - Current memory usage: 1193.07 MB
2024-11-05 16:28:16,890 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 16:28:17,514 - INFO - Initial mesh has 243544 points and 497238 faces.
2024-11-05 16:28:17,515 - INFO - Current memory usage: 1199.38 MB
2024-11-05 16:28:21,684 - INFO - Decimated mesh has 119103 points and 248619 faces.
2024-11-05 16:28:21,685 - INFO - Current memory usage: 1316.09 MB
2024-11-05 16:28:21,694 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 16:28:21,896 - INFO - Initial mesh has 48762 points and 99420 faces.
2024-11-05 16:28:21,897 - INFO - Current memory usage: 1317.34 MB
2024-11-05 16:28:22,794 - INFO - Decimated mesh has 23913 points and 49709 faces.
2024-11-05 16:28:22,795 - INFO - Current memory usage: 1317.34 MB
2024-11-05 16:28:22,811 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:28:23,372 - INFO - Translator(prefix=None)
2024-11-05 16:28:23,504 - INFO - awaiting runner setup
2024-11-05 16:28:23,506 - INFO - awaiting site startup
2024-11-05 16:28:23,507 - INFO - Print WSLINK_READY_MSG
2024-11-05 16:28:23,507 - INFO - Schedule auto shutdown with timout 0
2024-11-05 16:28:23,507 - INFO - awaiting running future
2024-11-05 16:28:38,810 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:28:38,817 - INFO - Current memory usage: 1339.30 MB
2024-11-05 16:28:38,826 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 16:28:39,394 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 16:28:39,642 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 16:28:39,882 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 16:28:40,129 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 16:28:40,371 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 16:28:40,610 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 16:28:40,835 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 16:28:41,054 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 16:28:41,061 - INFO - Pipeline completed successfully.
2024-11-05 16:28:41,062 - INFO - Current memory usage: 1296.45 MB
2024-11-05 16:28:41,062 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 16:28:41,080 - INFO - Computed density profiles along x and y axes.
2024-11-05 16:28:41,081 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 16:28:41,758 - INFO - Cluster 0: Score = 0 (X: 0, Y: 0)
2024-11-05 16:28:41,775 - INFO - Cluster 0: Original Sum = 22383.982421875, Normalized Sum = 518416.4375
2024-11-05 16:28:42,641 - INFO - Cluster 1: Score = 0 (X: 0, Y: 0)
2024-11-05 16:28:42,707 - INFO - Cluster 1: Original Sum = 36149.25, Normalized Sum = -1613922.0
2024-11-05 16:28:43,467 - INFO - Cluster 2: Score = 0 (X: 0, Y: 0)
2024-11-05 16:28:43,505 - INFO - Cluster 2: Original Sum = 75970.1015625, Normalized Sum = 915132.0625
2024-11-05 16:28:44,169 - INFO - Cluster 3: Score = 0 (X: 0, Y: 0)
2024-11-05 16:28:44,184 - INFO - Cluster 3: Original Sum = 62718.70703125, Normalized Sum = 1506924.0
2024-11-05 16:28:44,184 - INFO - Good cluster identified as Cluster 0 with score 0.
2024-11-05 16:28:45,805 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 16:28:45,805 - INFO - Removing eyes from the good cluster mask.
2024-11-05 16:28:45,805 - INFO - Starting eye detection using connected components analysis.
2024-11-05 16:28:45,919 - INFO - Number of connected components found: 1261
2024-11-05 16:29:45,597 - INFO - Detected potential eye at centroid: (50.33444722918407, 113.38735728209413, 58.9766081871345) with Volume: 3591.0 and Sphericity: 0.84
2024-11-05 16:32:34,697 - INFO - Logging initiated.
2024-11-05 16:32:34,697 - INFO - Pipeline started.
2024-11-05 16:32:34,697 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 16:32:34,849 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 16:32:34,958 - INFO - Denoised image loaded.
2024-11-05 16:32:34,959 - INFO - Current memory usage: 482.36 MB
2024-11-05 16:32:34,999 - INFO - Starting intensity normalization.
2024-11-05 16:32:35,501 - INFO - Intensity normalization complete.
2024-11-05 16:32:35,502 - INFO - Current memory usage: 639.20 MB
2024-11-05 16:32:35,503 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 16:32:35,503 - INFO - Computing neighborhood statistics.
2024-11-05 16:32:35,828 - INFO - Neighborhood statistics computed.
2024-11-05 16:32:35,828 - INFO - Current memory usage: 597.32 MB
2024-11-05 16:32:35,828 - INFO - Computing z-axis value for each voxel.
2024-11-05 16:32:35,844 - INFO - Z-axis value for each voxel computed.
2024-11-05 16:32:35,844 - INFO - Current memory usage: 638.94 MB
2024-11-05 16:32:35,844 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 16:32:36,165 - INFO - Features shape: (10940800, 4)
2024-11-05 16:32:36,166 - INFO - Current memory usage: 889.48 MB
2024-11-05 16:32:36,166 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 16:32:38,668 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 16:32:42,437 - INFO - Clustering complete with spatial connectivity.
2024-11-05 16:32:42,437 - INFO - Current memory usage: 1523.01 MB
2024-11-05 16:32:42,465 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 16:32:42,466 - INFO - Current memory usage: 938.71 MB
2024-11-05 16:32:42,472 - INFO - Processing Cluster 0.
2024-11-05 16:32:42,484 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-05 16:32:43,281 - INFO - Cluster 0: Refined voxel count = 118908.
2024-11-05 16:32:43,304 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 16:32:43,345 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-05 16:32:43,345 - INFO - Processing Cluster 1.
2024-11-05 16:32:43,362 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-05 16:32:44,170 - INFO - Cluster 1: Refined voxel count = 6950404.
2024-11-05 16:32:44,191 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 16:32:44,247 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-05 16:32:44,247 - INFO - Processing Cluster 2.
2024-11-05 16:32:44,262 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-05 16:32:45,072 - INFO - Cluster 2: Refined voxel count = 2731631.
2024-11-05 16:32:45,094 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 16:32:45,156 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-05 16:32:45,156 - INFO - Processing Cluster 3.
2024-11-05 16:32:45,169 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-05 16:32:45,934 - INFO - Cluster 3: Refined voxel count = 183320.
2024-11-05 16:32:45,954 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 16:32:45,988 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-05 16:32:45,989 - INFO - CSF is identified as cluster 1.
2024-11-05 16:32:45,989 - INFO - Starting visualization with PyVista.
2024-11-05 16:32:46,681 - INFO - Adding Original MRI volume.
2024-11-05 16:32:46,930 - INFO - Adding Denoised MRI volume.
2024-11-05 16:32:47,142 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 16:32:47,254 - INFO - Initial mesh has 47151 points and 91898 faces.
2024-11-05 16:32:47,255 - INFO - Current memory usage: 1084.40 MB
2024-11-05 16:32:47,633 - INFO - Decimated mesh has 24225 points and 45949 faces.
2024-11-05 16:32:47,633 - INFO - Current memory usage: 1122.48 MB
2024-11-05 16:32:47,642 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 16:32:47,819 - INFO - Initial mesh has 145698 points and 292686 faces.
2024-11-05 16:32:47,819 - INFO - Current memory usage: 1143.18 MB
2024-11-05 16:32:49,288 - INFO - Decimated mesh has 72356 points and 146342 faces.
2024-11-05 16:32:49,289 - INFO - Current memory usage: 1249.38 MB
2024-11-05 16:32:49,298 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 16:32:49,534 - INFO - Initial mesh has 243544 points and 497238 faces.
2024-11-05 16:32:49,534 - INFO - Current memory usage: 1256.05 MB
2024-11-05 16:32:52,244 - INFO - Decimated mesh has 119103 points and 248619 faces.
2024-11-05 16:32:52,244 - INFO - Current memory usage: 1372.23 MB
2024-11-05 16:32:52,252 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 16:32:52,354 - INFO - Initial mesh has 48762 points and 99420 faces.
2024-11-05 16:32:52,354 - INFO - Current memory usage: 1373.73 MB
2024-11-05 16:32:52,933 - INFO - Decimated mesh has 23913 points and 49709 faces.
2024-11-05 16:32:52,934 - INFO - Current memory usage: 1373.73 MB
2024-11-05 16:32:52,948 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:32:53,304 - INFO - Translator(prefix=None)
2024-11-05 16:32:53,363 - INFO - awaiting runner setup
2024-11-05 16:32:53,363 - INFO - awaiting site startup
2024-11-05 16:32:53,364 - INFO - Print WSLINK_READY_MSG
2024-11-05 16:32:53,364 - INFO - Schedule auto shutdown with timout 0
2024-11-05 16:32:53,364 - INFO - awaiting running future
2024-11-05 16:33:04,306 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:33:04,314 - INFO - Current memory usage: 1365.12 MB
2024-11-05 16:33:04,321 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 16:33:04,797 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 16:33:04,985 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 16:33:05,166 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 16:33:05,344 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 16:33:05,559 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 16:33:05,762 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 16:33:05,960 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 16:33:06,155 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 16:33:06,160 - INFO - Pipeline completed successfully.
2024-11-05 16:33:06,161 - INFO - Current memory usage: 1322.82 MB
2024-11-05 16:33:06,161 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 16:33:06,177 - INFO - Computed density profiles along x and y axes.
2024-11-05 16:33:06,177 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 16:33:06,757 - INFO - Cluster 0: Score = 2371.1914825439453 (X: 802.0449523925781, Y: 1569.1465301513672)
2024-11-05 16:33:06,771 - INFO - Cluster 0: Original Sum = 22383.982421875, Normalized Sum = 518416.4375
2024-11-05 16:33:07,410 - INFO - Cluster 1: Score = 1279.0048828125 (X: 213.00057983398438, Y: 1066.0043029785156)
2024-11-05 16:33:07,453 - INFO - Cluster 1: Original Sum = 36149.25, Normalized Sum = -1613922.0
2024-11-05 16:33:08,138 - INFO - Cluster 2: Score = 6011.696212768555 (X: 4216.65071105957, Y: 1795.0455017089844)
2024-11-05 16:33:08,176 - INFO - Cluster 2: Original Sum = 75970.1015625, Normalized Sum = 915132.0625
2024-11-05 16:33:08,826 - INFO - Cluster 3: Score = 3824.65771484375 (X: 1939.882568359375, Y: 1884.775146484375)
2024-11-05 16:33:08,843 - INFO - Cluster 3: Original Sum = 62718.70703125, Normalized Sum = 1506924.0
2024-11-05 16:33:08,843 - INFO - Good cluster identified as Cluster 2 with score 6011.696212768555.
2024-11-05 16:33:10,088 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 16:33:10,089 - INFO - Removing eyes from the good cluster mask.
2024-11-05 16:33:10,089 - INFO - Starting eye detection using connected components analysis.
2024-11-05 16:33:10,235 - INFO - Number of connected components found: 1247
2024-11-05 16:35:53,611 - INFO - Logging initiated.
2024-11-05 16:35:53,612 - INFO - Pipeline started.
2024-11-05 16:35:53,612 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 16:35:53,777 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 16:35:53,881 - INFO - Denoised image loaded.
2024-11-05 16:35:53,882 - INFO - Current memory usage: 482.83 MB
2024-11-05 16:35:53,928 - INFO - Starting intensity normalization.
2024-11-05 16:35:54,488 - INFO - Intensity normalization complete.
2024-11-05 16:35:54,488 - INFO - Current memory usage: 639.67 MB
2024-11-05 16:35:54,489 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 16:35:54,489 - INFO - Computing neighborhood statistics.
2024-11-05 16:35:54,795 - INFO - Neighborhood statistics computed.
2024-11-05 16:35:54,795 - INFO - Current memory usage: 597.79 MB
2024-11-05 16:35:54,795 - INFO - Computing z-axis value for each voxel.
2024-11-05 16:35:54,809 - INFO - Z-axis value for each voxel computed.
2024-11-05 16:35:54,810 - INFO - Current memory usage: 639.41 MB
2024-11-05 16:35:54,810 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 16:35:55,214 - INFO - Features shape: (10940800, 4)
2024-11-05 16:35:55,214 - INFO - Current memory usage: 889.95 MB
2024-11-05 16:35:55,214 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 16:35:58,631 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 16:36:04,735 - INFO - Clustering complete with spatial connectivity.
2024-11-05 16:36:04,736 - INFO - Current memory usage: 1497.39 MB
2024-11-05 16:36:04,781 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 16:36:04,782 - INFO - Current memory usage: 913.09 MB
2024-11-05 16:36:04,796 - INFO - Processing Cluster 0.
2024-11-05 16:36:04,813 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-05 16:36:06,126 - INFO - Cluster 0: Refined voxel count = 118908.
2024-11-05 16:36:06,165 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 16:36:06,217 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-05 16:36:06,217 - INFO - Processing Cluster 1.
2024-11-05 16:36:06,236 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-05 16:36:07,405 - INFO - Cluster 1: Refined voxel count = 6950404.
2024-11-05 16:36:07,431 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 16:36:07,505 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-05 16:36:07,505 - INFO - Processing Cluster 2.
2024-11-05 16:36:07,522 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-05 16:36:08,696 - INFO - Cluster 2: Refined voxel count = 2731631.
2024-11-05 16:36:08,727 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 16:36:08,778 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-05 16:36:08,778 - INFO - Processing Cluster 3.
2024-11-05 16:36:08,789 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-05 16:36:10,233 - INFO - Cluster 3: Refined voxel count = 183320.
2024-11-05 16:36:10,263 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 16:36:10,309 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-05 16:36:10,309 - INFO - CSF is identified as cluster 1.
2024-11-05 16:36:10,310 - INFO - Starting visualization with PyVista.
2024-11-05 16:36:11,120 - INFO - Adding Original MRI volume.
2024-11-05 16:36:11,340 - INFO - Adding Denoised MRI volume.
2024-11-05 16:36:11,668 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 16:36:12,008 - INFO - Initial mesh has 47151 points and 91898 faces.
2024-11-05 16:36:12,009 - INFO - Current memory usage: 1064.64 MB
2024-11-05 16:36:12,458 - INFO - Decimated mesh has 24225 points and 45949 faces.
2024-11-05 16:36:12,458 - INFO - Current memory usage: 1100.27 MB
2024-11-05 16:36:12,468 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 16:36:12,671 - INFO - Initial mesh has 145698 points and 292686 faces.
2024-11-05 16:36:12,671 - INFO - Current memory usage: 1121.14 MB
2024-11-05 16:36:14,332 - INFO - Decimated mesh has 72356 points and 146342 faces.
2024-11-05 16:36:14,332 - INFO - Current memory usage: 1216.39 MB
2024-11-05 16:36:14,339 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 16:36:14,581 - INFO - Initial mesh has 243544 points and 497238 faces.
2024-11-05 16:36:14,581 - INFO - Current memory usage: 1224.41 MB
2024-11-05 16:36:17,560 - INFO - Decimated mesh has 119103 points and 248619 faces.
2024-11-05 16:36:17,560 - INFO - Current memory usage: 1344.81 MB
2024-11-05 16:36:17,572 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 16:36:17,691 - INFO - Initial mesh has 48762 points and 99420 faces.
2024-11-05 16:36:17,691 - INFO - Current memory usage: 1347.43 MB
2024-11-05 16:36:18,140 - INFO - Decimated mesh has 23913 points and 49709 faces.
2024-11-05 16:36:18,141 - INFO - Current memory usage: 1347.43 MB
2024-11-05 16:36:18,149 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:36:18,508 - INFO - Translator(prefix=None)
2024-11-05 16:36:18,570 - INFO - awaiting runner setup
2024-11-05 16:36:18,571 - INFO - awaiting site startup
2024-11-05 16:36:18,571 - INFO - Print WSLINK_READY_MSG
2024-11-05 16:36:18,571 - INFO - Schedule auto shutdown with timout 0
2024-11-05 16:36:18,571 - INFO - awaiting running future
2024-11-05 16:36:29,354 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:36:29,360 - INFO - Current memory usage: 1329.55 MB
2024-11-05 16:36:29,368 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 16:36:30,102 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 16:36:30,387 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 16:36:30,657 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 16:36:30,935 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 16:36:31,211 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 16:36:31,489 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 16:36:31,731 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 16:36:31,950 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 16:36:31,956 - INFO - Pipeline completed successfully.
2024-11-05 16:36:31,957 - INFO - Current memory usage: 1287.64 MB
2024-11-05 16:36:31,957 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 16:36:31,973 - INFO - Computed density profiles along x and y axes.
2024-11-05 16:36:31,973 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 16:36:32,543 - INFO - Cluster 0: Score = 2872.0933990478516 (X: 1302.9468688964844, Y: 1569.1465301513672)
2024-11-05 16:36:32,556 - INFO - Cluster 0: Original Sum = 22383.982421875, Normalized Sum = 518416.4375
2024-11-05 16:36:33,223 - INFO - Cluster 1: Score = 1279.0048828125 (X: 213.00057983398438, Y: 1066.0043029785156)
2024-11-05 16:36:33,271 - INFO - Cluster 1: Original Sum = 36149.25, Normalized Sum = -1613922.0
2024-11-05 16:36:33,917 - INFO - Cluster 2: Score = 18583.93846130371 (X: 7557.401870727539, Y: 11026.536590576172)
2024-11-05 16:36:33,954 - INFO - Cluster 2: Original Sum = 75970.1015625, Normalized Sum = 915132.0625
2024-11-05 16:36:34,587 - INFO - Cluster 3: Score = 16607.08380126953 (X: 7712.235534667969, Y: 8894.848266601562)
2024-11-05 16:36:34,603 - INFO - Cluster 3: Original Sum = 62718.70703125, Normalized Sum = 1506924.0
2024-11-05 16:36:34,603 - INFO - Good cluster identified as Cluster 2 with score 18583.93846130371.
2024-11-05 16:36:36,153 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 16:36:36,153 - INFO - Removing eyes from the good cluster mask.
2024-11-05 16:36:36,153 - INFO - Starting eye detection using connected components analysis.
2024-11-05 16:36:36,383 - INFO - Number of connected components found: 1247
2024-11-05 16:41:54,013 - WARNING - Expected to detect 2 eyes, but found 0. Skipping eye removal.
2024-11-05 16:41:54,017 - INFO - Detected eyes at centroids: []
2024-11-05 16:41:56,051 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 16:41:56,051 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 16:41:56,077 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 16:41:56,077 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 16:41:56,085 - INFO - Total CSF Volume: 2605091.6618186496 mm³
2024-11-05 16:41:56,085 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 16:41:56,085 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 16:41:59,556 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 16:42:00,557 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 16:42:00,557 - INFO - Visualization process completed.
2024-11-05 16:42:00,558 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 16:42:00,558 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 16:42:00,559 - INFO - Final cleanup completed.
2024-11-05 16:42:00,559 - INFO - Current memory usage: 1246.02 MB
2024-11-05 16:54:28,811 - INFO - Logging initiated.
2024-11-05 16:54:28,812 - INFO - Pipeline started.
2024-11-05 16:54:28,812 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 16:54:29,005 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 16:54:29,139 - INFO - Denoised image loaded.
2024-11-05 16:54:29,140 - INFO - Current memory usage: 483.03 MB
2024-11-05 16:54:29,220 - INFO - Starting intensity normalization.
2024-11-05 16:54:29,700 - INFO - Intensity normalization complete.
2024-11-05 16:54:29,700 - INFO - Current memory usage: 639.62 MB
2024-11-05 16:54:29,701 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 16:54:29,701 - INFO - Computing neighborhood statistics.
2024-11-05 16:54:29,991 - INFO - Neighborhood statistics computed.
2024-11-05 16:54:29,992 - INFO - Current memory usage: 597.73 MB
2024-11-05 16:54:29,992 - INFO - Computing z-axis value for each voxel.
2024-11-05 16:54:30,000 - INFO - Z-axis value for each voxel computed.
2024-11-05 16:54:30,001 - INFO - Current memory usage: 639.36 MB
2024-11-05 16:54:30,001 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 16:54:30,340 - INFO - Features shape: (10940800, 4)
2024-11-05 16:54:30,340 - INFO - Current memory usage: 889.89 MB
2024-11-05 16:54:30,340 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 16:54:32,982 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 16:54:36,580 - INFO - Clustering complete with spatial connectivity.
2024-11-05 16:54:36,581 - INFO - Current memory usage: 1484.55 MB
2024-11-05 16:54:36,616 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 16:54:36,617 - INFO - Current memory usage: 900.25 MB
2024-11-05 16:54:36,628 - INFO - Processing Cluster 0.
2024-11-05 16:54:36,650 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-05 16:54:37,739 - INFO - Cluster 0: Refined voxel count = 118908.
2024-11-05 16:54:37,768 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 16:54:37,795 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-05 16:54:37,795 - INFO - Processing Cluster 1.
2024-11-05 16:54:37,805 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-05 16:54:38,768 - INFO - Cluster 1: Refined voxel count = 6950404.
2024-11-05 16:54:38,787 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 16:54:38,826 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-05 16:54:38,826 - INFO - Processing Cluster 2.
2024-11-05 16:54:38,835 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-05 16:54:39,740 - INFO - Cluster 2: Refined voxel count = 2731631.
2024-11-05 16:54:39,765 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 16:54:39,807 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-05 16:54:39,807 - INFO - Processing Cluster 3.
2024-11-05 16:54:39,816 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-05 16:54:40,639 - INFO - Cluster 3: Refined voxel count = 183320.
2024-11-05 16:54:40,662 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 16:54:40,687 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-05 16:54:40,688 - INFO - CSF is identified as cluster 1.
2024-11-05 16:54:40,688 - INFO - Starting visualization with PyVista.
2024-11-05 16:54:41,224 - INFO - Adding Original MRI volume.
2024-11-05 16:54:41,371 - INFO - Adding Denoised MRI volume.
2024-11-05 16:54:41,487 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 16:54:41,697 - INFO - Initial mesh has 47151 points and 91898 faces.
2024-11-05 16:54:41,697 - INFO - Current memory usage: 1052.55 MB
2024-11-05 16:54:41,992 - INFO - Decimated mesh has 24225 points and 45949 faces.
2024-11-05 16:54:41,992 - INFO - Current memory usage: 1090.61 MB
2024-11-05 16:54:42,000 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 16:54:42,149 - INFO - Initial mesh has 145698 points and 292686 faces.
2024-11-05 16:54:42,149 - INFO - Current memory usage: 1110.32 MB
2024-11-05 16:54:43,321 - INFO - Decimated mesh has 72356 points and 146342 faces.
2024-11-05 16:54:43,322 - INFO - Current memory usage: 1217.82 MB
2024-11-05 16:54:43,329 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 16:54:43,542 - INFO - Initial mesh has 243544 points and 497238 faces.
2024-11-05 16:54:43,543 - INFO - Current memory usage: 1224.00 MB
2024-11-05 16:54:45,947 - INFO - Decimated mesh has 119103 points and 248619 faces.
2024-11-05 16:54:45,948 - INFO - Current memory usage: 1329.75 MB
2024-11-05 16:54:45,956 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 16:54:46,048 - INFO - Initial mesh has 48762 points and 99420 faces.
2024-11-05 16:54:46,048 - INFO - Current memory usage: 1332.38 MB
2024-11-05 16:54:46,406 - INFO - Decimated mesh has 23913 points and 49709 faces.
2024-11-05 16:54:46,406 - INFO - Current memory usage: 1332.38 MB
2024-11-05 16:54:46,412 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:54:46,728 - INFO - Translator(prefix=None)
2024-11-05 16:54:46,783 - INFO - awaiting runner setup
2024-11-05 16:54:46,783 - INFO - awaiting site startup
2024-11-05 16:54:46,783 - INFO - Print WSLINK_READY_MSG
2024-11-05 16:54:46,783 - INFO - Schedule auto shutdown with timout 0
2024-11-05 16:54:46,783 - INFO - awaiting running future
2024-11-05 16:54:56,321 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:54:56,325 - INFO - Current memory usage: 1337.00 MB
2024-11-05 16:54:56,329 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 16:54:56,733 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 16:54:56,903 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 16:54:57,150 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 16:54:57,355 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 16:54:57,535 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 16:54:57,796 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 16:54:58,029 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 16:54:58,219 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 16:54:58,225 - INFO - Pipeline completed successfully.
2024-11-05 16:54:58,225 - INFO - Current memory usage: 1295.88 MB
2024-11-05 16:54:58,225 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 16:54:58,243 - INFO - Computed density profiles along x and y axes.
2024-11-05 16:54:58,243 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 16:54:58,892 - INFO - Cluster 0: Score = 1537.5284576416016 (X: 355.01763916015625, Y: 1182.5108184814453)
2024-11-05 16:54:58,906 - INFO - Cluster 0: Original Sum = 22383.982421875, Normalized Sum = 518416.4375
2024-11-05 16:54:59,535 - INFO - Cluster 1: Score = 0 (X: 0, Y: 0)
2024-11-05 16:54:59,574 - INFO - Cluster 1: Original Sum = 36149.25, Normalized Sum = -1613922.0
2024-11-05 16:55:00,132 - INFO - Cluster 2: Score = 11552.666442871094 (X: 3920.558837890625, Y: 7632.107604980469)
2024-11-05 16:55:00,173 - INFO - Cluster 2: Original Sum = 75970.1015625, Normalized Sum = 915132.0625
2024-11-05 16:55:00,766 - INFO - Cluster 3: Score = 12416.37905883789 (X: 3962.4945678710938, Y: 8453.884490966797)
2024-11-05 16:55:00,779 - INFO - Cluster 3: Original Sum = 62718.70703125, Normalized Sum = 1506924.0
2024-11-05 16:55:00,779 - INFO - Good cluster identified as Cluster 3 with score 12416.37905883789.
2024-11-05 16:55:01,810 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 16:55:01,810 - INFO - Removing eyes from the good cluster mask.
2024-11-05 16:55:01,810 - INFO - Starting eye detection using connected components analysis.
2024-11-05 16:55:01,886 - INFO - Number of connected components found: 296
2024-11-05 16:55:55,854 - WARNING - Expected to detect 2 eyes, but found 0. Skipping eye removal.
2024-11-05 16:55:55,861 - INFO - Detected eyes at centroids: []
2024-11-05 16:55:58,525 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 16:55:58,525 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 16:55:58,559 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 16:55:58,559 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 16:55:58,568 - INFO - Total CSF Volume: 174827.9337306521 mm³
2024-11-05 16:55:58,568 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 16:55:58,568 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 16:55:59,505 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 16:55:59,728 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 16:55:59,728 - INFO - Visualization process completed.
2024-11-05 16:55:59,729 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 16:55:59,730 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 16:55:59,730 - INFO - Final cleanup completed.
2024-11-05 16:55:59,730 - INFO - Current memory usage: 1119.72 MB
2024-11-05 16:57:00,726 - INFO - Logging initiated.
2024-11-05 16:57:00,726 - INFO - Pipeline started.
2024-11-05 16:57:00,726 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 16:57:00,838 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 16:57:00,920 - INFO - Denoised image loaded.
2024-11-05 16:57:00,921 - INFO - Current memory usage: 482.55 MB
2024-11-05 16:57:00,957 - INFO - Starting intensity normalization.
2024-11-05 16:57:01,496 - INFO - Intensity normalization complete.
2024-11-05 16:57:01,497 - INFO - Current memory usage: 639.39 MB
2024-11-05 16:57:01,497 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 16:57:01,498 - INFO - Computing neighborhood statistics.
2024-11-05 16:57:01,743 - INFO - Neighborhood statistics computed.
2024-11-05 16:57:01,743 - INFO - Current memory usage: 597.50 MB
2024-11-05 16:57:01,744 - INFO - Computing z-axis value for each voxel.
2024-11-05 16:57:01,750 - INFO - Z-axis value for each voxel computed.
2024-11-05 16:57:01,750 - INFO - Current memory usage: 639.13 MB
2024-11-05 16:57:01,750 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 16:57:01,933 - INFO - Features shape: (10940800, 4)
2024-11-05 16:57:01,933 - INFO - Current memory usage: 889.66 MB
2024-11-05 16:57:01,933 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 16:57:04,607 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 16:57:08,214 - INFO - Clustering complete with spatial connectivity.
2024-11-05 16:57:08,215 - INFO - Current memory usage: 1526.25 MB
2024-11-05 16:57:08,247 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 16:57:08,247 - INFO - Current memory usage: 941.95 MB
2024-11-05 16:57:08,252 - INFO - Processing Cluster 0.
2024-11-05 16:57:08,268 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-05 16:57:10,524 - INFO - Cluster 0: Refined voxel count = 24889.
2024-11-05 16:57:10,550 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 16:57:10,584 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-05 16:57:10,584 - INFO - Processing Cluster 1.
2024-11-05 16:57:10,595 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-05 16:57:13,508 - INFO - Cluster 1: Refined voxel count = 6674068.
2024-11-05 16:57:13,536 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 16:57:13,591 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-05 16:57:13,592 - INFO - Processing Cluster 2.
2024-11-05 16:57:13,603 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-05 16:57:16,324 - INFO - Cluster 2: Refined voxel count = 2099678.
2024-11-05 16:57:16,348 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 16:57:16,401 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-05 16:57:16,402 - INFO - Processing Cluster 3.
2024-11-05 16:57:16,418 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-05 16:57:19,006 - INFO - Cluster 3: Refined voxel count = 90877.
2024-11-05 16:57:19,024 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 16:57:19,053 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-05 16:57:19,053 - INFO - CSF is identified as cluster 1.
2024-11-05 16:57:19,053 - INFO - Starting visualization with PyVista.
2024-11-05 16:57:19,595 - INFO - Adding Original MRI volume.
2024-11-05 16:57:19,792 - INFO - Adding Denoised MRI volume.
2024-11-05 16:57:19,950 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 16:57:20,015 - INFO - Initial mesh has 6290 points and 12146 faces.
2024-11-05 16:57:20,015 - INFO - Current memory usage: 1084.07 MB
2024-11-05 16:57:20,056 - INFO - Decimated mesh has 3247 points and 6073 faces.
2024-11-05 16:57:20,056 - INFO - Current memory usage: 1084.49 MB
2024-11-05 16:57:20,061 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 16:57:20,173 - INFO - Initial mesh has 88185 points and 175486 faces.
2024-11-05 16:57:20,173 - INFO - Current memory usage: 1104.62 MB
2024-11-05 16:57:20,860 - INFO - Decimated mesh has 44121 points and 87742 faces.
2024-11-05 16:57:20,861 - INFO - Current memory usage: 1176.33 MB
2024-11-05 16:57:20,869 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 16:57:21,054 - INFO - Initial mesh has 149854 points and 300072 faces.
2024-11-05 16:57:21,054 - INFO - Current memory usage: 1183.20 MB
2024-11-05 16:57:22,507 - INFO - Decimated mesh has 74660 points and 150036 faces.
2024-11-05 16:57:22,508 - INFO - Current memory usage: 1265.29 MB
2024-11-05 16:57:22,515 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 16:57:22,708 - INFO - Initial mesh has 21195 points and 41950 faces.
2024-11-05 16:57:22,709 - INFO - Current memory usage: 1265.37 MB
2024-11-05 16:57:22,850 - INFO - Decimated mesh has 10707 points and 20974 faces.
2024-11-05 16:57:22,850 - INFO - Current memory usage: 1265.37 MB
2024-11-05 16:57:22,855 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:57:23,140 - INFO - Translator(prefix=None)
2024-11-05 16:57:23,211 - INFO - awaiting runner setup
2024-11-05 16:57:23,212 - INFO - awaiting site startup
2024-11-05 16:57:23,213 - INFO - Print WSLINK_READY_MSG
2024-11-05 16:57:23,213 - INFO - Schedule auto shutdown with timout 0
2024-11-05 16:57:23,213 - INFO - awaiting running future
2024-11-05 16:57:30,661 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 16:57:30,665 - INFO - Current memory usage: 1276.78 MB
2024-11-05 16:57:30,668 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 16:57:31,083 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 16:57:31,240 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 16:57:31,396 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 16:57:31,555 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 16:57:31,709 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 16:57:31,870 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 16:57:32,032 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 16:57:32,193 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 16:57:32,198 - INFO - Pipeline completed successfully.
2024-11-05 16:57:32,198 - INFO - Current memory usage: 1233.61 MB
2024-11-05 16:57:32,198 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 16:57:32,213 - INFO - Computed density profiles along x and y axes.
2024-11-05 16:57:32,213 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 16:57:32,675 - INFO - Cluster 0: Score = 249.06466674804688 (X: 249.06466674804688, Y: 0)
2024-11-05 16:57:32,681 - INFO - Cluster 0: Original Sum = 8248.6416015625, Normalized Sum = 197905.140625
2024-11-05 16:57:33,133 - INFO - Cluster 1: Score = 0 (X: 0, Y: 0)
2024-11-05 16:57:33,161 - INFO - Cluster 1: Original Sum = 33210.40625, Normalized Sum = -1587423.125
2024-11-05 16:57:33,654 - INFO - Cluster 2: Score = 8053.894454956055 (X: 1965.3965606689453, Y: 6088.497894287109)
2024-11-05 16:57:33,677 - INFO - Cluster 2: Original Sum = 62281.765625, Normalized Sum = 800933.875
2024-11-05 16:57:34,178 - INFO - Cluster 3: Score = 7224.86116027832 (X: 2609.31396484375, Y: 4615.54719543457)
2024-11-05 16:57:34,186 - INFO - Cluster 3: Original Sum = 34984.60546875, Normalized Sum = 844692.0
2024-11-05 16:57:34,186 - INFO - Good cluster identified as Cluster 2 with score 8053.894454956055.
2024-11-05 16:57:35,114 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 16:57:35,114 - INFO - Removing eyes from the good cluster mask.
2024-11-05 16:57:35,114 - INFO - Starting eye detection using connected components analysis.
2024-11-05 16:57:35,204 - INFO - Number of connected components found: 164
2024-11-05 16:57:46,200 - INFO - Detected potential eye at centroid: (72.80429594272077, 259.7601431980907, 210.45823389021479) with Volume: 1676.0 and Sphericity: 0.72
2024-11-05 16:58:12,478 - WARNING - Expected to detect 2 eyes, but found 1. Skipping eye removal.
2024-11-05 16:58:12,485 - INFO - Detected eyes at centroids: []
2024-11-05 16:58:15,368 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 16:58:15,368 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 16:58:15,390 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 16:58:15,390 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 16:58:15,397 - INFO - Total CSF Volume: 2002413.0822589358 mm³
2024-11-05 16:58:15,397 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 16:58:15,397 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 16:58:16,838 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 16:58:17,562 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 16:58:17,563 - INFO - Visualization process completed.
2024-11-05 16:58:17,564 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 16:58:17,564 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 16:58:17,564 - INFO - Final cleanup completed.
2024-11-05 16:58:17,565 - INFO - Current memory usage: 1164.62 MB
2024-11-05 17:01:57,357 - INFO - Logging initiated.
2024-11-05 17:01:57,357 - INFO - Pipeline started.
2024-11-05 17:01:57,357 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:01:57,510 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:01:57,578 - INFO - Denoised image loaded.
2024-11-05 17:01:57,579 - INFO - Current memory usage: 482.51 MB
2024-11-05 17:01:57,608 - INFO - Starting intensity normalization.
2024-11-05 17:01:58,301 - INFO - Intensity normalization complete.
2024-11-05 17:01:58,301 - INFO - Current memory usage: 639.34 MB
2024-11-05 17:01:58,302 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:01:58,302 - INFO - Computing neighborhood statistics.
2024-11-05 17:01:58,546 - INFO - Neighborhood statistics computed.
2024-11-05 17:01:58,546 - INFO - Current memory usage: 597.46 MB
2024-11-05 17:01:58,546 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:01:58,556 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:01:58,556 - INFO - Current memory usage: 639.09 MB
2024-11-05 17:01:58,556 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:01:58,834 - INFO - Features shape: (10940800, 4)
2024-11-05 17:01:58,834 - INFO - Current memory usage: 881.00 MB
2024-11-05 17:01:58,834 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 17:02:01,327 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:02:06,987 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:02:06,988 - INFO - Current memory usage: 1467.22 MB
2024-11-05 17:02:07,040 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:02:07,041 - INFO - Current memory usage: 882.91 MB
2024-11-05 17:02:07,064 - INFO - Processing Cluster 0.
2024-11-05 17:02:07,088 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-05 17:02:10,626 - INFO - Cluster 0: Refined voxel count = 24889.
2024-11-05 17:02:10,663 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:02:10,694 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-05 17:02:10,694 - INFO - Processing Cluster 1.
2024-11-05 17:02:10,707 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-05 17:02:14,235 - INFO - Cluster 1: Refined voxel count = 6674068.
2024-11-05 17:02:14,258 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:02:14,330 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-05 17:02:14,330 - INFO - Processing Cluster 2.
2024-11-05 17:02:14,345 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-05 17:02:18,220 - INFO - Cluster 2: Refined voxel count = 2099678.
2024-11-05 17:02:18,234 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:02:18,283 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-05 17:02:18,283 - INFO - Processing Cluster 3.
2024-11-05 17:02:18,294 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-05 17:02:21,129 - INFO - Cluster 3: Refined voxel count = 90877.
2024-11-05 17:02:21,148 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:02:21,186 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-05 17:02:21,186 - INFO - CSF is identified as cluster 1.
2024-11-05 17:02:21,186 - INFO - Starting visualization with PyVista.
2024-11-05 17:02:21,897 - INFO - Adding Original MRI volume.
2024-11-05 17:02:22,137 - INFO - Adding Denoised MRI volume.
2024-11-05 17:02:22,407 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:02:22,484 - INFO - Initial mesh has 6290 points and 12146 faces.
2024-11-05 17:02:22,485 - INFO - Current memory usage: 1027.21 MB
2024-11-05 17:02:22,516 - INFO - Decimated mesh has 3247 points and 6073 faces.
2024-11-05 17:02:22,516 - INFO - Current memory usage: 1027.50 MB
2024-11-05 17:02:22,521 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:02:22,920 - INFO - Initial mesh has 88185 points and 175486 faces.
2024-11-05 17:02:22,920 - INFO - Current memory usage: 1050.52 MB
2024-11-05 17:02:23,701 - INFO - Decimated mesh has 44121 points and 87742 faces.
2024-11-05 17:02:23,702 - INFO - Current memory usage: 1121.77 MB
2024-11-05 17:02:23,710 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:02:23,889 - INFO - Initial mesh has 149854 points and 300072 faces.
2024-11-05 17:02:23,889 - INFO - Current memory usage: 1132.27 MB
2024-11-05 17:02:25,290 - INFO - Decimated mesh has 74660 points and 150036 faces.
2024-11-05 17:02:25,290 - INFO - Current memory usage: 1214.52 MB
2024-11-05 17:02:25,298 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:02:25,383 - INFO - Initial mesh has 21195 points and 41950 faces.
2024-11-05 17:02:25,384 - INFO - Current memory usage: 1214.55 MB
2024-11-05 17:02:25,517 - INFO - Decimated mesh has 10707 points and 20974 faces.
2024-11-05 17:02:25,517 - INFO - Current memory usage: 1214.55 MB
2024-11-05 17:02:25,522 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:02:25,870 - INFO - Translator(prefix=None)
2024-11-05 17:02:25,930 - INFO - awaiting runner setup
2024-11-05 17:02:25,931 - INFO - awaiting site startup
2024-11-05 17:02:25,931 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:02:25,931 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:02:25,931 - INFO - awaiting running future
2024-11-05 17:02:34,862 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:02:34,868 - INFO - Current memory usage: 1220.20 MB
2024-11-05 17:02:34,873 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 17:02:35,370 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:02:35,658 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:02:35,968 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:02:36,292 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:02:36,641 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:02:36,980 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:02:37,305 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:02:37,555 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:02:37,561 - INFO - Pipeline completed successfully.
2024-11-05 17:02:37,561 - INFO - Current memory usage: 1178.19 MB
2024-11-05 17:02:37,562 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:02:37,580 - INFO - Computed density profiles along x and y axes.
2024-11-05 17:02:37,580 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 17:02:38,112 - INFO - Cluster 0: Score = 249.06466674804688 (X: 249.06466674804688, Y: 0)
2024-11-05 17:02:38,119 - INFO - Cluster 0: Original Sum = 8248.6416015625, Normalized Sum = 197905.140625
2024-11-05 17:02:38,598 - INFO - Cluster 1: Score = 0 (X: 0, Y: 0)
2024-11-05 17:02:38,624 - INFO - Cluster 1: Original Sum = 33210.40625, Normalized Sum = -1587423.125
2024-11-05 17:02:39,076 - INFO - Cluster 2: Score = 0 (X: 0, Y: 0)
2024-11-05 17:02:39,096 - INFO - Cluster 2: Original Sum = 62281.765625, Normalized Sum = 800933.875
2024-11-05 17:02:39,576 - INFO - Cluster 3: Score = 1471.6834106445312 (X: 902.3571166992188, Y: 569.3262939453125)
2024-11-05 17:02:39,584 - INFO - Cluster 3: Original Sum = 34984.60546875, Normalized Sum = 844692.0
2024-11-05 17:02:39,584 - INFO - Good cluster identified as Cluster 3 with score 1471.6834106445312.
2024-11-05 17:02:40,594 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 17:02:40,594 - INFO - Removing eyes from the good cluster mask.
2024-11-05 17:02:40,594 - INFO - Starting eye detection using connected components analysis.
2024-11-05 17:02:40,681 - INFO - Number of connected components found: 145
2024-11-05 17:03:09,996 - WARNING - Expected to detect 2 eyes, but found 0. Skipping eye removal.
2024-11-05 17:03:09,999 - INFO - Detected eyes at centroids: []
2024-11-05 17:03:12,023 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 17:03:12,024 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 17:03:12,052 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 17:03:12,052 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 17:03:12,060 - INFO - Total CSF Volume: 86667.23834628229 mm³
2024-11-05 17:03:12,060 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 17:03:12,060 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 17:03:12,317 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 17:03:12,447 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 17:03:12,448 - INFO - Visualization process completed.
2024-11-05 17:03:12,449 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:03:12,449 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:03:12,449 - INFO - Final cleanup completed.
2024-11-05 17:03:12,450 - INFO - Current memory usage: 1095.65 MB
2024-11-05 17:09:13,256 - INFO - Logging initiated.
2024-11-05 17:09:13,256 - INFO - Pipeline started.
2024-11-05 17:09:13,256 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:09:13,612 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:09:13,955 - INFO - Denoised image loaded.
2024-11-05 17:09:13,955 - INFO - Current memory usage: 480.49 MB
2024-11-05 17:09:14,157 - INFO - Starting intensity normalization.
2024-11-05 17:09:15,349 - INFO - Intensity normalization complete.
2024-11-05 17:09:15,350 - INFO - Current memory usage: 610.76 MB
2024-11-05 17:09:15,359 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:09:15,360 - INFO - Computing neighborhood statistics.
2024-11-05 17:09:15,970 - INFO - Neighborhood statistics computed.
2024-11-05 17:09:15,971 - INFO - Current memory usage: 562.90 MB
2024-11-05 17:09:15,971 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:09:15,991 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:09:15,991 - INFO - Current memory usage: 604.52 MB
2024-11-05 17:09:15,991 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:09:16,595 - INFO - Features shape: (10940800, 4)
2024-11-05 17:09:16,596 - INFO - Current memory usage: 852.06 MB
2024-11-05 17:09:16,596 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 17:09:25,476 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:09:37,759 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:09:37,761 - INFO - Current memory usage: 1454.30 MB
2024-11-05 17:09:37,837 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:09:37,838 - INFO - Current memory usage: 870.00 MB
2024-11-05 17:09:37,864 - INFO - Processing Cluster 0.
2024-11-05 17:09:37,914 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-05 17:09:46,699 - INFO - Cluster 0: Refined voxel count = 24889.
2024-11-05 17:09:46,728 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:09:46,831 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-05 17:09:46,832 - INFO - Processing Cluster 1.
2024-11-05 17:09:46,852 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-05 17:09:54,128 - INFO - Cluster 1: Refined voxel count = 6674068.
2024-11-05 17:09:54,151 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:09:54,293 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-05 17:09:54,294 - INFO - Processing Cluster 2.
2024-11-05 17:09:54,313 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-05 17:10:00,152 - INFO - Cluster 2: Refined voxel count = 2099678.
2024-11-05 17:10:00,177 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:10:00,351 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-05 17:10:00,351 - INFO - Processing Cluster 3.
2024-11-05 17:10:00,373 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-05 17:10:05,828 - INFO - Cluster 3: Refined voxel count = 90877.
2024-11-05 17:10:05,851 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:10:05,958 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-05 17:10:05,959 - INFO - CSF is identified as cluster 1.
2024-11-05 17:10:05,959 - INFO - Starting visualization with PyVista.
2024-11-05 17:10:06,866 - INFO - Adding Original MRI volume.
2024-11-05 17:10:07,140 - INFO - Adding Denoised MRI volume.
2024-11-05 17:10:07,469 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:10:07,612 - INFO - Initial mesh has 6290 points and 12146 faces.
2024-11-05 17:10:07,612 - INFO - Current memory usage: 1013.51 MB
2024-11-05 17:10:07,665 - INFO - Decimated mesh has 3247 points and 6073 faces.
2024-11-05 17:10:07,665 - INFO - Current memory usage: 1013.95 MB
2024-11-05 17:10:07,673 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:10:08,153 - INFO - Initial mesh has 88185 points and 175486 faces.
2024-11-05 17:10:08,153 - INFO - Current memory usage: 1034.05 MB
2024-11-05 17:10:09,161 - INFO - Decimated mesh has 44121 points and 87742 faces.
2024-11-05 17:10:09,161 - INFO - Current memory usage: 1104.70 MB
2024-11-05 17:10:09,171 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:10:09,465 - INFO - Initial mesh has 149854 points and 300072 faces.
2024-11-05 17:10:09,465 - INFO - Current memory usage: 1105.85 MB
2024-11-05 17:10:11,412 - INFO - Decimated mesh has 74660 points and 150036 faces.
2024-11-05 17:10:11,413 - INFO - Current memory usage: 1194.11 MB
2024-11-05 17:10:11,421 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:10:11,543 - INFO - Initial mesh has 21195 points and 41950 faces.
2024-11-05 17:10:11,543 - INFO - Current memory usage: 1193.88 MB
2024-11-05 17:10:11,725 - INFO - Decimated mesh has 10707 points and 20974 faces.
2024-11-05 17:10:11,725 - INFO - Current memory usage: 1193.88 MB
2024-11-05 17:10:11,732 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:10:12,192 - INFO - Translator(prefix=None)
2024-11-05 17:10:12,274 - INFO - awaiting runner setup
2024-11-05 17:10:12,274 - INFO - awaiting site startup
2024-11-05 17:10:12,275 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:10:12,275 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:10:12,275 - INFO - awaiting running future
2024-11-05 17:10:27,019 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:10:27,053 - INFO - Current memory usage: 1126.04 MB
2024-11-05 17:10:27,069 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 17:10:27,675 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:10:27,904 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:10:28,139 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:10:28,452 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:10:28,697 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:10:28,913 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:10:29,235 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:10:29,460 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:10:29,467 - INFO - Pipeline completed successfully.
2024-11-05 17:10:29,468 - INFO - Current memory usage: 1093.57 MB
2024-11-05 17:10:29,468 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:10:29,487 - INFO - Computed density profiles along x and y axes.
2024-11-05 17:10:29,487 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 17:10:30,111 - INFO - Cluster 0: Score = 249.06466674804688 (X: 249.06466674804688, Y: 0)
2024-11-05 17:10:30,120 - INFO - Cluster 0: Original Sum = 8248.6416015625, Normalized Sum = 197905.140625
2024-11-05 17:10:30,733 - INFO - Cluster 1: Score = 0 (X: 0, Y: 0)
2024-11-05 17:10:30,769 - INFO - Cluster 1: Original Sum = 33210.40625, Normalized Sum = -1587423.125
2024-11-05 17:10:31,392 - INFO - Cluster 2: Score = 928.8745727539062 (X: 0, Y: 928.8745727539062)
2024-11-05 17:10:31,415 - INFO - Cluster 2: Original Sum = 62281.765625, Normalized Sum = 800933.875
2024-11-05 17:10:32,017 - INFO - Cluster 3: Score = 3301.151580810547 (X: 1434.0825805664062, Y: 1867.0690002441406)
2024-11-05 17:10:32,029 - INFO - Cluster 3: Original Sum = 34984.60546875, Normalized Sum = 844692.0
2024-11-05 17:10:32,029 - INFO - Good cluster identified as Cluster 3 with score 3301.151580810547.
2024-11-05 17:10:33,260 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 17:10:33,260 - INFO - Removing eyes from the good cluster mask.
2024-11-05 17:10:33,260 - INFO - Starting eye detection using connected components analysis.
2024-11-05 17:10:33,364 - INFO - Number of connected components found: 145
2024-11-05 17:11:05,571 - WARNING - Expected to detect 2 eyes, but found 0. Skipping eye removal.
2024-11-05 17:11:05,573 - INFO - Detected eyes at centroids: []
2024-11-05 17:11:08,053 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 17:11:08,053 - INFO - Starting removal of small objects from the CSF mask with minimum size 9 voxels.
2024-11-05 17:11:08,357 - INFO - Small objects removed from the CSF mask. New mask has 90877 voxels.
2024-11-05 17:11:08,365 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 17:11:08,395 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 17:11:08,395 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 17:11:08,404 - INFO - Total CSF Volume: 86667.23834628229 mm³
2024-11-05 17:11:08,404 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 17:11:08,404 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 17:11:08,804 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 17:11:08,999 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 17:11:09,000 - INFO - Visualization process completed.
2024-11-05 17:11:09,001 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:11:09,001 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:11:09,001 - INFO - Final cleanup completed.
2024-11-05 17:11:09,002 - INFO - Current memory usage: 1036.64 MB
2024-11-05 17:11:45,610 - INFO - Logging initiated.
2024-11-05 17:11:45,610 - INFO - Pipeline started.
2024-11-05 17:11:45,610 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:11:45,952 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:11:46,042 - INFO - Denoised image loaded.
2024-11-05 17:11:46,043 - INFO - Current memory usage: 483.06 MB
2024-11-05 17:11:46,092 - INFO - Starting intensity normalization.
2024-11-05 17:11:46,839 - INFO - Intensity normalization complete.
2024-11-05 17:11:46,840 - INFO - Current memory usage: 639.89 MB
2024-11-05 17:11:46,840 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:11:46,840 - INFO - Computing neighborhood statistics.
2024-11-05 17:11:47,067 - INFO - Neighborhood statistics computed.
2024-11-05 17:11:47,068 - INFO - Current memory usage: 598.09 MB
2024-11-05 17:11:47,068 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:11:47,075 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:11:47,076 - INFO - Current memory usage: 639.71 MB
2024-11-05 17:11:47,076 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:11:47,445 - INFO - Features shape: (10940800, 4)
2024-11-05 17:11:47,445 - INFO - Current memory usage: 890.25 MB
2024-11-05 17:11:47,445 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 17:11:50,091 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:11:54,175 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:11:54,176 - INFO - Current memory usage: 1519.54 MB
2024-11-05 17:11:54,216 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:11:54,217 - INFO - Current memory usage: 935.24 MB
2024-11-05 17:11:54,228 - INFO - Processing Cluster 0.
2024-11-05 17:11:54,244 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-05 17:11:57,378 - INFO - Cluster 0: Refined voxel count = 24889.
2024-11-05 17:11:57,398 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:11:57,435 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-05 17:11:57,435 - INFO - Processing Cluster 1.
2024-11-05 17:11:57,452 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-05 17:12:00,098 - INFO - Cluster 1: Refined voxel count = 6674068.
2024-11-05 17:12:00,116 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:12:00,155 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-05 17:12:00,155 - INFO - Processing Cluster 2.
2024-11-05 17:12:00,164 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-05 17:12:02,567 - INFO - Cluster 2: Refined voxel count = 2099678.
2024-11-05 17:12:02,584 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:12:02,620 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-05 17:12:02,620 - INFO - Processing Cluster 3.
2024-11-05 17:12:02,628 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-05 17:12:04,948 - INFO - Cluster 3: Refined voxel count = 90877.
2024-11-05 17:12:04,968 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:12:04,994 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-05 17:12:04,994 - INFO - CSF is identified as cluster 1.
2024-11-05 17:12:04,994 - INFO - Starting visualization with PyVista.
2024-11-05 17:12:05,353 - INFO - Adding Original MRI volume.
2024-11-05 17:12:05,541 - INFO - Adding Denoised MRI volume.
2024-11-05 17:12:05,911 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:12:05,998 - INFO - Initial mesh has 6290 points and 12146 faces.
2024-11-05 17:12:05,998 - INFO - Current memory usage: 1076.64 MB
2024-11-05 17:12:06,026 - INFO - Decimated mesh has 3247 points and 6073 faces.
2024-11-05 17:12:06,026 - INFO - Current memory usage: 1076.94 MB
2024-11-05 17:12:06,030 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:12:06,186 - INFO - Initial mesh has 88185 points and 175486 faces.
2024-11-05 17:12:06,186 - INFO - Current memory usage: 1094.35 MB
2024-11-05 17:12:07,007 - INFO - Decimated mesh has 44121 points and 87742 faces.
2024-11-05 17:12:07,007 - INFO - Current memory usage: 1165.60 MB
2024-11-05 17:12:07,017 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:12:07,221 - INFO - Initial mesh has 149854 points and 300072 faces.
2024-11-05 17:12:07,222 - INFO - Current memory usage: 1175.85 MB
2024-11-05 17:12:08,700 - INFO - Decimated mesh has 74660 points and 150036 faces.
2024-11-05 17:12:08,701 - INFO - Current memory usage: 1258.47 MB
2024-11-05 17:12:08,711 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:12:08,833 - INFO - Initial mesh has 21195 points and 41950 faces.
2024-11-05 17:12:08,833 - INFO - Current memory usage: 1258.51 MB
2024-11-05 17:12:08,987 - INFO - Decimated mesh has 10707 points and 20974 faces.
2024-11-05 17:12:08,988 - INFO - Current memory usage: 1258.51 MB
2024-11-05 17:12:08,995 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:12:09,270 - INFO - Translator(prefix=None)
2024-11-05 17:12:09,314 - INFO - awaiting runner setup
2024-11-05 17:12:09,315 - INFO - awaiting site startup
2024-11-05 17:12:09,315 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:12:09,315 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:12:09,315 - INFO - awaiting running future
2024-11-05 17:12:18,871 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:12:18,875 - INFO - Current memory usage: 1266.26 MB
2024-11-05 17:12:18,880 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 17:12:19,398 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:12:19,574 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:12:19,749 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:12:19,920 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:12:20,094 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:12:20,278 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:12:20,452 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:12:20,641 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:12:20,647 - INFO - Pipeline completed successfully.
2024-11-05 17:12:20,647 - INFO - Current memory usage: 1222.21 MB
2024-11-05 17:12:20,647 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:12:20,664 - INFO - Computed density profiles along x and y axes.
2024-11-05 17:12:20,664 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 17:12:21,142 - INFO - Cluster 0: Score = 249.06466674804688 (X: 249.06466674804688, Y: 0)
2024-11-05 17:12:21,149 - INFO - Cluster 0: Original Sum = 8248.6416015625, Normalized Sum = 197905.140625
2024-11-05 17:12:21,615 - INFO - Cluster 1: Score = 0 (X: 0, Y: 0)
2024-11-05 17:12:21,644 - INFO - Cluster 1: Original Sum = 33210.40625, Normalized Sum = -1587423.125
2024-11-05 17:12:22,105 - INFO - Cluster 2: Score = 928.8745727539062 (X: 0, Y: 928.8745727539062)
2024-11-05 17:12:22,126 - INFO - Cluster 2: Original Sum = 62281.765625, Normalized Sum = 800933.875
2024-11-05 17:12:22,616 - INFO - Cluster 3: Score = 3301.151580810547 (X: 1434.0825805664062, Y: 1867.0690002441406)
2024-11-05 17:12:22,631 - INFO - Cluster 3: Original Sum = 34984.60546875, Normalized Sum = 844692.0
2024-11-05 17:12:22,631 - INFO - Good cluster identified as Cluster 3 with score 3301.151580810547.
2024-11-05 17:12:23,740 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 17:12:23,740 - INFO - Removing eyes from the good cluster mask.
2024-11-05 17:12:23,740 - INFO - Starting eye detection using connected components analysis.
2024-11-05 17:12:23,815 - INFO - Number of connected components found: 145
2024-11-05 17:12:53,595 - WARNING - Expected to detect 2 eyes, but found 0. Skipping eye removal.
2024-11-05 17:12:53,597 - INFO - Detected eyes at centroids: []
2024-11-05 17:12:55,167 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 17:12:55,167 - INFO - Starting removal of small objects from the CSF mask with minimum size 30 voxels.
2024-11-05 17:12:55,388 - INFO - Small objects removed from the CSF mask. New mask has 90877 voxels.
2024-11-05 17:12:55,394 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 17:12:55,415 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 17:12:55,415 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 17:12:55,422 - INFO - Total CSF Volume: 86667.23834628229 mm³
2024-11-05 17:12:55,422 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 17:12:55,422 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 17:12:55,652 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 17:12:55,775 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 17:12:55,776 - INFO - Visualization process completed.
2024-11-05 17:12:55,777 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:12:55,777 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:12:55,777 - INFO - Final cleanup completed.
2024-11-05 17:12:55,777 - INFO - Current memory usage: 1140.11 MB
2024-11-05 17:16:33,663 - INFO - Logging initiated.
2024-11-05 17:16:33,663 - INFO - Pipeline started.
2024-11-05 17:16:33,663 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:16:33,819 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:16:33,891 - INFO - Denoised image loaded.
2024-11-05 17:16:33,892 - INFO - Current memory usage: 483.00 MB
2024-11-05 17:16:33,964 - INFO - Starting intensity normalization.
2024-11-05 17:16:34,615 - INFO - Intensity normalization complete.
2024-11-05 17:16:34,615 - INFO - Current memory usage: 639.84 MB
2024-11-05 17:16:34,616 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:16:34,616 - INFO - Computing neighborhood statistics.
2024-11-05 17:16:34,961 - INFO - Neighborhood statistics computed.
2024-11-05 17:16:34,962 - INFO - Current memory usage: 597.95 MB
2024-11-05 17:16:34,962 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:16:34,970 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:16:34,970 - INFO - Current memory usage: 639.57 MB
2024-11-05 17:16:34,970 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:16:35,357 - INFO - Features shape: (10940800, 4)
2024-11-05 17:16:35,358 - INFO - Current memory usage: 890.11 MB
2024-11-05 17:16:35,358 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 17:16:38,784 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:16:44,069 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:16:44,070 - INFO - Current memory usage: 1499.76 MB
2024-11-05 17:16:44,118 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:16:44,119 - INFO - Current memory usage: 915.46 MB
2024-11-05 17:16:44,130 - INFO - Processing Cluster 0.
2024-11-05 17:16:44,147 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-05 17:16:48,147 - INFO - Cluster 0: Refined voxel count = 24889.
2024-11-05 17:16:48,174 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:16:48,212 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-05 17:16:48,212 - INFO - Processing Cluster 1.
2024-11-05 17:16:48,225 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-05 17:16:51,187 - INFO - Cluster 1: Refined voxel count = 6674068.
2024-11-05 17:16:51,209 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:16:51,266 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-05 17:16:51,266 - INFO - Processing Cluster 2.
2024-11-05 17:16:51,276 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-05 17:16:54,515 - INFO - Cluster 2: Refined voxel count = 2099678.
2024-11-05 17:16:54,537 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:16:54,600 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-05 17:16:54,600 - INFO - Processing Cluster 3.
2024-11-05 17:16:54,617 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-05 17:16:57,680 - INFO - Cluster 3: Refined voxel count = 90877.
2024-11-05 17:16:57,714 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:16:57,749 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-05 17:16:57,749 - INFO - CSF is identified as cluster 1.
2024-11-05 17:16:57,749 - INFO - Starting visualization with PyVista.
2024-11-05 17:16:58,291 - INFO - Adding Original MRI volume.
2024-11-05 17:16:58,680 - INFO - Adding Denoised MRI volume.
2024-11-05 17:16:59,046 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:16:59,169 - INFO - Initial mesh has 6290 points and 12146 faces.
2024-11-05 17:16:59,169 - INFO - Current memory usage: 1057.38 MB
2024-11-05 17:16:59,204 - INFO - Decimated mesh has 3247 points and 6073 faces.
2024-11-05 17:16:59,205 - INFO - Current memory usage: 1057.77 MB
2024-11-05 17:16:59,210 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:16:59,501 - INFO - Initial mesh has 88185 points and 175486 faces.
2024-11-05 17:16:59,501 - INFO - Current memory usage: 1079.97 MB
2024-11-05 17:17:00,329 - INFO - Decimated mesh has 44121 points and 87742 faces.
2024-11-05 17:17:00,330 - INFO - Current memory usage: 1152.21 MB
2024-11-05 17:17:00,338 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:17:00,528 - INFO - Initial mesh has 149854 points and 300072 faces.
2024-11-05 17:17:00,528 - INFO - Current memory usage: 1161.26 MB
2024-11-05 17:17:01,891 - INFO - Decimated mesh has 74660 points and 150036 faces.
2024-11-05 17:17:01,891 - INFO - Current memory usage: 1243.89 MB
2024-11-05 17:17:01,898 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:17:02,027 - INFO - Initial mesh has 21195 points and 41950 faces.
2024-11-05 17:17:02,027 - INFO - Current memory usage: 1243.95 MB
2024-11-05 17:17:02,155 - INFO - Decimated mesh has 10707 points and 20974 faces.
2024-11-05 17:17:02,155 - INFO - Current memory usage: 1243.95 MB
2024-11-05 17:17:02,160 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:17:02,464 - INFO - Translator(prefix=None)
2024-11-05 17:17:02,512 - INFO - awaiting runner setup
2024-11-05 17:17:02,513 - INFO - awaiting site startup
2024-11-05 17:17:02,513 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:17:02,513 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:17:02,513 - INFO - awaiting running future
2024-11-05 17:17:10,636 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:17:10,642 - INFO - Current memory usage: 1255.51 MB
2024-11-05 17:17:10,649 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 17:17:11,140 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:17:11,315 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:17:11,494 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:17:11,696 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:17:11,875 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:17:12,054 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:17:12,226 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:17:12,417 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:17:12,422 - INFO - Pipeline completed successfully.
2024-11-05 17:17:12,422 - INFO - Current memory usage: 1211.46 MB
2024-11-05 17:17:12,422 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:17:12,437 - INFO - Computed density profiles along x and y axes.
2024-11-05 17:17:12,437 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 17:17:12,924 - INFO - Cluster 0: Score = 249.06466674804688 (X: 249.06466674804688, Y: 0)
2024-11-05 17:17:12,932 - INFO - Cluster 0: Original Sum = 8248.6416015625, Normalized Sum = 197905.140625
2024-11-05 17:17:13,453 - INFO - Cluster 1: Score = 0 (X: 0, Y: 0)
2024-11-05 17:17:13,484 - INFO - Cluster 1: Original Sum = 33210.40625, Normalized Sum = -1587423.125
2024-11-05 17:17:14,066 - INFO - Cluster 2: Score = 928.8745727539062 (X: 0, Y: 928.8745727539062)
2024-11-05 17:17:14,090 - INFO - Cluster 2: Original Sum = 62281.765625, Normalized Sum = 800933.875
2024-11-05 17:17:14,626 - INFO - Cluster 3: Score = 3301.151580810547 (X: 1434.0825805664062, Y: 1867.0690002441406)
2024-11-05 17:17:14,635 - INFO - Cluster 3: Original Sum = 34984.60546875, Normalized Sum = 844692.0
2024-11-05 17:17:14,635 - INFO - Good cluster identified as Cluster 3 with score 3301.151580810547.
2024-11-05 17:17:15,661 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 17:17:15,661 - INFO - Removing eyes from the good cluster mask.
2024-11-05 17:17:15,661 - INFO - Starting eye detection using connected components analysis.
2024-11-05 17:17:15,734 - INFO - Number of connected components found: 145
2024-11-05 17:17:45,045 - WARNING - Expected to detect 2 eyes, but found 0. Skipping eye removal.
2024-11-05 17:17:45,047 - INFO - Detected eyes at centroids: []
2024-11-05 17:17:47,097 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 17:17:47,097 - INFO - Starting removal of small objects from the CSF mask with minimum size 50 voxels.
2024-11-05 17:17:47,404 - INFO - Small objects removed from the CSF mask. New mask has 89175 voxels.
2024-11-05 17:17:47,428 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 17:17:47,461 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 17:17:47,461 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 17:17:47,469 - INFO - Total CSF Volume: 85044.0813355384 mm³
2024-11-05 17:17:47,469 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 17:17:47,469 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 17:17:47,700 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 17:17:47,821 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 17:17:47,822 - INFO - Visualization process completed.
2024-11-05 17:17:47,823 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:17:47,823 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:17:47,823 - INFO - Final cleanup completed.
2024-11-05 17:17:47,823 - INFO - Current memory usage: 1156.64 MB
2024-11-05 17:18:35,571 - INFO - Logging initiated.
2024-11-05 17:18:35,571 - INFO - Pipeline started.
2024-11-05 17:18:35,571 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:18:35,830 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:18:35,952 - INFO - Denoised image loaded.
2024-11-05 17:18:35,953 - INFO - Current memory usage: 482.52 MB
2024-11-05 17:18:36,012 - INFO - Starting intensity normalization.
2024-11-05 17:18:36,517 - INFO - Intensity normalization complete.
2024-11-05 17:18:36,517 - INFO - Current memory usage: 639.25 MB
2024-11-05 17:18:36,520 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:18:36,520 - INFO - Computing neighborhood statistics.
2024-11-05 17:18:36,853 - INFO - Neighborhood statistics computed.
2024-11-05 17:18:36,853 - INFO - Current memory usage: 597.53 MB
2024-11-05 17:18:36,853 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:18:36,886 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:18:36,886 - INFO - Current memory usage: 639.15 MB
2024-11-05 17:18:36,886 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:18:37,204 - INFO - Features shape: (10940800, 4)
2024-11-05 17:18:37,204 - INFO - Current memory usage: 889.36 MB
2024-11-05 17:18:37,205 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 17:18:40,018 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:18:45,966 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:18:45,966 - INFO - Current memory usage: 1495.88 MB
2024-11-05 17:18:46,014 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:18:46,014 - INFO - Current memory usage: 911.57 MB
2024-11-05 17:18:46,027 - INFO - Processing Cluster 0.
2024-11-05 17:18:46,045 - INFO - Cluster 0: Initial voxel count = 292065.
2024-11-05 17:18:49,785 - INFO - Cluster 0: Refined voxel count = 24889.
2024-11-05 17:18:49,808 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:18:49,870 - INFO - Cluster 0: Mean Intensity = 2.5538718700408936
2024-11-05 17:18:49,871 - INFO - Processing Cluster 1.
2024-11-05 17:18:49,904 - INFO - Cluster 1: Initial voxel count = 7364388.
2024-11-05 17:18:54,059 - INFO - Cluster 1: Refined voxel count = 6674068.
2024-11-05 17:18:54,090 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:18:54,182 - INFO - Cluster 1: Mean Intensity = -0.22957414388656616
2024-11-05 17:18:54,183 - INFO - Processing Cluster 2.
2024-11-05 17:18:54,212 - INFO - Cluster 2: Initial voxel count = 3067961.
2024-11-05 17:18:58,611 - INFO - Cluster 2: Refined voxel count = 2099678.
2024-11-05 17:18:58,632 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:18:58,702 - INFO - Cluster 2: Mean Intensity = 0.32040154933929443
2024-11-05 17:18:58,702 - INFO - Processing Cluster 3.
2024-11-05 17:18:58,725 - INFO - Cluster 3: Initial voxel count = 216386.
2024-11-05 17:19:01,940 - INFO - Cluster 3: Refined voxel count = 90877.
2024-11-05 17:19:01,959 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:19:01,998 - INFO - Cluster 3: Mean Intensity = 7.862954616546631
2024-11-05 17:19:01,998 - INFO - CSF is identified as cluster 1.
2024-11-05 17:19:01,998 - INFO - Starting visualization with PyVista.
2024-11-05 17:19:02,725 - INFO - Adding Original MRI volume.
2024-11-05 17:19:02,920 - INFO - Adding Denoised MRI volume.
2024-11-05 17:19:03,092 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:19:03,170 - INFO - Initial mesh has 6290 points and 12146 faces.
2024-11-05 17:19:03,170 - INFO - Current memory usage: 1054.17 MB
2024-11-05 17:19:03,211 - INFO - Decimated mesh has 3247 points and 6073 faces.
2024-11-05 17:19:03,211 - INFO - Current memory usage: 1054.60 MB
2024-11-05 17:19:03,217 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:19:03,501 - INFO - Initial mesh has 88185 points and 175486 faces.
2024-11-05 17:19:03,501 - INFO - Current memory usage: 1078.50 MB
2024-11-05 17:19:04,340 - INFO - Decimated mesh has 44121 points and 87742 faces.
2024-11-05 17:19:04,341 - INFO - Current memory usage: 1148.02 MB
2024-11-05 17:19:04,350 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:19:04,568 - INFO - Initial mesh has 149854 points and 300072 faces.
2024-11-05 17:19:04,568 - INFO - Current memory usage: 1158.00 MB
2024-11-05 17:19:05,892 - INFO - Decimated mesh has 74660 points and 150036 faces.
2024-11-05 17:19:05,893 - INFO - Current memory usage: 1240.57 MB
2024-11-05 17:19:05,901 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:19:05,983 - INFO - Initial mesh has 21195 points and 41950 faces.
2024-11-05 17:19:05,984 - INFO - Current memory usage: 1240.60 MB
2024-11-05 17:19:06,114 - INFO - Decimated mesh has 10707 points and 20974 faces.
2024-11-05 17:19:06,115 - INFO - Current memory usage: 1240.60 MB
2024-11-05 17:19:06,123 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:19:06,448 - INFO - Translator(prefix=None)
2024-11-05 17:19:06,501 - INFO - awaiting runner setup
2024-11-05 17:19:06,501 - INFO - awaiting site startup
2024-11-05 17:19:06,501 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:19:06,501 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:19:06,501 - INFO - awaiting running future
2024-11-05 17:19:16,629 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:19:16,635 - INFO - Current memory usage: 1253.02 MB
2024-11-05 17:19:16,640 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 17:19:17,135 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:19:17,402 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:19:17,608 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:19:17,805 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:19:18,003 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:19:18,179 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:19:18,360 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:19:18,545 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:19:18,550 - INFO - Pipeline completed successfully.
2024-11-05 17:19:18,550 - INFO - Current memory usage: 1209.11 MB
2024-11-05 17:19:18,550 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:19:18,566 - INFO - Computed density profiles along x and y axes.
2024-11-05 17:19:18,567 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 17:19:19,083 - INFO - Cluster 0: Score = 249.06466674804688 (X: 249.06466674804688, Y: 0)
2024-11-05 17:19:19,090 - INFO - Cluster 0: Original Sum = 8248.6416015625, Normalized Sum = 197905.140625
2024-11-05 17:19:19,591 - INFO - Cluster 1: Score = 0 (X: 0, Y: 0)
2024-11-05 17:19:19,622 - INFO - Cluster 1: Original Sum = 33210.40625, Normalized Sum = -1587423.125
2024-11-05 17:19:20,137 - INFO - Cluster 2: Score = 928.8745727539062 (X: 0, Y: 928.8745727539062)
2024-11-05 17:19:20,162 - INFO - Cluster 2: Original Sum = 62281.765625, Normalized Sum = 800933.875
2024-11-05 17:19:20,706 - INFO - Cluster 3: Score = 3301.151580810547 (X: 1434.0825805664062, Y: 1867.0690002441406)
2024-11-05 17:19:20,715 - INFO - Cluster 3: Original Sum = 34984.60546875, Normalized Sum = 844692.0
2024-11-05 17:19:20,715 - INFO - Good cluster identified as Cluster 3 with score 3301.151580810547.
2024-11-05 17:19:21,692 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 17:19:21,692 - INFO - Removing eyes from the good cluster mask.
2024-11-05 17:19:21,692 - INFO - Starting eye detection using connected components analysis.
2024-11-05 17:19:21,763 - INFO - Number of connected components found: 145
2024-11-05 17:19:58,752 - WARNING - Expected to detect 2 eyes, but found 0. Skipping eye removal.
2024-11-05 17:19:58,754 - INFO - Detected eyes at centroids: []
2024-11-05 17:20:00,789 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 17:20:00,789 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-05 17:20:01,112 - INFO - Small objects removed from the CSF mask. New mask has 82808 voxels.
2024-11-05 17:20:01,141 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 17:20:01,184 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 17:20:01,184 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 17:20:01,201 - INFO - Total CSF Volume: 78972.02452742656 mm³
2024-11-05 17:20:01,201 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 17:20:01,201 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 17:20:01,508 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 17:20:01,634 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 17:20:01,635 - INFO - Visualization process completed.
2024-11-05 17:20:01,636 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:20:01,636 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:20:01,636 - INFO - Final cleanup completed.
2024-11-05 17:20:01,636 - INFO - Current memory usage: 1092.26 MB
2024-11-05 17:21:21,260 - INFO - Logging initiated.
2024-11-05 17:21:21,260 - INFO - Pipeline started.
2024-11-05 17:21:21,260 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:21:21,514 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:21:21,603 - INFO - Denoised image loaded.
2024-11-05 17:21:21,604 - INFO - Current memory usage: 482.20 MB
2024-11-05 17:21:21,704 - INFO - Starting intensity normalization.
2024-11-05 17:21:22,285 - INFO - Intensity normalization complete.
2024-11-05 17:21:22,285 - INFO - Current memory usage: 639.12 MB
2024-11-05 17:21:22,286 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:21:22,286 - INFO - Computing neighborhood statistics.
2024-11-05 17:21:22,570 - INFO - Neighborhood statistics computed.
2024-11-05 17:21:22,571 - INFO - Current memory usage: 597.23 MB
2024-11-05 17:21:22,571 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:21:22,584 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:21:22,584 - INFO - Current memory usage: 638.85 MB
2024-11-05 17:21:22,584 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:21:22,975 - INFO - Features shape: (10940800, 4)
2024-11-05 17:21:22,975 - INFO - Current memory usage: 889.39 MB
2024-11-05 17:21:22,975 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 17:22:02,536 - INFO - Logging initiated.
2024-11-05 17:22:02,536 - INFO - Pipeline started.
2024-11-05 17:22:02,536 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:22:02,789 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:22:02,847 - INFO - Denoised image loaded.
2024-11-05 17:22:02,848 - INFO - Current memory usage: 482.26 MB
2024-11-05 17:22:02,958 - INFO - Starting intensity normalization.
2024-11-05 17:22:03,556 - INFO - Intensity normalization complete.
2024-11-05 17:22:03,557 - INFO - Current memory usage: 639.10 MB
2024-11-05 17:22:03,557 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:22:03,557 - INFO - Computing neighborhood statistics.
2024-11-05 17:22:03,787 - INFO - Neighborhood statistics computed.
2024-11-05 17:22:03,787 - INFO - Current memory usage: 597.21 MB
2024-11-05 17:22:03,787 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:22:03,794 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:22:03,795 - INFO - Current memory usage: 638.84 MB
2024-11-05 17:22:03,795 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:22:04,165 - INFO - Features shape: (10940800, 4)
2024-11-05 17:22:04,166 - INFO - Current memory usage: 889.37 MB
2024-11-05 17:22:04,166 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 17:22:06,323 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:22:08,526 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:22:08,527 - INFO - Current memory usage: 1501.47 MB
2024-11-05 17:22:08,560 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:22:08,560 - INFO - Current memory usage: 917.17 MB
2024-11-05 17:22:08,570 - INFO - Processing Cluster 0.
2024-11-05 17:22:08,581 - INFO - Cluster 0: Initial voxel count = 2765082.
2024-11-05 17:22:10,843 - INFO - Cluster 0: Refined voxel count = 2764697.
2024-11-05 17:22:10,867 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:22:10,910 - INFO - Cluster 0: Mean Intensity = 0.0
2024-11-05 17:22:10,910 - INFO - Processing Cluster 1.
2024-11-05 17:22:10,927 - INFO - Cluster 1: Initial voxel count = 2727276.
2024-11-05 17:22:13,108 - INFO - Cluster 1: Refined voxel count = 2726873.
2024-11-05 17:22:13,130 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:22:13,171 - INFO - Cluster 1: Mean Intensity = 0.0
2024-11-05 17:22:13,172 - INFO - Processing Cluster 2.
2024-11-05 17:22:13,183 - INFO - Cluster 2: Initial voxel count = 2700605.
2024-11-05 17:22:15,381 - INFO - Cluster 2: Refined voxel count = 2700204.
2024-11-05 17:22:15,399 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:22:15,443 - INFO - Cluster 2: Mean Intensity = 0.0
2024-11-05 17:22:15,443 - INFO - Processing Cluster 3.
2024-11-05 17:22:15,460 - INFO - Cluster 3: Initial voxel count = 2747837.
2024-11-05 17:22:18,128 - INFO - Cluster 3: Refined voxel count = 2747448.
2024-11-05 17:22:18,153 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:22:18,200 - INFO - Cluster 3: Mean Intensity = 0.0
2024-11-05 17:22:18,200 - INFO - CSF is identified as cluster 0.
2024-11-05 17:22:18,200 - INFO - Starting visualization with PyVista.
2024-11-05 17:22:18,939 - INFO - Adding Original MRI volume.
2024-11-05 17:23:33,257 - INFO - Logging initiated.
2024-11-05 17:23:33,257 - INFO - Pipeline started.
2024-11-05 17:23:33,258 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:23:33,359 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:23:33,419 - INFO - Denoised image loaded.
2024-11-05 17:23:33,420 - INFO - Current memory usage: 483.06 MB
2024-11-05 17:23:33,468 - INFO - Starting intensity normalization.
2024-11-05 17:23:34,107 - INFO - Intensity normalization complete.
2024-11-05 17:23:34,108 - INFO - Current memory usage: 639.99 MB
2024-11-05 17:23:34,194 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:23:34,194 - INFO - Computing neighborhood statistics.
2024-11-05 17:23:34,415 - INFO - Neighborhood statistics computed.
2024-11-05 17:23:34,416 - INFO - Current memory usage: 598.11 MB
2024-11-05 17:23:34,416 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:23:34,423 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:23:34,423 - INFO - Current memory usage: 639.73 MB
2024-11-05 17:23:34,423 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:23:34,731 - INFO - Features shape: (10940800, 4)
2024-11-05 17:23:34,732 - INFO - Current memory usage: 890.27 MB
2024-11-05 17:23:34,732 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 17:23:37,010 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:23:38,435 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:23:38,435 - INFO - Current memory usage: 1518.57 MB
2024-11-05 17:23:38,480 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:23:38,480 - INFO - Current memory usage: 934.27 MB
2024-11-05 17:23:38,496 - INFO - Processing Cluster 0.
2024-11-05 17:23:38,514 - INFO - Cluster 0: Initial voxel count = 726547.
2024-11-05 17:23:40,845 - INFO - Cluster 0: Refined voxel count = 143967.
2024-11-05 17:23:40,854 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:23:40,894 - INFO - Cluster 0: Mean Intensity = 0.9759975671768188
2024-11-05 17:23:40,894 - INFO - Processing Cluster 1.
2024-11-05 17:23:40,913 - INFO - Cluster 1: Initial voxel count = 2002089.
2024-11-05 17:23:43,168 - INFO - Cluster 1: Refined voxel count = 1926857.
2024-11-05 17:23:43,196 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:23:43,237 - INFO - Cluster 1: Mean Intensity = 0.000823004636913538
2024-11-05 17:23:43,237 - INFO - Processing Cluster 2.
2024-11-05 17:23:43,248 - INFO - Cluster 2: Initial voxel count = 7897788.
2024-11-05 17:23:45,440 - INFO - Cluster 2: Refined voxel count = 7672222.
2024-11-05 17:23:45,466 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:23:45,525 - INFO - Cluster 2: Mean Intensity = 0.06557434797286987
2024-11-05 17:23:45,525 - INFO - Processing Cluster 3.
2024-11-05 17:23:45,547 - INFO - Cluster 3: Initial voxel count = 314376.
2024-11-05 17:23:47,825 - INFO - Cluster 3: Refined voxel count = 233836.
2024-11-05 17:23:47,847 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:23:47,889 - INFO - Cluster 3: Mean Intensity = 7.127853870391846
2024-11-05 17:23:47,889 - INFO - CSF is identified as cluster 1.
2024-11-05 17:23:47,889 - INFO - Starting visualization with PyVista.
2024-11-05 17:23:48,208 - INFO - Adding Original MRI volume.
2024-11-05 17:23:48,423 - INFO - Adding Denoised MRI volume.
2024-11-05 17:23:48,814 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:23:48,907 - INFO - Initial mesh has 26684 points and 52852 faces.
2024-11-05 17:23:48,908 - INFO - Current memory usage: 1080.61 MB
2024-11-05 17:23:49,080 - INFO - Decimated mesh has 13457 points and 26425 faces.
2024-11-05 17:23:49,080 - INFO - Current memory usage: 1096.51 MB
2024-11-05 17:23:49,086 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:23:49,175 - INFO - Initial mesh has 31956 points and 63049 faces.
2024-11-05 17:23:49,176 - INFO - Current memory usage: 1107.00 MB
2024-11-05 17:23:49,393 - INFO - Decimated mesh has 16040 points and 31523 faces.
2024-11-05 17:23:49,393 - INFO - Current memory usage: 1111.88 MB
2024-11-05 17:23:49,398 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:23:49,710 - INFO - Initial mesh has 174184 points and 349507 faces.
2024-11-05 17:23:49,711 - INFO - Current memory usage: 1144.29 MB
2024-11-05 17:23:51,161 - INFO - Decimated mesh has 86565 points and 174753 faces.
2024-11-05 17:23:51,162 - INFO - Current memory usage: 1268.41 MB
2024-11-05 17:23:51,169 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:23:51,263 - INFO - Initial mesh has 40007 points and 80024 faces.
2024-11-05 17:23:51,263 - INFO - Current memory usage: 1275.52 MB
2024-11-05 17:23:51,524 - INFO - Decimated mesh has 20001 points and 40012 faces.
2024-11-05 17:23:51,525 - INFO - Current memory usage: 1275.52 MB
2024-11-05 17:23:51,530 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:23:51,814 - INFO - Translator(prefix=None)
2024-11-05 17:23:51,866 - INFO - awaiting runner setup
2024-11-05 17:23:51,866 - INFO - awaiting site startup
2024-11-05 17:23:51,866 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:23:51,866 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:23:51,866 - INFO - awaiting running future
2024-11-05 17:23:56,411 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:23:56,415 - INFO - Current memory usage: 1286.65 MB
2024-11-05 17:23:56,419 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 17:23:56,801 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:23:56,928 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:23:57,056 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:23:57,187 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:23:57,321 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:23:57,464 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:23:57,601 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:23:57,744 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:23:57,749 - INFO - Pipeline completed successfully.
2024-11-05 17:23:57,750 - INFO - Current memory usage: 1241.88 MB
2024-11-05 17:23:57,750 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:23:57,765 - INFO - Computed density profiles along x and y axes.
2024-11-05 17:23:57,765 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 17:23:58,270 - INFO - Cluster 0: Score = 0 (X: 0, Y: 0)
2024-11-05 17:23:58,280 - INFO - Cluster 0: Original Sum = 9209.177734375, Normalized Sum = 179129.671875
2024-11-05 17:23:58,772 - INFO - Cluster 1: Score = 0 (X: 0, Y: 0)
2024-11-05 17:23:58,789 - INFO - Cluster 1: Original Sum = 11053.8828125, Normalized Sum = 2741.86328125
2024-11-05 17:23:59,307 - INFO - Cluster 2: Score = 2779.03271484375 (X: 1175.1800842285156, Y: 1603.8526306152344)
2024-11-05 17:23:59,341 - INFO - Cluster 2: Original Sum = 82694.2734375, Normalized Sum = 553310.0
2024-11-05 17:23:59,848 - INFO - Cluster 3: Score = 2557.6652221679688 (X: 2019.8052368164062, Y: 537.8599853515625)
2024-11-05 17:23:59,858 - INFO - Cluster 3: Original Sum = 77656.1875, Normalized Sum = 1867657.375
2024-11-05 17:23:59,858 - INFO - Good cluster identified as Cluster 2 with score 2779.03271484375.
2024-11-05 17:24:00,824 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 17:24:00,824 - INFO - Removing eyes from the good cluster mask.
2024-11-05 17:24:00,824 - INFO - Starting eye detection using connected components analysis.
2024-11-05 17:24:00,951 - INFO - Number of connected components found: 22
2024-11-05 17:24:05,672 - WARNING - Expected to detect 2 eyes, but found 0. Skipping eye removal.
2024-11-05 17:24:05,673 - INFO - Detected eyes at centroids: []
2024-11-05 17:24:07,567 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 17:24:07,567 - INFO - Starting removal of small objects from the CSF mask with minimum size 100 voxels.
2024-11-05 17:24:07,871 - INFO - Small objects removed from the CSF mask. New mask has 7671391 voxels.
2024-11-05 17:24:07,893 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 17:24:07,915 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 17:24:07,915 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 17:24:07,922 - INFO - Total CSF Volume: 7316023.551003277 mm³
2024-11-05 17:24:07,923 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 17:24:07,923 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 17:24:09,613 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 17:24:10,299 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 17:24:10,300 - INFO - Visualization process completed.
2024-11-05 17:24:10,300 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:24:10,300 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:24:10,300 - INFO - Final cleanup completed.
2024-11-05 17:24:10,301 - INFO - Current memory usage: 1335.04 MB
2024-11-05 17:26:54,826 - INFO - Logging initiated.
2024-11-05 17:26:54,826 - INFO - Pipeline started.
2024-11-05 17:26:54,826 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:26:54,942 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:26:55,000 - INFO - Denoised image loaded.
2024-11-05 17:26:55,001 - INFO - Current memory usage: 482.37 MB
2024-11-05 17:26:55,037 - INFO - Starting intensity normalization.
2024-11-05 17:26:55,556 - INFO - Intensity normalization complete.
2024-11-05 17:26:55,557 - INFO - Current memory usage: 639.21 MB
2024-11-05 17:26:55,635 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:26:55,636 - INFO - Computing neighborhood statistics.
2024-11-05 17:26:55,852 - INFO - Neighborhood statistics computed.
2024-11-05 17:26:55,852 - INFO - Current memory usage: 597.32 MB
2024-11-05 17:26:55,852 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:26:55,859 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:26:55,859 - INFO - Current memory usage: 638.95 MB
2024-11-05 17:26:55,859 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:26:56,095 - INFO - Features shape: (10940800, 4)
2024-11-05 17:26:56,095 - INFO - Current memory usage: 889.48 MB
2024-11-05 17:26:56,095 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 17:26:58,448 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:26:59,600 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:26:59,600 - INFO - Current memory usage: 1509.41 MB
2024-11-05 17:26:59,628 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:26:59,629 - INFO - Current memory usage: 925.10 MB
2024-11-05 17:26:59,636 - INFO - Processing Cluster 0.
2024-11-05 17:26:59,647 - INFO - Cluster 0: Initial voxel count = 726547.
2024-11-05 17:27:01,871 - INFO - Cluster 0: Refined voxel count = 143967.
2024-11-05 17:27:01,895 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:27:01,940 - INFO - Cluster 0: Mean Intensity = 0.9759975671768188
2024-11-05 17:27:01,940 - INFO - Processing Cluster 1.
2024-11-05 17:27:01,959 - INFO - Cluster 1: Initial voxel count = 2002089.
2024-11-05 17:27:04,156 - INFO - Cluster 1: Refined voxel count = 1926857.
2024-11-05 17:27:04,179 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:27:04,217 - INFO - Cluster 1: Mean Intensity = 0.000823004636913538
2024-11-05 17:27:04,217 - INFO - Processing Cluster 2.
2024-11-05 17:27:04,231 - INFO - Cluster 2: Initial voxel count = 7897788.
2024-11-05 17:27:06,450 - INFO - Cluster 2: Refined voxel count = 7672222.
2024-11-05 17:27:06,461 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:27:06,531 - INFO - Cluster 2: Mean Intensity = 0.06557434797286987
2024-11-05 17:27:06,531 - INFO - Processing Cluster 3.
2024-11-05 17:27:06,547 - INFO - Cluster 3: Initial voxel count = 314376.
2024-11-05 17:27:08,723 - INFO - Cluster 3: Refined voxel count = 233836.
2024-11-05 17:27:08,748 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:27:08,782 - INFO - Cluster 3: Mean Intensity = 7.127853870391846
2024-11-05 17:27:08,782 - INFO - CSF is identified as cluster 1.
2024-11-05 17:27:08,783 - INFO - Starting visualization with PyVista.
2024-11-05 17:27:09,369 - INFO - Adding Original MRI volume.
2024-11-05 17:27:09,585 - INFO - Adding Denoised MRI volume.
2024-11-05 17:27:09,752 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:27:09,851 - INFO - Initial mesh has 26684 points and 52852 faces.
2024-11-05 17:27:09,851 - INFO - Current memory usage: 1071.49 MB
2024-11-05 17:27:10,050 - INFO - Decimated mesh has 13457 points and 26425 faces.
2024-11-05 17:27:10,051 - INFO - Current memory usage: 1087.24 MB
2024-11-05 17:27:10,057 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:27:10,174 - INFO - Initial mesh has 31956 points and 63049 faces.
2024-11-05 17:27:10,174 - INFO - Current memory usage: 1097.84 MB
2024-11-05 17:27:10,386 - INFO - Decimated mesh has 16040 points and 31523 faces.
2024-11-05 17:27:10,386 - INFO - Current memory usage: 1102.93 MB
2024-11-05 17:27:10,391 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:27:10,622 - INFO - Initial mesh has 174184 points and 349507 faces.
2024-11-05 17:27:10,622 - INFO - Current memory usage: 1137.95 MB
2024-11-05 17:27:12,088 - INFO - Decimated mesh has 86565 points and 174753 faces.
2024-11-05 17:27:12,089 - INFO - Current memory usage: 1258.68 MB
2024-11-05 17:27:12,096 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:27:12,188 - INFO - Initial mesh has 40007 points and 80024 faces.
2024-11-05 17:27:12,189 - INFO - Current memory usage: 1265.79 MB
2024-11-05 17:27:12,456 - INFO - Decimated mesh has 20001 points and 40012 faces.
2024-11-05 17:27:12,456 - INFO - Current memory usage: 1265.79 MB
2024-11-05 17:27:12,462 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:27:12,720 - INFO - Translator(prefix=None)
2024-11-05 17:27:12,757 - INFO - awaiting runner setup
2024-11-05 17:27:12,758 - INFO - awaiting site startup
2024-11-05 17:27:12,759 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:27:12,759 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:27:12,759 - INFO - awaiting running future
2024-11-05 17:27:17,005 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:27:17,010 - INFO - Current memory usage: 1279.07 MB
2024-11-05 17:27:17,015 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 17:27:17,384 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:27:17,528 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:27:17,661 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:27:17,794 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:27:17,930 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:27:18,064 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:27:18,200 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:27:18,332 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:27:18,337 - INFO - Pipeline completed successfully.
2024-11-05 17:27:18,337 - INFO - Current memory usage: 1234.44 MB
2024-11-05 17:27:18,337 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:27:18,353 - INFO - Computed density profiles along x and y axes.
2024-11-05 17:27:18,353 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 17:27:18,851 - INFO - Cluster 0: Score = 1011.9154968261719 (X: 442.9784240722656, Y: 568.9370727539062)
2024-11-05 17:27:18,860 - INFO - Cluster 0: Original Sum = 9209.177734375, Normalized Sum = 179129.671875
2024-11-05 17:27:19,356 - INFO - Cluster 1: Score = 0 (X: 0, Y: 0)
2024-11-05 17:27:19,375 - INFO - Cluster 1: Original Sum = 11053.8828125, Normalized Sum = 2741.86328125
2024-11-05 17:27:19,867 - INFO - Cluster 2: Score = 0 (X: 0, Y: 0)
2024-11-05 17:27:19,907 - INFO - Cluster 2: Original Sum = 82694.2734375, Normalized Sum = 553310.0
2024-11-05 17:27:20,382 - INFO - Cluster 3: Score = 0 (X: 0, Y: 0)
2024-11-05 17:27:20,392 - INFO - Cluster 3: Original Sum = 77656.1875, Normalized Sum = 1867657.375
2024-11-05 17:27:20,392 - INFO - Good cluster identified as Cluster 0 with score 1011.9154968261719.
2024-11-05 17:27:21,249 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 17:27:21,250 - INFO - Removing eyes from the good cluster mask.
2024-11-05 17:27:21,250 - INFO - Starting eye detection using connected components analysis.
2024-11-05 17:27:21,318 - INFO - Number of connected components found: 172
2024-11-05 17:27:25,306 - INFO - Detected potential eye at centroid: (44.816728167281674, 188.7429274292743, 155.50553505535055) with Volume: 813.0 and Sphericity: 0.71
2024-11-05 17:27:53,224 - WARNING - Expected to detect 2 eyes, but found 1. Skipping eye removal.
2024-11-05 17:27:53,226 - INFO - Detected eyes at centroids: []
2024-11-05 17:27:54,696 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 17:27:54,696 - INFO - Starting removal of small objects from the CSF mask with minimum size 100 voxels.
2024-11-05 17:27:54,883 - INFO - Small objects removed from the CSF mask. New mask has 137690 voxels.
2024-11-05 17:27:54,903 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 17:27:54,923 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 17:27:54,923 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 17:27:54,930 - INFO - Total CSF Volume: 131311.6855518955 mm³
2024-11-05 17:27:54,930 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 17:27:54,930 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 17:27:55,142 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 17:27:55,261 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 17:27:55,262 - INFO - Visualization process completed.
2024-11-05 17:27:55,391 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:27:55,517 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:27:55,522 - INFO - Final cleanup completed.
2024-11-05 17:27:55,523 - INFO - Current memory usage: 1151.14 MB
2024-11-05 17:28:45,091 - INFO - Logging initiated.
2024-11-05 17:28:45,091 - INFO - Pipeline started.
2024-11-05 17:28:45,091 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:28:45,264 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:28:45,363 - INFO - Denoised image loaded.
2024-11-05 17:28:45,364 - INFO - Current memory usage: 482.43 MB
2024-11-05 17:28:45,403 - INFO - Starting intensity normalization.
2024-11-05 17:28:45,846 - INFO - Intensity normalization complete.
2024-11-05 17:28:45,846 - INFO - Current memory usage: 639.26 MB
2024-11-05 17:28:45,949 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:28:45,949 - INFO - Computing neighborhood statistics.
2024-11-05 17:28:46,273 - INFO - Neighborhood statistics computed.
2024-11-05 17:28:46,273 - INFO - Current memory usage: 597.37 MB
2024-11-05 17:28:46,273 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:28:46,285 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:28:46,285 - INFO - Current memory usage: 638.99 MB
2024-11-05 17:28:46,285 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:28:46,641 - INFO - Features shape: (10940800, 4)
2024-11-05 17:28:46,641 - INFO - Current memory usage: 889.50 MB
2024-11-05 17:28:46,641 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 17:28:50,884 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:28:53,725 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:28:53,726 - INFO - Current memory usage: 1522.37 MB
2024-11-05 17:28:53,790 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:28:53,790 - INFO - Current memory usage: 938.06 MB
2024-11-05 17:28:53,804 - INFO - Processing Cluster 0.
2024-11-05 17:28:53,829 - INFO - Cluster 0: Initial voxel count = 726547.
2024-11-05 17:28:59,461 - INFO - Cluster 0: Refined voxel count = 143967.
2024-11-05 17:28:59,491 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:28:59,560 - INFO - Cluster 0: Mean Intensity = 0.9759975671768188
2024-11-05 17:28:59,560 - INFO - Processing Cluster 1.
2024-11-05 17:28:59,583 - INFO - Cluster 1: Initial voxel count = 2002089.
2024-11-05 17:29:05,748 - INFO - Cluster 1: Refined voxel count = 1926857.
2024-11-05 17:29:05,788 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:29:05,845 - INFO - Cluster 1: Mean Intensity = 0.000823004636913538
2024-11-05 17:29:05,845 - INFO - Processing Cluster 2.
2024-11-05 17:29:05,868 - INFO - Cluster 2: Initial voxel count = 7897788.
2024-11-05 17:29:11,457 - INFO - Cluster 2: Refined voxel count = 7672222.
2024-11-05 17:29:11,496 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:29:11,581 - INFO - Cluster 2: Mean Intensity = 0.06557434797286987
2024-11-05 17:29:11,582 - INFO - Processing Cluster 3.
2024-11-05 17:29:11,603 - INFO - Cluster 3: Initial voxel count = 314376.
2024-11-05 17:29:16,945 - INFO - Cluster 3: Refined voxel count = 233836.
2024-11-05 17:29:16,987 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:29:17,038 - INFO - Cluster 3: Mean Intensity = 7.127853870391846
2024-11-05 17:29:17,039 - INFO - CSF is identified as cluster 1.
2024-11-05 17:29:17,039 - INFO - Starting visualization with PyVista.
2024-11-05 17:29:17,776 - INFO - Adding Original MRI volume.
2024-11-05 17:29:18,090 - INFO - Adding Denoised MRI volume.
2024-11-05 17:29:18,350 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:29:18,482 - INFO - Initial mesh has 26684 points and 52852 faces.
2024-11-05 17:29:18,483 - INFO - Current memory usage: 1084.41 MB
2024-11-05 17:29:18,851 - INFO - Decimated mesh has 13457 points and 26425 faces.
2024-11-05 17:29:18,852 - INFO - Current memory usage: 1100.38 MB
2024-11-05 17:29:18,863 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:29:19,005 - INFO - Initial mesh has 31956 points and 63049 faces.
2024-11-05 17:29:19,005 - INFO - Current memory usage: 1110.84 MB
2024-11-05 17:29:19,494 - INFO - Decimated mesh has 16040 points and 31523 faces.
2024-11-05 17:29:19,494 - INFO - Current memory usage: 1116.89 MB
2024-11-05 17:29:19,506 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:29:19,910 - INFO - Initial mesh has 174184 points and 349507 faces.
2024-11-05 17:29:19,911 - INFO - Current memory usage: 1151.29 MB
2024-11-05 17:29:22,501 - INFO - Decimated mesh has 86565 points and 174753 faces.
2024-11-05 17:29:22,502 - INFO - Current memory usage: 1272.68 MB
2024-11-05 17:29:22,510 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:29:22,620 - INFO - Initial mesh has 40007 points and 80024 faces.
2024-11-05 17:29:22,620 - INFO - Current memory usage: 1279.65 MB
2024-11-05 17:29:23,071 - INFO - Decimated mesh has 20001 points and 40012 faces.
2024-11-05 17:29:23,072 - INFO - Current memory usage: 1279.65 MB
2024-11-05 17:29:23,086 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:29:23,549 - INFO - Translator(prefix=None)
2024-11-05 17:29:23,624 - INFO - awaiting runner setup
2024-11-05 17:29:23,625 - INFO - awaiting site startup
2024-11-05 17:29:23,625 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:29:23,625 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:29:23,625 - INFO - awaiting running future
2024-11-05 17:29:32,067 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:29:32,072 - INFO - Current memory usage: 1291.45 MB
2024-11-05 17:29:32,079 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 17:29:32,545 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:29:32,764 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:29:32,970 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:29:33,189 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:29:33,459 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:29:33,717 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:29:33,970 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:29:34,174 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:29:34,182 - INFO - Pipeline completed successfully.
2024-11-05 17:29:34,183 - INFO - Current memory usage: 1246.77 MB
2024-11-05 17:29:34,183 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:29:34,205 - INFO - Computed density profiles along x and y axes.
2024-11-05 17:29:34,205 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 17:29:34,885 - INFO - Cluster 0: Score = 13899.679443359375 (X: 2047.997802734375, Y: 11851.681640625)
2024-11-05 17:29:34,901 - INFO - Cluster 0: Original Sum = 9209.177734375, Normalized Sum = 179129.671875
2024-11-05 17:29:35,896 - INFO - Cluster 1: Score = 0 (X: 0, Y: 0)
2024-11-05 17:29:35,939 - INFO - Cluster 1: Original Sum = 11053.8828125, Normalized Sum = 2741.86328125
2024-11-05 17:29:37,057 - INFO - Cluster 2: Score = 129069.32043457031 (X: 54845.544189453125, Y: 74223.77624511719)
2024-11-05 17:29:37,144 - INFO - Cluster 2: Original Sum = 82694.2734375, Normalized Sum = 553310.0
2024-11-05 17:29:38,457 - INFO - Cluster 3: Score = 278334.12646484375 (X: 78896.57275390625, Y: 199437.5537109375)
2024-11-05 17:29:38,479 - INFO - Cluster 3: Original Sum = 77656.1875, Normalized Sum = 1867657.375
2024-11-05 17:29:38,479 - INFO - Good cluster identified as Cluster 3 with score 278334.12646484375.
2024-11-05 17:29:40,554 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 17:29:40,555 - INFO - Removing eyes from the good cluster mask.
2024-11-05 17:29:40,555 - INFO - Starting eye detection using connected components analysis.
2024-11-05 17:29:40,696 - INFO - Number of connected components found: 81
2024-11-05 17:29:57,464 - WARNING - Expected to detect 2 eyes, but found 0. Skipping eye removal.
2024-11-05 17:29:57,466 - INFO - Detected eyes at centroids: []
2024-11-05 17:29:59,058 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 17:29:59,058 - INFO - Starting removal of small objects from the CSF mask with minimum size 100 voxels.
2024-11-05 17:29:59,267 - INFO - Small objects removed from the CSF mask. New mask has 231184 voxels.
2024-11-05 17:29:59,283 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 17:29:59,301 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 17:29:59,301 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 17:29:59,307 - INFO - Total CSF Volume: 220474.6946955437 mm³
2024-11-05 17:29:59,307 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 17:29:59,307 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 17:29:59,638 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 17:29:59,816 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 17:29:59,817 - INFO - Visualization process completed.
2024-11-05 17:29:59,818 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:29:59,818 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:29:59,818 - INFO - Final cleanup completed.
2024-11-05 17:29:59,818 - INFO - Current memory usage: 1161.68 MB
2024-11-05 17:30:35,508 - INFO - Logging initiated.
2024-11-05 17:30:35,508 - INFO - Pipeline started.
2024-11-05 17:30:35,508 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:30:35,666 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:30:35,748 - INFO - Denoised image loaded.
2024-11-05 17:30:35,749 - INFO - Current memory usage: 482.94 MB
2024-11-05 17:30:35,787 - INFO - Starting intensity normalization.
2024-11-05 17:30:36,641 - INFO - Intensity normalization complete.
2024-11-05 17:30:36,642 - INFO - Current memory usage: 639.66 MB
2024-11-05 17:30:36,729 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:30:36,729 - INFO - Computing neighborhood statistics.
2024-11-05 17:30:36,982 - INFO - Neighborhood statistics computed.
2024-11-05 17:30:36,982 - INFO - Current memory usage: 597.77 MB
2024-11-05 17:30:36,982 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:30:36,994 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:30:36,994 - INFO - Current memory usage: 639.40 MB
2024-11-05 17:30:36,994 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:30:37,723 - INFO - Features shape: (10940800, 4)
2024-11-05 17:30:37,724 - INFO - Current memory usage: 890.01 MB
2024-11-05 17:30:37,724 - INFO - Performing MiniBatch K-Means clustering with k=10, batch_size=10000, connectivity_weight=0.1.
2024-11-05 17:30:42,948 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:30:49,168 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:30:49,169 - INFO - Current memory usage: 1521.50 MB
2024-11-05 17:30:49,216 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:30:49,216 - INFO - Current memory usage: 937.20 MB
2024-11-05 17:30:49,231 - INFO - Processing Cluster 0.
2024-11-05 17:30:49,249 - INFO - Cluster 0: Initial voxel count = 1474700.
2024-11-05 17:30:52,513 - INFO - Cluster 0: Refined voxel count = 133162.
2024-11-05 17:30:52,534 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:30:52,585 - INFO - Cluster 0: Mean Intensity = 0.3613911271095276
2024-11-05 17:30:52,585 - INFO - Processing Cluster 1.
2024-11-05 17:30:52,598 - INFO - Cluster 1: Initial voxel count = 1380956.
2024-11-05 17:30:56,749 - INFO - Cluster 1: Refined voxel count = 1167764.
2024-11-05 17:30:56,783 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:30:56,845 - INFO - Cluster 1: Mean Intensity = 0.015059777535498142
2024-11-05 17:30:56,845 - INFO - Processing Cluster 2.
2024-11-05 17:30:56,866 - INFO - Cluster 2: Initial voxel count = 1560261.
2024-11-05 17:31:02,290 - INFO - Cluster 2: Refined voxel count = 1483473.
2024-11-05 17:31:02,322 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:31:02,371 - INFO - Cluster 2: Mean Intensity = 0.004173017106950283
2024-11-05 17:31:02,371 - INFO - Processing Cluster 3.
2024-11-05 17:31:02,394 - INFO - Cluster 3: Initial voxel count = 1378169.
2024-11-05 17:31:07,670 - INFO - Cluster 3: Refined voxel count = 1220589.
2024-11-05 17:31:07,701 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:31:07,758 - INFO - Cluster 3: Mean Intensity = 0.010909082368016243
2024-11-05 17:31:07,758 - INFO - Processing Cluster 4.
2024-11-05 17:31:07,776 - INFO - Cluster 4: Initial voxel count = 1487473.
2024-11-05 17:31:13,012 - INFO - Cluster 4: Refined voxel count = 1330774.
2024-11-05 17:31:13,044 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-05 17:31:13,098 - INFO - Cluster 4: Mean Intensity = 0.010605914518237114
2024-11-05 17:31:13,098 - INFO - Processing Cluster 5.
2024-11-05 17:31:13,120 - INFO - Cluster 5: Initial voxel count = 527569.
2024-11-05 17:31:17,823 - INFO - Cluster 5: Refined voxel count = 59590.
2024-11-05 17:31:17,863 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-05 17:31:17,929 - INFO - Cluster 5: Mean Intensity = 1.0233253240585327
2024-11-05 17:31:17,930 - INFO - Processing Cluster 6.
2024-11-05 17:31:17,952 - INFO - Cluster 6: Initial voxel count = 142677.
2024-11-05 17:31:23,242 - INFO - Cluster 6: Refined voxel count = 25263.
2024-11-05 17:31:23,283 - INFO - Refined mask for Cluster 6 saved as 'csf_mask_class_6_refined_2.tif'.
2024-11-05 17:31:23,335 - INFO - Cluster 6: Mean Intensity = 8.2836332321167
2024-11-05 17:31:23,336 - INFO - Processing Cluster 7.
2024-11-05 17:31:23,359 - INFO - Cluster 7: Initial voxel count = 1309380.
2024-11-05 17:31:28,761 - INFO - Cluster 7: Refined voxel count = 1124498.
2024-11-05 17:31:28,795 - INFO - Refined mask for Cluster 7 saved as 'csf_mask_class_7_refined_2.tif'.
2024-11-05 17:31:28,862 - INFO - Cluster 7: Mean Intensity = 0.013605281710624695
2024-11-05 17:31:28,862 - INFO - Processing Cluster 8.
2024-11-05 17:31:28,887 - INFO - Cluster 8: Initial voxel count = 217939.
2024-11-05 17:31:34,316 - INFO - Cluster 8: Refined voxel count = 41376.
2024-11-05 17:31:34,349 - INFO - Refined mask for Cluster 8 saved as 'csf_mask_class_8_refined_2.tif'.
2024-11-05 17:31:34,404 - INFO - Cluster 8: Mean Intensity = 5.1927008628845215
2024-11-05 17:31:34,404 - INFO - Processing Cluster 9.
2024-11-05 17:31:34,429 - INFO - Cluster 9: Initial voxel count = 1461676.
2024-11-05 17:31:39,855 - INFO - Cluster 9: Refined voxel count = 1400116.
2024-11-05 17:31:39,907 - INFO - Refined mask for Cluster 9 saved as 'csf_mask_class_9_refined_2.tif'.
2024-11-05 17:31:39,974 - INFO - Cluster 9: Mean Intensity = 0.004890013951808214
2024-11-05 17:31:39,974 - INFO - CSF is identified as cluster 2.
2024-11-05 17:31:39,975 - INFO - Starting visualization with PyVista.
2024-11-05 17:31:40,769 - INFO - Adding Original MRI volume.
2024-11-05 17:31:41,184 - INFO - Adding Denoised MRI volume.
2024-11-05 17:31:41,897 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:31:42,148 - INFO - Initial mesh has 36423 points and 72194 faces.
2024-11-05 17:31:42,149 - INFO - Current memory usage: 1142.44 MB
2024-11-05 17:31:42,633 - INFO - Decimated mesh has 18368 points and 36097 faces.
2024-11-05 17:31:42,634 - INFO - Current memory usage: 1174.98 MB
2024-11-05 17:31:42,645 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:31:42,830 - INFO - Initial mesh has 35591 points and 70613 faces.
2024-11-05 17:31:42,831 - INFO - Current memory usage: 1179.08 MB
2024-11-05 17:31:43,349 - INFO - Decimated mesh has 17763 points and 35306 faces.
2024-11-05 17:31:43,350 - INFO - Current memory usage: 1185.08 MB
2024-11-05 17:31:43,361 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:31:43,552 - INFO - Initial mesh has 28440 points and 56258 faces.
2024-11-05 17:31:43,552 - INFO - Current memory usage: 1191.18 MB
2024-11-05 17:31:43,969 - INFO - Decimated mesh has 14188 points and 28128 faces.
2024-11-05 17:31:43,970 - INFO - Current memory usage: 1191.18 MB
2024-11-05 17:31:43,980 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:31:44,215 - INFO - Initial mesh has 35934 points and 71633 faces.
2024-11-05 17:31:44,216 - INFO - Current memory usage: 1191.18 MB
2024-11-05 17:31:44,741 - INFO - Decimated mesh has 17872 points and 35816 faces.
2024-11-05 17:31:44,742 - INFO - Current memory usage: 1191.18 MB
2024-11-05 17:31:44,752 - INFO - Adding Mask 4 mesh to visualization.
2024-11-05 17:31:45,002 - INFO - Initial mesh has 38117 points and 75965 faces.
2024-11-05 17:31:45,002 - INFO - Current memory usage: 1201.62 MB
2024-11-05 17:31:45,555 - INFO - Decimated mesh has 18970 points and 37982 faces.
2024-11-05 17:31:45,555 - INFO - Current memory usage: 1201.62 MB
2024-11-05 17:31:45,565 - INFO - Adding Mask 5 mesh to visualization.
2024-11-05 17:31:45,766 - INFO - Initial mesh has 12294 points and 24254 faces.
2024-11-05 17:31:45,767 - INFO - Current memory usage: 1201.62 MB
2024-11-05 17:31:45,925 - INFO - Decimated mesh has 6223 points and 12127 faces.
2024-11-05 17:31:45,926 - INFO - Current memory usage: 1201.62 MB
2024-11-05 17:31:45,936 - INFO - Adding Mask 6 mesh to visualization.
2024-11-05 17:31:46,108 - INFO - Initial mesh has 7795 points and 15338 faces.
2024-11-05 17:31:46,108 - INFO - Current memory usage: 1201.64 MB
2024-11-05 17:31:46,200 - INFO - Decimated mesh has 3960 points and 7668 faces.
2024-11-05 17:31:46,200 - INFO - Current memory usage: 1201.64 MB
2024-11-05 17:31:46,212 - INFO - Adding Mask 7 mesh to visualization.
2024-11-05 17:31:46,437 - INFO - Initial mesh has 33074 points and 65677 faces.
2024-11-05 17:31:46,438 - INFO - Current memory usage: 1201.64 MB
2024-11-05 17:31:46,908 - INFO - Decimated mesh has 16491 points and 32837 faces.
2024-11-05 17:31:46,908 - INFO - Current memory usage: 1201.64 MB
2024-11-05 17:31:46,922 - INFO - Adding Mask 8 mesh to visualization.
2024-11-05 17:31:47,123 - INFO - Initial mesh has 8585 points and 17028 faces.
2024-11-05 17:31:47,124 - INFO - Current memory usage: 1212.08 MB
2024-11-05 17:31:47,231 - INFO - Decimated mesh has 4327 points and 8514 faces.
2024-11-05 17:31:47,232 - INFO - Current memory usage: 1212.08 MB
2024-11-05 17:31:47,242 - INFO - Adding Mask 9 mesh to visualization.
2024-11-05 17:31:47,444 - INFO - Initial mesh has 22987 points and 45548 faces.
2024-11-05 17:31:47,445 - INFO - Current memory usage: 1212.08 MB
2024-11-05 17:31:47,759 - INFO - Decimated mesh has 11468 points and 22774 faces.
2024-11-05 17:31:47,760 - INFO - Current memory usage: 1212.08 MB
2024-11-05 17:31:47,771 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:31:48,186 - INFO - Translator(prefix=None)
2024-11-05 17:31:48,268 - INFO - awaiting runner setup
2024-11-05 17:31:48,269 - INFO - awaiting site startup
2024-11-05 17:31:48,270 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:31:48,270 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:31:48,270 - INFO - awaiting running future
2024-11-05 17:31:58,765 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:31:58,779 - INFO - Current memory usage: 1252.34 MB
2024-11-05 17:31:58,797 - INFO - Selected slice indices for saving: [0, 159]
2024-11-05 17:31:59,398 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:31:59,681 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:31:59,967 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:32:00,257 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:32:00,525 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-05 17:32:00,812 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-05 17:32:01,098 - INFO - Saved slice 0 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_6_overlay.png'.
2024-11-05 17:32:01,370 - INFO - Saved slice 0 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_7_overlay.png'.
2024-11-05 17:32:01,646 - INFO - Saved slice 0 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_8_overlay.png'.
2024-11-05 17:32:01,927 - INFO - Saved slice 0 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_9_overlay.png'.
2024-11-05 17:32:02,207 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:32:02,474 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:32:02,755 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:32:03,174 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:32:03,450 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-05 17:32:03,729 - INFO - Saved slice 159 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_5_overlay.png'.
2024-11-05 17:32:04,005 - INFO - Saved slice 159 overlay for Cluster 6 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_6_overlay.png'.
2024-11-05 17:32:04,284 - INFO - Saved slice 159 overlay for Cluster 7 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_7_overlay.png'.
2024-11-05 17:32:04,558 - INFO - Saved slice 159 overlay for Cluster 8 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_8_overlay.png'.
2024-11-05 17:32:04,841 - INFO - Saved slice 159 overlay for Cluster 9 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_9_overlay.png'.
2024-11-05 17:32:04,852 - INFO - Pipeline completed successfully.
2024-11-05 17:32:04,852 - INFO - Current memory usage: 1207.89 MB
2024-11-05 17:32:04,853 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:32:04,882 - INFO - Computed density profiles along x and y axes.
2024-11-05 17:32:04,883 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 17:32:05,849 - INFO - Cluster 0: Score = 0 (X: 0, Y: 0)
2024-11-05 17:32:05,869 - INFO - Cluster 0: Original Sum = 4167.72900390625, Normalized Sum = 56387.015625
2024-11-05 17:32:06,763 - INFO - Cluster 1: Score = 0 (X: 0, Y: 0)
2024-11-05 17:32:06,780 - INFO - Cluster 1: Original Sum = 9117.18359375, Normalized Sum = 14046.1533203125
2024-11-05 17:32:07,454 - INFO - Cluster 2: Score = 0 (X: 0, Y: 0)
2024-11-05 17:32:07,473 - INFO - Cluster 2: Original Sum = 6866.65087890625, Normalized Sum = 6358.19677734375
2024-11-05 17:32:08,101 - INFO - Cluster 3: Score = 0 (X: 0, Y: 0)
2024-11-05 17:32:08,117 - INFO - Cluster 3: Original Sum = 7892.88623046875, Normalized Sum = 13993.6025390625
2024-11-05 17:32:08,731 - INFO - Cluster 4: Score = 0 (X: 0, Y: 0)
2024-11-05 17:32:08,749 - INFO - Cluster 4: Original Sum = 8792.3759765625, Normalized Sum = 14626.6875
2024-11-05 17:32:09,450 - INFO - Cluster 5: Score = 6193.56982421875 (X: 1394.796630859375, Y: 4798.773193359375)
2024-11-05 17:32:09,465 - INFO - Cluster 5: Original Sum = 4080.18798828125, Normalized Sum = 80780.1875
2024-11-05 17:32:10,468 - INFO - Cluster 6: Score = 99248.99255371094 (X: 57653.69873046875, Y: 41595.29382324219)
2024-11-05 17:32:10,486 - INFO - Cluster 6: Original Sum = 10273.765625, Normalized Sum = 248894.765625
2024-11-05 17:32:11,568 - INFO - Cluster 7: Score = 0 (X: 0, Y: 0)
2024-11-05 17:32:11,593 - INFO - Cluster 7: Original Sum = 8768.7919921875, Normalized Sum = 12189.9580078125
2024-11-05 17:32:12,615 - INFO - Cluster 8: Score = 38415.91955566406 (X: 9323.2353515625, Y: 29092.684204101562)
2024-11-05 17:32:12,631 - INFO - Cluster 8: Original Sum = 16718.900390625, Normalized Sum = 404467.96875
2024-11-05 17:32:13,623 - INFO - Cluster 9: Score = 0 (X: 0, Y: 0)
2024-11-05 17:32:13,652 - INFO - Cluster 9: Original Sum = 7774.205078125, Normalized Sum = 5818.49365234375
2024-11-05 17:32:13,652 - INFO - Good cluster identified as Cluster 6 with score 99248.99255371094.
2024-11-05 17:32:15,500 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 17:32:15,501 - INFO - Removing eyes from the good cluster mask.
2024-11-05 17:32:15,501 - INFO - Starting eye detection using connected components analysis.
2024-11-05 17:32:15,713 - INFO - Number of connected components found: 91
2024-11-05 17:32:34,314 - WARNING - Expected to detect 2 eyes, but found 0. Skipping eye removal.
2024-11-05 17:32:34,322 - INFO - Detected eyes at centroids: []
2024-11-05 17:32:37,323 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 17:32:37,323 - INFO - Starting removal of small objects from the CSF mask with minimum size 100 voxels.
2024-11-05 17:32:37,640 - INFO - Small objects removed from the CSF mask. New mask has 22208 voxels.
2024-11-05 17:32:37,669 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 17:32:37,698 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 17:32:37,698 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 17:32:37,708 - INFO - Total CSF Volume: 21179.242593772207 mm³
2024-11-05 17:32:37,708 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 17:32:37,709 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 17:32:37,885 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 17:32:37,954 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 17:32:37,955 - INFO - Visualization process completed.
2024-11-05 17:32:37,957 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:32:37,957 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:32:37,957 - INFO - Final cleanup completed.
2024-11-05 17:32:37,958 - INFO - Current memory usage: 1366.96 MB
2024-11-05 17:34:06,165 - INFO - Logging initiated.
2024-11-05 17:34:06,165 - INFO - Pipeline started.
2024-11-05 17:34:06,165 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:34:06,317 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:34:06,375 - INFO - Denoised image loaded.
2024-11-05 17:34:06,375 - INFO - Current memory usage: 482.33 MB
2024-11-05 17:34:06,411 - INFO - Starting intensity normalization.
2024-11-05 17:34:06,913 - INFO - Intensity normalization complete.
2024-11-05 17:34:06,913 - INFO - Current memory usage: 639.15 MB
2024-11-05 17:34:07,009 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:34:07,009 - INFO - Computing neighborhood statistics.
2024-11-05 17:34:07,242 - INFO - Neighborhood statistics computed.
2024-11-05 17:34:07,242 - INFO - Current memory usage: 597.26 MB
2024-11-05 17:34:07,242 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:34:07,250 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:34:07,250 - INFO - Current memory usage: 638.89 MB
2024-11-05 17:34:07,250 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:34:07,614 - INFO - Features shape: (10940800, 4)
2024-11-05 17:34:07,614 - INFO - Current memory usage: 889.54 MB
2024-11-05 17:34:07,614 - INFO - Performing MiniBatch K-Means clustering with k=6, batch_size=10000, connectivity_weight=0.1.
2024-11-05 17:34:12,578 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:34:20,526 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:34:20,527 - INFO - Current memory usage: 1491.57 MB
2024-11-05 17:34:20,593 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:34:20,593 - INFO - Current memory usage: 907.26 MB
2024-11-05 17:34:20,611 - INFO - Processing Cluster 0.
2024-11-05 17:34:20,634 - INFO - Cluster 0: Initial voxel count = 1374596.
2024-11-05 17:34:24,836 - INFO - Cluster 0: Refined voxel count = 501111.
2024-11-05 17:34:24,877 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:34:24,956 - INFO - Cluster 0: Mean Intensity = 0.6020047664642334
2024-11-05 17:34:24,956 - INFO - Processing Cluster 1.
2024-11-05 17:34:24,978 - INFO - Cluster 1: Initial voxel count = 246724.
2024-11-05 17:34:30,464 - INFO - Cluster 1: Refined voxel count = 2555.
2024-11-05 17:34:30,488 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:34:30,549 - INFO - Cluster 1: Mean Intensity = 0.9734421372413635
2024-11-05 17:34:30,549 - INFO - Processing Cluster 2.
2024-11-05 17:34:30,567 - INFO - Cluster 2: Initial voxel count = 196907.
2024-11-05 17:34:35,662 - INFO - Cluster 2: Refined voxel count = 53306.
2024-11-05 17:34:35,694 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:34:35,749 - INFO - Cluster 2: Mean Intensity = 6.645639419555664
2024-11-05 17:34:35,749 - INFO - Processing Cluster 3.
2024-11-05 17:34:35,774 - INFO - Cluster 3: Initial voxel count = 115871.
2024-11-05 17:34:40,979 - INFO - Cluster 3: Refined voxel count = 13151.
2024-11-05 17:34:41,010 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:34:41,059 - INFO - Cluster 3: Mean Intensity = 8.113704681396484
2024-11-05 17:34:41,059 - INFO - Processing Cluster 4.
2024-11-05 17:34:41,079 - INFO - Cluster 4: Initial voxel count = 4513501.
2024-11-05 17:34:45,524 - INFO - Cluster 4: Refined voxel count = 4127134.
2024-11-05 17:34:45,555 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-05 17:34:45,624 - INFO - Cluster 4: Mean Intensity = 0.016823887825012207
2024-11-05 17:34:45,624 - INFO - Processing Cluster 5.
2024-11-05 17:34:45,645 - INFO - Cluster 5: Initial voxel count = 4493201.
2024-11-05 17:34:51,182 - INFO - Cluster 5: Refined voxel count = 4102093.
2024-11-05 17:34:51,204 - INFO - Refined mask for Cluster 5 saved as 'csf_mask_class_5_refined_2.tif'.
2024-11-05 17:34:51,273 - INFO - Cluster 5: Mean Intensity = 0.01716787740588188
2024-11-05 17:34:51,274 - INFO - CSF is identified as cluster 4.
2024-11-05 17:34:51,274 - INFO - Starting visualization with PyVista.
2024-11-05 17:34:52,290 - INFO - Adding Original MRI volume.
2024-11-05 17:34:52,573 - INFO - Adding Denoised MRI volume.
2024-11-05 17:34:53,223 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:34:53,524 - INFO - Initial mesh has 69551 points and 139346 faces.
2024-11-05 17:34:53,525 - INFO - Current memory usage: 1082.82 MB
2024-11-05 17:34:54,283 - INFO - Decimated mesh has 34695 points and 69673 faces.
2024-11-05 17:34:54,284 - INFO - Current memory usage: 1147.21 MB
2024-11-05 17:34:54,293 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:34:54,472 - INFO - Initial mesh has 800 points and 1520 faces.
2024-11-05 17:34:54,472 - INFO - Current memory usage: 1150.41 MB
2024-11-05 17:34:54,476 - INFO - Decimated mesh has 415 points and 759 faces.
2024-11-05 17:34:54,477 - INFO - Current memory usage: 1150.41 MB
2024-11-05 17:34:54,482 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:34:54,590 - INFO - Initial mesh has 10744 points and 21428 faces.
2024-11-05 17:34:54,590 - INFO - Current memory usage: 1150.41 MB
2024-11-05 17:34:54,673 - INFO - Decimated mesh has 5387 points and 10714 faces.
2024-11-05 17:34:54,673 - INFO - Current memory usage: 1150.41 MB
2024-11-05 17:34:54,681 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:34:54,819 - INFO - Initial mesh has 4456 points and 8740 faces.
2024-11-05 17:34:54,819 - INFO - Current memory usage: 1150.42 MB
2024-11-05 17:34:54,844 - INFO - Decimated mesh has 2271 points and 4370 faces.
2024-11-05 17:34:54,844 - INFO - Current memory usage: 1150.42 MB
2024-11-05 17:34:54,849 - INFO - Adding Mask 4 mesh to visualization.
2024-11-05 17:34:55,049 - INFO - Initial mesh has 93403 points and 186532 faces.
2024-11-05 17:34:55,049 - INFO - Current memory usage: 1150.42 MB
2024-11-05 17:34:56,074 - INFO - Decimated mesh has 46489 points and 93265 faces.
2024-11-05 17:34:56,074 - INFO - Current memory usage: 1207.67 MB
2024-11-05 17:34:56,082 - INFO - Adding Mask 5 mesh to visualization.
2024-11-05 17:34:56,279 - INFO - Initial mesh has 95543 points and 190738 faces.
2024-11-05 17:34:56,280 - INFO - Current memory usage: 1207.79 MB
2024-11-05 17:34:57,327 - INFO - Decimated mesh has 47563 points and 95369 faces.
2024-11-05 17:34:57,328 - INFO - Current memory usage: 1227.79 MB
2024-11-05 17:34:57,337 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:34:57,716 - INFO - Translator(prefix=None)
2024-11-05 17:34:57,816 - INFO - awaiting runner setup
2024-11-05 17:34:57,816 - INFO - awaiting site startup
2024-11-05 17:34:57,817 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:34:57,817 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:34:57,817 - INFO - awaiting running future
2024-11-05 17:35:04,722 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:35:04,729 - INFO - Current memory usage: 1256.42 MB
2024-11-05 17:35:04,734 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-05 17:35:05,146 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:35:05,290 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:35:05,436 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:35:05,571 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:35:05,706 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-05 17:35:05,852 - INFO - Saved slice 0 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_5_overlay.png'.
2024-11-05 17:35:06,008 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-05 17:35:06,164 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-05 17:35:06,322 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-05 17:35:06,480 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-05 17:35:06,642 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-05 17:35:06,798 - INFO - Saved slice 79 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_5_overlay.png'.
2024-11-05 17:35:06,931 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:35:07,104 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:35:07,250 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:35:07,393 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:35:07,538 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-05 17:35:07,680 - INFO - Saved slice 159 overlay for Cluster 5 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_5_overlay.png'.
2024-11-05 17:35:07,686 - INFO - Pipeline completed successfully.
2024-11-05 17:35:07,686 - INFO - Current memory usage: 1213.73 MB
2024-11-05 17:35:07,686 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:35:07,701 - INFO - Computed density profiles along x and y axes.
2024-11-05 17:35:07,701 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 17:35:08,218 - INFO - Cluster 0: Score = 38907.405029296875 (X: 4811.37353515625, Y: 34096.031494140625)
2024-11-05 17:35:08,231 - INFO - Cluster 0: Original Sum = 23019.998046875, Normalized Sum = 396621.875
2024-11-05 17:35:08,727 - INFO - Cluster 1: Score = 0 (X: 0, Y: 0)
2024-11-05 17:35:08,733 - INFO - Cluster 1: Original Sum = 325.621826171875, Normalized Sum = 7257.81640625
2024-11-05 17:35:09,345 - INFO - Cluster 2: Score = 58836.23278808594 (X: 11721.89208984375, Y: 47114.34069824219)
2024-11-05 17:35:09,352 - INFO - Cluster 2: Original Sum = 21939.8515625, Normalized Sum = 531126.3125
2024-11-05 17:35:09,859 - INFO - Cluster 3: Score = 52498.277404785156 (X: 32383.144653320312, Y: 20115.132751464844)
2024-11-05 17:35:09,867 - INFO - Cluster 3: Original Sum = 5377.2431640625, Normalized Sum = 130297.5
2024-11-05 17:35:10,410 - INFO - Cluster 4: Score = 0 (X: 0, Y: 0)
2024-11-05 17:35:10,432 - INFO - Cluster 4: Original Sum = 29203.279296875, Normalized Sum = 64060.64453125
2024-11-05 17:35:11,019 - INFO - Cluster 5: Score = 0 (X: 0, Y: 0)
2024-11-05 17:35:11,044 - INFO - Cluster 5: Original Sum = 29106.4609375, Normalized Sum = 66335.625
2024-11-05 17:35:11,044 - INFO - Good cluster identified as Cluster 2 with score 58836.23278808594.
2024-11-05 17:35:11,990 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 17:35:11,990 - INFO - Removing eyes from the good cluster mask.
2024-11-05 17:35:11,990 - INFO - Starting eye detection using connected components analysis.
2024-11-05 17:35:12,080 - INFO - Number of connected components found: 36
2024-11-05 17:35:13,589 - INFO - Detected potential eye at centroid: (50.28670520231214, 113.42589595375722, 58.83653179190751) with Volume: 4325.0 and Sphericity: 0.86
2024-11-05 17:35:18,556 - INFO - Detected potential eye at centroid: (109.54829678021466, 112.28184787680821, 60.58329444703686) with Volume: 4286.0 and Sphericity: 0.86
2024-11-05 17:35:21,064 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-05 17:35:21,077 - INFO - Eyes have been removed from the CSF mask.
2024-11-05 17:35:21,078 - INFO - Detected eyes at centroids: [(50, 113, 58), (109, 112, 60)]
2024-11-05 17:35:24,251 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 17:35:24,252 - INFO - Starting removal of small objects from the CSF mask with minimum size 100 voxels.
2024-11-05 17:35:24,618 - INFO - Small objects removed from the CSF mask. New mask has 43818 voxels.
2024-11-05 17:35:24,649 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 17:35:24,694 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 17:35:24,695 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 17:35:24,706 - INFO - Total CSF Volume: 41788.186778364136 mm³
2024-11-05 17:35:24,706 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 17:35:24,706 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 17:35:24,918 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 17:35:25,020 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 17:35:25,021 - INFO - Visualization process completed.
2024-11-05 17:35:25,022 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:35:25,022 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:35:25,023 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:35:25,023 - INFO - Final cleanup completed.
2024-11-05 17:35:25,023 - INFO - Current memory usage: 1189.71 MB
2024-11-05 17:36:28,102 - INFO - Logging initiated.
2024-11-05 17:36:28,102 - INFO - Pipeline started.
2024-11-05 17:36:28,102 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:36:28,690 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:36:28,860 - INFO - Denoised image loaded.
2024-11-05 17:36:28,860 - INFO - Current memory usage: 471.94 MB
2024-11-05 17:36:28,953 - INFO - Starting intensity normalization.
2024-11-05 17:36:29,786 - INFO - Intensity normalization complete.
2024-11-05 17:36:29,786 - INFO - Current memory usage: 614.28 MB
2024-11-05 17:36:29,919 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:36:29,919 - INFO - Computing neighborhood statistics.
2024-11-05 17:36:30,408 - INFO - Neighborhood statistics computed.
2024-11-05 17:36:30,409 - INFO - Current memory usage: 572.27 MB
2024-11-05 17:36:30,409 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:36:30,435 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:36:30,436 - INFO - Current memory usage: 613.89 MB
2024-11-05 17:36:30,436 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:36:31,313 - INFO - Features shape: (10940800, 4)
2024-11-05 17:36:31,314 - INFO - Current memory usage: 859.93 MB
2024-11-05 17:36:31,314 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.1.
2024-11-05 17:36:38,419 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:36:40,889 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:36:40,890 - INFO - Current memory usage: 1451.94 MB
2024-11-05 17:36:40,960 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:36:40,961 - INFO - Current memory usage: 867.64 MB
2024-11-05 17:36:40,979 - INFO - Processing Cluster 0.
2024-11-05 17:36:41,007 - INFO - Cluster 0: Initial voxel count = 726547.
2024-11-05 17:36:45,030 - INFO - Cluster 0: Refined voxel count = 143967.
2024-11-05 17:36:45,044 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:36:45,094 - INFO - Cluster 0: Mean Intensity = 0.9759975671768188
2024-11-05 17:36:45,094 - INFO - Processing Cluster 1.
2024-11-05 17:36:45,110 - INFO - Cluster 1: Initial voxel count = 2002089.
2024-11-05 17:36:48,543 - INFO - Cluster 1: Refined voxel count = 1926857.
2024-11-05 17:36:48,559 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:36:48,606 - INFO - Cluster 1: Mean Intensity = 0.000823004636913538
2024-11-05 17:36:48,606 - INFO - Processing Cluster 2.
2024-11-05 17:36:48,623 - INFO - Cluster 2: Initial voxel count = 7897788.
2024-11-05 17:36:53,757 - INFO - Cluster 2: Refined voxel count = 7672222.
2024-11-05 17:36:53,777 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:36:53,936 - INFO - Cluster 2: Mean Intensity = 0.06557434797286987
2024-11-05 17:36:53,936 - INFO - Processing Cluster 3.
2024-11-05 17:36:53,957 - INFO - Cluster 3: Initial voxel count = 314376.
2024-11-05 17:36:58,325 - INFO - Cluster 3: Refined voxel count = 233836.
2024-11-05 17:36:58,353 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:36:58,462 - INFO - Cluster 3: Mean Intensity = 7.127853870391846
2024-11-05 17:36:58,462 - INFO - CSF is identified as cluster 1.
2024-11-05 17:36:58,462 - INFO - Starting visualization with PyVista.
2024-11-05 17:36:59,592 - INFO - Adding Original MRI volume.
2024-11-05 17:37:00,209 - INFO - Adding Denoised MRI volume.
2024-11-05 17:37:00,846 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:37:01,065 - INFO - Initial mesh has 26684 points and 52852 faces.
2024-11-05 17:37:01,066 - INFO - Current memory usage: 1018.81 MB
2024-11-05 17:37:01,474 - INFO - Decimated mesh has 13457 points and 26425 faces.
2024-11-05 17:37:01,475 - INFO - Current memory usage: 1032.08 MB
2024-11-05 17:37:01,487 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:37:01,726 - INFO - Initial mesh has 31956 points and 63049 faces.
2024-11-05 17:37:01,727 - INFO - Current memory usage: 1042.71 MB
2024-11-05 17:37:02,259 - INFO - Decimated mesh has 16040 points and 31523 faces.
2024-11-05 17:37:02,260 - INFO - Current memory usage: 1047.59 MB
2024-11-05 17:37:02,271 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:37:02,955 - INFO - Initial mesh has 174184 points and 349507 faces.
2024-11-05 17:37:02,956 - INFO - Current memory usage: 1078.84 MB
2024-11-05 17:37:05,643 - INFO - Decimated mesh has 86565 points and 174753 faces.
2024-11-05 17:37:05,644 - INFO - Current memory usage: 1209.21 MB
2024-11-05 17:37:05,657 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:37:05,833 - INFO - Initial mesh has 40007 points and 80024 faces.
2024-11-05 17:37:05,834 - INFO - Current memory usage: 1209.21 MB
2024-11-05 17:37:06,455 - INFO - Decimated mesh has 20001 points and 40012 faces.
2024-11-05 17:37:06,456 - INFO - Current memory usage: 1209.21 MB
2024-11-05 17:37:06,470 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:37:06,903 - INFO - Translator(prefix=None)
2024-11-05 17:37:06,987 - INFO - awaiting runner setup
2024-11-05 17:37:06,988 - INFO - awaiting site startup
2024-11-05 17:37:06,989 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:37:06,989 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:37:06,989 - INFO - awaiting running future
2024-11-05 17:37:13,233 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:37:13,250 - INFO - Current memory usage: 1202.96 MB
2024-11-05 17:37:13,266 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-05 17:37:13,834 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:37:13,982 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:37:14,130 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:37:14,276 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:37:14,444 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-05 17:37:14,621 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-05 17:37:14,811 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-05 17:37:14,992 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-05 17:37:15,158 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:37:15,326 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:37:15,476 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:37:15,629 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:37:15,635 - INFO - Pipeline completed successfully.
2024-11-05 17:37:15,635 - INFO - Current memory usage: 1163.34 MB
2024-11-05 17:37:15,635 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:37:15,652 - INFO - Computed density profiles along x and y axes.
2024-11-05 17:37:15,652 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 17:37:16,225 - INFO - Cluster 0: Score = 13899.679443359375 (X: 2047.997802734375, Y: 11851.681640625)
2024-11-05 17:37:16,238 - INFO - Cluster 0: Original Sum = 9209.177734375, Normalized Sum = 179129.671875
2024-11-05 17:37:16,870 - INFO - Cluster 1: Score = 0 (X: 0, Y: 0)
2024-11-05 17:37:16,890 - INFO - Cluster 1: Original Sum = 11053.8828125, Normalized Sum = 2741.86328125
2024-11-05 17:37:17,464 - INFO - Cluster 2: Score = 129069.32043457031 (X: 54845.544189453125, Y: 74223.77624511719)
2024-11-05 17:37:17,505 - INFO - Cluster 2: Original Sum = 82694.2734375, Normalized Sum = 553310.0
2024-11-05 17:37:18,067 - INFO - Cluster 3: Score = 278334.12646484375 (X: 78896.57275390625, Y: 199437.5537109375)
2024-11-05 17:37:18,081 - INFO - Cluster 3: Original Sum = 77656.1875, Normalized Sum = 1867657.375
2024-11-05 17:37:18,081 - INFO - Good cluster identified as Cluster 3 with score 278334.12646484375.
2024-11-05 17:37:19,163 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 17:37:19,163 - INFO - Removing eyes from the good cluster mask.
2024-11-05 17:37:19,164 - INFO - Starting eye detection using connected components analysis.
2024-11-05 17:37:19,251 - INFO - Number of connected components found: 81
2024-11-05 17:37:35,859 - WARNING - Expected to detect 2 eyes, but found 0. Skipping eye removal.
2024-11-05 17:37:35,861 - INFO - Detected eyes at centroids: []
2024-11-05 17:37:37,944 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 17:37:37,944 - INFO - Starting removal of small objects from the CSF mask with minimum size 100 voxels.
2024-11-05 17:37:38,164 - INFO - Small objects removed from the CSF mask. New mask has 231184 voxels.
2024-11-05 17:37:38,185 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 17:37:38,213 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 17:37:38,214 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 17:37:38,221 - INFO - Total CSF Volume: 220474.6946955437 mm³
2024-11-05 17:37:38,221 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 17:37:38,221 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 17:37:38,736 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 17:37:38,965 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 17:37:38,966 - INFO - Visualization process completed.
2024-11-05 17:37:38,967 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:37:38,968 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:37:38,968 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:37:38,968 - INFO - Final cleanup completed.
2024-11-05 17:37:38,968 - INFO - Current memory usage: 1079.57 MB
2024-11-05 17:39:53,055 - INFO - Logging initiated.
2024-11-05 17:39:53,056 - INFO - Pipeline started.
2024-11-05 17:39:53,056 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:39:53,362 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:39:53,513 - INFO - Denoised image loaded.
2024-11-05 17:39:53,514 - INFO - Current memory usage: 481.79 MB
2024-11-05 17:39:53,608 - INFO - Starting intensity normalization.
2024-11-05 17:39:54,491 - INFO - Intensity normalization complete.
2024-11-05 17:39:54,491 - INFO - Current memory usage: 638.56 MB
2024-11-05 17:39:54,598 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:39:54,598 - INFO - Computing neighborhood statistics.
2024-11-05 17:39:54,930 - INFO - Neighborhood statistics computed.
2024-11-05 17:39:54,930 - INFO - Current memory usage: 596.75 MB
2024-11-05 17:39:54,930 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:39:54,950 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:39:54,950 - INFO - Current memory usage: 638.38 MB
2024-11-05 17:39:54,951 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:39:55,430 - INFO - Features shape: (10940800, 4)
2024-11-05 17:39:55,430 - INFO - Current memory usage: 880.59 MB
2024-11-05 17:39:55,430 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.1.
2024-11-05 17:39:59,545 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:40:03,209 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:40:03,213 - INFO - Current memory usage: 1432.32 MB
2024-11-05 17:40:03,281 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:40:03,281 - INFO - Current memory usage: 848.04 MB
2024-11-05 17:40:03,309 - INFO - Processing Cluster 0.
2024-11-05 17:40:03,333 - INFO - Cluster 0: Initial voxel count = 366322.
2024-11-05 17:40:10,521 - INFO - Cluster 0: Refined voxel count = 9439.
2024-11-05 17:40:10,548 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:40:10,603 - INFO - Cluster 0: Mean Intensity = 1.1371078491210938
2024-11-05 17:40:10,604 - INFO - Processing Cluster 1.
2024-11-05 17:40:10,623 - INFO - Cluster 1: Initial voxel count = 87295.
2024-11-05 17:40:18,419 - INFO - Cluster 1: Refined voxel count = 6083.
2024-11-05 17:40:18,466 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:40:18,544 - INFO - Cluster 1: Mean Intensity = 8.284021377563477
2024-11-05 17:40:18,545 - INFO - Processing Cluster 2.
2024-11-05 17:40:18,579 - INFO - Cluster 2: Initial voxel count = 2149801.
2024-11-05 17:40:27,949 - INFO - Cluster 2: Refined voxel count = 1109225.
2024-11-05 17:40:27,974 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:40:28,056 - INFO - Cluster 2: Mean Intensity = 0.37057578563690186
2024-11-05 17:40:28,057 - INFO - Processing Cluster 3.
2024-11-05 17:40:28,083 - INFO - Cluster 3: Initial voxel count = 214054.
2024-11-05 17:40:34,424 - INFO - Cluster 3: Refined voxel count = 72480.
2024-11-05 17:40:34,450 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:40:34,508 - INFO - Cluster 3: Mean Intensity = 6.990030765533447
2024-11-05 17:40:34,508 - INFO - Processing Cluster 4.
2024-11-05 17:40:34,529 - INFO - Cluster 4: Initial voxel count = 8123328.
2024-11-05 17:40:39,723 - INFO - Cluster 4: Refined voxel count = 7361272.
2024-11-05 17:40:39,753 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-05 17:40:39,863 - INFO - Cluster 4: Mean Intensity = 0.004538159351795912
2024-11-05 17:40:39,864 - INFO - CSF is identified as cluster 4.
2024-11-05 17:40:39,864 - INFO - Starting visualization with PyVista.
2024-11-05 17:40:41,288 - INFO - Adding Original MRI volume.
2024-11-05 17:40:41,666 - INFO - Adding Denoised MRI volume.
2024-11-05 17:40:42,007 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:40:42,144 - INFO - Initial mesh has 2966 points and 5668 faces.
2024-11-05 17:40:42,144 - INFO - Current memory usage: 1008.64 MB
2024-11-05 17:40:42,179 - INFO - Decimated mesh has 1539 points and 2834 faces.
2024-11-05 17:40:42,179 - INFO - Current memory usage: 1009.04 MB
2024-11-05 17:40:42,191 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:40:42,331 - INFO - Initial mesh has 2177 points and 4190 faces.
2024-11-05 17:40:42,332 - INFO - Current memory usage: 1012.59 MB
2024-11-05 17:40:42,352 - INFO - Decimated mesh has 1129 points and 2094 faces.
2024-11-05 17:40:42,353 - INFO - Current memory usage: 1012.59 MB
2024-11-05 17:40:42,361 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:40:42,869 - INFO - Initial mesh has 122827 points and 246238 faces.
2024-11-05 17:40:42,870 - INFO - Current memory usage: 1037.46 MB
2024-11-05 17:40:44,578 - INFO - Decimated mesh has 61115 points and 123118 faces.
2024-11-05 17:40:44,578 - INFO - Current memory usage: 1156.21 MB
2024-11-05 17:40:44,587 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:40:44,705 - INFO - Initial mesh has 13900 points and 27792 faces.
2024-11-05 17:40:44,705 - INFO - Current memory usage: 1158.64 MB
2024-11-05 17:40:44,850 - INFO - Decimated mesh has 6952 points and 13896 faces.
2024-11-05 17:40:44,851 - INFO - Current memory usage: 1158.64 MB
2024-11-05 17:40:44,858 - INFO - Adding Mask 4 mesh to visualization.
2024-11-05 17:40:45,192 - INFO - Initial mesh has 132541 points and 264764 faces.
2024-11-05 17:40:45,193 - INFO - Current memory usage: 1163.86 MB
2024-11-05 17:40:47,303 - INFO - Decimated mesh has 66157 points and 132381 faces.
2024-11-05 17:40:47,303 - INFO - Current memory usage: 1190.23 MB
2024-11-05 17:40:47,315 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:40:47,958 - INFO - Translator(prefix=None)
2024-11-05 17:40:48,074 - INFO - awaiting runner setup
2024-11-05 17:40:48,075 - INFO - awaiting site startup
2024-11-05 17:40:48,076 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:40:48,076 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:40:48,076 - INFO - awaiting running future
2024-11-05 17:40:55,637 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:40:55,644 - INFO - Current memory usage: 1231.00 MB
2024-11-05 17:40:55,651 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-05 17:40:56,147 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:40:56,321 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:40:56,496 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:40:56,733 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:40:56,966 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-05 17:40:57,204 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-05 17:40:57,398 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-05 17:40:57,692 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-05 17:40:57,954 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-05 17:40:58,268 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-05 17:40:58,538 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:40:58,844 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:40:59,085 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:40:59,308 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:40:59,527 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-05 17:40:59,535 - INFO - Pipeline completed successfully.
2024-11-05 17:40:59,536 - INFO - Current memory usage: 1231.21 MB
2024-11-05 17:40:59,536 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:40:59,556 - INFO - Computed density profiles along x and y axes.
2024-11-05 17:40:59,556 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 17:41:00,238 - INFO - Cluster 0: Score = 1665.4549560546875 (X: 0, Y: 1665.4549560546875)
2024-11-05 17:41:00,248 - INFO - Cluster 0: Original Sum = 1025.7689208984375, Normalized Sum = 22387.498046875
2024-11-05 17:41:00,860 - INFO - Cluster 1: Score = 17794.69287109375 (X: 10368.296142578125, Y: 7426.396728515625)
2024-11-05 17:41:00,869 - INFO - Cluster 1: Original Sum = 2574.027587890625, Normalized Sum = 62438.1484375
2024-11-05 17:41:01,453 - INFO - Cluster 2: Score = 70241.64782714844 (X: 23940.431518554688, Y: 46301.21630859375)
2024-11-05 17:41:01,474 - INFO - Cluster 2: Original Sum = 35783.640625, Normalized Sum = 503495.03125
2024-11-05 17:41:02,278 - INFO - Cluster 3: Score = 79552.41796875 (X: 25019.426025390625, Y: 54532.991943359375)
2024-11-05 17:41:02,288 - INFO - Cluster 3: Original Sum = 28672.271484375, Normalized Sum = 693203.4375
2024-11-05 17:41:03,358 - INFO - Cluster 4: Score = 0 (X: 0, Y: 0)
2024-11-05 17:41:03,419 - INFO - Cluster 4: Original Sum = 43150.87109375, Normalized Sum = 34564.93359375
2024-11-05 17:41:03,419 - INFO - Good cluster identified as Cluster 3 with score 79552.41796875.
2024-11-05 17:41:04,869 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 17:41:04,869 - INFO - Removing eyes from the good cluster mask.
2024-11-05 17:41:04,869 - INFO - Starting eye detection using connected components analysis.
2024-11-05 17:41:04,984 - INFO - Number of connected components found: 48
2024-11-05 17:41:05,358 - INFO - Detected potential eye at centroid: (29.302681992337163, 62.94252873563219, 169.73946360153258) with Volume: 261.0 and Sphericity: 0.77
2024-11-05 17:41:07,124 - INFO - Detected potential eye at centroid: (41.77922077922078, 60.721706864564005, 185.00371057513914) with Volume: 539.0 and Sphericity: 0.64
2024-11-05 17:41:08,575 - INFO - Detected potential eye at centroid: (50.39059174116645, 113.34291187739464, 58.535972754363556) with Volume: 4698.0 and Sphericity: 0.86
2024-11-05 17:41:11,964 - INFO - Detected potential eye at centroid: (77.13265306122449, 117.43537414965986, 122.10544217687075) with Volume: 294.0 and Sphericity: 0.75
2024-11-05 17:41:14,561 - INFO - Detected potential eye at centroid: (82.73252279635258, 150.95440729483283, 129.66413373860183) with Volume: 658.0 and Sphericity: 0.69
2024-11-05 17:41:16,590 - INFO - Detected potential eye at centroid: (105.00791556728232, 108.58970976253298, 163.12532981530342) with Volume: 758.0 and Sphericity: 0.75
2024-11-05 17:41:17,194 - INFO - Detected potential eye at centroid: (109.54909332153915, 112.25608137992039, 60.49977885891199) with Volume: 4522.0 and Sphericity: 0.87
2024-11-05 17:41:19,105 - INFO - Detected potential eye at centroid: (124.35514018691589, 56.55140186915888, 170.16355140186917) with Volume: 214.0 and Sphericity: 0.86
2024-11-05 17:41:20,214 - WARNING - Expected to detect 2 eyes, but found 8. Skipping eye removal.
2024-11-05 17:41:20,216 - INFO - Detected eyes at centroids: []
2024-11-05 17:41:23,065 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 17:41:23,066 - INFO - Starting removal of small objects from the CSF mask with minimum size 100 voxels.
2024-11-05 17:41:23,437 - INFO - Small objects removed from the CSF mask. New mask has 71142 voxels.
2024-11-05 17:41:23,466 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 17:41:23,495 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 17:41:23,495 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 17:41:23,505 - INFO - Total CSF Volume: 67846.43716706333 mm³
2024-11-05 17:41:23,505 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 17:41:23,506 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 17:41:23,737 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 17:41:23,872 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 17:41:23,873 - INFO - Visualization process completed.
2024-11-05 17:41:23,874 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:41:23,874 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:41:23,874 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:41:23,875 - INFO - Final cleanup completed.
2024-11-05 17:41:23,875 - INFO - Current memory usage: 1132.32 MB
2024-11-05 17:43:49,462 - INFO - Logging initiated.
2024-11-05 17:43:49,462 - INFO - Pipeline started.
2024-11-05 17:43:49,462 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:43:49,885 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:43:50,084 - INFO - Denoised image loaded.
2024-11-05 17:43:50,085 - INFO - Current memory usage: 479.82 MB
2024-11-05 17:43:50,264 - INFO - Starting intensity normalization.
2024-11-05 17:43:50,786 - INFO - Intensity normalization complete.
2024-11-05 17:43:50,787 - INFO - Current memory usage: 624.40 MB
2024-11-05 17:43:50,886 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:43:50,886 - INFO - Computing neighborhood statistics.
2024-11-05 17:43:51,220 - INFO - Neighborhood statistics computed.
2024-11-05 17:43:51,220 - INFO - Current memory usage: 582.35 MB
2024-11-05 17:43:51,220 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:43:51,229 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:43:51,230 - INFO - Current memory usage: 623.98 MB
2024-11-05 17:43:51,230 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:43:51,640 - INFO - Features shape: (10940800, 4)
2024-11-05 17:43:51,640 - INFO - Current memory usage: 869.76 MB
2024-11-05 17:43:51,640 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.8.
2024-11-05 17:43:54,231 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:43:56,365 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:43:56,366 - INFO - Current memory usage: 1453.73 MB
2024-11-05 17:43:56,406 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:43:56,407 - INFO - Current memory usage: 869.43 MB
2024-11-05 17:43:56,422 - INFO - Processing Cluster 0.
2024-11-05 17:43:56,446 - INFO - Cluster 0: Initial voxel count = 4184066.
2024-11-05 17:43:59,384 - INFO - Cluster 0: Refined voxel count = 3991662.
2024-11-05 17:43:59,409 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:43:59,453 - INFO - Cluster 0: Mean Intensity = 0.18741321563720703
2024-11-05 17:43:59,453 - INFO - Processing Cluster 1.
2024-11-05 17:43:59,464 - INFO - Cluster 1: Initial voxel count = 3199263.
2024-11-05 17:44:02,056 - INFO - Cluster 1: Refined voxel count = 3161044.
2024-11-05 17:44:02,077 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:44:02,115 - INFO - Cluster 1: Mean Intensity = 0.04969138279557228
2024-11-05 17:44:02,115 - INFO - Processing Cluster 2.
2024-11-05 17:44:02,126 - INFO - Cluster 2: Initial voxel count = 269515.
2024-11-05 17:44:04,863 - INFO - Cluster 2: Refined voxel count = 169115.
2024-11-05 17:44:04,899 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:44:04,936 - INFO - Cluster 2: Mean Intensity = 7.636014938354492
2024-11-05 17:44:04,937 - INFO - Processing Cluster 3.
2024-11-05 17:44:04,959 - INFO - Cluster 3: Initial voxel count = 3287956.
2024-11-05 17:44:07,787 - INFO - Cluster 3: Refined voxel count = 3259507.
2024-11-05 17:44:07,810 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:44:07,852 - INFO - Cluster 3: Mean Intensity = 0.1424376666545868
2024-11-05 17:44:07,852 - INFO - CSF is identified as cluster 1.
2024-11-05 17:44:07,852 - INFO - Starting visualization with PyVista.
2024-11-05 17:44:08,661 - INFO - Adding Original MRI volume.
2024-11-05 17:44:08,881 - INFO - Adding Denoised MRI volume.
2024-11-05 17:44:09,055 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:44:09,471 - INFO - Initial mesh has 38586 points and 76384 faces.
2024-11-05 17:44:09,472 - INFO - Current memory usage: 1020.27 MB
2024-11-05 17:44:09,754 - INFO - Decimated mesh has 19314 points and 38192 faces.
2024-11-05 17:44:09,754 - INFO - Current memory usage: 1057.32 MB
2024-11-05 17:44:09,761 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:44:09,866 - INFO - Initial mesh has 54326 points and 108586 faces.
2024-11-05 17:44:09,866 - INFO - Current memory usage: 1059.35 MB
2024-11-05 17:44:10,286 - INFO - Decimated mesh has 27010 points and 54292 faces.
2024-11-05 17:44:10,286 - INFO - Current memory usage: 1088.29 MB
2024-11-05 17:44:10,292 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:44:10,397 - INFO - Initial mesh has 34232 points and 68440 faces.
2024-11-05 17:44:10,398 - INFO - Current memory usage: 1091.43 MB
2024-11-05 17:44:10,621 - INFO - Decimated mesh has 17122 points and 34220 faces.
2024-11-05 17:44:10,621 - INFO - Current memory usage: 1091.43 MB
2024-11-05 17:44:10,627 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:44:10,711 - INFO - Initial mesh has 22432 points and 44296 faces.
2024-11-05 17:44:10,712 - INFO - Current memory usage: 1091.43 MB
2024-11-05 17:44:10,845 - INFO - Decimated mesh has 11245 points and 22148 faces.
2024-11-05 17:44:10,845 - INFO - Current memory usage: 1091.43 MB
2024-11-05 17:44:10,850 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:44:11,161 - INFO - Translator(prefix=None)
2024-11-05 17:44:11,216 - INFO - awaiting runner setup
2024-11-05 17:44:11,216 - INFO - awaiting site startup
2024-11-05 17:44:11,217 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:44:11,217 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:44:11,217 - INFO - awaiting running future
2024-11-05 17:44:15,558 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:44:15,561 - INFO - Current memory usage: 1154.34 MB
2024-11-05 17:44:15,565 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-05 17:44:15,947 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:44:16,091 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:44:16,215 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:44:16,354 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:44:16,504 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-05 17:44:16,657 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-05 17:44:16,809 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-05 17:44:16,958 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-05 17:44:17,097 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:44:17,247 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:44:17,489 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:44:17,717 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:44:17,725 - INFO - Pipeline completed successfully.
2024-11-05 17:44:17,725 - INFO - Current memory usage: 1112.47 MB
2024-11-05 17:44:17,726 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:44:17,748 - INFO - Computed density profiles along x and y axes.
2024-11-05 17:44:17,748 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 17:44:18,343 - INFO - Cluster 0: Score = 152726.71362304688 (X: 75844.87280273438, Y: 76881.8408203125)
2024-11-05 17:44:18,394 - INFO - Cluster 0: Original Sum = 51935.62109375, Normalized Sum = 625153.625
2024-11-05 17:44:19,256 - INFO - Cluster 1: Score = 40792.17102050781 (X: 16208.515014648438, Y: 24583.656005859375)
2024-11-05 17:44:19,291 - INFO - Cluster 1: Original Sum = 31560.06640625, Normalized Sum = 193049.3125
2024-11-05 17:44:19,984 - INFO - Cluster 2: Score = 255024.44970703125 (X: 87647.29931640625, Y: 167377.150390625)
2024-11-05 17:44:20,000 - INFO - Cluster 2: Original Sum = 60886.26953125, Normalized Sum = 1468788.875
2024-11-05 17:44:20,593 - INFO - Cluster 3: Score = 51437.14404296875 (X: 21035.739013671875, Y: 30401.405029296875)
2024-11-05 17:44:20,619 - INFO - Cluster 3: Original Sum = 50333.82421875, Normalized Sum = 470494.59375
2024-11-05 17:44:20,619 - INFO - Good cluster identified as Cluster 2 with score 255024.44970703125.
2024-11-05 17:44:21,952 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 17:44:21,952 - INFO - Removing eyes from the good cluster mask.
2024-11-05 17:44:21,952 - INFO - Starting eye detection using connected components analysis.
2024-11-05 17:44:22,159 - INFO - Number of connected components found: 91
2024-11-05 17:44:23,263 - INFO - Detected potential eye at centroid: (20.07920792079208, 110.5049504950495, 120.05940594059406) with Volume: 202.0 and Sphericity: 0.77
2024-11-05 17:44:24,218 - INFO - Detected potential eye at centroid: (23.441747572815533, 72.01456310679612, 133.06796116504853) with Volume: 206.0 and Sphericity: 0.76
2024-11-05 17:44:24,684 - INFO - Detected potential eye at centroid: (27.874822190611663, 97.12304409672831, 107.11877667140826) with Volume: 1406.0 and Sphericity: 0.56
2024-11-05 17:44:26,117 - INFO - Detected potential eye at centroid: (42.05553577785689, 105.26130295478818, 115.46279814880741) with Volume: 2809.0 and Sphericity: 0.52
2024-11-05 17:44:27,814 - INFO - Detected potential eye at centroid: (49.53360488798371, 114.28798370672098, 60.723014256619145) with Volume: 4910.0 and Sphericity: 0.68
2024-11-05 17:44:28,018 - INFO - Detected potential eye at centroid: (43.76223776223776, 137.73426573426573, 131.86363636363637) with Volume: 286.0 and Sphericity: 0.78
2024-11-05 17:44:29,029 - INFO - Detected potential eye at centroid: (48.88317757009346, 130.66355140186917, 102.03271028037383) with Volume: 214.0 and Sphericity: 0.82
2024-11-05 17:44:30,510 - INFO - Detected potential eye at centroid: (79.19117647058823, 65.11274509803921, 175.34313725490196) with Volume: 612.0 and Sphericity: 0.55
2024-11-05 17:44:31,219 - INFO - Detected potential eye at centroid: (79.16312849162011, 53.270391061452514, 120.71620111731843) with Volume: 895.0 and Sphericity: 0.60
2024-11-05 17:44:32,004 - INFO - Detected potential eye at centroid: (78.91967871485944, 52.100401606425706, 141.4859437751004) with Volume: 249.0 and Sphericity: 0.74
2024-11-05 17:44:32,292 - INFO - Detected potential eye at centroid: (83.05905511811024, 79.48031496062993, 206.4291338582677) with Volume: 254.0 and Sphericity: 0.60
2024-11-05 17:44:33,040 - INFO - Detected potential eye at centroid: (79.45853658536585, 63.170731707317074, 91.10731707317073) with Volume: 205.0 and Sphericity: 0.77
2024-11-05 17:44:33,516 - INFO - Detected potential eye at centroid: (81.09493670886076, 79.71835443037975, 183.46835443037975) with Volume: 316.0 and Sphericity: 0.77
2024-11-05 17:44:36,253 - INFO - Detected potential eye at centroid: (99.1558752997602, 54.513189448441246, 78.06235011990408) with Volume: 834.0 and Sphericity: 0.52
2024-11-05 17:44:37,399 - INFO - Detected potential eye at centroid: (100.2156862745098, 102.01960784313725, 208.98319327731093) with Volume: 357.0 and Sphericity: 0.81
2024-11-05 17:44:38,204 - INFO - Detected potential eye at centroid: (105.33030303030303, 73.38181818181818, 68.77575757575758) with Volume: 330.0 and Sphericity: 0.58
2024-11-05 17:44:41,114 - INFO - Detected potential eye at centroid: (116.47131147540983, 137.86065573770492, 130.36475409836066) with Volume: 244.0 and Sphericity: 0.78
2024-11-05 17:44:42,790 - INFO - Detected potential eye at centroid: (124.80973451327434, 115.6283185840708, 97.14601769911505) with Volume: 226.0 and Sphericity: 0.73
2024-11-05 17:44:44,119 - INFO - Detected potential eye at centroid: (136.70506912442397, 89.51612903225806, 129.85253456221199) with Volume: 217.0 and Sphericity: 0.77
2024-11-05 17:44:44,334 - INFO - Detected potential eye at centroid: (139.61423220973782, 91.42696629213484, 149.20973782771534) with Volume: 267.0 and Sphericity: 0.79
2024-11-05 17:44:44,779 - INFO - Detected potential eye at centroid: (141.25396825396825, 102.36507936507937, 130.54232804232805) with Volume: 378.0 and Sphericity: 0.70
2024-11-05 17:44:45,432 - WARNING - Expected to detect 2 eyes, but found 21. Skipping eye removal.
2024-11-05 17:44:45,442 - INFO - Detected eyes at centroids: []
2024-11-05 17:44:49,643 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 17:44:49,644 - INFO - Starting removal of small objects from the CSF mask with minimum size 100 voxels.
2024-11-05 17:44:49,990 - INFO - Small objects removed from the CSF mask. New mask has 166346 voxels.
2024-11-05 17:44:50,018 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 17:44:50,049 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 17:44:50,050 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 17:44:50,060 - INFO - Total CSF Volume: 158640.23273161167 mm³
2024-11-05 17:44:50,060 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 17:44:50,061 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 17:44:50,884 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 17:44:51,059 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 17:44:51,060 - INFO - Visualization process completed.
2024-11-05 17:44:51,061 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:44:51,061 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:44:51,061 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:44:51,061 - INFO - Final cleanup completed.
2024-11-05 17:44:51,061 - INFO - Current memory usage: 991.80 MB
2024-11-05 17:46:02,920 - INFO - Logging initiated.
2024-11-05 17:46:02,920 - INFO - Pipeline started.
2024-11-05 17:46:02,920 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:46:03,166 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:46:03,318 - INFO - Denoised image loaded.
2024-11-05 17:46:03,319 - INFO - Current memory usage: 483.08 MB
2024-11-05 17:46:03,402 - INFO - Starting intensity normalization.
2024-11-05 17:46:03,965 - INFO - Intensity normalization complete.
2024-11-05 17:46:03,965 - INFO - Current memory usage: 639.92 MB
2024-11-05 17:46:04,051 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:46:04,051 - INFO - Computing neighborhood statistics.
2024-11-05 17:46:04,327 - INFO - Neighborhood statistics computed.
2024-11-05 17:46:04,328 - INFO - Current memory usage: 598.03 MB
2024-11-05 17:46:04,328 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:46:04,348 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:46:04,348 - INFO - Current memory usage: 639.66 MB
2024-11-05 17:46:04,348 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:46:04,707 - INFO - Features shape: (10940800, 4)
2024-11-05 17:46:04,707 - INFO - Current memory usage: 888.82 MB
2024-11-05 17:46:04,707 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.8.
2024-11-05 17:46:07,519 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:46:08,974 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:46:08,975 - INFO - Current memory usage: 1455.19 MB
2024-11-05 17:46:08,998 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:46:08,998 - INFO - Current memory usage: 870.89 MB
2024-11-05 17:46:09,010 - INFO - Processing Cluster 0.
2024-11-05 17:46:09,029 - INFO - Cluster 0: Initial voxel count = 4184066.
2024-11-05 17:46:16,971 - INFO - Cluster 0: Refined voxel count = 3960486.
2024-11-05 17:46:16,984 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:46:17,029 - INFO - Cluster 0: Mean Intensity = 0.18741321563720703
2024-11-05 17:46:17,029 - INFO - Processing Cluster 1.
2024-11-05 17:46:17,044 - INFO - Cluster 1: Initial voxel count = 3199263.
2024-11-05 17:46:25,257 - INFO - Cluster 1: Refined voxel count = 3113186.
2024-11-05 17:46:25,279 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:46:25,330 - INFO - Cluster 1: Mean Intensity = 0.04969138279557228
2024-11-05 17:46:25,330 - INFO - Processing Cluster 2.
2024-11-05 17:46:25,350 - INFO - Cluster 2: Initial voxel count = 269515.
2024-11-05 17:46:33,517 - INFO - Cluster 2: Refined voxel count = 66916.
2024-11-05 17:46:33,539 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:46:33,577 - INFO - Cluster 2: Mean Intensity = 7.636014938354492
2024-11-05 17:46:33,577 - INFO - Processing Cluster 3.
2024-11-05 17:46:33,591 - INFO - Cluster 3: Initial voxel count = 3287956.
2024-11-05 17:46:41,697 - INFO - Cluster 3: Refined voxel count = 3235850.
2024-11-05 17:46:41,729 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:46:41,783 - INFO - Cluster 3: Mean Intensity = 0.1424376666545868
2024-11-05 17:46:41,783 - INFO - CSF is identified as cluster 1.
2024-11-05 17:46:41,783 - INFO - Starting visualization with PyVista.
2024-11-05 17:46:42,459 - INFO - Adding Original MRI volume.
2024-11-05 17:46:42,628 - INFO - Adding Denoised MRI volume.
2024-11-05 17:46:42,775 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:46:42,849 - INFO - Initial mesh has 27151 points and 53722 faces.
2024-11-05 17:46:42,849 - INFO - Current memory usage: 1015.41 MB
2024-11-05 17:46:43,037 - INFO - Decimated mesh has 13607 points and 26860 faces.
2024-11-05 17:46:43,038 - INFO - Current memory usage: 1043.63 MB
2024-11-05 17:46:43,043 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:46:43,456 - INFO - Initial mesh has 41926 points and 83498 faces.
2024-11-05 17:46:43,457 - INFO - Current memory usage: 1052.34 MB
2024-11-05 17:46:43,800 - INFO - Decimated mesh has 20892 points and 41748 faces.
2024-11-05 17:46:43,800 - INFO - Current memory usage: 1083.89 MB
2024-11-05 17:46:43,806 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:46:43,871 - INFO - Initial mesh has 10722 points and 21348 faces.
2024-11-05 17:46:43,872 - INFO - Current memory usage: 1083.90 MB
2024-11-05 17:46:43,944 - INFO - Decimated mesh has 5385 points and 10674 faces.
2024-11-05 17:46:43,944 - INFO - Current memory usage: 1083.90 MB
2024-11-05 17:46:43,949 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:46:44,015 - INFO - Initial mesh has 18977 points and 37400 faces.
2024-11-05 17:46:44,016 - INFO - Current memory usage: 1083.90 MB
2024-11-05 17:46:44,131 - INFO - Decimated mesh has 9534 points and 18700 faces.
2024-11-05 17:46:44,131 - INFO - Current memory usage: 1083.90 MB
2024-11-05 17:46:44,135 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:46:44,465 - INFO - Translator(prefix=None)
2024-11-05 17:46:44,524 - INFO - awaiting runner setup
2024-11-05 17:46:44,524 - INFO - awaiting site startup
2024-11-05 17:46:44,525 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:46:44,525 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:46:44,525 - INFO - awaiting running future
2024-11-05 17:46:48,393 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:46:48,397 - INFO - Current memory usage: 1134.30 MB
2024-11-05 17:46:48,403 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-05 17:46:48,900 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:46:49,015 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:46:49,129 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:46:49,252 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:46:49,394 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-05 17:46:49,539 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-05 17:46:49,714 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-05 17:46:49,877 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-05 17:46:50,028 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:46:50,172 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:46:50,308 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:46:50,458 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:46:50,463 - INFO - Pipeline completed successfully.
2024-11-05 17:46:50,463 - INFO - Current memory usage: 1092.46 MB
2024-11-05 17:46:50,463 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:46:50,478 - INFO - Computed density profiles along x and y axes.
2024-11-05 17:46:50,479 - INFO - Identifying the good cluster based on density concentration.
2024-11-05 17:46:50,972 - INFO - Cluster 0: Score = 158796.6552734375 (X: 72599.59838867188, Y: 86197.05688476562)
2024-11-05 17:46:50,996 - INFO - Cluster 0: Original Sum = 52614.625, Normalized Sum = 652190.6875
2024-11-05 17:46:51,470 - INFO - Cluster 1: Score = 44350.813720703125 (X: 17169.577392578125, Y: 27181.236328125)
2024-11-05 17:46:51,486 - INFO - Cluster 1: Original Sum = 33511.3046875, Normalized Sum = 255376.640625
2024-11-05 17:46:51,978 - INFO - Cluster 2: Score = 131158.6971435547 (X: 55591.84558105469, Y: 75566.8515625)
2024-11-05 17:46:51,985 - INFO - Cluster 2: Original Sum = 29117.953125, Normalized Sum = 707226.3125
2024-11-05 17:46:52,459 - INFO - Cluster 3: Score = 50100.19384765625 (X: 23782.404541015625, Y: 26317.789306640625)
2024-11-05 17:46:52,478 - INFO - Cluster 3: Original Sum = 49900.5859375, Normalized Sum = 467546.03125
2024-11-05 17:46:52,479 - INFO - Good cluster identified as Cluster 0 with score 158796.6552734375.
2024-11-05 17:46:53,421 - INFO - 2D histogram saved as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/density_histogram.png'.
2024-11-05 17:46:53,421 - INFO - Removing eyes from the good cluster mask.
2024-11-05 17:46:53,421 - INFO - Starting eye detection using connected components analysis.
2024-11-05 17:46:53,520 - INFO - Number of connected components found: 2
2024-11-05 17:46:54,061 - INFO - Detected potential eye at centroid: (82.78515111695138, 216.4329829172142, 130.05059132720106) with Volume: 1522.0 and Sphericity: 0.59
2024-11-05 17:46:54,061 - WARNING - Expected to detect 2 eyes, but found 1. Skipping eye removal.
2024-11-05 17:46:54,064 - INFO - Detected eyes at centroids: []
2024-11-05 17:46:55,526 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 17:46:55,526 - INFO - Starting removal of small objects from the CSF mask with minimum size 100 voxels.
2024-11-05 17:46:55,707 - INFO - Small objects removed from the CSF mask. New mask has 3960486 voxels.
2024-11-05 17:46:55,725 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 17:46:55,756 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 17:46:55,756 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 17:46:55,762 - INFO - Total CSF Volume: 3777021.5140147028 mm³
2024-11-05 17:46:55,763 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 17:46:55,763 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 17:46:56,065 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 17:46:56,200 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 17:46:56,200 - INFO - Visualization process completed.
2024-11-05 17:46:56,333 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:46:56,482 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-05 17:46:56,617 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:46:56,621 - INFO - Final cleanup completed.
2024-11-05 17:46:56,622 - INFO - Current memory usage: 1174.47 MB
2024-11-05 17:54:21,735 - INFO - Logging initiated.
2024-11-05 17:54:21,735 - INFO - Pipeline started.
2024-11-05 17:54:21,735 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:54:22,010 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:54:22,198 - INFO - Denoised image loaded.
2024-11-05 17:54:22,199 - INFO - Current memory usage: 479.05 MB
2024-11-05 17:54:22,303 - INFO - Starting intensity normalization.
2024-11-05 17:54:22,888 - INFO - Intensity normalization complete.
2024-11-05 17:54:22,890 - INFO - Current memory usage: 599.16 MB
2024-11-05 17:54:22,980 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:54:22,980 - INFO - Computing neighborhood statistics.
2024-11-05 17:54:23,281 - INFO - Neighborhood statistics computed.
2024-11-05 17:54:23,281 - INFO - Current memory usage: 557.43 MB
2024-11-05 17:54:23,281 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:54:23,338 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:54:23,338 - INFO - Current memory usage: 599.06 MB
2024-11-05 17:54:23,339 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:54:23,855 - INFO - Features shape: (10940800, 4)
2024-11-05 17:54:23,868 - INFO - Current memory usage: 804.02 MB
2024-11-05 17:54:23,868 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.8.
2024-11-05 17:54:28,134 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:54:32,078 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:54:32,086 - INFO - Current memory usage: 1378.60 MB
2024-11-05 17:54:32,163 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:54:32,164 - INFO - Current memory usage: 794.51 MB
2024-11-05 17:54:32,183 - INFO - Processing Cluster 0.
2024-11-05 17:54:32,207 - INFO - Cluster 0: Initial voxel count = 4184066.
2024-11-05 17:54:54,912 - INFO - Cluster 0: Refined voxel count = 3960486.
2024-11-05 17:54:54,935 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:54:55,000 - INFO - Cluster 0: Mean Intensity = 0.18741321563720703
2024-11-05 17:54:55,000 - INFO - Processing Cluster 1.
2024-11-05 17:54:55,021 - INFO - Cluster 1: Initial voxel count = 3199263.
2024-11-05 17:55:10,301 - INFO - Cluster 1: Refined voxel count = 3113186.
2024-11-05 17:55:10,363 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:55:10,404 - INFO - Cluster 1: Mean Intensity = 0.04969138279557228
2024-11-05 17:55:10,404 - INFO - Processing Cluster 2.
2024-11-05 17:55:10,417 - INFO - Cluster 2: Initial voxel count = 269515.
2024-11-05 17:55:23,671 - INFO - Cluster 2: Refined voxel count = 66916.
2024-11-05 17:55:23,687 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:55:23,723 - INFO - Cluster 2: Mean Intensity = 7.636014938354492
2024-11-05 17:55:23,723 - INFO - Processing Cluster 3.
2024-11-05 17:55:23,737 - INFO - Cluster 3: Initial voxel count = 3287956.
2024-11-05 17:55:37,879 - INFO - Cluster 3: Refined voxel count = 3235850.
2024-11-05 17:55:37,904 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:55:37,947 - INFO - Cluster 3: Mean Intensity = 0.1424376666545868
2024-11-05 17:55:37,947 - INFO - CSF is identified as cluster 2.
2024-11-05 17:55:37,947 - INFO - Starting visualization with PyVista.
2024-11-05 17:55:38,975 - INFO - Adding Original MRI volume.
2024-11-05 17:55:39,271 - INFO - Adding Denoised MRI volume.
2024-11-05 17:55:39,530 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:55:39,644 - INFO - Initial mesh has 27151 points and 53722 faces.
2024-11-05 17:55:39,645 - INFO - Current memory usage: 948.14 MB
2024-11-05 17:55:39,943 - INFO - Decimated mesh has 13607 points and 26860 faces.
2024-11-05 17:55:39,943 - INFO - Current memory usage: 976.43 MB
2024-11-05 17:55:39,952 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:55:40,313 - INFO - Initial mesh has 41926 points and 83498 faces.
2024-11-05 17:55:40,314 - INFO - Current memory usage: 984.72 MB
2024-11-05 17:55:40,861 - INFO - Decimated mesh has 20892 points and 41748 faces.
2024-11-05 17:55:40,861 - INFO - Current memory usage: 1016.21 MB
2024-11-05 17:55:40,869 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:55:40,952 - INFO - Initial mesh has 10722 points and 21348 faces.
2024-11-05 17:55:40,952 - INFO - Current memory usage: 1016.22 MB
2024-11-05 17:55:41,047 - INFO - Decimated mesh has 5385 points and 10674 faces.
2024-11-05 17:55:41,048 - INFO - Current memory usage: 1016.22 MB
2024-11-05 17:55:41,055 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:55:41,141 - INFO - Initial mesh has 18977 points and 37400 faces.
2024-11-05 17:55:41,142 - INFO - Current memory usage: 1016.22 MB
2024-11-05 17:55:41,328 - INFO - Decimated mesh has 9534 points and 18700 faces.
2024-11-05 17:55:41,329 - INFO - Current memory usage: 1016.22 MB
2024-11-05 17:55:41,336 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:55:41,855 - INFO - Translator(prefix=None)
2024-11-05 17:55:41,934 - INFO - awaiting runner setup
2024-11-05 17:55:41,934 - INFO - awaiting site startup
2024-11-05 17:55:41,935 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:55:41,935 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:55:41,935 - INFO - awaiting running future
2024-11-05 17:55:48,325 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:55:48,330 - INFO - Current memory usage: 1080.41 MB
2024-11-05 17:55:48,336 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-05 17:55:48,859 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:55:49,050 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:55:49,246 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:55:49,447 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:55:49,671 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-05 17:55:49,898 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-05 17:55:50,127 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-05 17:55:50,355 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-05 17:55:50,555 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:55:50,776 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:55:50,974 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:55:51,206 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:55:51,218 - INFO - Pipeline completed successfully.
2024-11-05 17:55:51,218 - INFO - Current memory usage: 1043.84 MB
2024-11-05 17:55:51,218 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:56:57,189 - INFO - Logging initiated.
2024-11-05 17:56:57,189 - INFO - Pipeline started.
2024-11-05 17:56:57,189 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 17:56:57,401 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 17:56:57,508 - INFO - Denoised image loaded.
2024-11-05 17:56:57,509 - INFO - Current memory usage: 483.73 MB
2024-11-05 17:56:57,558 - INFO - Starting intensity normalization.
2024-11-05 17:56:58,062 - INFO - Intensity normalization complete.
2024-11-05 17:56:58,062 - INFO - Current memory usage: 640.57 MB
2024-11-05 17:56:58,144 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 17:56:58,144 - INFO - Computing neighborhood statistics.
2024-11-05 17:56:58,365 - INFO - Neighborhood statistics computed.
2024-11-05 17:56:58,365 - INFO - Current memory usage: 598.68 MB
2024-11-05 17:56:58,365 - INFO - Computing z-axis value for each voxel.
2024-11-05 17:56:58,373 - INFO - Z-axis value for each voxel computed.
2024-11-05 17:56:58,374 - INFO - Current memory usage: 640.31 MB
2024-11-05 17:56:58,374 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 17:56:58,661 - INFO - Features shape: (10940800, 4)
2024-11-05 17:56:58,661 - INFO - Current memory usage: 890.84 MB
2024-11-05 17:56:58,661 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.8.
2024-11-05 17:57:01,133 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 17:57:02,904 - INFO - Clustering complete with spatial connectivity.
2024-11-05 17:57:02,904 - INFO - Current memory usage: 1503.34 MB
2024-11-05 17:57:02,937 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 17:57:02,937 - INFO - Current memory usage: 919.04 MB
2024-11-05 17:57:02,947 - INFO - Processing Cluster 0.
2024-11-05 17:57:02,963 - INFO - Cluster 0: Initial voxel count = 4184066.
2024-11-05 17:57:10,448 - INFO - Cluster 0: Refined voxel count = 3960486.
2024-11-05 17:57:10,472 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 17:57:10,516 - INFO - Cluster 0: Mean Intensity = 0.18741321563720703
2024-11-05 17:57:10,516 - INFO - Processing Cluster 1.
2024-11-05 17:57:10,526 - INFO - Cluster 1: Initial voxel count = 3199263.
2024-11-05 17:57:18,512 - INFO - Cluster 1: Refined voxel count = 3113186.
2024-11-05 17:57:18,534 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 17:57:18,577 - INFO - Cluster 1: Mean Intensity = 0.04969138279557228
2024-11-05 17:57:18,577 - INFO - Processing Cluster 2.
2024-11-05 17:57:18,588 - INFO - Cluster 2: Initial voxel count = 269515.
2024-11-05 17:57:26,782 - INFO - Cluster 2: Refined voxel count = 66916.
2024-11-05 17:57:26,804 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 17:57:26,837 - INFO - Cluster 2: Mean Intensity = 7.636014938354492
2024-11-05 17:57:26,837 - INFO - Processing Cluster 3.
2024-11-05 17:57:26,851 - INFO - Cluster 3: Initial voxel count = 3287956.
2024-11-05 17:57:35,293 - INFO - Cluster 3: Refined voxel count = 3235850.
2024-11-05 17:57:35,327 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 17:57:35,367 - INFO - Cluster 3: Mean Intensity = 0.1424376666545868
2024-11-05 17:57:35,367 - INFO - CSF is identified as cluster 2.
2024-11-05 17:57:35,367 - INFO - Starting visualization with PyVista.
2024-11-05 17:57:36,023 - INFO - Adding Original MRI volume.
2024-11-05 17:57:36,250 - INFO - Adding Denoised MRI volume.
2024-11-05 17:57:36,409 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 17:57:36,489 - INFO - Initial mesh has 27151 points and 53722 faces.
2024-11-05 17:57:36,490 - INFO - Current memory usage: 1060.77 MB
2024-11-05 17:57:36,680 - INFO - Decimated mesh has 13607 points and 26860 faces.
2024-11-05 17:57:36,680 - INFO - Current memory usage: 1088.61 MB
2024-11-05 17:57:36,686 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 17:57:36,777 - INFO - Initial mesh has 41926 points and 83498 faces.
2024-11-05 17:57:36,778 - INFO - Current memory usage: 1091.19 MB
2024-11-05 17:57:37,150 - INFO - Decimated mesh has 20892 points and 41748 faces.
2024-11-05 17:57:37,150 - INFO - Current memory usage: 1125.15 MB
2024-11-05 17:57:37,155 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 17:57:37,233 - INFO - Initial mesh has 10722 points and 21348 faces.
2024-11-05 17:57:37,233 - INFO - Current memory usage: 1125.15 MB
2024-11-05 17:57:37,310 - INFO - Decimated mesh has 5385 points and 10674 faces.
2024-11-05 17:57:37,310 - INFO - Current memory usage: 1125.15 MB
2024-11-05 17:57:37,316 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 17:57:37,388 - INFO - Initial mesh has 18977 points and 37400 faces.
2024-11-05 17:57:37,389 - INFO - Current memory usage: 1125.16 MB
2024-11-05 17:57:37,518 - INFO - Decimated mesh has 9534 points and 18700 faces.
2024-11-05 17:57:37,519 - INFO - Current memory usage: 1125.16 MB
2024-11-05 17:57:37,523 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:57:37,806 - INFO - Translator(prefix=None)
2024-11-05 17:57:37,860 - INFO - awaiting runner setup
2024-11-05 17:57:37,860 - INFO - awaiting site startup
2024-11-05 17:57:37,861 - INFO - Print WSLINK_READY_MSG
2024-11-05 17:57:37,861 - INFO - Schedule auto shutdown with timout 0
2024-11-05 17:57:37,861 - INFO - awaiting running future
2024-11-05 17:57:42,147 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 17:57:42,151 - INFO - Current memory usage: 1162.23 MB
2024-11-05 17:57:42,156 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-05 17:57:42,537 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 17:57:42,666 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 17:57:42,795 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 17:57:42,934 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 17:57:43,085 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-05 17:57:43,235 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-05 17:57:43,387 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-05 17:57:43,535 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-05 17:57:43,672 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 17:57:43,828 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 17:57:43,967 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 17:57:44,108 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 17:57:44,113 - INFO - Pipeline completed successfully.
2024-11-05 17:57:44,113 - INFO - Current memory usage: 1119.94 MB
2024-11-05 17:57:44,113 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 17:57:44,113 - INFO - Selected good cluster mask with index 2.
2024-11-05 17:57:44,113 - INFO - Removing eyes from the good cluster mask.
2024-11-05 17:57:44,113 - INFO - Starting eye detection using connected components analysis.
2024-11-05 17:57:44,191 - INFO - Number of connected components found: 28
2024-11-05 17:57:44,412 - INFO - Detected potential eye at centroid: (29.853057982525815, 64.18189038919778, 168.80301826846704) with Volume: 1259.0 and Sphericity: 0.60
2024-11-05 17:57:44,587 - INFO - Detected potential eye at centroid: (28.2981220657277, 99.59624413145539, 107.75586854460094) with Volume: 426.0 and Sphericity: 0.77
2024-11-05 17:57:44,759 - INFO - Detected potential eye at centroid: (30.93961352657005, 59.70652173913044, 121.66425120772946) with Volume: 828.0 and Sphericity: 0.85
2024-11-05 17:57:44,937 - INFO - Detected potential eye at centroid: (30.380681818181817, 69.11647727272727, 106.20454545454545) with Volume: 352.0 and Sphericity: 0.85
2024-11-05 17:57:45,111 - INFO - Detected potential eye at centroid: (31.583732057416267, 55.717703349282296, 153.58373205741626) with Volume: 209.0 and Sphericity: 0.89
2024-11-05 17:57:45,281 - INFO - Detected potential eye at centroid: (41.641441441441444, 105.80630630630631, 111.83873873873874) with Volume: 1110.0 and Sphericity: 0.66
2024-11-05 17:57:45,774 - INFO - Detected potential eye at centroid: (42.02300613496933, 145.93865030674846, 145.82208588957056) with Volume: 652.0 and Sphericity: 0.85
2024-11-05 17:57:45,977 - INFO - Detected potential eye at centroid: (49.40124223602484, 114.64869565217391, 61.75950310559006) with Volume: 4025.0 and Sphericity: 0.76
2024-11-05 17:57:46,338 - INFO - Detected potential eye at centroid: (61.54251883745963, 133.0032292787944, 139.78794402583424) with Volume: 929.0 and Sphericity: 0.65
2024-11-05 17:57:46,837 - INFO - Detected potential eye at centroid: (83.07649896623019, 149.75740868366643, 189.31909028256374) with Volume: 1451.0 and Sphericity: 0.66
2024-11-05 17:57:47,341 - INFO - Detected potential eye at centroid: (80.80662983425414, 162.65193370165747, 166.70994475138122) with Volume: 362.0 and Sphericity: 0.86
2024-11-05 17:57:47,836 - INFO - Detected potential eye at centroid: (114.90748189863234, 55.3869670152856, 182.02172164119068) with Volume: 2486.0 and Sphericity: 0.53
2024-11-05 17:57:48,164 - INFO - Detected potential eye at centroid: (102.65491183879094, 37.53400503778337, 162.84886649874056) with Volume: 397.0 and Sphericity: 0.73
2024-11-05 17:57:48,329 - INFO - Detected potential eye at centroid: (106.2039312039312, 75.0982800982801, 202.14250614250614) with Volume: 407.0 and Sphericity: 0.85
2024-11-05 17:57:48,497 - INFO - Detected potential eye at centroid: (117.61324786324786, 143.56623931623932, 145.44871794871796) with Volume: 468.0 and Sphericity: 0.85
2024-11-05 17:57:48,667 - INFO - Detected potential eye at centroid: (119.15174129353234, 46.865671641791046, 147.15174129353233) with Volume: 402.0 and Sphericity: 0.80
2024-11-05 17:57:48,839 - INFO - Detected potential eye at centroid: (121.06852497096399, 102.8281068524971, 117.57142857142857) with Volume: 861.0 and Sphericity: 0.67
2024-11-05 17:57:49,016 - INFO - Detected potential eye at centroid: (127.64787510841283, 57.74674761491761, 119.31830008673028) with Volume: 1153.0 and Sphericity: 0.67
2024-11-05 17:57:49,016 - WARNING - Expected to detect 2 eyes, but found 18. Skipping eye removal.
2024-11-05 17:57:49,019 - INFO - Detected eyes at centroids: []
2024-11-05 17:57:50,717 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 17:57:50,717 - INFO - Starting removal of small objects from the CSF mask with minimum size 100 voxels.
2024-11-05 17:57:50,899 - INFO - Small objects removed from the CSF mask. New mask has 66916 voxels.
2024-11-05 17:57:50,919 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 17:57:50,952 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 17:57:50,952 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 17:57:50,964 - INFO - Total CSF Volume: 63816.201252020044 mm³
2024-11-05 17:57:50,964 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 17:57:50,964 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 17:57:51,105 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 17:57:51,179 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 17:57:51,180 - INFO - Visualization process completed.
2024-11-05 17:57:51,181 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:57:51,182 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:57:51,182 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 17:57:51,182 - INFO - Final cleanup completed.
2024-11-05 17:57:51,182 - INFO - Current memory usage: 1148.21 MB
2024-11-05 18:03:00,972 - INFO - Logging initiated.
2024-11-05 18:03:00,972 - INFO - Pipeline started.
2024-11-05 18:03:00,972 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 18:03:01,320 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 18:03:01,518 - INFO - Denoised image loaded.
2024-11-05 18:03:01,518 - INFO - Current memory usage: 479.04 MB
2024-11-05 18:03:01,624 - INFO - Starting intensity normalization.
2024-11-05 18:03:02,216 - INFO - Intensity normalization complete.
2024-11-05 18:03:02,217 - INFO - Current memory usage: 627.04 MB
2024-11-05 18:03:02,301 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 18:03:02,301 - INFO - Computing neighborhood statistics.
2024-11-05 18:03:02,649 - INFO - Neighborhood statistics computed.
2024-11-05 18:03:02,650 - INFO - Current memory usage: 585.32 MB
2024-11-05 18:03:02,650 - INFO - Computing z-axis value for each voxel.
2024-11-05 18:03:02,711 - INFO - Z-axis value for each voxel computed.
2024-11-05 18:03:02,712 - INFO - Current memory usage: 626.70 MB
2024-11-05 18:03:02,712 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 18:03:03,116 - INFO - Features shape: (10940800, 4)
2024-11-05 18:03:03,116 - INFO - Current memory usage: 872.42 MB
2024-11-05 18:03:03,116 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.8.
2024-11-05 18:03:05,479 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 18:03:06,937 - INFO - Clustering complete with spatial connectivity.
2024-11-05 18:03:06,937 - INFO - Current memory usage: 1488.70 MB
2024-11-05 18:03:06,967 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 18:03:06,967 - INFO - Current memory usage: 904.39 MB
2024-11-05 18:03:06,979 - INFO - Processing Cluster 0.
2024-11-05 18:03:06,998 - INFO - Cluster 0: Initial voxel count = 4184066.
2024-11-05 18:03:15,426 - INFO - Cluster 0: Refined voxel count = 3960486.
2024-11-05 18:03:15,451 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 18:03:15,495 - INFO - Cluster 0: Mean Intensity = 0.18741321563720703
2024-11-05 18:03:15,495 - INFO - Processing Cluster 1.
2024-11-05 18:03:15,513 - INFO - Cluster 1: Initial voxel count = 3199263.
2024-11-05 18:03:23,743 - INFO - Cluster 1: Refined voxel count = 3113186.
2024-11-05 18:03:23,794 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 18:03:23,845 - INFO - Cluster 1: Mean Intensity = 0.04969138279557228
2024-11-05 18:03:23,845 - INFO - Processing Cluster 2.
2024-11-05 18:03:23,856 - INFO - Cluster 2: Initial voxel count = 269515.
2024-11-05 18:03:32,556 - INFO - Cluster 2: Refined voxel count = 66916.
2024-11-05 18:03:32,585 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 18:03:32,619 - INFO - Cluster 2: Mean Intensity = 7.636014938354492
2024-11-05 18:03:32,619 - INFO - Processing Cluster 3.
2024-11-05 18:03:32,632 - INFO - Cluster 3: Initial voxel count = 3287956.
2024-11-05 18:03:40,765 - INFO - Cluster 3: Refined voxel count = 3235850.
2024-11-05 18:03:40,785 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 18:03:40,820 - INFO - Cluster 3: Mean Intensity = 0.1424376666545868
2024-11-05 18:03:40,820 - INFO - CSF is identified as cluster 2.
2024-11-05 18:03:40,820 - INFO - Starting visualization with PyVista.
2024-11-05 18:03:41,480 - INFO - Adding Original MRI volume.
2024-11-05 18:03:41,666 - INFO - Adding Denoised MRI volume.
2024-11-05 18:03:41,839 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 18:03:41,909 - INFO - Initial mesh has 27151 points and 53722 faces.
2024-11-05 18:03:41,910 - INFO - Current memory usage: 1048.03 MB
2024-11-05 18:03:42,110 - INFO - Decimated mesh has 13607 points and 26860 faces.
2024-11-05 18:03:42,110 - INFO - Current memory usage: 1075.98 MB
2024-11-05 18:03:42,116 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 18:03:42,361 - INFO - Initial mesh has 41926 points and 83498 faces.
2024-11-05 18:03:42,361 - INFO - Current memory usage: 1083.82 MB
2024-11-05 18:03:42,696 - INFO - Decimated mesh has 20892 points and 41748 faces.
2024-11-05 18:03:42,697 - INFO - Current memory usage: 1118.12 MB
2024-11-05 18:03:42,702 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 18:03:42,777 - INFO - Initial mesh has 10722 points and 21348 faces.
2024-11-05 18:03:42,777 - INFO - Current memory usage: 1118.13 MB
2024-11-05 18:03:42,844 - INFO - Decimated mesh has 5385 points and 10674 faces.
2024-11-05 18:03:42,844 - INFO - Current memory usage: 1118.13 MB
2024-11-05 18:03:42,849 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 18:03:42,938 - INFO - Initial mesh has 18977 points and 37400 faces.
2024-11-05 18:03:42,939 - INFO - Current memory usage: 1118.01 MB
2024-11-05 18:03:43,060 - INFO - Decimated mesh has 9534 points and 18700 faces.
2024-11-05 18:03:43,060 - INFO - Current memory usage: 1118.01 MB
2024-11-05 18:03:43,065 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 18:03:43,351 - INFO - Translator(prefix=None)
2024-11-05 18:03:43,407 - INFO - awaiting runner setup
2024-11-05 18:03:43,408 - INFO - awaiting site startup
2024-11-05 18:03:43,408 - INFO - Print WSLINK_READY_MSG
2024-11-05 18:03:43,408 - INFO - Schedule auto shutdown with timout 0
2024-11-05 18:03:43,408 - INFO - awaiting running future
2024-11-05 18:03:47,417 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 18:03:47,422 - INFO - Current memory usage: 1155.95 MB
2024-11-05 18:03:47,426 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-05 18:03:47,784 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 18:03:47,910 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 18:03:48,033 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 18:03:48,181 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 18:03:48,325 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-05 18:03:48,469 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-05 18:03:48,616 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-05 18:03:48,761 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-05 18:03:48,902 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 18:03:49,051 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 18:03:49,179 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 18:03:49,313 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 18:03:49,318 - INFO - Pipeline completed successfully.
2024-11-05 18:03:49,319 - INFO - Current memory usage: 1113.57 MB
2024-11-05 18:03:49,319 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 18:03:49,319 - INFO - Selected good cluster mask with index 2.
2024-11-05 18:03:49,319 - INFO - Removing eyes from the good cluster mask.
2024-11-05 18:03:49,319 - INFO - Starting eye detection using connected components analysis.
2024-11-05 18:03:49,394 - INFO - Number of connected components found: 28
2024-11-05 18:03:49,928 - INFO - Detected potential eye at centroid: (28.2981220657277, 99.59624413145539, 107.75586854460094) with Volume: 426.0 and Sphericity: 0.77
2024-11-05 18:03:50,340 - INFO - Detected potential eye at centroid: (30.380681818181817, 69.11647727272727, 106.20454545454545) with Volume: 352.0 and Sphericity: 0.85
2024-11-05 18:03:50,533 - INFO - Detected potential eye at centroid: (31.583732057416267, 55.717703349282296, 153.58373205741626) with Volume: 209.0 and Sphericity: 0.89
2024-11-05 18:03:55,068 - INFO - Detected potential eye at centroid: (80.80662983425414, 162.65193370165747, 166.70994475138122) with Volume: 362.0 and Sphericity: 0.86
2024-11-05 18:03:56,254 - INFO - Detected potential eye at centroid: (102.65491183879094, 37.53400503778337, 162.84886649874056) with Volume: 397.0 and Sphericity: 0.73
2024-11-05 18:03:56,447 - INFO - Detected potential eye at centroid: (106.2039312039312, 75.0982800982801, 202.14250614250614) with Volume: 407.0 and Sphericity: 0.85
2024-11-05 18:03:56,645 - INFO - Detected potential eye at centroid: (117.61324786324786, 143.56623931623932, 145.44871794871796) with Volume: 468.0 and Sphericity: 0.85
2024-11-05 18:03:56,881 - INFO - Detected potential eye at centroid: (119.15174129353234, 46.865671641791046, 147.15174129353233) with Volume: 402.0 and Sphericity: 0.80
2024-11-05 18:03:57,411 - INFO - Detected 8 potential eyes. Selecting the best two based on Z axis and spatial closeness.
2024-11-05 18:03:57,471 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-05 18:03:57,477 - INFO - Eyes have been removed from the CSF mask.
2024-11-05 18:03:57,477 - INFO - Detected eyes at centroids: [(28, 99, 107), (30, 69, 106)]
2024-11-05 18:03:59,038 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 18:03:59,038 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-05 18:03:59,222 - INFO - Small objects removed from the CSF mask. New mask has 65169 voxels.
2024-11-05 18:03:59,241 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 18:03:59,265 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 18:03:59,265 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 18:03:59,271 - INFO - Total CSF Volume: 62150.1288091472 mm³
2024-11-05 18:03:59,271 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 18:03:59,271 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 18:03:59,397 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 18:03:59,465 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 18:03:59,465 - INFO - Visualization process completed.
2024-11-05 18:03:59,467 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 18:03:59,467 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 18:03:59,467 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 18:03:59,467 - INFO - Final cleanup completed.
2024-11-05 18:03:59,467 - INFO - Current memory usage: 1142.07 MB
2024-11-05 18:07:09,515 - INFO - Logging initiated.
2024-11-05 18:07:09,516 - INFO - Pipeline started.
2024-11-05 18:07:09,516 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-05 18:07:09,762 - INFO - Image loaded with shape (160, 790, 260).
2024-11-05 18:07:09,991 - INFO - Denoised image loaded.
2024-11-05 18:07:09,991 - INFO - Current memory usage: 480.86 MB
2024-11-05 18:07:10,103 - INFO - Starting intensity normalization.
2024-11-05 18:07:10,592 - INFO - Intensity normalization complete.
2024-11-05 18:07:10,593 - INFO - Current memory usage: 637.77 MB
2024-11-05 18:07:10,681 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-05 18:07:10,681 - INFO - Computing neighborhood statistics.
2024-11-05 18:07:10,980 - INFO - Neighborhood statistics computed.
2024-11-05 18:07:10,980 - INFO - Current memory usage: 595.89 MB
2024-11-05 18:07:10,980 - INFO - Computing z-axis value for each voxel.
2024-11-05 18:07:10,990 - INFO - Z-axis value for each voxel computed.
2024-11-05 18:07:10,990 - INFO - Current memory usage: 637.52 MB
2024-11-05 18:07:10,990 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-05 18:07:11,373 - INFO - Features shape: (10940800, 4)
2024-11-05 18:07:11,373 - INFO - Current memory usage: 871.80 MB
2024-11-05 18:07:11,373 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.8.
2024-11-05 18:07:13,922 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-05 18:07:15,391 - INFO - Clustering complete with spatial connectivity.
2024-11-05 18:07:15,391 - INFO - Current memory usage: 1466.77 MB
2024-11-05 18:07:15,425 - INFO - Cluster labels reshaped to image dimensions.
2024-11-05 18:07:15,425 - INFO - Current memory usage: 882.46 MB
2024-11-05 18:07:15,436 - INFO - Processing Cluster 0.
2024-11-05 18:07:15,449 - INFO - Cluster 0: Initial voxel count = 4184066.
2024-11-05 18:07:23,174 - INFO - Cluster 0: Refined voxel count = 3960486.
2024-11-05 18:07:23,191 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-05 18:07:23,234 - INFO - Cluster 0: Mean Intensity = 0.18741321563720703
2024-11-05 18:07:23,234 - INFO - Processing Cluster 1.
2024-11-05 18:07:23,244 - INFO - Cluster 1: Initial voxel count = 3199263.
2024-11-05 18:07:31,400 - INFO - Cluster 1: Refined voxel count = 3113186.
2024-11-05 18:07:31,412 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-05 18:07:31,449 - INFO - Cluster 1: Mean Intensity = 0.04969138279557228
2024-11-05 18:07:31,449 - INFO - Processing Cluster 2.
2024-11-05 18:07:31,464 - INFO - Cluster 2: Initial voxel count = 269515.
2024-11-05 18:07:39,677 - INFO - Cluster 2: Refined voxel count = 66916.
2024-11-05 18:07:39,702 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-05 18:07:39,738 - INFO - Cluster 2: Mean Intensity = 7.636014938354492
2024-11-05 18:07:39,738 - INFO - Processing Cluster 3.
2024-11-05 18:07:39,750 - INFO - Cluster 3: Initial voxel count = 3287956.
2024-11-05 18:07:47,919 - INFO - Cluster 3: Refined voxel count = 3235850.
2024-11-05 18:07:47,936 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-05 18:07:47,972 - INFO - Cluster 3: Mean Intensity = 0.1424376666545868
2024-11-05 18:07:47,972 - INFO - CSF is identified as cluster 2.
2024-11-05 18:07:47,972 - INFO - Starting visualization with PyVista.
2024-11-05 18:07:48,761 - INFO - Adding Original MRI volume.
2024-11-05 18:07:48,964 - INFO - Adding Denoised MRI volume.
2024-11-05 18:07:49,191 - INFO - Adding Mask 0 mesh to visualization.
2024-11-05 18:07:49,299 - INFO - Initial mesh has 27151 points and 53722 faces.
2024-11-05 18:07:49,300 - INFO - Current memory usage: 1024.27 MB
2024-11-05 18:07:49,493 - INFO - Decimated mesh has 13607 points and 26860 faces.
2024-11-05 18:07:49,494 - INFO - Current memory usage: 1050.56 MB
2024-11-05 18:07:49,499 - INFO - Adding Mask 1 mesh to visualization.
2024-11-05 18:07:49,839 - INFO - Initial mesh has 41926 points and 83498 faces.
2024-11-05 18:07:49,840 - INFO - Current memory usage: 1060.61 MB
2024-11-05 18:07:50,173 - INFO - Decimated mesh has 20892 points and 41748 faces.
2024-11-05 18:07:50,173 - INFO - Current memory usage: 1089.61 MB
2024-11-05 18:07:50,179 - INFO - Adding Mask 2 mesh to visualization.
2024-11-05 18:07:50,294 - INFO - Initial mesh has 10722 points and 21348 faces.
2024-11-05 18:07:50,294 - INFO - Current memory usage: 1089.73 MB
2024-11-05 18:07:50,359 - INFO - Decimated mesh has 5385 points and 10674 faces.
2024-11-05 18:07:50,359 - INFO - Current memory usage: 1089.73 MB
2024-11-05 18:07:50,365 - INFO - Adding Mask 3 mesh to visualization.
2024-11-05 18:07:50,471 - INFO - Initial mesh has 18977 points and 37400 faces.
2024-11-05 18:07:50,471 - INFO - Current memory usage: 1089.73 MB
2024-11-05 18:07:50,615 - INFO - Decimated mesh has 9534 points and 18700 faces.
2024-11-05 18:07:50,615 - INFO - Current memory usage: 1089.73 MB
2024-11-05 18:07:50,620 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 18:07:50,919 - INFO - Translator(prefix=None)
2024-11-05 18:07:50,976 - INFO - awaiting runner setup
2024-11-05 18:07:50,976 - INFO - awaiting site startup
2024-11-05 18:07:50,976 - INFO - Print WSLINK_READY_MSG
2024-11-05 18:07:50,976 - INFO - Schedule auto shutdown with timout 0
2024-11-05 18:07:50,977 - INFO - awaiting running future
2024-11-05 18:07:55,073 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-05 18:07:55,076 - INFO - Current memory usage: 1137.72 MB
2024-11-05 18:07:55,081 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-05 18:07:55,467 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-05 18:07:55,596 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-05 18:07:55,742 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-05 18:07:55,888 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-05 18:07:56,049 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-05 18:07:56,201 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-05 18:07:56,360 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-05 18:07:56,505 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-05 18:07:56,649 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-05 18:07:56,794 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-05 18:07:56,936 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-05 18:07:57,092 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-05 18:07:57,097 - INFO - Pipeline completed successfully.
2024-11-05 18:07:57,098 - INFO - Current memory usage: 1095.63 MB
2024-11-05 18:07:57,098 - INFO - Selecting and refining the good mask based on density profile.
2024-11-05 18:07:57,098 - INFO - Selected good cluster mask with index 2.
2024-11-05 18:07:57,098 - INFO - Removing eyes from the good cluster mask.
2024-11-05 18:07:57,098 - INFO - Starting eye detection using connected components analysis.
2024-11-05 18:07:57,172 - INFO - Number of connected components found: 28
2024-11-05 18:08:03,915 - INFO - Detected potential eye at centroid: (102.65491183879094, 37.53400503778337, 162.84886649874056) with Volume: 397.0 and Sphericity: 0.73
2024-11-05 18:08:04,111 - INFO - Detected potential eye at centroid: (106.2039312039312, 75.0982800982801, 202.14250614250614) with Volume: 407.0 and Sphericity: 0.85
2024-11-05 18:08:04,308 - INFO - Detected potential eye at centroid: (117.61324786324786, 143.56623931623932, 145.44871794871796) with Volume: 468.0 and Sphericity: 0.85
2024-11-05 18:08:04,505 - INFO - Detected potential eye at centroid: (119.15174129353234, 46.865671641791046, 147.15174129353233) with Volume: 402.0 and Sphericity: 0.80
2024-11-05 18:08:04,982 - INFO - Detected 4 potential eyes within Z-axis range (100, 200). Selecting the best two based on spatial closeness.
2024-11-05 18:08:05,031 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-05 18:08:05,039 - INFO - Eyes have been removed from the CSF mask.
2024-11-05 18:08:05,039 - INFO - Detected eyes at centroids: [(117, 143, 145), (119, 46, 147)]
2024-11-05 18:08:06,644 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-05 18:08:06,644 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-05 18:08:06,834 - INFO - Small objects removed from the CSF mask. New mask has 65077 voxels.
2024-11-05 18:08:06,852 - INFO - Saving the good cluster mask as TIFF.
2024-11-05 18:08:06,876 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-05 18:08:06,877 - INFO - Calculating the volume of CSF in the MRI.
2024-11-05 18:08:06,883 - INFO - Total CSF Volume: 62062.39059235024 mm³
2024-11-05 18:08:06,883 - INFO - Final visualization of the Good CSF Mask.
2024-11-05 18:08:06,883 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-05 18:08:07,009 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-05 18:08:07,068 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-05 18:08:07,069 - INFO - Visualization process completed.
2024-11-05 18:08:07,070 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 18:08:07,070 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 18:08:07,070 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-05 18:08:07,070 - INFO - Final cleanup completed.
2024-11-05 18:08:07,071 - INFO - Current memory usage: 1121.85 MB
2024-11-07 10:20:14,977 - INFO - Logging initiated.
2024-11-07 10:20:14,978 - INFO - Pipeline started.
2024-11-07 10:20:14,978 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 10:20:16,482 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 10:20:17,279 - INFO - Denoised image loaded.
2024-11-07 10:20:17,280 - INFO - Current memory usage: 434.65 MB
2024-11-07 10:20:17,610 - INFO - Starting intensity normalization.
2024-11-07 10:20:19,568 - INFO - Intensity normalization complete.
2024-11-07 10:20:19,571 - INFO - Current memory usage: 556.27 MB
2024-11-07 10:20:19,586 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 10:20:19,586 - INFO - Computing neighborhood statistics.
2024-11-07 10:20:20,407 - INFO - Neighborhood statistics computed.
2024-11-07 10:20:20,408 - INFO - Current memory usage: 514.27 MB
2024-11-07 10:20:20,408 - INFO - Computing z-axis value for each voxel.
2024-11-07 10:20:20,512 - INFO - Z-axis value for each voxel computed.
2024-11-07 10:20:20,513 - INFO - Current memory usage: 555.89 MB
2024-11-07 10:20:20,513 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 10:20:22,235 - INFO - Features shape: (10940800, 4)
2024-11-07 10:20:22,238 - INFO - Current memory usage: 803.95 MB
2024-11-07 10:20:22,239 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.8.
2024-11-07 10:21:03,383 - INFO - Logging initiated.
2024-11-07 10:21:03,383 - INFO - Pipeline started.
2024-11-07 10:21:03,383 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 10:21:04,240 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 10:21:04,720 - INFO - Denoised image loaded.
2024-11-07 10:21:04,721 - INFO - Current memory usage: 482.51 MB
2024-11-07 10:21:05,064 - INFO - Starting intensity normalization.
2024-11-07 10:21:06,980 - INFO - Intensity normalization complete.
2024-11-07 10:21:06,981 - INFO - Current memory usage: 639.30 MB
2024-11-07 10:21:06,994 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 10:21:06,994 - INFO - Computing neighborhood statistics.
2024-11-07 10:21:07,852 - INFO - Neighborhood statistics computed.
2024-11-07 10:21:07,853 - INFO - Current memory usage: 597.40 MB
2024-11-07 10:21:07,853 - INFO - Computing z-axis value for each voxel.
2024-11-07 10:21:08,059 - INFO - Z-axis value for each voxel computed.
2024-11-07 10:21:08,060 - INFO - Current memory usage: 639.02 MB
2024-11-07 10:21:08,060 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 10:21:09,075 - INFO - Features shape: (10940800, 4)
2024-11-07 10:21:09,075 - INFO - Current memory usage: 889.56 MB
2024-11-07 10:21:09,076 - INFO - Performing MiniBatch K-Means clustering with k=4, batch_size=10000, connectivity_weight=0.8.
2024-11-07 10:21:16,364 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 10:21:22,189 - INFO - Clustering complete with spatial connectivity.
2024-11-07 10:21:22,190 - INFO - Current memory usage: 1450.78 MB
2024-11-07 10:21:22,279 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 10:21:22,280 - INFO - Current memory usage: 866.47 MB
2024-11-07 10:21:22,304 - INFO - Processing Cluster 0.
2024-11-07 10:21:22,334 - INFO - Cluster 0: Initial voxel count = 5827953.
2024-11-07 10:21:42,046 - INFO - Cluster 0: Refined voxel count = 5656387.
2024-11-07 10:21:42,083 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 10:21:42,162 - INFO - Cluster 0: Mean Intensity = -0.008794556371867657
2024-11-07 10:21:42,163 - INFO - Processing Cluster 1.
2024-11-07 10:21:42,186 - INFO - Cluster 1: Initial voxel count = 99052.
2024-11-07 10:22:02,146 - INFO - Cluster 1: Refined voxel count = 0.
2024-11-07 10:22:02,147 - WARNING - Refined mask for Cluster 1 is empty.
2024-11-07 10:22:02,177 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 10:22:02,228 - INFO - Cluster 1: Mean Intensity = 8.232141494750977
2024-11-07 10:22:02,228 - INFO - Processing Cluster 2.
2024-11-07 10:22:02,246 - INFO - Cluster 2: Initial voxel count = 4774544.
2024-11-07 10:22:21,667 - INFO - Cluster 2: Refined voxel count = 4631808.
2024-11-07 10:22:21,691 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 10:22:21,770 - INFO - Cluster 2: Mean Intensity = -0.10231243073940277
2024-11-07 10:22:21,771 - INFO - Processing Cluster 3.
2024-11-07 10:22:21,794 - INFO - Cluster 3: Initial voxel count = 239251.
2024-11-07 10:22:37,559 - INFO - Cluster 3: Refined voxel count = 34440.
2024-11-07 10:22:37,592 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 10:22:37,675 - INFO - Cluster 3: Mean Intensity = 6.118994235992432
2024-11-07 10:22:37,675 - INFO - CSF is identified as cluster 1.
2024-11-07 10:22:37,675 - INFO - Starting visualization with PyVista.
2024-11-07 10:22:38,847 - INFO - Adding Original MRI volume.
2024-11-07 10:22:39,251 - INFO - Adding Denoised MRI volume.
2024-11-07 10:22:39,598 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 10:22:40,083 - INFO - Initial mesh has 35073 points and 69636 faces.
2024-11-07 10:22:40,084 - INFO - Current memory usage: 1015.54 MB
2024-11-07 10:22:40,504 - INFO - Decimated mesh has 17534 points and 34818 faces.
2024-11-07 10:22:40,505 - INFO - Current memory usage: 1047.34 MB
2024-11-07 10:22:40,514 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 10:22:40,540 - WARNING - Mask 1 is empty. Skipping visualization.
2024-11-07 10:22:40,540 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 10:22:40,709 - INFO - Initial mesh has 38028 points and 75486 faces.
2024-11-07 10:22:40,709 - INFO - Current memory usage: 1061.38 MB
2024-11-07 10:22:41,239 - INFO - Decimated mesh has 19033 points and 37743 faces.
2024-11-07 10:22:41,240 - INFO - Current memory usage: 1061.51 MB
2024-11-07 10:22:41,254 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 10:22:41,404 - INFO - Initial mesh has 5378 points and 10732 faces.
2024-11-07 10:22:41,404 - INFO - Current memory usage: 1061.55 MB
2024-11-07 10:22:41,470 - INFO - Decimated mesh has 2695 points and 5366 faces.
2024-11-07 10:22:41,471 - INFO - Current memory usage: 1061.55 MB
2024-11-07 10:22:41,480 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 10:22:41,984 - INFO - Translator(prefix=None)
2024-11-07 10:22:42,100 - INFO - awaiting runner setup
2024-11-07 10:22:42,101 - INFO - awaiting site startup
2024-11-07 10:22:42,101 - INFO - Print WSLINK_READY_MSG
2024-11-07 10:22:42,102 - INFO - Schedule auto shutdown with timout 0
2024-11-07 10:22:42,102 - INFO - awaiting running future
2024-11-07 10:22:53,509 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 10:22:53,518 - INFO - Current memory usage: 1099.52 MB
2024-11-07 10:22:53,529 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-07 10:22:54,494 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 10:22:54,797 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 10:22:55,063 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 10:22:55,353 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 10:22:55,605 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-07 10:22:55,841 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-07 10:22:56,082 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-07 10:22:56,319 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-07 10:22:56,582 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-07 10:22:56,854 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-07 10:22:57,113 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-07 10:22:57,385 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-07 10:22:57,394 - INFO - Pipeline completed successfully.
2024-11-07 10:22:57,394 - INFO - Current memory usage: 1057.91 MB
2024-11-07 10:22:57,394 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 10:22:57,394 - INFO - Selected good cluster mask with index 1.
2024-11-07 10:22:57,395 - INFO - Removing eyes from the good cluster mask.
2024-11-07 10:22:57,395 - INFO - Starting eye detection using connected components analysis.
2024-11-07 10:22:57,512 - INFO - Number of connected components found: 0
2024-11-07 10:22:57,582 - WARNING - Expected to detect 2 eyes within Z-axis range (100, 200), but found 0. Skipping eye removal.
2024-11-07 10:22:57,585 - INFO - Detected eyes at centroids: []
2024-11-07 10:23:00,657 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-07 10:23:00,657 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-07 10:23:01,043 - INFO - Small objects removed from the CSF mask. New mask has 0 voxels.
2024-11-07 10:23:01,087 - INFO - Saving the good cluster mask as TIFF.
2024-11-07 10:23:01,128 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-07 10:23:01,128 - INFO - Calculating the volume of CSF in the MRI.
2024-11-07 10:23:01,140 - INFO - Total CSF Volume: 0.0 mm³
2024-11-07 10:23:01,140 - INFO - Final visualization of the Good CSF Mask.
2024-11-07 10:23:01,140 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-07 10:24:21,790 - INFO - Logging initiated.
2024-11-07 10:24:21,790 - INFO - Pipeline started.
2024-11-07 10:24:21,790 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 10:24:22,293 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 10:24:22,628 - INFO - Denoised image loaded.
2024-11-07 10:24:22,629 - INFO - Current memory usage: 480.96 MB
2024-11-07 10:24:22,851 - INFO - Starting intensity normalization.
2024-11-07 10:24:24,044 - INFO - Intensity normalization complete.
2024-11-07 10:24:24,045 - INFO - Current memory usage: 627.93 MB
2024-11-07 10:24:24,064 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 10:24:24,065 - INFO - Computing neighborhood statistics.
2024-11-07 10:24:24,756 - INFO - Neighborhood statistics computed.
2024-11-07 10:24:24,757 - INFO - Current memory usage: 586.04 MB
2024-11-07 10:24:24,757 - INFO - Computing z-axis value for each voxel.
2024-11-07 10:24:24,833 - INFO - Z-axis value for each voxel computed.
2024-11-07 10:24:24,834 - INFO - Current memory usage: 627.66 MB
2024-11-07 10:24:24,834 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 10:24:25,413 - INFO - Features shape: (10940800, 4)
2024-11-07 10:24:25,414 - INFO - Current memory usage: 873.73 MB
2024-11-07 10:24:25,414 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.8.
2024-11-07 10:24:32,447 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 10:24:34,340 - INFO - Clustering complete with spatial connectivity.
2024-11-07 10:24:34,341 - INFO - Current memory usage: 1368.47 MB
2024-11-07 10:24:34,429 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 10:24:34,430 - INFO - Current memory usage: 784.21 MB
2024-11-07 10:24:34,458 - INFO - Processing Cluster 0.
2024-11-07 10:24:34,484 - INFO - Cluster 0: Initial voxel count = 5790950.
2024-11-07 10:24:58,192 - INFO - Cluster 0: Refined voxel count = 5637608.
2024-11-07 10:24:58,229 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 10:24:58,447 - INFO - Cluster 0: Mean Intensity = 0.00046953410492278636
2024-11-07 10:24:58,447 - INFO - Processing Cluster 1.
2024-11-07 10:24:58,471 - INFO - Cluster 1: Initial voxel count = 95951.
2024-11-07 10:25:19,979 - INFO - Cluster 1: Refined voxel count = 0.
2024-11-07 10:25:19,979 - WARNING - Refined mask for Cluster 1 is empty.
2024-11-07 10:25:20,012 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 10:25:20,083 - INFO - Cluster 1: Mean Intensity = 8.078330039978027
2024-11-07 10:25:20,084 - INFO - Processing Cluster 2.
2024-11-07 10:25:20,108 - INFO - Cluster 2: Initial voxel count = 93790.
2024-11-07 10:25:39,382 - INFO - Cluster 2: Refined voxel count = 14283.
2024-11-07 10:25:39,413 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 10:25:39,497 - INFO - Cluster 2: Mean Intensity = 11.863279342651367
2024-11-07 10:25:39,497 - INFO - Processing Cluster 3.
2024-11-07 10:25:39,520 - INFO - Cluster 3: Initial voxel count = 188328.
2024-11-07 10:25:59,137 - INFO - Cluster 3: Refined voxel count = 0.
2024-11-07 10:25:59,137 - WARNING - Refined mask for Cluster 3 is empty.
2024-11-07 10:25:59,174 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 10:25:59,337 - INFO - Cluster 3: Mean Intensity = 2.1733930110931396
2024-11-07 10:25:59,337 - INFO - Processing Cluster 4.
2024-11-07 10:25:59,370 - INFO - Cluster 4: Initial voxel count = 4771781.
2024-11-07 10:26:21,489 - INFO - Cluster 4: Refined voxel count = 4626851.
2024-11-07 10:26:21,541 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-07 10:26:21,715 - INFO - Cluster 4: Mean Intensity = -0.1173931434750557
2024-11-07 10:26:21,715 - INFO - CSF is identified as cluster 2.
2024-11-07 10:26:21,724 - INFO - Starting visualization with PyVista.
2024-11-07 10:26:23,114 - INFO - Adding Original MRI volume.
2024-11-07 10:26:23,803 - INFO - Adding Denoised MRI volume.
2024-11-07 10:26:24,415 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 10:26:24,615 - INFO - Initial mesh has 32376 points and 64252 faces.
2024-11-07 10:26:24,616 - INFO - Current memory usage: 880.89 MB
2024-11-07 10:26:25,122 - INFO - Decimated mesh has 16198 points and 32125 faces.
2024-11-07 10:26:25,123 - INFO - Current memory usage: 907.52 MB
2024-11-07 10:26:25,136 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 10:26:25,169 - WARNING - Mask 1 is empty. Skipping visualization.
2024-11-07 10:26:25,169 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 10:26:25,343 - INFO - Initial mesh has 2311 points and 4562 faces.
2024-11-07 10:26:25,343 - INFO - Current memory usage: 921.98 MB
2024-11-07 10:26:25,374 - INFO - Decimated mesh has 1170 points and 2280 faces.
2024-11-07 10:26:25,375 - INFO - Current memory usage: 921.98 MB
2024-11-07 10:26:25,385 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 10:26:25,413 - WARNING - Mask 3 is empty. Skipping visualization.
2024-11-07 10:26:25,413 - INFO - Adding Mask 4 mesh to visualization.
2024-11-07 10:26:25,946 - INFO - Initial mesh has 37523 points and 74516 faces.
2024-11-07 10:26:25,946 - INFO - Current memory usage: 851.70 MB
2024-11-07 10:26:26,376 - INFO - Decimated mesh has 18743 points and 37258 faces.
2024-11-07 10:26:26,377 - INFO - Current memory usage: 853.20 MB
2024-11-07 10:26:26,389 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 10:26:26,982 - INFO - Translator(prefix=None)
2024-11-07 10:26:27,089 - INFO - awaiting runner setup
2024-11-07 10:26:27,090 - INFO - awaiting site startup
2024-11-07 10:26:27,091 - INFO - Print WSLINK_READY_MSG
2024-11-07 10:26:27,091 - INFO - Schedule auto shutdown with timout 0
2024-11-07 10:26:27,091 - INFO - awaiting running future
2024-11-07 10:26:39,450 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 10:26:39,459 - INFO - Current memory usage: 923.78 MB
2024-11-07 10:26:39,479 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-07 10:26:40,373 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 10:26:40,684 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 10:26:40,972 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 10:26:41,238 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 10:26:41,520 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-07 10:26:41,781 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-07 10:26:42,029 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-07 10:26:42,280 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-07 10:26:42,533 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-07 10:26:42,821 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-07 10:26:43,117 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-07 10:26:43,393 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-07 10:26:43,652 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-07 10:26:43,932 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-07 10:26:44,222 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-07 10:26:44,230 - INFO - Pipeline completed successfully.
2024-11-07 10:26:44,231 - INFO - Current memory usage: 885.96 MB
2024-11-07 10:26:44,231 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 10:26:44,231 - INFO - Selected good cluster mask with index 2.
2024-11-07 10:26:44,231 - INFO - Removing eyes from the good cluster mask.
2024-11-07 10:26:44,231 - INFO - Starting eye detection using connected components analysis.
2024-11-07 10:26:44,378 - INFO - Number of connected components found: 16
2024-11-07 10:26:51,552 - WARNING - Expected to detect 2 eyes within Z-axis range (100, 200), but found 0. Skipping eye removal.
2024-11-07 10:26:51,557 - INFO - Detected eyes at centroids: []
2024-11-07 10:26:54,853 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-07 10:26:54,853 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-07 10:26:55,230 - INFO - Small objects removed from the CSF mask. New mask has 13761 voxels.
2024-11-07 10:26:55,271 - INFO - Saving the good cluster mask as TIFF.
2024-11-07 10:26:55,323 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-07 10:26:55,324 - INFO - Calculating the volume of CSF in the MRI.
2024-11-07 10:26:55,341 - INFO - Total CSF Volume: 13123.539145033294 mm³
2024-11-07 10:26:55,341 - INFO - Final visualization of the Good CSF Mask.
2024-11-07 10:26:55,342 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-07 10:26:55,699 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-07 10:26:55,757 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-07 10:26:55,758 - INFO - Visualization process completed.
2024-11-07 10:26:55,759 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 10:26:55,760 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 10:26:55,760 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 10:26:55,760 - INFO - Final cleanup completed.
2024-11-07 10:26:55,760 - INFO - Current memory usage: 807.97 MB
2024-11-07 10:28:32,319 - INFO - Logging initiated.
2024-11-07 10:28:32,320 - INFO - Pipeline started.
2024-11-07 10:28:32,320 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 10:28:32,753 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 10:28:33,045 - INFO - Denoised image loaded.
2024-11-07 10:28:33,046 - INFO - Current memory usage: 482.56 MB
2024-11-07 10:28:33,178 - INFO - Starting intensity normalization.
2024-11-07 10:28:34,383 - INFO - Intensity normalization complete.
2024-11-07 10:28:34,384 - INFO - Current memory usage: 639.27 MB
2024-11-07 10:28:34,400 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 10:28:34,400 - INFO - Computing neighborhood statistics.
2024-11-07 10:28:35,022 - INFO - Neighborhood statistics computed.
2024-11-07 10:28:35,022 - INFO - Current memory usage: 597.53 MB
2024-11-07 10:28:35,023 - INFO - Computing z-axis value for each voxel.
2024-11-07 10:28:35,122 - INFO - Z-axis value for each voxel computed.
2024-11-07 10:28:35,123 - INFO - Current memory usage: 639.15 MB
2024-11-07 10:28:35,123 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 10:28:35,844 - INFO - Features shape: (10940800, 4)
2024-11-07 10:28:35,845 - INFO - Current memory usage: 889.69 MB
2024-11-07 10:28:35,845 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 10:28:40,291 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 10:28:43,948 - INFO - Clustering complete with spatial connectivity.
2024-11-07 10:28:43,949 - INFO - Current memory usage: 1486.54 MB
2024-11-07 10:28:44,000 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 10:28:44,001 - INFO - Current memory usage: 902.23 MB
2024-11-07 10:28:44,021 - INFO - Processing Cluster 0.
2024-11-07 10:28:44,048 - INFO - Cluster 0: Initial voxel count = 443642.
2024-11-07 10:28:55,731 - INFO - Cluster 0: Refined voxel count = 2348.
2024-11-07 10:28:55,759 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 10:28:55,912 - INFO - Cluster 0: Mean Intensity = 1.568230390548706
2024-11-07 10:28:55,912 - INFO - Processing Cluster 1.
2024-11-07 10:28:55,927 - INFO - Cluster 1: Initial voxel count = 226806.
2024-11-07 10:29:07,658 - INFO - Cluster 1: Refined voxel count = 60228.
2024-11-07 10:29:07,671 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 10:29:07,845 - INFO - Cluster 1: Mean Intensity = 8.951560020446777
2024-11-07 10:29:07,846 - INFO - Processing Cluster 2.
2024-11-07 10:29:07,861 - INFO - Cluster 2: Initial voxel count = 3153824.
2024-11-07 10:29:19,930 - INFO - Cluster 2: Refined voxel count = 1059156.
2024-11-07 10:29:19,954 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 10:29:20,139 - INFO - Cluster 2: Mean Intensity = 0.22388030588626862
2024-11-07 10:29:20,139 - INFO - Processing Cluster 3.
2024-11-07 10:29:20,154 - INFO - Cluster 3: Initial voxel count = 3728526.
2024-11-07 10:29:31,675 - INFO - Cluster 3: Refined voxel count = 3181249.
2024-11-07 10:29:31,698 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 10:29:31,886 - INFO - Cluster 3: Mean Intensity = -0.2163485884666443
2024-11-07 10:29:31,886 - INFO - Processing Cluster 4.
2024-11-07 10:29:31,902 - INFO - Cluster 4: Initial voxel count = 3388002.
2024-11-07 10:29:44,258 - INFO - Cluster 4: Refined voxel count = 2947164.
2024-11-07 10:29:44,307 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-07 10:29:44,565 - INFO - Cluster 4: Mean Intensity = -0.2614463269710541
2024-11-07 10:29:44,566 - INFO - CSF is identified as cluster 1.
2024-11-07 10:29:44,566 - INFO - Starting visualization with PyVista.
2024-11-07 10:29:45,935 - INFO - Adding Original MRI volume.
2024-11-07 10:29:46,555 - INFO - Adding Denoised MRI volume.
2024-11-07 10:29:47,061 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 10:29:47,203 - INFO - Initial mesh has 654 points and 1276 faces.
2024-11-07 10:29:47,204 - INFO - Current memory usage: 1051.58 MB
2024-11-07 10:29:47,209 - INFO - Decimated mesh has 335 points and 638 faces.
2024-11-07 10:29:47,210 - INFO - Current memory usage: 1051.84 MB
2024-11-07 10:29:47,220 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 10:29:47,336 - INFO - Initial mesh has 10481 points and 20878 faces.
2024-11-07 10:29:47,337 - INFO - Current memory usage: 1052.97 MB
2024-11-07 10:29:47,433 - INFO - Decimated mesh has 5261 points and 10438 faces.
2024-11-07 10:29:47,433 - INFO - Current memory usage: 1054.84 MB
2024-11-07 10:29:47,441 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 10:29:47,938 - INFO - Initial mesh has 97710 points and 195674 faces.
2024-11-07 10:29:47,939 - INFO - Current memory usage: 1079.51 MB
2024-11-07 10:29:49,336 - INFO - Decimated mesh has 48755 points and 97837 faces.
2024-11-07 10:29:49,337 - INFO - Current memory usage: 1156.89 MB
2024-11-07 10:29:49,347 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 10:29:49,489 - INFO - Initial mesh has 34233 points and 67338 faces.
2024-11-07 10:29:49,489 - INFO - Current memory usage: 1165.89 MB
2024-11-07 10:29:49,835 - INFO - Decimated mesh has 17187 points and 33669 faces.
2024-11-07 10:29:49,835 - INFO - Current memory usage: 1165.89 MB
2024-11-07 10:29:49,842 - INFO - Adding Mask 4 mesh to visualization.
2024-11-07 10:29:49,963 - INFO - Initial mesh has 29646 points and 58376 faces.
2024-11-07 10:29:49,963 - INFO - Current memory usage: 1165.89 MB
2024-11-07 10:29:50,288 - INFO - Decimated mesh has 14878 points and 29187 faces.
2024-11-07 10:29:50,289 - INFO - Current memory usage: 1165.89 MB
2024-11-07 10:29:50,296 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 10:29:50,707 - INFO - Translator(prefix=None)
2024-11-07 10:29:50,795 - INFO - awaiting runner setup
2024-11-07 10:29:50,796 - INFO - awaiting site startup
2024-11-07 10:29:50,797 - INFO - Print WSLINK_READY_MSG
2024-11-07 10:29:50,797 - INFO - Schedule auto shutdown with timout 0
2024-11-07 10:29:50,797 - INFO - awaiting running future
2024-11-07 10:30:01,524 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 10:30:01,530 - INFO - Current memory usage: 1208.15 MB
2024-11-07 10:30:01,543 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-07 10:30:02,413 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 10:30:02,716 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 10:30:02,991 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 10:30:03,259 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 10:30:03,535 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-07 10:30:03,829 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-07 10:30:04,067 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-07 10:30:04,333 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-07 10:30:04,609 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-07 10:30:04,874 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-07 10:30:05,141 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-07 10:30:05,415 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-07 10:30:05,731 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-07 10:30:06,028 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-07 10:30:06,310 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-07 10:30:06,318 - INFO - Pipeline completed successfully.
2024-11-07 10:30:06,318 - INFO - Current memory usage: 1149.99 MB
2024-11-07 10:30:06,319 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 10:30:06,319 - INFO - Selected good cluster mask with index 1.
2024-11-07 10:30:06,319 - INFO - Removing eyes from the good cluster mask.
2024-11-07 10:30:06,319 - INFO - Starting eye detection using connected components analysis.
2024-11-07 10:30:06,441 - INFO - Number of connected components found: 29
2024-11-07 10:30:20,983 - INFO - Detected potential eye at centroid: (123.67447916666667, 50.197916666666664, 121.15625) with Volume: 384.0 and Sphericity: 0.76
2024-11-07 10:30:21,422 - INFO - Detected potential eye at centroid: (124.0761421319797, 57.59390862944162, 171.8248730964467) with Volume: 394.0 and Sphericity: 0.83
2024-11-07 10:30:22,173 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-07 10:30:22,180 - INFO - Eyes have been removed from the CSF mask.
2024-11-07 10:30:22,181 - INFO - Detected eyes at centroids: [(123, 50, 121), (124, 57, 171)]
2024-11-07 10:30:25,135 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-07 10:30:25,135 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-07 10:30:25,589 - INFO - Small objects removed from the CSF mask. New mask has 58420 voxels.
2024-11-07 10:30:25,618 - INFO - Saving the good cluster mask as TIFF.
2024-11-07 10:30:25,654 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-07 10:30:25,654 - INFO - Calculating the volume of CSF in the MRI.
2024-11-07 10:30:25,665 - INFO - Total CSF Volume: 55713.76766607405 mm³
2024-11-07 10:30:25,665 - INFO - Final visualization of the Good CSF Mask.
2024-11-07 10:30:25,665 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-07 10:30:25,913 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-07 10:30:26,021 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-07 10:30:26,022 - INFO - Visualization process completed.
2024-11-07 10:30:26,023 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 10:30:26,023 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 10:30:26,023 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 10:30:26,023 - INFO - Final cleanup completed.
2024-11-07 10:30:26,024 - INFO - Current memory usage: 971.34 MB
2024-11-07 10:39:50,729 - INFO - Logging initiated.
2024-11-07 10:39:50,729 - INFO - Pipeline started.
2024-11-07 10:39:50,729 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 10:39:51,398 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 10:39:51,772 - INFO - Denoised image loaded.
2024-11-07 10:39:51,772 - INFO - Current memory usage: 453.16 MB
2024-11-07 10:39:51,975 - INFO - Starting intensity normalization.
2024-11-07 10:39:53,611 - INFO - Intensity normalization complete.
2024-11-07 10:39:53,615 - INFO - Current memory usage: 554.82 MB
2024-11-07 10:39:53,626 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 10:39:53,626 - INFO - Computing neighborhood statistics.
2024-11-07 10:39:54,308 - INFO - Neighborhood statistics computed.
2024-11-07 10:39:54,309 - INFO - Current memory usage: 513.25 MB
2024-11-07 10:39:54,309 - INFO - Computing z-axis value for each voxel.
2024-11-07 10:39:54,379 - INFO - Z-axis value for each voxel computed.
2024-11-07 10:39:54,379 - INFO - Current memory usage: 555.05 MB
2024-11-07 10:39:54,379 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 10:39:57,548 - INFO - Features shape: (10940800, 4)
2024-11-07 10:39:57,620 - INFO - Current memory usage: 802.89 MB
2024-11-07 10:39:57,649 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 10:40:10,011 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 10:40:14,968 - INFO - Clustering complete with spatial connectivity.
2024-11-07 10:40:14,969 - INFO - Current memory usage: 1454.33 MB
2024-11-07 10:40:15,041 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 10:40:15,042 - INFO - Current memory usage: 870.03 MB
2024-11-07 10:40:15,071 - INFO - Processing Cluster 0.
2024-11-07 10:40:15,098 - INFO - Cluster 0: Initial voxel count = 443642.
2024-11-07 10:40:44,956 - INFO - Cluster 0: Refined voxel count = 2348.
2024-11-07 10:40:44,982 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 10:40:45,217 - INFO - Cluster 0: Mean Intensity = 1.568230390548706
2024-11-07 10:40:45,218 - INFO - Processing Cluster 1.
2024-11-07 10:40:45,243 - INFO - Cluster 1: Initial voxel count = 226806.
2024-11-07 10:41:05,436 - INFO - Cluster 1: Refined voxel count = 60228.
2024-11-07 10:41:05,472 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 10:41:05,602 - INFO - Cluster 1: Mean Intensity = 8.951560020446777
2024-11-07 10:41:05,602 - INFO - Processing Cluster 2.
2024-11-07 10:41:05,634 - INFO - Cluster 2: Initial voxel count = 3153824.
2024-11-07 10:41:24,439 - INFO - Cluster 2: Refined voxel count = 1059156.
2024-11-07 10:41:24,472 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 10:41:24,668 - INFO - Cluster 2: Mean Intensity = 0.22388030588626862
2024-11-07 10:41:24,669 - INFO - Processing Cluster 3.
2024-11-07 10:41:24,693 - INFO - Cluster 3: Initial voxel count = 3728526.
2024-11-07 10:41:43,559 - INFO - Cluster 3: Refined voxel count = 3181249.
2024-11-07 10:41:43,617 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 10:41:43,815 - INFO - Cluster 3: Mean Intensity = -0.2163485884666443
2024-11-07 10:41:43,816 - INFO - Processing Cluster 4.
2024-11-07 10:41:43,839 - INFO - Cluster 4: Initial voxel count = 3388002.
2024-11-07 10:42:01,874 - INFO - Cluster 4: Refined voxel count = 2947164.
2024-11-07 10:42:01,898 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-07 10:42:02,063 - INFO - Cluster 4: Mean Intensity = -0.2614463269710541
2024-11-07 10:42:02,063 - INFO - CSF is identified as cluster 1.
2024-11-07 10:42:02,063 - INFO - Starting visualization with PyVista.
2024-11-07 10:42:02,844 - INFO - Adding Original MRI volume.
2024-11-07 10:42:03,217 - INFO - Adding Denoised MRI volume.
2024-11-07 10:42:03,545 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 10:42:03,675 - INFO - Initial mesh has 654 points and 1276 faces.
2024-11-07 10:42:03,675 - INFO - Current memory usage: 1024.60 MB
2024-11-07 10:42:03,682 - INFO - Decimated mesh has 335 points and 638 faces.
2024-11-07 10:42:03,683 - INFO - Current memory usage: 1024.88 MB
2024-11-07 10:42:03,695 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 10:42:03,823 - INFO - Initial mesh has 10481 points and 20878 faces.
2024-11-07 10:42:03,823 - INFO - Current memory usage: 1026.00 MB
2024-11-07 10:42:03,927 - INFO - Decimated mesh has 5261 points and 10438 faces.
2024-11-07 10:42:03,928 - INFO - Current memory usage: 1027.88 MB
2024-11-07 10:42:03,937 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 10:42:04,424 - INFO - Initial mesh has 97710 points and 195674 faces.
2024-11-07 10:42:04,424 - INFO - Current memory usage: 1053.01 MB
2024-11-07 10:42:05,590 - INFO - Decimated mesh has 48755 points and 97837 faces.
2024-11-07 10:42:05,591 - INFO - Current memory usage: 1130.38 MB
2024-11-07 10:42:05,598 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 10:42:05,743 - INFO - Initial mesh has 34233 points and 67338 faces.
2024-11-07 10:42:05,743 - INFO - Current memory usage: 1139.38 MB
2024-11-07 10:42:06,082 - INFO - Decimated mesh has 17187 points and 33669 faces.
2024-11-07 10:42:06,083 - INFO - Current memory usage: 1139.38 MB
2024-11-07 10:42:06,091 - INFO - Adding Mask 4 mesh to visualization.
2024-11-07 10:42:06,214 - INFO - Initial mesh has 29646 points and 58376 faces.
2024-11-07 10:42:06,215 - INFO - Current memory usage: 1139.38 MB
2024-11-07 10:42:06,537 - INFO - Decimated mesh has 14878 points and 29187 faces.
2024-11-07 10:42:06,537 - INFO - Current memory usage: 1139.38 MB
2024-11-07 10:42:06,545 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 10:42:07,019 - INFO - Translator(prefix=None)
2024-11-07 10:42:07,109 - INFO - awaiting runner setup
2024-11-07 10:42:07,110 - INFO - awaiting site startup
2024-11-07 10:42:07,110 - INFO - Print WSLINK_READY_MSG
2024-11-07 10:42:07,111 - INFO - Schedule auto shutdown with timout 0
2024-11-07 10:42:07,111 - INFO - awaiting running future
2024-11-07 10:42:18,093 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 10:42:18,100 - INFO - Current memory usage: 1193.79 MB
2024-11-07 10:42:18,114 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-07 10:42:19,032 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 10:42:19,306 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 10:42:19,571 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 10:42:19,924 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 10:42:20,223 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-07 10:42:20,465 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-07 10:42:20,726 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-07 10:42:21,029 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-07 10:42:21,318 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-07 10:42:21,579 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-07 10:42:21,869 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-07 10:42:22,174 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-07 10:42:22,468 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-07 10:42:22,760 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-07 10:42:23,038 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-07 10:42:23,046 - INFO - Pipeline completed successfully.
2024-11-07 10:42:23,047 - INFO - Current memory usage: 1154.26 MB
2024-11-07 10:42:23,047 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 10:42:23,047 - INFO - Selected good cluster mask with index 1.
2024-11-07 10:42:23,047 - INFO - Removing eyes from the good cluster mask.
2024-11-07 10:42:23,047 - INFO - Starting eye detection using connected components analysis.
2024-11-07 10:42:23,174 - INFO - Number of connected components found: 29
2024-11-07 10:42:34,013 - INFO - Detected potential eye at centroid: (83.06859205776173, 135.24909747292418, 181.0) with Volume: 277.0 and Sphericity: 0.85
2024-11-07 10:42:34,418 - INFO - Detected potential eye at centroid: (88.0, 150.0, 190.0) with Volume: 259.0 and Sphericity: 0.74
2024-11-07 10:42:38,928 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-07 10:42:38,929 - ERROR - Failed to save eyes mask or coordinates at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif': name 'json' is not defined
2024-11-07 10:42:38,944 - INFO - Eyes have been removed from the CSF mask.
2024-11-07 10:42:38,945 - INFO - Detected eyes at centroids: [(83, 135, 181), (88, 150, 190)]
2024-11-07 10:42:41,730 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-07 10:42:41,730 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-07 10:42:42,129 - INFO - Small objects removed from the CSF mask. New mask has 58662 voxels.
2024-11-07 10:42:42,158 - INFO - Saving the good cluster mask as TIFF.
2024-11-07 10:42:42,198 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-07 10:42:42,198 - INFO - Calculating the volume of CSF in the MRI.
2024-11-07 10:42:42,208 - INFO - Total CSF Volume: 55944.557323300854 mm³
2024-11-07 10:42:42,208 - INFO - Final visualization of the Good CSF Mask.
2024-11-07 10:42:42,208 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-07 10:42:42,469 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-07 10:42:42,574 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-07 10:42:42,575 - INFO - Visualization process completed.
2024-11-07 10:42:42,576 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 10:42:42,576 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 10:42:42,576 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 10:42:42,576 - INFO - Final cleanup completed.
2024-11-07 10:42:42,577 - INFO - Current memory usage: 1060.96 MB
2024-11-07 10:54:23,412 - INFO - Logging initiated.
2024-11-07 10:54:23,412 - INFO - Pipeline started.
2024-11-07 10:54:23,413 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 10:54:23,891 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 10:54:24,210 - INFO - Denoised image loaded.
2024-11-07 10:54:24,210 - INFO - Current memory usage: 480.85 MB
2024-11-07 10:54:24,368 - INFO - Starting intensity normalization.
2024-11-07 10:54:25,665 - INFO - Intensity normalization complete.
2024-11-07 10:54:25,666 - INFO - Current memory usage: 629.55 MB
2024-11-07 10:54:25,680 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 10:54:25,681 - INFO - Computing neighborhood statistics.
2024-11-07 10:54:26,389 - INFO - Neighborhood statistics computed.
2024-11-07 10:54:26,390 - INFO - Current memory usage: 587.79 MB
2024-11-07 10:54:26,390 - INFO - Computing z-axis value for each voxel.
2024-11-07 10:54:26,507 - INFO - Z-axis value for each voxel computed.
2024-11-07 10:54:26,507 - INFO - Current memory usage: 629.41 MB
2024-11-07 10:54:26,507 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 10:54:27,122 - INFO - Features shape: (10940800, 4)
2024-11-07 10:54:27,122 - INFO - Current memory usage: 878.95 MB
2024-11-07 10:54:27,123 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 10:57:01,857 - INFO - Logging initiated.
2024-11-07 10:57:01,858 - INFO - Pipeline started.
2024-11-07 10:57:01,858 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 10:57:02,042 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 10:57:02,162 - INFO - Denoised image loaded.
2024-11-07 10:57:02,163 - INFO - Current memory usage: 482.78 MB
2024-11-07 10:57:02,202 - INFO - Starting intensity normalization.
2024-11-07 10:57:02,971 - INFO - Intensity normalization complete.
2024-11-07 10:57:02,972 - INFO - Current memory usage: 639.62 MB
2024-11-07 10:57:02,972 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 10:57:02,973 - INFO - Computing neighborhood statistics.
2024-11-07 10:57:03,404 - INFO - Neighborhood statistics computed.
2024-11-07 10:57:03,405 - INFO - Current memory usage: 597.69 MB
2024-11-07 10:57:03,405 - INFO - Computing z-axis value for each voxel.
2024-11-07 10:57:03,415 - INFO - Z-axis value for each voxel computed.
2024-11-07 10:57:03,416 - INFO - Current memory usage: 639.31 MB
2024-11-07 10:57:03,416 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 10:57:03,820 - INFO - Features shape: (10940800, 4)
2024-11-07 10:57:03,821 - INFO - Current memory usage: 889.85 MB
2024-11-07 10:57:03,821 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 10:57:09,378 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 10:57:13,674 - INFO - Clustering complete with spatial connectivity.
2024-11-07 10:57:13,675 - INFO - Current memory usage: 1526.19 MB
2024-11-07 10:57:13,718 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 10:57:13,719 - INFO - Current memory usage: 941.88 MB
2024-11-07 10:57:13,722 - INFO - Processing Cluster 0.
2024-11-07 10:57:13,743 - INFO - Cluster 0: Initial voxel count = 443642.
2024-11-07 10:57:31,769 - INFO - Cluster 0: Refined voxel count = 2348.
2024-11-07 10:57:31,793 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 10:57:31,872 - INFO - Cluster 0: Mean Intensity = 1.568230390548706
2024-11-07 10:57:31,872 - INFO - Processing Cluster 1.
2024-11-07 10:57:31,898 - INFO - Cluster 1: Initial voxel count = 226806.
2024-11-07 10:57:49,703 - INFO - Cluster 1: Refined voxel count = 60228.
2024-11-07 10:57:49,728 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 10:57:49,840 - INFO - Cluster 1: Mean Intensity = 8.951560020446777
2024-11-07 10:57:49,840 - INFO - Processing Cluster 2.
2024-11-07 10:57:49,863 - INFO - Cluster 2: Initial voxel count = 3153824.
2024-11-07 10:58:06,146 - INFO - Cluster 2: Refined voxel count = 1059156.
2024-11-07 10:58:06,169 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 10:58:06,275 - INFO - Cluster 2: Mean Intensity = 0.22388030588626862
2024-11-07 10:58:06,275 - INFO - Processing Cluster 3.
2024-11-07 10:58:06,290 - INFO - Cluster 3: Initial voxel count = 3728526.
2024-11-07 10:58:23,168 - INFO - Cluster 3: Refined voxel count = 3181249.
2024-11-07 10:58:23,193 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 10:58:23,365 - INFO - Cluster 3: Mean Intensity = -0.2163485884666443
2024-11-07 10:58:23,365 - INFO - Processing Cluster 4.
2024-11-07 10:58:23,382 - INFO - Cluster 4: Initial voxel count = 3388002.
2024-11-07 10:58:38,831 - INFO - Cluster 4: Refined voxel count = 2947164.
2024-11-07 10:58:38,855 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-07 10:58:38,967 - INFO - Cluster 4: Mean Intensity = -0.2614463269710541
2024-11-07 10:58:38,968 - INFO - CSF is identified as cluster 1.
2024-11-07 10:58:38,968 - INFO - Starting visualization with PyVista.
2024-11-07 10:58:40,200 - INFO - Adding Original MRI volume.
2024-11-07 10:58:40,694 - INFO - Adding Denoised MRI volume.
2024-11-07 10:58:41,110 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 10:58:41,218 - INFO - Initial mesh has 654 points and 1276 faces.
2024-11-07 10:58:41,218 - INFO - Current memory usage: 1061.27 MB
2024-11-07 10:58:41,224 - INFO - Decimated mesh has 335 points and 638 faces.
2024-11-07 10:58:41,225 - INFO - Current memory usage: 1061.68 MB
2024-11-07 10:58:41,240 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 10:58:41,365 - INFO - Initial mesh has 10481 points and 20878 faces.
2024-11-07 10:58:41,366 - INFO - Current memory usage: 1062.67 MB
2024-11-07 10:58:41,484 - INFO - Decimated mesh has 5261 points and 10438 faces.
2024-11-07 10:58:41,484 - INFO - Current memory usage: 1064.67 MB
2024-11-07 10:58:41,493 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 10:58:41,743 - INFO - Initial mesh has 97710 points and 195674 faces.
2024-11-07 10:58:41,743 - INFO - Current memory usage: 1085.98 MB
2024-11-07 10:58:43,159 - INFO - Decimated mesh has 48755 points and 97837 faces.
2024-11-07 10:58:43,159 - INFO - Current memory usage: 1162.11 MB
2024-11-07 10:58:43,169 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 10:58:43,322 - INFO - Initial mesh has 34233 points and 67338 faces.
2024-11-07 10:58:43,323 - INFO - Current memory usage: 1169.49 MB
2024-11-07 10:58:43,669 - INFO - Decimated mesh has 17187 points and 33669 faces.
2024-11-07 10:58:43,670 - INFO - Current memory usage: 1169.62 MB
2024-11-07 10:58:43,677 - INFO - Adding Mask 4 mesh to visualization.
2024-11-07 10:58:43,799 - INFO - Initial mesh has 29646 points and 58376 faces.
2024-11-07 10:58:43,800 - INFO - Current memory usage: 1169.62 MB
2024-11-07 10:58:44,152 - INFO - Decimated mesh has 14878 points and 29187 faces.
2024-11-07 10:58:44,152 - INFO - Current memory usage: 1169.62 MB
2024-11-07 10:58:44,161 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 10:58:44,615 - INFO - Translator(prefix=None)
2024-11-07 10:58:44,709 - INFO - awaiting runner setup
2024-11-07 10:58:44,710 - INFO - awaiting site startup
2024-11-07 10:58:44,711 - INFO - Print WSLINK_READY_MSG
2024-11-07 10:58:44,711 - INFO - Schedule auto shutdown with timout 0
2024-11-07 10:58:44,711 - INFO - awaiting running future
2024-11-07 10:58:57,926 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 10:58:57,937 - INFO - Current memory usage: 1186.73 MB
2024-11-07 10:58:57,952 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-07 10:58:58,746 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 10:58:59,031 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 10:58:59,321 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 10:58:59,619 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 10:58:59,914 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-07 10:59:00,183 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-07 10:59:00,454 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-07 10:59:00,719 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-07 10:59:00,983 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-07 10:59:01,239 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-07 10:59:01,525 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-07 10:59:01,810 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-07 10:59:02,105 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-07 10:59:02,452 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-07 10:59:02,815 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-07 10:59:02,827 - INFO - Pipeline completed successfully.
2024-11-07 10:59:02,828 - INFO - Current memory usage: 1147.95 MB
2024-11-07 10:59:02,828 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 10:59:02,829 - INFO - Selected good cluster mask with index 1.
2024-11-07 10:59:02,829 - INFO - Removing eyes from the good cluster mask.
2024-11-07 10:59:02,829 - INFO - Starting eye detection using connected components analysis.
2024-11-07 10:59:02,984 - INFO - Number of connected components found: 29
2024-11-07 10:59:17,261 - WARNING - Expected to detect 2 eyes within Z-axis range (60, 120) and Y-axis range (80, 150), but found 0. Skipping eye removal.
2024-11-07 10:59:17,263 - INFO - Detected eyes at centroids: []
2024-11-07 10:59:20,034 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-07 10:59:20,034 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-07 10:59:20,353 - INFO - Small objects removed from the CSF mask. New mask has 59198 voxels.
2024-11-07 10:59:20,384 - INFO - Saving the good cluster mask as TIFF.
2024-11-07 10:59:20,425 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-07 10:59:20,425 - INFO - Calculating the volume of CSF in the MRI.
2024-11-07 10:59:20,436 - INFO - Total CSF Volume: 56455.72780377014 mm³
2024-11-07 10:59:20,436 - INFO - Final visualization of the Good CSF Mask.
2024-11-07 10:59:20,436 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-07 10:59:20,677 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-07 10:59:20,785 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-07 10:59:20,786 - INFO - Visualization process completed.
2024-11-07 10:59:20,787 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 10:59:20,787 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 10:59:20,787 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 10:59:20,787 - INFO - Final cleanup completed.
2024-11-07 10:59:20,788 - INFO - Current memory usage: 1023.00 MB
2024-11-07 11:00:44,705 - INFO - Logging initiated.
2024-11-07 11:00:44,705 - INFO - Pipeline started.
2024-11-07 11:00:44,705 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 11:00:44,863 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 11:00:45,021 - INFO - Denoised image loaded.
2024-11-07 11:00:45,022 - INFO - Current memory usage: 483.32 MB
2024-11-07 11:00:45,056 - INFO - Starting intensity normalization.
2024-11-07 11:00:45,601 - INFO - Intensity normalization complete.
2024-11-07 11:00:45,602 - INFO - Current memory usage: 640.16 MB
2024-11-07 11:00:45,602 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 11:00:45,602 - INFO - Computing neighborhood statistics.
2024-11-07 11:00:45,973 - INFO - Neighborhood statistics computed.
2024-11-07 11:00:45,973 - INFO - Current memory usage: 598.27 MB
2024-11-07 11:00:45,973 - INFO - Computing z-axis value for each voxel.
2024-11-07 11:00:45,983 - INFO - Z-axis value for each voxel computed.
2024-11-07 11:00:45,984 - INFO - Current memory usage: 639.89 MB
2024-11-07 11:00:45,984 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 11:00:46,325 - INFO - Features shape: (10940800, 4)
2024-11-07 11:00:46,325 - INFO - Current memory usage: 890.43 MB
2024-11-07 11:00:46,325 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 11:00:49,795 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 11:00:52,221 - INFO - Clustering complete with spatial connectivity.
2024-11-07 11:00:52,222 - INFO - Current memory usage: 1519.23 MB
2024-11-07 11:00:52,254 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 11:00:52,255 - INFO - Current memory usage: 934.93 MB
2024-11-07 11:00:52,265 - INFO - Processing Cluster 0.
2024-11-07 11:00:52,283 - INFO - Cluster 0: Initial voxel count = 443642.
2024-11-07 11:01:06,093 - INFO - Cluster 0: Refined voxel count = 2348.
2024-11-07 11:01:06,119 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 11:01:06,173 - INFO - Cluster 0: Mean Intensity = 1.568230390548706
2024-11-07 11:01:06,173 - INFO - Processing Cluster 1.
2024-11-07 11:01:06,192 - INFO - Cluster 1: Initial voxel count = 226806.
2024-11-07 11:01:18,201 - INFO - Cluster 1: Refined voxel count = 60228.
2024-11-07 11:01:18,227 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 11:01:18,276 - INFO - Cluster 1: Mean Intensity = 8.951560020446777
2024-11-07 11:01:18,276 - INFO - Processing Cluster 2.
2024-11-07 11:01:18,299 - INFO - Cluster 2: Initial voxel count = 3153824.
2024-11-07 11:01:31,281 - INFO - Cluster 2: Refined voxel count = 1059156.
2024-11-07 11:01:31,304 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 11:01:31,368 - INFO - Cluster 2: Mean Intensity = 0.22388030588626862
2024-11-07 11:01:31,368 - INFO - Processing Cluster 3.
2024-11-07 11:01:31,385 - INFO - Cluster 3: Initial voxel count = 3728526.
2024-11-07 11:01:42,573 - INFO - Cluster 3: Refined voxel count = 3181249.
2024-11-07 11:01:42,588 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 11:01:42,648 - INFO - Cluster 3: Mean Intensity = -0.2163485884666443
2024-11-07 11:01:42,648 - INFO - Processing Cluster 4.
2024-11-07 11:01:42,670 - INFO - Cluster 4: Initial voxel count = 3388002.
2024-11-07 11:01:54,309 - INFO - Cluster 4: Refined voxel count = 2947164.
2024-11-07 11:01:54,324 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-07 11:01:54,379 - INFO - Cluster 4: Mean Intensity = -0.2614463269710541
2024-11-07 11:01:54,380 - INFO - CSF is identified as cluster 1.
2024-11-07 11:01:54,380 - INFO - Starting visualization with PyVista.
2024-11-07 11:01:55,321 - INFO - Adding Original MRI volume.
2024-11-07 11:01:55,564 - INFO - Adding Denoised MRI volume.
2024-11-07 11:01:55,740 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 11:01:55,840 - INFO - Initial mesh has 654 points and 1276 faces.
2024-11-07 11:01:55,841 - INFO - Current memory usage: 1088.56 MB
2024-11-07 11:01:55,846 - INFO - Decimated mesh has 335 points and 638 faces.
2024-11-07 11:01:55,847 - INFO - Current memory usage: 1088.97 MB
2024-11-07 11:01:55,855 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 11:01:55,940 - INFO - Initial mesh has 10481 points and 20878 faces.
2024-11-07 11:01:55,941 - INFO - Current memory usage: 1089.98 MB
2024-11-07 11:01:56,048 - INFO - Decimated mesh has 5261 points and 10438 faces.
2024-11-07 11:01:56,048 - INFO - Current memory usage: 1091.85 MB
2024-11-07 11:01:56,056 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 11:01:56,266 - INFO - Initial mesh has 97710 points and 195674 faces.
2024-11-07 11:01:56,267 - INFO - Current memory usage: 1113.75 MB
2024-11-07 11:01:57,337 - INFO - Decimated mesh has 48755 points and 97837 faces.
2024-11-07 11:01:57,337 - INFO - Current memory usage: 1191.25 MB
2024-11-07 11:01:57,346 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 11:01:57,468 - INFO - Initial mesh has 34233 points and 67338 faces.
2024-11-07 11:01:57,469 - INFO - Current memory usage: 1196.61 MB
2024-11-07 11:01:57,797 - INFO - Decimated mesh has 17187 points and 33669 faces.
2024-11-07 11:01:57,798 - INFO - Current memory usage: 1196.61 MB
2024-11-07 11:01:57,805 - INFO - Adding Mask 4 mesh to visualization.
2024-11-07 11:01:57,918 - INFO - Initial mesh has 29646 points and 58376 faces.
2024-11-07 11:01:57,919 - INFO - Current memory usage: 1196.61 MB
2024-11-07 11:01:58,229 - INFO - Decimated mesh has 14878 points and 29187 faces.
2024-11-07 11:01:58,229 - INFO - Current memory usage: 1196.61 MB
2024-11-07 11:01:58,237 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:01:58,755 - INFO - Translator(prefix=None)
2024-11-07 11:01:58,893 - INFO - awaiting runner setup
2024-11-07 11:01:58,894 - INFO - awaiting site startup
2024-11-07 11:01:58,895 - INFO - Print WSLINK_READY_MSG
2024-11-07 11:01:58,896 - INFO - Schedule auto shutdown with timout 0
2024-11-07 11:01:58,896 - INFO - awaiting running future
2024-11-07 11:02:09,024 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:02:09,041 - INFO - Current memory usage: 1240.61 MB
2024-11-07 11:02:09,057 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-07 11:02:09,823 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 11:02:10,092 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 11:02:10,365 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 11:02:10,625 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 11:02:10,883 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-07 11:02:11,125 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-07 11:02:11,355 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-07 11:02:11,595 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-07 11:02:11,830 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-07 11:02:12,059 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-07 11:02:12,315 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-07 11:02:12,567 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-07 11:02:12,815 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-07 11:02:13,072 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-07 11:02:13,333 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-07 11:02:13,341 - INFO - Pipeline completed successfully.
2024-11-07 11:02:13,342 - INFO - Current memory usage: 1199.07 MB
2024-11-07 11:02:13,342 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 11:02:13,342 - INFO - Selected good cluster mask with index 1.
2024-11-07 11:02:13,342 - INFO - Removing eyes from the good cluster mask.
2024-11-07 11:02:13,342 - INFO - Starting eye detection using connected components analysis.
2024-11-07 11:02:13,461 - INFO - Number of connected components found: 29
2024-11-07 11:02:25,246 - WARNING - Expected to detect 2 eyes within Z-axis range (60, 120) and Y-axis range (80, 150), but found 0. Skipping eye removal.
2024-11-07 11:02:25,248 - INFO - Detected eyes at centroids: []
2024-11-07 11:02:27,334 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-07 11:02:27,334 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-07 11:02:27,586 - INFO - Small objects removed from the CSF mask. New mask has 59198 voxels.
2024-11-07 11:02:27,615 - INFO - Saving the good cluster mask as TIFF.
2024-11-07 11:02:27,657 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-07 11:02:27,657 - INFO - Calculating the volume of CSF in the MRI.
2024-11-07 11:02:27,668 - INFO - Total CSF Volume: 56455.72780377014 mm³
2024-11-07 11:02:27,668 - INFO - Final visualization of the Good CSF Mask.
2024-11-07 11:02:27,669 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-07 11:02:27,855 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-07 11:02:27,946 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-07 11:02:27,947 - INFO - Visualization process completed.
2024-11-07 11:02:27,948 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:02:27,948 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:02:27,948 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:02:27,948 - INFO - Final cleanup completed.
2024-11-07 11:02:27,949 - INFO - Current memory usage: 1104.86 MB
2024-11-07 11:04:15,442 - INFO - Logging initiated.
2024-11-07 11:04:15,442 - INFO - Pipeline started.
2024-11-07 11:04:15,443 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 11:04:15,608 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 11:04:15,677 - INFO - Denoised image loaded.
2024-11-07 11:04:15,678 - INFO - Current memory usage: 483.66 MB
2024-11-07 11:04:15,715 - INFO - Starting intensity normalization.
2024-11-07 11:04:16,197 - INFO - Intensity normalization complete.
2024-11-07 11:04:16,197 - INFO - Current memory usage: 640.54 MB
2024-11-07 11:04:16,198 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 11:04:16,198 - INFO - Computing neighborhood statistics.
2024-11-07 11:04:16,566 - INFO - Neighborhood statistics computed.
2024-11-07 11:04:16,567 - INFO - Current memory usage: 598.66 MB
2024-11-07 11:04:16,567 - INFO - Computing z-axis value for each voxel.
2024-11-07 11:04:16,577 - INFO - Z-axis value for each voxel computed.
2024-11-07 11:04:16,577 - INFO - Current memory usage: 640.28 MB
2024-11-07 11:04:16,577 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 11:04:16,829 - INFO - Features shape: (10940800, 4)
2024-11-07 11:04:16,830 - INFO - Current memory usage: 890.76 MB
2024-11-07 11:04:16,830 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 11:04:20,416 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 11:04:22,931 - INFO - Clustering complete with spatial connectivity.
2024-11-07 11:04:22,932 - INFO - Current memory usage: 1523.36 MB
2024-11-07 11:04:22,972 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 11:04:22,973 - INFO - Current memory usage: 939.05 MB
2024-11-07 11:04:22,977 - INFO - Processing Cluster 0.
2024-11-07 11:04:22,995 - INFO - Cluster 0: Initial voxel count = 443642.
2024-11-07 11:04:35,043 - INFO - Cluster 0: Refined voxel count = 2348.
2024-11-07 11:04:35,069 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 11:04:35,120 - INFO - Cluster 0: Mean Intensity = 1.568230390548706
2024-11-07 11:04:35,120 - INFO - Processing Cluster 1.
2024-11-07 11:04:35,144 - INFO - Cluster 1: Initial voxel count = 226806.
2024-11-07 11:04:45,713 - INFO - Cluster 1: Refined voxel count = 60228.
2024-11-07 11:04:45,737 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 11:04:45,781 - INFO - Cluster 1: Mean Intensity = 8.951560020446777
2024-11-07 11:04:45,781 - INFO - Processing Cluster 2.
2024-11-07 11:04:45,799 - INFO - Cluster 2: Initial voxel count = 3153824.
2024-11-07 11:04:56,913 - INFO - Cluster 2: Refined voxel count = 1059156.
2024-11-07 11:04:56,963 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 11:04:57,029 - INFO - Cluster 2: Mean Intensity = 0.22388030588626862
2024-11-07 11:04:57,030 - INFO - Processing Cluster 3.
2024-11-07 11:04:57,049 - INFO - Cluster 3: Initial voxel count = 3728526.
2024-11-07 11:05:08,531 - INFO - Cluster 3: Refined voxel count = 3181249.
2024-11-07 11:05:08,581 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 11:05:08,637 - INFO - Cluster 3: Mean Intensity = -0.2163485884666443
2024-11-07 11:05:08,637 - INFO - Processing Cluster 4.
2024-11-07 11:05:08,653 - INFO - Cluster 4: Initial voxel count = 3388002.
2024-11-07 11:05:19,910 - INFO - Cluster 4: Refined voxel count = 2947164.
2024-11-07 11:05:19,958 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-07 11:05:20,017 - INFO - Cluster 4: Mean Intensity = -0.2614463269710541
2024-11-07 11:05:20,017 - INFO - CSF is identified as cluster 1.
2024-11-07 11:05:20,017 - INFO - Starting visualization with PyVista.
2024-11-07 11:05:20,525 - INFO - Adding Original MRI volume.
2024-11-07 11:05:20,742 - INFO - Adding Denoised MRI volume.
2024-11-07 11:05:20,914 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 11:05:20,996 - INFO - Initial mesh has 654 points and 1276 faces.
2024-11-07 11:05:20,996 - INFO - Current memory usage: 1091.41 MB
2024-11-07 11:05:21,002 - INFO - Decimated mesh has 335 points and 638 faces.
2024-11-07 11:05:21,002 - INFO - Current memory usage: 1091.80 MB
2024-11-07 11:05:21,012 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 11:05:21,103 - INFO - Initial mesh has 10481 points and 20878 faces.
2024-11-07 11:05:21,104 - INFO - Current memory usage: 1092.80 MB
2024-11-07 11:05:21,201 - INFO - Decimated mesh has 5261 points and 10438 faces.
2024-11-07 11:05:21,201 - INFO - Current memory usage: 1094.68 MB
2024-11-07 11:05:21,209 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 11:05:21,493 - INFO - Initial mesh has 97710 points and 195674 faces.
2024-11-07 11:05:21,493 - INFO - Current memory usage: 1116.50 MB
2024-11-07 11:05:22,536 - INFO - Decimated mesh has 48755 points and 97837 faces.
2024-11-07 11:05:22,537 - INFO - Current memory usage: 1194.05 MB
2024-11-07 11:05:22,544 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 11:05:22,670 - INFO - Initial mesh has 34233 points and 67338 faces.
2024-11-07 11:05:22,670 - INFO - Current memory usage: 1200.48 MB
2024-11-07 11:05:22,990 - INFO - Decimated mesh has 17187 points and 33669 faces.
2024-11-07 11:05:22,990 - INFO - Current memory usage: 1200.48 MB
2024-11-07 11:05:22,997 - INFO - Adding Mask 4 mesh to visualization.
2024-11-07 11:05:23,106 - INFO - Initial mesh has 29646 points and 58376 faces.
2024-11-07 11:05:23,107 - INFO - Current memory usage: 1200.48 MB
2024-11-07 11:05:23,410 - INFO - Decimated mesh has 14878 points and 29187 faces.
2024-11-07 11:05:23,411 - INFO - Current memory usage: 1200.48 MB
2024-11-07 11:05:23,418 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:05:23,746 - INFO - Translator(prefix=None)
2024-11-07 11:05:23,808 - INFO - awaiting runner setup
2024-11-07 11:05:23,809 - INFO - awaiting site startup
2024-11-07 11:05:23,810 - INFO - Print WSLINK_READY_MSG
2024-11-07 11:05:23,810 - INFO - Schedule auto shutdown with timout 0
2024-11-07 11:05:23,810 - INFO - awaiting running future
2024-11-07 11:05:34,820 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:05:34,831 - INFO - Current memory usage: 1244.32 MB
2024-11-07 11:05:34,845 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-07 11:05:35,392 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 11:05:35,656 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 11:05:35,916 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 11:05:36,178 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 11:05:36,436 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-07 11:05:36,665 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-07 11:05:36,891 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-07 11:05:37,121 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-07 11:05:37,372 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-07 11:05:37,610 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-07 11:05:37,859 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-07 11:05:38,103 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-07 11:05:38,346 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-07 11:05:38,600 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-07 11:05:38,850 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-07 11:05:38,858 - INFO - Pipeline completed successfully.
2024-11-07 11:05:38,858 - INFO - Current memory usage: 1202.08 MB
2024-11-07 11:05:38,858 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 11:05:38,858 - INFO - Selected good cluster mask with index 1.
2024-11-07 11:05:38,858 - INFO - Removing eyes from the good cluster mask.
2024-11-07 11:05:38,858 - INFO - Starting eye detection using connected components analysis.
2024-11-07 11:05:38,972 - INFO - Number of connected components found: 29
2024-11-07 11:05:51,142 - WARNING - Expected to detect 2 eyes within Z-axis range (60, 120), Y-axis range (80, 150), and X-axis range (50, 120), but found 0. Skipping eye removal.
2024-11-07 11:09:13,759 - INFO - Logging initiated.
2024-11-07 11:09:13,760 - INFO - Pipeline started.
2024-11-07 11:09:13,760 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 11:09:14,211 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 11:09:14,483 - INFO - Denoised image loaded.
2024-11-07 11:09:14,484 - INFO - Current memory usage: 482.49 MB
2024-11-07 11:09:14,627 - INFO - Starting intensity normalization.
2024-11-07 11:09:15,543 - INFO - Intensity normalization complete.
2024-11-07 11:09:15,544 - INFO - Current memory usage: 639.37 MB
2024-11-07 11:09:15,559 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 11:09:15,559 - INFO - Computing neighborhood statistics.
2024-11-07 11:09:16,004 - INFO - Neighborhood statistics computed.
2024-11-07 11:09:16,004 - INFO - Current memory usage: 597.48 MB
2024-11-07 11:09:16,004 - INFO - Computing z-axis value for each voxel.
2024-11-07 11:09:16,014 - INFO - Z-axis value for each voxel computed.
2024-11-07 11:09:16,015 - INFO - Current memory usage: 639.11 MB
2024-11-07 11:09:16,015 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 11:09:16,575 - INFO - Features shape: (10940800, 4)
2024-11-07 11:09:16,575 - INFO - Current memory usage: 889.64 MB
2024-11-07 11:09:16,575 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 11:09:20,170 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 11:09:22,750 - INFO - Clustering complete with spatial connectivity.
2024-11-07 11:09:22,751 - INFO - Current memory usage: 1508.45 MB
2024-11-07 11:09:22,783 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 11:09:22,783 - INFO - Current memory usage: 924.15 MB
2024-11-07 11:09:22,797 - INFO - Processing Cluster 0.
2024-11-07 11:09:22,817 - INFO - Cluster 0: Initial voxel count = 443642.
2024-11-07 11:09:34,837 - INFO - Cluster 0: Refined voxel count = 2348.
2024-11-07 11:09:34,854 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 11:09:34,905 - INFO - Cluster 0: Mean Intensity = 1.568230390548706
2024-11-07 11:09:34,906 - INFO - Processing Cluster 1.
2024-11-07 11:09:34,924 - INFO - Cluster 1: Initial voxel count = 226806.
2024-11-07 11:09:45,972 - INFO - Cluster 1: Refined voxel count = 60228.
2024-11-07 11:09:46,020 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 11:09:46,063 - INFO - Cluster 1: Mean Intensity = 8.951560020446777
2024-11-07 11:09:46,063 - INFO - Processing Cluster 2.
2024-11-07 11:09:46,080 - INFO - Cluster 2: Initial voxel count = 3153824.
2024-11-07 11:09:57,403 - INFO - Cluster 2: Refined voxel count = 1059156.
2024-11-07 11:09:57,428 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 11:09:57,499 - INFO - Cluster 2: Mean Intensity = 0.22388030588626862
2024-11-07 11:09:57,499 - INFO - Processing Cluster 3.
2024-11-07 11:09:57,518 - INFO - Cluster 3: Initial voxel count = 3728526.
2024-11-07 11:10:09,460 - INFO - Cluster 3: Refined voxel count = 3181249.
2024-11-07 11:10:09,485 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 11:10:09,544 - INFO - Cluster 3: Mean Intensity = -0.2163485884666443
2024-11-07 11:10:09,544 - INFO - Processing Cluster 4.
2024-11-07 11:10:09,561 - INFO - Cluster 4: Initial voxel count = 3388002.
2024-11-07 11:10:21,200 - INFO - Cluster 4: Refined voxel count = 2947164.
2024-11-07 11:10:21,224 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-07 11:10:21,287 - INFO - Cluster 4: Mean Intensity = -0.2614463269710541
2024-11-07 11:10:21,287 - INFO - CSF is identified as cluster 1.
2024-11-07 11:10:21,287 - INFO - Starting visualization with PyVista.
2024-11-07 11:10:22,266 - INFO - Adding Original MRI volume.
2024-11-07 11:10:22,567 - INFO - Adding Denoised MRI volume.
2024-11-07 11:10:22,762 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 11:10:22,865 - INFO - Initial mesh has 654 points and 1276 faces.
2024-11-07 11:10:22,865 - INFO - Current memory usage: 1077.46 MB
2024-11-07 11:10:22,871 - INFO - Decimated mesh has 335 points and 638 faces.
2024-11-07 11:10:22,872 - INFO - Current memory usage: 1077.74 MB
2024-11-07 11:10:22,881 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 11:10:22,978 - INFO - Initial mesh has 10481 points and 20878 faces.
2024-11-07 11:10:22,978 - INFO - Current memory usage: 1078.86 MB
2024-11-07 11:10:23,085 - INFO - Decimated mesh has 5261 points and 10438 faces.
2024-11-07 11:10:23,086 - INFO - Current memory usage: 1080.86 MB
2024-11-07 11:10:23,094 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 11:10:23,402 - INFO - Initial mesh has 97710 points and 195674 faces.
2024-11-07 11:10:23,403 - INFO - Current memory usage: 1103.72 MB
2024-11-07 11:10:24,504 - INFO - Decimated mesh has 48755 points and 97837 faces.
2024-11-07 11:10:24,505 - INFO - Current memory usage: 1181.28 MB
2024-11-07 11:10:24,513 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 11:10:24,651 - INFO - Initial mesh has 34233 points and 67338 faces.
2024-11-07 11:10:24,651 - INFO - Current memory usage: 1187.59 MB
2024-11-07 11:10:24,980 - INFO - Decimated mesh has 17187 points and 33669 faces.
2024-11-07 11:10:24,981 - INFO - Current memory usage: 1187.59 MB
2024-11-07 11:10:24,988 - INFO - Adding Mask 4 mesh to visualization.
2024-11-07 11:10:25,106 - INFO - Initial mesh has 29646 points and 58376 faces.
2024-11-07 11:10:25,106 - INFO - Current memory usage: 1187.71 MB
2024-11-07 11:10:25,410 - INFO - Decimated mesh has 14878 points and 29187 faces.
2024-11-07 11:10:25,411 - INFO - Current memory usage: 1187.71 MB
2024-11-07 11:10:25,418 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:10:25,949 - INFO - Translator(prefix=None)
2024-11-07 11:10:26,085 - INFO - awaiting runner setup
2024-11-07 11:10:26,087 - INFO - awaiting site startup
2024-11-07 11:10:26,088 - INFO - Print WSLINK_READY_MSG
2024-11-07 11:10:26,088 - INFO - Schedule auto shutdown with timout 0
2024-11-07 11:10:26,088 - INFO - awaiting running future
2024-11-07 11:10:36,301 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:10:36,308 - INFO - Current memory usage: 1231.84 MB
2024-11-07 11:10:36,316 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-07 11:10:37,173 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 11:10:37,439 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 11:10:37,711 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 11:10:37,988 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 11:10:38,261 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-07 11:10:38,506 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-07 11:10:38,748 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-07 11:10:38,995 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-07 11:10:39,253 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-07 11:10:39,501 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-07 11:10:39,791 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-07 11:10:40,051 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-07 11:10:40,316 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-07 11:10:40,586 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-07 11:10:40,853 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-07 11:10:40,861 - INFO - Pipeline completed successfully.
2024-11-07 11:10:40,862 - INFO - Current memory usage: 1187.99 MB
2024-11-07 11:10:40,862 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 11:10:40,862 - INFO - Selected good cluster mask with index 1.
2024-11-07 11:10:40,862 - INFO - Removing eyes from the good cluster mask.
2024-11-07 11:10:40,862 - INFO - Starting eye detection using connected components analysis.
2024-11-07 11:10:40,977 - INFO - Number of connected components found: 29
2024-11-07 11:10:52,717 - WARNING - Expected to detect 2 eyes within Z-axis range (60, 120), Y-axis range (80, 150), and X-axis range (50, 120), but found 0. Skipping eye removal.
2024-11-07 11:10:52,719 - INFO - Detected eyes at centroids: []
2024-11-07 11:10:54,789 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-07 11:10:54,790 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-07 11:10:55,038 - INFO - Small objects removed from the CSF mask. New mask has 59198 voxels.
2024-11-07 11:10:55,068 - INFO - Saving the good cluster mask as TIFF.
2024-11-07 11:10:55,202 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-07 11:10:55,202 - INFO - Calculating the volume of CSF in the MRI.
2024-11-07 11:10:55,228 - INFO - Total CSF Volume: 56455.72780377014 mm³
2024-11-07 11:10:55,228 - INFO - Final visualization of the Good CSF Mask.
2024-11-07 11:10:55,228 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-07 11:10:55,450 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-07 11:10:55,554 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-07 11:10:55,555 - INFO - Visualization process completed.
2024-11-07 11:10:55,556 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:10:55,556 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:10:55,556 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:10:55,557 - INFO - Final cleanup completed.
2024-11-07 11:10:55,557 - INFO - Current memory usage: 1104.52 MB
2024-11-07 11:12:31,691 - INFO - Logging initiated.
2024-11-07 11:12:31,691 - INFO - Pipeline started.
2024-11-07 11:12:31,691 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 11:12:31,923 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 11:12:32,038 - INFO - Denoised image loaded.
2024-11-07 11:12:32,039 - INFO - Current memory usage: 482.73 MB
2024-11-07 11:12:32,076 - INFO - Starting intensity normalization.
2024-11-07 11:12:32,765 - INFO - Intensity normalization complete.
2024-11-07 11:12:32,765 - INFO - Current memory usage: 639.50 MB
2024-11-07 11:12:32,766 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 11:12:32,766 - INFO - Computing neighborhood statistics.
2024-11-07 11:12:33,162 - INFO - Neighborhood statistics computed.
2024-11-07 11:12:33,162 - INFO - Current memory usage: 597.62 MB
2024-11-07 11:12:33,162 - INFO - Computing z-axis value for each voxel.
2024-11-07 11:12:33,172 - INFO - Z-axis value for each voxel computed.
2024-11-07 11:12:33,172 - INFO - Current memory usage: 639.24 MB
2024-11-07 11:12:33,173 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 11:12:33,541 - INFO - Features shape: (10940800, 4)
2024-11-07 11:12:33,542 - INFO - Current memory usage: 889.83 MB
2024-11-07 11:12:33,542 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 11:12:46,820 - INFO - Logging initiated.
2024-11-07 11:12:46,821 - INFO - Pipeline started.
2024-11-07 11:12:46,821 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 11:12:46,946 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 11:12:47,013 - INFO - Denoised image loaded.
2024-11-07 11:12:47,014 - INFO - Current memory usage: 483.14 MB
2024-11-07 11:12:47,049 - INFO - Starting intensity normalization.
2024-11-07 11:12:47,656 - INFO - Intensity normalization complete.
2024-11-07 11:12:47,657 - INFO - Current memory usage: 639.98 MB
2024-11-07 11:12:47,657 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 11:12:47,657 - INFO - Computing neighborhood statistics.
2024-11-07 11:12:48,026 - INFO - Neighborhood statistics computed.
2024-11-07 11:12:48,027 - INFO - Current memory usage: 598.09 MB
2024-11-07 11:12:48,027 - INFO - Computing z-axis value for each voxel.
2024-11-07 11:12:48,037 - INFO - Z-axis value for each voxel computed.
2024-11-07 11:12:48,037 - INFO - Current memory usage: 639.72 MB
2024-11-07 11:12:48,038 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 11:12:48,277 - INFO - Features shape: (10940800, 4)
2024-11-07 11:12:48,278 - INFO - Current memory usage: 890.18 MB
2024-11-07 11:12:48,278 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 11:12:52,236 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 11:12:54,913 - INFO - Clustering complete with spatial connectivity.
2024-11-07 11:12:54,914 - INFO - Current memory usage: 1526.70 MB
2024-11-07 11:12:54,957 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 11:12:54,958 - INFO - Current memory usage: 942.39 MB
2024-11-07 11:12:54,960 - INFO - Processing Cluster 0.
2024-11-07 11:12:54,977 - INFO - Cluster 0: Initial voxel count = 443642.
2024-11-07 11:13:05,872 - INFO - Cluster 0: Refined voxel count = 2348.
2024-11-07 11:13:05,897 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 11:13:05,953 - INFO - Cluster 0: Mean Intensity = 1.568230390548706
2024-11-07 11:13:05,953 - INFO - Processing Cluster 1.
2024-11-07 11:13:05,974 - INFO - Cluster 1: Initial voxel count = 226806.
2024-11-07 11:13:16,632 - INFO - Cluster 1: Refined voxel count = 60228.
2024-11-07 11:13:16,684 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 11:13:16,728 - INFO - Cluster 1: Mean Intensity = 8.951560020446777
2024-11-07 11:13:16,728 - INFO - Processing Cluster 2.
2024-11-07 11:13:16,744 - INFO - Cluster 2: Initial voxel count = 3153824.
2024-11-07 11:13:27,454 - INFO - Cluster 2: Refined voxel count = 1059156.
2024-11-07 11:13:27,505 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 11:13:27,572 - INFO - Cluster 2: Mean Intensity = 0.22388030588626862
2024-11-07 11:13:27,572 - INFO - Processing Cluster 3.
2024-11-07 11:13:27,591 - INFO - Cluster 3: Initial voxel count = 3728526.
2024-11-07 11:13:38,802 - INFO - Cluster 3: Refined voxel count = 3181249.
2024-11-07 11:13:38,828 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 11:13:38,887 - INFO - Cluster 3: Mean Intensity = -0.2163485884666443
2024-11-07 11:13:38,888 - INFO - Processing Cluster 4.
2024-11-07 11:13:38,905 - INFO - Cluster 4: Initial voxel count = 3388002.
2024-11-07 11:13:49,577 - INFO - Cluster 4: Refined voxel count = 2947164.
2024-11-07 11:13:49,602 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-07 11:13:49,665 - INFO - Cluster 4: Mean Intensity = -0.2614463269710541
2024-11-07 11:13:49,665 - INFO - CSF is identified as cluster 1.
2024-11-07 11:13:49,666 - INFO - Starting visualization with PyVista.
2024-11-07 11:13:50,172 - INFO - Adding Original MRI volume.
2024-11-07 11:13:50,395 - INFO - Adding Denoised MRI volume.
2024-11-07 11:13:50,572 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 11:13:50,659 - INFO - Initial mesh has 654 points and 1276 faces.
2024-11-07 11:13:50,660 - INFO - Current memory usage: 1094.82 MB
2024-11-07 11:13:50,668 - INFO - Decimated mesh has 335 points and 638 faces.
2024-11-07 11:13:50,669 - INFO - Current memory usage: 1095.09 MB
2024-11-07 11:13:50,683 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 11:13:50,793 - INFO - Initial mesh has 10481 points and 20878 faces.
2024-11-07 11:13:50,793 - INFO - Current memory usage: 1096.11 MB
2024-11-07 11:13:50,890 - INFO - Decimated mesh has 5261 points and 10438 faces.
2024-11-07 11:13:50,891 - INFO - Current memory usage: 1097.98 MB
2024-11-07 11:13:50,898 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 11:13:51,095 - INFO - Initial mesh has 97710 points and 195674 faces.
2024-11-07 11:13:51,095 - INFO - Current memory usage: 1119.54 MB
2024-11-07 11:13:52,128 - INFO - Decimated mesh has 48755 points and 97837 faces.
2024-11-07 11:13:52,129 - INFO - Current memory usage: 1197.61 MB
2024-11-07 11:13:52,137 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 11:13:52,255 - INFO - Initial mesh has 34233 points and 67338 faces.
2024-11-07 11:13:52,255 - INFO - Current memory usage: 1203.41 MB
2024-11-07 11:13:52,577 - INFO - Decimated mesh has 17187 points and 33669 faces.
2024-11-07 11:13:52,577 - INFO - Current memory usage: 1203.41 MB
2024-11-07 11:13:52,584 - INFO - Adding Mask 4 mesh to visualization.
2024-11-07 11:13:52,694 - INFO - Initial mesh has 29646 points and 58376 faces.
2024-11-07 11:13:52,694 - INFO - Current memory usage: 1203.41 MB
2024-11-07 11:13:53,003 - INFO - Decimated mesh has 14878 points and 29187 faces.
2024-11-07 11:13:53,003 - INFO - Current memory usage: 1203.41 MB
2024-11-07 11:13:53,011 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:13:53,345 - INFO - Translator(prefix=None)
2024-11-07 11:13:53,405 - INFO - awaiting runner setup
2024-11-07 11:13:53,405 - INFO - awaiting site startup
2024-11-07 11:13:53,406 - INFO - Print WSLINK_READY_MSG
2024-11-07 11:13:53,406 - INFO - Schedule auto shutdown with timout 0
2024-11-07 11:13:53,406 - INFO - awaiting running future
2024-11-07 11:14:03,545 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:14:03,552 - INFO - Current memory usage: 1246.58 MB
2024-11-07 11:14:03,559 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-07 11:14:04,083 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 11:14:04,345 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 11:14:04,606 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 11:14:04,872 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 11:14:05,137 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-07 11:14:05,370 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-07 11:14:05,603 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-07 11:14:05,839 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-07 11:14:06,072 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-07 11:14:06,311 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-07 11:14:06,571 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-07 11:14:06,840 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-07 11:14:07,092 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-07 11:14:07,376 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-07 11:14:07,641 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-07 11:14:07,648 - INFO - Pipeline completed successfully.
2024-11-07 11:14:07,648 - INFO - Current memory usage: 1204.12 MB
2024-11-07 11:14:07,649 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 11:14:07,649 - INFO - Selected good cluster mask with index 1.
2024-11-07 11:14:07,649 - INFO - Removing eyes from the good cluster mask.
2024-11-07 11:14:07,649 - INFO - Starting eye detection using connected components analysis.
2024-11-07 11:14:07,764 - INFO - Number of connected components found: 29
2024-11-07 11:14:08,412 - INFO - Detected potential eye at centroid: (31.498938428874734, 59.653927813163484, 120.95753715498938) with Volume: 471.0 and Sphericity: 0.87
2024-11-07 11:14:09,273 - INFO - Detected potential eye at centroid: (42.90989010989011, 62.12747252747253, 186.95824175824177) with Volume: 455.0 and Sphericity: 0.85
2024-11-07 11:14:09,573 - INFO - Detected potential eye at centroid: (41.876543209876544, 146.78189300411523, 145.57201646090536) with Volume: 243.0 and Sphericity: 0.88
2024-11-07 11:14:10,441 - INFO - Detected potential eye at centroid: (48.57627118644068, 43.45762711864407, 171.02118644067798) with Volume: 236.0 and Sphericity: 0.80
2024-11-07 11:14:15,466 - INFO - Detected potential eye at centroid: (74.3531914893617, 45.625531914893614, 185.8468085106383) with Volume: 235.0 and Sphericity: 0.88
2024-11-07 11:14:16,524 - INFO - Detected potential eye at centroid: (83.06859205776173, 135.24909747292418, 181.0) with Volume: 277.0 and Sphericity: 0.85
2024-11-07 11:14:16,833 - INFO - Detected potential eye at centroid: (88.0, 150.0, 190.0) with Volume: 259.0 and Sphericity: 0.74
2024-11-07 11:14:19,672 - INFO - Detected potential eye at centroid: (123.67447916666667, 50.197916666666664, 121.15625) with Volume: 384.0 and Sphericity: 0.76
2024-11-07 11:14:19,985 - INFO - Detected potential eye at centroid: (124.0761421319797, 57.59390862944162, 171.8248730964467) with Volume: 394.0 and Sphericity: 0.83
2024-11-07 11:14:20,561 - INFO - Detected 9 potential eyes within Z-axis range (0, 190), Y-axis range (0, 190), and X-axis range (0, 190). Selecting the best two based on spatial closeness.
2024-11-07 11:14:20,621 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-07 11:14:20,623 - INFO - Saved detected eyes coordinates at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_coords.json'.
2024-11-07 11:14:21,291 - INFO - Saved visualization image with threshold lines at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_visualization.jpg'.
2024-11-07 11:14:21,298 - INFO - Eyes have been removed from the CSF mask.
2024-11-07 11:14:21,298 - INFO - Detected eyes at centroids: [(123, 50, 121), (124, 57, 171)]
2024-11-07 11:14:23,710 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-07 11:14:23,710 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-07 11:14:23,982 - INFO - Small objects removed from the CSF mask. New mask has 58420 voxels.
2024-11-07 11:14:24,016 - INFO - Saving the good cluster mask as TIFF.
2024-11-07 11:14:24,065 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-07 11:14:24,066 - INFO - Calculating the volume of CSF in the MRI.
2024-11-07 11:14:24,078 - INFO - Total CSF Volume: 55713.76766607405 mm³
2024-11-07 11:14:24,078 - INFO - Final visualization of the Good CSF Mask.
2024-11-07 11:14:24,078 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-07 11:14:24,276 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-07 11:14:24,364 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-07 11:14:24,364 - INFO - Visualization process completed.
2024-11-07 11:14:24,366 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:14:24,366 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:14:24,366 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:14:24,366 - INFO - Final cleanup completed.
2024-11-07 11:14:24,366 - INFO - Current memory usage: 1143.73 MB
2024-11-07 11:15:32,554 - INFO - Logging initiated.
2024-11-07 11:15:32,555 - INFO - Pipeline started.
2024-11-07 11:15:32,555 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 11:15:32,677 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 11:15:32,746 - INFO - Denoised image loaded.
2024-11-07 11:15:32,747 - INFO - Current memory usage: 482.92 MB
2024-11-07 11:15:32,783 - INFO - Starting intensity normalization.
2024-11-07 11:15:33,234 - INFO - Intensity normalization complete.
2024-11-07 11:15:33,235 - INFO - Current memory usage: 639.76 MB
2024-11-07 11:15:33,235 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 11:15:33,235 - INFO - Computing neighborhood statistics.
2024-11-07 11:15:33,604 - INFO - Neighborhood statistics computed.
2024-11-07 11:15:33,604 - INFO - Current memory usage: 597.88 MB
2024-11-07 11:15:33,604 - INFO - Computing z-axis value for each voxel.
2024-11-07 11:15:33,614 - INFO - Z-axis value for each voxel computed.
2024-11-07 11:15:33,615 - INFO - Current memory usage: 639.50 MB
2024-11-07 11:15:33,615 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 11:15:33,947 - INFO - Features shape: (10940800, 4)
2024-11-07 11:15:33,947 - INFO - Current memory usage: 889.97 MB
2024-11-07 11:15:33,947 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 11:15:37,962 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 11:15:40,720 - INFO - Clustering complete with spatial connectivity.
2024-11-07 11:15:40,720 - INFO - Current memory usage: 1526.02 MB
2024-11-07 11:15:40,762 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 11:15:40,762 - INFO - Current memory usage: 941.71 MB
2024-11-07 11:15:40,771 - INFO - Processing Cluster 0.
2024-11-07 11:15:40,790 - INFO - Cluster 0: Initial voxel count = 443642.
2024-11-07 11:15:56,200 - INFO - Cluster 0: Refined voxel count = 2348.
2024-11-07 11:15:56,252 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 11:15:56,307 - INFO - Cluster 0: Mean Intensity = 1.568230390548706
2024-11-07 11:15:56,308 - INFO - Processing Cluster 1.
2024-11-07 11:15:56,325 - INFO - Cluster 1: Initial voxel count = 226806.
2024-11-07 11:16:09,050 - INFO - Cluster 1: Refined voxel count = 60228.
2024-11-07 11:16:09,100 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 11:16:09,136 - INFO - Cluster 1: Mean Intensity = 8.951560020446777
2024-11-07 11:16:09,136 - INFO - Processing Cluster 2.
2024-11-07 11:16:09,151 - INFO - Cluster 2: Initial voxel count = 3153824.
2024-11-07 11:16:20,174 - INFO - Cluster 2: Refined voxel count = 1059156.
2024-11-07 11:16:20,190 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 11:16:20,254 - INFO - Cluster 2: Mean Intensity = 0.22388030588626862
2024-11-07 11:16:20,254 - INFO - Processing Cluster 3.
2024-11-07 11:16:20,268 - INFO - Cluster 3: Initial voxel count = 3728526.
2024-11-07 11:16:31,759 - INFO - Cluster 3: Refined voxel count = 3181249.
2024-11-07 11:16:31,784 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 11:16:31,841 - INFO - Cluster 3: Mean Intensity = -0.2163485884666443
2024-11-07 11:16:31,841 - INFO - Processing Cluster 4.
2024-11-07 11:16:31,858 - INFO - Cluster 4: Initial voxel count = 3388002.
2024-11-07 11:16:44,508 - INFO - Cluster 4: Refined voxel count = 2947164.
2024-11-07 11:16:44,560 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-07 11:16:44,624 - INFO - Cluster 4: Mean Intensity = -0.2614463269710541
2024-11-07 11:16:44,625 - INFO - CSF is identified as cluster 1.
2024-11-07 11:16:44,625 - INFO - Starting visualization with PyVista.
2024-11-07 11:16:45,438 - INFO - Adding Original MRI volume.
2024-11-07 11:16:45,698 - INFO - Adding Denoised MRI volume.
2024-11-07 11:16:46,147 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 11:16:46,247 - INFO - Initial mesh has 654 points and 1276 faces.
2024-11-07 11:16:46,247 - INFO - Current memory usage: 1093.84 MB
2024-11-07 11:16:46,253 - INFO - Decimated mesh has 335 points and 638 faces.
2024-11-07 11:16:46,253 - INFO - Current memory usage: 1094.11 MB
2024-11-07 11:16:46,263 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 11:16:46,483 - INFO - Initial mesh has 10481 points and 20878 faces.
2024-11-07 11:16:46,483 - INFO - Current memory usage: 1095.24 MB
2024-11-07 11:16:46,584 - INFO - Decimated mesh has 5261 points and 10438 faces.
2024-11-07 11:16:46,584 - INFO - Current memory usage: 1097.11 MB
2024-11-07 11:16:46,592 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 11:16:46,877 - INFO - Initial mesh has 97710 points and 195674 faces.
2024-11-07 11:16:46,877 - INFO - Current memory usage: 1115.65 MB
2024-11-07 11:16:48,144 - INFO - Decimated mesh has 48755 points and 97837 faces.
2024-11-07 11:16:48,144 - INFO - Current memory usage: 1193.02 MB
2024-11-07 11:16:48,155 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 11:16:48,280 - INFO - Initial mesh has 34233 points and 67338 faces.
2024-11-07 11:16:48,281 - INFO - Current memory usage: 1201.90 MB
2024-11-07 11:16:48,640 - INFO - Decimated mesh has 17187 points and 33669 faces.
2024-11-07 11:16:48,641 - INFO - Current memory usage: 1202.02 MB
2024-11-07 11:16:48,648 - INFO - Adding Mask 4 mesh to visualization.
2024-11-07 11:16:48,764 - INFO - Initial mesh has 29646 points and 58376 faces.
2024-11-07 11:16:48,764 - INFO - Current memory usage: 1202.02 MB
2024-11-07 11:16:49,088 - INFO - Decimated mesh has 14878 points and 29187 faces.
2024-11-07 11:16:49,088 - INFO - Current memory usage: 1202.02 MB
2024-11-07 11:16:49,096 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:16:49,417 - INFO - Translator(prefix=None)
2024-11-07 11:16:49,476 - INFO - awaiting runner setup
2024-11-07 11:16:49,477 - INFO - awaiting site startup
2024-11-07 11:16:49,478 - INFO - Print WSLINK_READY_MSG
2024-11-07 11:16:49,478 - INFO - Schedule auto shutdown with timout 0
2024-11-07 11:16:49,478 - INFO - awaiting running future
2024-11-07 11:16:59,638 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:16:59,645 - INFO - Current memory usage: 1245.72 MB
2024-11-07 11:16:59,652 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-07 11:17:00,208 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 11:17:00,474 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 11:17:00,735 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 11:17:00,998 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 11:17:01,282 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-07 11:17:01,524 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-07 11:17:01,766 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-07 11:17:02,017 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-07 11:17:02,265 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-07 11:17:02,498 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-07 11:17:02,765 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-07 11:17:03,033 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-07 11:17:03,299 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-07 11:17:03,557 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-07 11:17:03,822 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-07 11:17:03,829 - INFO - Pipeline completed successfully.
2024-11-07 11:17:03,830 - INFO - Current memory usage: 1203.70 MB
2024-11-07 11:17:03,830 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 11:17:03,830 - INFO - Selected good cluster mask with index 1.
2024-11-07 11:17:03,830 - INFO - Removing eyes from the good cluster mask.
2024-11-07 11:17:03,830 - INFO - Starting eye detection using connected components analysis.
2024-11-07 11:17:03,948 - INFO - Number of connected components found: 29
2024-11-07 11:17:15,588 - WARNING - Expected to detect 2 eyes within Z-axis range (70, 120), Y-axis range (50, 170), and X-axis range (30, 150), but found 0. Skipping eye removal.
2024-11-07 11:17:15,590 - INFO - Detected eyes at centroids: []
2024-11-07 11:17:18,246 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-07 11:17:18,246 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-07 11:17:18,669 - INFO - Small objects removed from the CSF mask. New mask has 59198 voxels.
2024-11-07 11:17:18,699 - INFO - Saving the good cluster mask as TIFF.
2024-11-07 11:17:18,738 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-07 11:17:18,738 - INFO - Calculating the volume of CSF in the MRI.
2024-11-07 11:17:18,749 - INFO - Total CSF Volume: 56455.72780377014 mm³
2024-11-07 11:17:18,749 - INFO - Final visualization of the Good CSF Mask.
2024-11-07 11:17:18,749 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-07 11:17:18,939 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-07 11:17:19,044 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-07 11:17:19,045 - INFO - Visualization process completed.
2024-11-07 11:17:19,046 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:17:19,046 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:17:19,046 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:17:19,046 - INFO - Final cleanup completed.
2024-11-07 11:17:19,047 - INFO - Current memory usage: 1109.17 MB
2024-11-07 11:19:46,692 - INFO - Logging initiated.
2024-11-07 11:19:46,692 - INFO - Pipeline started.
2024-11-07 11:19:46,692 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 11:19:46,829 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 11:19:46,901 - INFO - Denoised image loaded.
2024-11-07 11:19:46,902 - INFO - Current memory usage: 482.75 MB
2024-11-07 11:19:46,938 - INFO - Starting intensity normalization.
2024-11-07 11:19:47,411 - INFO - Intensity normalization complete.
2024-11-07 11:19:47,411 - INFO - Current memory usage: 639.59 MB
2024-11-07 11:19:47,412 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 11:19:47,412 - INFO - Computing neighborhood statistics.
2024-11-07 11:19:47,777 - INFO - Neighborhood statistics computed.
2024-11-07 11:19:47,778 - INFO - Current memory usage: 597.70 MB
2024-11-07 11:19:47,778 - INFO - Computing z-axis value for each voxel.
2024-11-07 11:19:47,788 - INFO - Z-axis value for each voxel computed.
2024-11-07 11:19:47,788 - INFO - Current memory usage: 639.33 MB
2024-11-07 11:19:47,788 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 11:19:48,094 - INFO - Features shape: (10940800, 4)
2024-11-07 11:19:48,095 - INFO - Current memory usage: 889.86 MB
2024-11-07 11:19:48,095 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 11:19:51,790 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 11:19:54,507 - INFO - Clustering complete with spatial connectivity.
2024-11-07 11:19:54,508 - INFO - Current memory usage: 1523.80 MB
2024-11-07 11:19:54,553 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 11:19:54,553 - INFO - Current memory usage: 939.50 MB
2024-11-07 11:19:54,561 - INFO - Processing Cluster 0.
2024-11-07 11:19:54,578 - INFO - Cluster 0: Initial voxel count = 443642.
2024-11-07 11:20:05,994 - INFO - Cluster 0: Refined voxel count = 2348.
2024-11-07 11:20:06,022 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 11:20:06,076 - INFO - Cluster 0: Mean Intensity = 1.568230390548706
2024-11-07 11:20:06,076 - INFO - Processing Cluster 1.
2024-11-07 11:20:06,099 - INFO - Cluster 1: Initial voxel count = 226806.
2024-11-07 11:20:18,013 - INFO - Cluster 1: Refined voxel count = 60228.
2024-11-07 11:20:18,061 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 11:20:18,099 - INFO - Cluster 1: Mean Intensity = 8.951560020446777
2024-11-07 11:20:18,100 - INFO - Processing Cluster 2.
2024-11-07 11:20:18,117 - INFO - Cluster 2: Initial voxel count = 3153824.
2024-11-07 11:20:29,190 - INFO - Cluster 2: Refined voxel count = 1059156.
2024-11-07 11:20:29,245 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 11:20:29,332 - INFO - Cluster 2: Mean Intensity = 0.22388030588626862
2024-11-07 11:20:29,332 - INFO - Processing Cluster 3.
2024-11-07 11:20:29,348 - INFO - Cluster 3: Initial voxel count = 3728526.
2024-11-07 11:20:40,854 - INFO - Cluster 3: Refined voxel count = 3181249.
2024-11-07 11:20:40,904 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 11:20:40,961 - INFO - Cluster 3: Mean Intensity = -0.2163485884666443
2024-11-07 11:20:40,961 - INFO - Processing Cluster 4.
2024-11-07 11:20:40,980 - INFO - Cluster 4: Initial voxel count = 3388002.
2024-11-07 11:20:52,875 - INFO - Cluster 4: Refined voxel count = 2947164.
2024-11-07 11:20:52,923 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-07 11:20:52,978 - INFO - Cluster 4: Mean Intensity = -0.2614463269710541
2024-11-07 11:20:52,979 - INFO - CSF is identified as cluster 1.
2024-11-07 11:20:52,979 - INFO - Starting visualization with PyVista.
2024-11-07 11:20:53,534 - INFO - Adding Original MRI volume.
2024-11-07 11:20:53,802 - INFO - Adding Denoised MRI volume.
2024-11-07 11:20:53,982 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 11:20:54,067 - INFO - Initial mesh has 654 points and 1276 faces.
2024-11-07 11:20:54,067 - INFO - Current memory usage: 1091.95 MB
2024-11-07 11:20:54,073 - INFO - Decimated mesh has 335 points and 638 faces.
2024-11-07 11:20:54,074 - INFO - Current memory usage: 1092.27 MB
2024-11-07 11:20:54,084 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 11:20:54,194 - INFO - Initial mesh has 10481 points and 20878 faces.
2024-11-07 11:20:54,195 - INFO - Current memory usage: 1093.40 MB
2024-11-07 11:20:54,312 - INFO - Decimated mesh has 5261 points and 10438 faces.
2024-11-07 11:20:54,313 - INFO - Current memory usage: 1095.27 MB
2024-11-07 11:20:54,321 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 11:20:54,548 - INFO - Initial mesh has 97710 points and 195674 faces.
2024-11-07 11:20:54,549 - INFO - Current memory usage: 1116.43 MB
2024-11-07 11:20:55,614 - INFO - Decimated mesh has 48755 points and 97837 faces.
2024-11-07 11:20:55,615 - INFO - Current memory usage: 1194.02 MB
2024-11-07 11:20:55,622 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 11:20:55,742 - INFO - Initial mesh has 34233 points and 67338 faces.
2024-11-07 11:20:55,743 - INFO - Current memory usage: 1200.41 MB
2024-11-07 11:20:56,075 - INFO - Decimated mesh has 17187 points and 33669 faces.
2024-11-07 11:20:56,075 - INFO - Current memory usage: 1200.41 MB
2024-11-07 11:20:56,083 - INFO - Adding Mask 4 mesh to visualization.
2024-11-07 11:20:56,196 - INFO - Initial mesh has 29646 points and 58376 faces.
2024-11-07 11:20:56,196 - INFO - Current memory usage: 1200.41 MB
2024-11-07 11:20:56,501 - INFO - Decimated mesh has 14878 points and 29187 faces.
2024-11-07 11:20:56,502 - INFO - Current memory usage: 1200.41 MB
2024-11-07 11:20:56,509 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:20:56,902 - INFO - Translator(prefix=None)
2024-11-07 11:20:56,968 - INFO - awaiting runner setup
2024-11-07 11:20:56,969 - INFO - awaiting site startup
2024-11-07 11:20:56,969 - INFO - Print WSLINK_READY_MSG
2024-11-07 11:20:56,969 - INFO - Schedule auto shutdown with timout 0
2024-11-07 11:20:56,969 - INFO - awaiting running future
2024-11-07 11:21:07,547 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:21:07,553 - INFO - Current memory usage: 1244.05 MB
2024-11-07 11:21:07,561 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-07 11:21:08,203 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 11:21:08,464 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 11:21:08,724 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 11:21:08,985 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 11:21:09,245 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-07 11:21:09,476 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-07 11:21:09,703 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-07 11:21:09,933 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-07 11:21:10,174 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-07 11:21:10,399 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-07 11:21:10,660 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-07 11:21:10,923 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-07 11:21:11,183 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-07 11:21:11,451 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-07 11:21:11,714 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-07 11:21:11,721 - INFO - Pipeline completed successfully.
2024-11-07 11:21:11,722 - INFO - Current memory usage: 1201.45 MB
2024-11-07 11:21:11,722 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 11:21:11,722 - INFO - Selected good cluster mask with index 1.
2024-11-07 11:21:11,722 - INFO - Removing eyes from the good cluster mask.
2024-11-07 11:21:11,722 - INFO - Starting eye detection using connected components analysis.
2024-11-07 11:21:11,839 - INFO - Number of connected components found: 29
2024-11-07 11:21:21,558 - INFO - Detected potential eye at centroid: (101.0, 138.0, 136.0) with Volume: 123.0 and Sphericity: 0.90
2024-11-07 11:21:21,834 - INFO - Detected potential eye at centroid: (118.0, 107.0, 109.0) with Volume: 123.0 and Sphericity: 0.90
2024-11-07 11:21:23,080 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-07 11:21:23,081 - INFO - Saved detected eyes coordinates at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_coords.json'.
2024-11-07 11:21:23,748 - INFO - Saved visualization image with threshold lines at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_visualization.jpg'.
2024-11-07 11:21:23,754 - INFO - Eyes have been removed from the CSF mask.
2024-11-07 11:21:23,755 - INFO - Detected eyes at centroids: [(101, 138, 136), (118, 107, 109)]
2024-11-07 11:21:25,914 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-07 11:21:25,914 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-07 11:21:26,168 - INFO - Small objects removed from the CSF mask. New mask has 59198 voxels.
2024-11-07 11:21:26,199 - INFO - Saving the good cluster mask as TIFF.
2024-11-07 11:21:26,246 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-07 11:21:26,246 - INFO - Calculating the volume of CSF in the MRI.
2024-11-07 11:21:26,258 - INFO - Total CSF Volume: 56455.72780377014 mm³
2024-11-07 11:21:26,258 - INFO - Final visualization of the Good CSF Mask.
2024-11-07 11:21:26,258 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-07 11:21:26,447 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-07 11:21:26,545 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-07 11:21:26,546 - INFO - Visualization process completed.
2024-11-07 11:21:26,547 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:21:26,547 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:21:26,547 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:21:26,547 - INFO - Final cleanup completed.
2024-11-07 11:21:26,548 - INFO - Current memory usage: 1141.18 MB
2024-11-07 11:23:17,917 - INFO - Logging initiated.
2024-11-07 11:23:17,917 - INFO - Pipeline started.
2024-11-07 11:23:17,917 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 11:23:18,161 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 11:23:18,245 - INFO - Denoised image loaded.
2024-11-07 11:23:18,246 - INFO - Current memory usage: 483.00 MB
2024-11-07 11:23:18,285 - INFO - Starting intensity normalization.
2024-11-07 11:23:19,131 - INFO - Intensity normalization complete.
2024-11-07 11:23:19,131 - INFO - Current memory usage: 639.90 MB
2024-11-07 11:23:19,132 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 11:23:19,132 - INFO - Computing neighborhood statistics.
2024-11-07 11:23:19,513 - INFO - Neighborhood statistics computed.
2024-11-07 11:23:19,513 - INFO - Current memory usage: 598.04 MB
2024-11-07 11:23:19,514 - INFO - Computing z-axis value for each voxel.
2024-11-07 11:23:19,524 - INFO - Z-axis value for each voxel computed.
2024-11-07 11:23:19,525 - INFO - Current memory usage: 639.67 MB
2024-11-07 11:23:19,525 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 11:23:20,095 - INFO - Features shape: (10940800, 4)
2024-11-07 11:23:20,095 - INFO - Current memory usage: 890.20 MB
2024-11-07 11:23:20,095 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 11:23:24,431 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 11:23:27,472 - INFO - Clustering complete with spatial connectivity.
2024-11-07 11:23:27,472 - INFO - Current memory usage: 1515.32 MB
2024-11-07 11:23:27,514 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 11:23:27,515 - INFO - Current memory usage: 931.02 MB
2024-11-07 11:23:27,528 - INFO - Processing Cluster 0.
2024-11-07 11:23:27,545 - INFO - Cluster 0: Initial voxel count = 443642.
2024-11-07 11:23:42,074 - INFO - Cluster 0: Refined voxel count = 2348.
2024-11-07 11:23:42,101 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 11:23:42,146 - INFO - Cluster 0: Mean Intensity = 1.568230390548706
2024-11-07 11:23:42,147 - INFO - Processing Cluster 1.
2024-11-07 11:23:42,162 - INFO - Cluster 1: Initial voxel count = 226806.
2024-11-07 11:24:13,926 - INFO - Logging initiated.
2024-11-07 11:24:13,926 - INFO - Pipeline started.
2024-11-07 11:24:13,927 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 11:24:14,168 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 11:24:14,280 - INFO - Denoised image loaded.
2024-11-07 11:24:14,281 - INFO - Current memory usage: 482.43 MB
2024-11-07 11:24:14,329 - INFO - Starting intensity normalization.
2024-11-07 11:24:15,132 - INFO - Intensity normalization complete.
2024-11-07 11:24:15,133 - INFO - Current memory usage: 639.30 MB
2024-11-07 11:24:15,134 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 11:24:15,134 - INFO - Computing neighborhood statistics.
2024-11-07 11:24:15,686 - INFO - Neighborhood statistics computed.
2024-11-07 11:24:15,687 - INFO - Current memory usage: 597.41 MB
2024-11-07 11:24:15,687 - INFO - Computing z-axis value for each voxel.
2024-11-07 11:24:15,707 - INFO - Z-axis value for each voxel computed.
2024-11-07 11:24:15,708 - INFO - Current memory usage: 639.03 MB
2024-11-07 11:24:15,708 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 11:24:16,215 - INFO - Features shape: (10940800, 4)
2024-11-07 11:24:16,216 - INFO - Current memory usage: 889.63 MB
2024-11-07 11:24:16,216 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 11:24:21,468 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 11:24:25,685 - INFO - Clustering complete with spatial connectivity.
2024-11-07 11:24:25,686 - INFO - Current memory usage: 1523.91 MB
2024-11-07 11:24:25,733 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 11:24:25,734 - INFO - Current memory usage: 939.61 MB
2024-11-07 11:24:25,736 - INFO - Processing Cluster 0.
2024-11-07 11:24:25,758 - INFO - Cluster 0: Initial voxel count = 443642.
2024-11-07 11:24:41,164 - INFO - Cluster 0: Refined voxel count = 2348.
2024-11-07 11:24:41,188 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 11:24:41,241 - INFO - Cluster 0: Mean Intensity = 1.568230390548706
2024-11-07 11:24:41,241 - INFO - Processing Cluster 1.
2024-11-07 11:24:41,259 - INFO - Cluster 1: Initial voxel count = 226806.
2024-11-07 11:24:56,640 - INFO - Cluster 1: Refined voxel count = 60228.
2024-11-07 11:24:56,692 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 11:24:56,738 - INFO - Cluster 1: Mean Intensity = 8.951560020446777
2024-11-07 11:24:56,738 - INFO - Processing Cluster 2.
2024-11-07 11:24:56,760 - INFO - Cluster 2: Initial voxel count = 3153824.
2024-11-07 11:25:12,199 - INFO - Cluster 2: Refined voxel count = 1059156.
2024-11-07 11:25:12,239 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 11:25:12,311 - INFO - Cluster 2: Mean Intensity = 0.22388030588626862
2024-11-07 11:25:12,312 - INFO - Processing Cluster 3.
2024-11-07 11:25:12,328 - INFO - Cluster 3: Initial voxel count = 3728526.
2024-11-07 11:25:27,672 - INFO - Cluster 3: Refined voxel count = 3181249.
2024-11-07 11:25:27,701 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 11:25:27,764 - INFO - Cluster 3: Mean Intensity = -0.2163485884666443
2024-11-07 11:25:27,764 - INFO - Processing Cluster 4.
2024-11-07 11:25:27,783 - INFO - Cluster 4: Initial voxel count = 3388002.
2024-11-07 11:25:43,187 - INFO - Cluster 4: Refined voxel count = 2947164.
2024-11-07 11:25:43,206 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-07 11:25:43,265 - INFO - Cluster 4: Mean Intensity = -0.2614463269710541
2024-11-07 11:25:43,265 - INFO - CSF is identified as cluster 1.
2024-11-07 11:25:43,265 - INFO - Starting visualization with PyVista.
2024-11-07 11:25:44,537 - INFO - Adding Original MRI volume.
2024-11-07 11:25:44,856 - INFO - Adding Denoised MRI volume.
2024-11-07 11:25:45,106 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 11:25:45,206 - INFO - Initial mesh has 654 points and 1276 faces.
2024-11-07 11:25:45,207 - INFO - Current memory usage: 1091.59 MB
2024-11-07 11:25:45,217 - INFO - Decimated mesh has 335 points and 638 faces.
2024-11-07 11:25:45,218 - INFO - Current memory usage: 1092.00 MB
2024-11-07 11:25:45,233 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 11:25:45,342 - INFO - Initial mesh has 10481 points and 20878 faces.
2024-11-07 11:25:45,342 - INFO - Current memory usage: 1093.02 MB
2024-11-07 11:25:45,447 - INFO - Decimated mesh has 5261 points and 10438 faces.
2024-11-07 11:25:45,447 - INFO - Current memory usage: 1095.02 MB
2024-11-07 11:25:45,456 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 11:25:45,665 - INFO - Initial mesh has 97710 points and 195674 faces.
2024-11-07 11:25:45,665 - INFO - Current memory usage: 1115.57 MB
2024-11-07 11:25:46,942 - INFO - Decimated mesh has 48755 points and 97837 faces.
2024-11-07 11:25:46,943 - INFO - Current memory usage: 1195.04 MB
2024-11-07 11:25:46,954 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 11:25:47,084 - INFO - Initial mesh has 34233 points and 67338 faces.
2024-11-07 11:25:47,085 - INFO - Current memory usage: 1199.71 MB
2024-11-07 11:25:47,459 - INFO - Decimated mesh has 17187 points and 33669 faces.
2024-11-07 11:25:47,460 - INFO - Current memory usage: 1199.71 MB
2024-11-07 11:25:47,470 - INFO - Adding Mask 4 mesh to visualization.
2024-11-07 11:25:47,589 - INFO - Initial mesh has 29646 points and 58376 faces.
2024-11-07 11:25:47,590 - INFO - Current memory usage: 1199.71 MB
2024-11-07 11:25:47,941 - INFO - Decimated mesh has 14878 points and 29187 faces.
2024-11-07 11:25:47,941 - INFO - Current memory usage: 1199.71 MB
2024-11-07 11:25:47,951 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:25:48,667 - INFO - Translator(prefix=None)
2024-11-07 11:25:48,848 - INFO - awaiting runner setup
2024-11-07 11:25:48,850 - INFO - awaiting site startup
2024-11-07 11:25:48,851 - INFO - Print WSLINK_READY_MSG
2024-11-07 11:25:48,851 - INFO - Schedule auto shutdown with timout 0
2024-11-07 11:25:48,852 - INFO - awaiting running future
2024-11-07 11:26:02,303 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:26:02,318 - INFO - Current memory usage: 1243.34 MB
2024-11-07 11:26:02,334 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-07 11:26:03,276 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 11:26:03,565 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 11:26:03,859 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 11:26:04,154 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 11:26:04,444 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-07 11:26:04,710 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-07 11:26:04,975 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-07 11:26:05,240 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-07 11:26:05,520 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-07 11:26:05,795 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-07 11:26:06,090 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-07 11:26:06,388 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-07 11:26:06,682 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-07 11:26:06,972 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-07 11:26:07,266 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-07 11:26:07,275 - INFO - Pipeline completed successfully.
2024-11-07 11:26:07,276 - INFO - Current memory usage: 1200.89 MB
2024-11-07 11:26:07,276 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 11:26:07,276 - INFO - Selected good cluster mask with index 1.
2024-11-07 11:26:07,276 - INFO - Removing eyes from the good cluster mask.
2024-11-07 11:26:07,276 - INFO - Starting eye detection using connected components analysis.
2024-11-07 11:26:07,398 - INFO - Number of connected components found: 29
2024-11-07 11:26:20,250 - INFO - Detected potential eye at centroid: (109.78938880825673, 112.71810998226093, 61.12707627801967) with Volume: 6201.0 and Sphericity: 0.88
2024-11-07 11:26:20,900 - INFO - Detected potential eye at centroid: (118.0, 107.0, 109.0) with Volume: 123.0 and Sphericity: 0.90
2024-11-07 11:26:22,435 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-07 11:26:22,438 - INFO - Saved detected eyes coordinates at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_coords.json'.
2024-11-07 11:26:23,420 - INFO - Saved visualization image with threshold lines at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_visualization.jpg'.
2024-11-07 11:26:23,434 - INFO - Eyes have been removed from the CSF mask.
2024-11-07 11:26:23,434 - INFO - Detected eyes at centroids: [(109, 112, 61), (118, 107, 109)]
2024-11-07 11:26:26,420 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-07 11:26:26,420 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-07 11:26:26,760 - INFO - Small objects removed from the CSF mask. New mask has 52997 voxels.
2024-11-07 11:26:26,797 - INFO - Saving the good cluster mask as TIFF.
2024-11-07 11:26:26,853 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-07 11:26:26,853 - INFO - Calculating the volume of CSF in the MRI.
2024-11-07 11:26:26,867 - INFO - Total CSF Volume: 50541.98125640066 mm³
2024-11-07 11:26:26,868 - INFO - Final visualization of the Good CSF Mask.
2024-11-07 11:26:26,868 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-07 11:26:27,150 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-07 11:26:27,288 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-07 11:26:27,290 - INFO - Visualization process completed.
2024-11-07 11:26:27,293 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:26:27,293 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:26:27,293 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:26:27,293 - INFO - Final cleanup completed.
2024-11-07 11:26:27,294 - INFO - Current memory usage: 1129.79 MB
2024-11-07 11:27:33,244 - INFO - Logging initiated.
2024-11-07 11:27:33,244 - INFO - Pipeline started.
2024-11-07 11:27:33,244 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 11:27:33,503 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 11:27:33,567 - INFO - Denoised image loaded.
2024-11-07 11:27:33,567 - INFO - Current memory usage: 482.36 MB
2024-11-07 11:27:33,606 - INFO - Starting intensity normalization.
2024-11-07 11:27:34,461 - INFO - Intensity normalization complete.
2024-11-07 11:27:34,462 - INFO - Current memory usage: 639.26 MB
2024-11-07 11:27:34,462 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 11:27:34,462 - INFO - Computing neighborhood statistics.
2024-11-07 11:27:34,851 - INFO - Neighborhood statistics computed.
2024-11-07 11:27:34,851 - INFO - Current memory usage: 597.37 MB
2024-11-07 11:27:34,851 - INFO - Computing z-axis value for each voxel.
2024-11-07 11:27:34,863 - INFO - Z-axis value for each voxel computed.
2024-11-07 11:27:34,863 - INFO - Current memory usage: 639.00 MB
2024-11-07 11:27:34,863 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 11:27:35,396 - INFO - Features shape: (10940800, 4)
2024-11-07 11:27:35,396 - INFO - Current memory usage: 889.53 MB
2024-11-07 11:27:35,396 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 11:27:39,522 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 11:27:42,740 - INFO - Clustering complete with spatial connectivity.
2024-11-07 11:27:42,741 - INFO - Current memory usage: 1514.38 MB
2024-11-07 11:27:42,787 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 11:27:42,788 - INFO - Current memory usage: 930.08 MB
2024-11-07 11:27:42,803 - INFO - Processing Cluster 0.
2024-11-07 11:27:42,830 - INFO - Cluster 0: Initial voxel count = 443642.
2024-11-07 11:27:58,142 - INFO - Cluster 0: Refined voxel count = 2348.
2024-11-07 11:27:58,166 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 11:27:58,210 - INFO - Cluster 0: Mean Intensity = 1.568230390548706
2024-11-07 11:27:58,210 - INFO - Processing Cluster 1.
2024-11-07 11:27:58,224 - INFO - Cluster 1: Initial voxel count = 226806.
2024-11-07 11:28:14,575 - INFO - Cluster 1: Refined voxel count = 60228.
2024-11-07 11:28:14,605 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 11:28:14,649 - INFO - Cluster 1: Mean Intensity = 8.951560020446777
2024-11-07 11:28:14,650 - INFO - Processing Cluster 2.
2024-11-07 11:28:14,674 - INFO - Cluster 2: Initial voxel count = 3153824.
2024-11-07 11:28:30,619 - INFO - Cluster 2: Refined voxel count = 1059156.
2024-11-07 11:28:30,639 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 11:28:30,730 - INFO - Cluster 2: Mean Intensity = 0.22388030588626862
2024-11-07 11:28:30,730 - INFO - Processing Cluster 3.
2024-11-07 11:28:30,755 - INFO - Cluster 3: Initial voxel count = 3728526.
2024-11-07 11:28:46,262 - INFO - Cluster 3: Refined voxel count = 3181249.
2024-11-07 11:28:46,286 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 11:28:46,350 - INFO - Cluster 3: Mean Intensity = -0.2163485884666443
2024-11-07 11:28:46,351 - INFO - Processing Cluster 4.
2024-11-07 11:28:46,371 - INFO - Cluster 4: Initial voxel count = 3388002.
2024-11-07 11:29:02,011 - INFO - Cluster 4: Refined voxel count = 2947164.
2024-11-07 11:29:02,039 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-07 11:29:02,102 - INFO - Cluster 4: Mean Intensity = -0.2614463269710541
2024-11-07 11:29:02,102 - INFO - CSF is identified as cluster 1.
2024-11-07 11:29:02,103 - INFO - Starting visualization with PyVista.
2024-11-07 11:29:02,868 - INFO - Adding Original MRI volume.
2024-11-07 11:29:03,237 - INFO - Adding Denoised MRI volume.
2024-11-07 11:29:03,799 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 11:29:03,997 - INFO - Initial mesh has 654 points and 1276 faces.
2024-11-07 11:29:03,997 - INFO - Current memory usage: 1075.51 MB
2024-11-07 11:29:04,005 - INFO - Decimated mesh has 335 points and 638 faces.
2024-11-07 11:29:04,005 - INFO - Current memory usage: 1075.82 MB
2024-11-07 11:29:04,015 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 11:29:04,192 - INFO - Initial mesh has 10481 points and 20878 faces.
2024-11-07 11:29:04,193 - INFO - Current memory usage: 1076.94 MB
2024-11-07 11:29:04,299 - INFO - Decimated mesh has 5261 points and 10438 faces.
2024-11-07 11:29:04,300 - INFO - Current memory usage: 1078.94 MB
2024-11-07 11:29:04,321 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 11:29:04,869 - INFO - Initial mesh has 97710 points and 195674 faces.
2024-11-07 11:29:04,870 - INFO - Current memory usage: 1101.14 MB
2024-11-07 11:29:06,230 - INFO - Decimated mesh has 48755 points and 97837 faces.
2024-11-07 11:29:06,230 - INFO - Current memory usage: 1178.39 MB
2024-11-07 11:29:06,243 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 11:29:06,374 - INFO - Initial mesh has 34233 points and 67338 faces.
2024-11-07 11:29:06,374 - INFO - Current memory usage: 1187.36 MB
2024-11-07 11:29:06,765 - INFO - Decimated mesh has 17187 points and 33669 faces.
2024-11-07 11:29:06,766 - INFO - Current memory usage: 1187.36 MB
2024-11-07 11:29:06,775 - INFO - Adding Mask 4 mesh to visualization.
2024-11-07 11:29:06,894 - INFO - Initial mesh has 29646 points and 58376 faces.
2024-11-07 11:29:06,895 - INFO - Current memory usage: 1187.36 MB
2024-11-07 11:29:07,259 - INFO - Decimated mesh has 14878 points and 29187 faces.
2024-11-07 11:29:07,260 - INFO - Current memory usage: 1187.36 MB
2024-11-07 11:29:07,270 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:29:07,770 - INFO - Translator(prefix=None)
2024-11-07 11:29:07,858 - INFO - awaiting runner setup
2024-11-07 11:29:07,858 - INFO - awaiting site startup
2024-11-07 11:29:07,859 - INFO - Print WSLINK_READY_MSG
2024-11-07 11:29:07,859 - INFO - Schedule auto shutdown with timout 0
2024-11-07 11:29:07,859 - INFO - awaiting running future
2024-11-07 11:29:21,577 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:29:21,587 - INFO - Current memory usage: 1231.19 MB
2024-11-07 11:29:21,598 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-07 11:29:22,195 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 11:29:22,485 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 11:29:22,769 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 11:29:23,058 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 11:29:23,352 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-07 11:29:23,626 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-07 11:29:23,893 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-07 11:29:24,159 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-07 11:29:24,485 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-07 11:29:24,738 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-07 11:29:25,030 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-07 11:29:25,344 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-07 11:29:25,629 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-07 11:29:25,928 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-07 11:29:26,218 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-07 11:29:26,227 - INFO - Pipeline completed successfully.
2024-11-07 11:29:26,227 - INFO - Current memory usage: 1189.32 MB
2024-11-07 11:29:26,227 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 11:29:26,228 - INFO - Selected good cluster mask with index 1.
2024-11-07 11:29:26,228 - INFO - Removing eyes from the good cluster mask.
2024-11-07 11:29:26,228 - INFO - Starting eye detection using connected components analysis.
2024-11-07 11:29:26,352 - INFO - Number of connected components found: 29
2024-11-07 11:29:39,036 - INFO - Detected potential eye at centroid: (109.78938880825673, 112.71810998226093, 61.12707627801967) with Volume: 6201.0 and Sphericity: 0.88
2024-11-07 11:29:41,135 - WARNING - Expected to detect 2 eyes within Z-axis range (70, 120), Y-axis range (70, 150), and X-axis range (30, 120), but found 1. Skipping eye removal.
2024-11-07 11:29:41,137 - INFO - Detected eyes at centroids: [(109, 112, 61)]
2024-11-07 11:29:43,958 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-07 11:29:43,958 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-07 11:29:44,252 - INFO - Small objects removed from the CSF mask. New mask has 59198 voxels.
2024-11-07 11:29:44,283 - INFO - Saving the good cluster mask as TIFF.
2024-11-07 11:29:44,322 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-07 11:29:44,322 - INFO - Calculating the volume of CSF in the MRI.
2024-11-07 11:29:44,333 - INFO - Total CSF Volume: 56455.72780377014 mm³
2024-11-07 11:29:44,333 - INFO - Final visualization of the Good CSF Mask.
2024-11-07 11:29:44,333 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-07 11:29:44,538 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-07 11:29:44,638 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-07 11:29:44,638 - INFO - Visualization process completed.
2024-11-07 11:29:44,640 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:29:44,640 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:29:44,640 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:29:44,640 - INFO - Final cleanup completed.
2024-11-07 11:29:44,640 - INFO - Current memory usage: 1095.74 MB
2024-11-07 11:32:11,739 - INFO - Logging initiated.
2024-11-07 11:32:11,739 - INFO - Pipeline started.
2024-11-07 11:32:11,739 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 11:32:11,979 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 11:32:12,104 - INFO - Denoised image loaded.
2024-11-07 11:32:12,105 - INFO - Current memory usage: 482.60 MB
2024-11-07 11:32:12,159 - INFO - Starting intensity normalization.
2024-11-07 11:32:13,332 - INFO - Intensity normalization complete.
2024-11-07 11:32:13,333 - INFO - Current memory usage: 639.43 MB
2024-11-07 11:32:13,333 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 11:32:13,333 - INFO - Computing neighborhood statistics.
2024-11-07 11:32:13,736 - INFO - Neighborhood statistics computed.
2024-11-07 11:32:13,736 - INFO - Current memory usage: 597.55 MB
2024-11-07 11:32:13,737 - INFO - Computing z-axis value for each voxel.
2024-11-07 11:32:13,753 - INFO - Z-axis value for each voxel computed.
2024-11-07 11:32:13,754 - INFO - Current memory usage: 639.17 MB
2024-11-07 11:32:13,754 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 11:32:14,339 - INFO - Features shape: (10940800, 4)
2024-11-07 11:32:14,340 - INFO - Current memory usage: 889.71 MB
2024-11-07 11:32:14,340 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 11:32:17,737 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 11:32:20,514 - INFO - Clustering complete with spatial connectivity.
2024-11-07 11:32:20,514 - INFO - Current memory usage: 1519.46 MB
2024-11-07 11:32:20,551 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 11:32:20,551 - INFO - Current memory usage: 935.16 MB
2024-11-07 11:32:20,566 - INFO - Processing Cluster 0.
2024-11-07 11:32:20,585 - INFO - Cluster 0: Initial voxel count = 443642.
2024-11-07 11:32:33,303 - INFO - Cluster 0: Refined voxel count = 2348.
2024-11-07 11:32:33,336 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 11:32:33,393 - INFO - Cluster 0: Mean Intensity = 1.568230390548706
2024-11-07 11:32:33,393 - INFO - Processing Cluster 1.
2024-11-07 11:32:33,413 - INFO - Cluster 1: Initial voxel count = 226806.
2024-11-07 11:32:44,710 - INFO - Cluster 1: Refined voxel count = 60228.
2024-11-07 11:32:44,723 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 11:32:44,772 - INFO - Cluster 1: Mean Intensity = 8.951560020446777
2024-11-07 11:32:44,772 - INFO - Processing Cluster 2.
2024-11-07 11:32:44,790 - INFO - Cluster 2: Initial voxel count = 3153824.
2024-11-07 11:32:55,663 - INFO - Cluster 2: Refined voxel count = 1059156.
2024-11-07 11:32:55,713 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 11:32:55,789 - INFO - Cluster 2: Mean Intensity = 0.22388030588626862
2024-11-07 11:32:55,789 - INFO - Processing Cluster 3.
2024-11-07 11:32:55,804 - INFO - Cluster 3: Initial voxel count = 3728526.
2024-11-07 11:33:06,814 - INFO - Cluster 3: Refined voxel count = 3181249.
2024-11-07 11:33:06,840 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 11:33:06,905 - INFO - Cluster 3: Mean Intensity = -0.2163485884666443
2024-11-07 11:33:06,906 - INFO - Processing Cluster 4.
2024-11-07 11:33:06,923 - INFO - Cluster 4: Initial voxel count = 3388002.
2024-11-07 11:33:17,859 - INFO - Cluster 4: Refined voxel count = 2947164.
2024-11-07 11:33:17,912 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-07 11:33:17,968 - INFO - Cluster 4: Mean Intensity = -0.2614463269710541
2024-11-07 11:33:17,968 - INFO - CSF is identified as cluster 1.
2024-11-07 11:33:17,968 - INFO - Starting visualization with PyVista.
2024-11-07 11:33:18,617 - INFO - Adding Original MRI volume.
2024-11-07 11:33:18,877 - INFO - Adding Denoised MRI volume.
2024-11-07 11:33:19,084 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 11:33:19,176 - INFO - Initial mesh has 654 points and 1276 faces.
2024-11-07 11:33:19,176 - INFO - Current memory usage: 1087.55 MB
2024-11-07 11:33:19,185 - INFO - Decimated mesh has 335 points and 638 faces.
2024-11-07 11:33:19,185 - INFO - Current memory usage: 1087.86 MB
2024-11-07 11:33:19,199 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 11:33:19,305 - INFO - Initial mesh has 10481 points and 20878 faces.
2024-11-07 11:33:19,305 - INFO - Current memory usage: 1088.99 MB
2024-11-07 11:33:19,405 - INFO - Decimated mesh has 5261 points and 10438 faces.
2024-11-07 11:33:19,406 - INFO - Current memory usage: 1090.86 MB
2024-11-07 11:33:19,413 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 11:33:19,626 - INFO - Initial mesh has 97710 points and 195674 faces.
2024-11-07 11:33:19,626 - INFO - Current memory usage: 1112.14 MB
2024-11-07 11:33:20,699 - INFO - Decimated mesh has 48755 points and 97837 faces.
2024-11-07 11:33:20,699 - INFO - Current memory usage: 1189.73 MB
2024-11-07 11:33:20,707 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 11:33:20,836 - INFO - Initial mesh has 34233 points and 67338 faces.
2024-11-07 11:33:20,837 - INFO - Current memory usage: 1196.18 MB
2024-11-07 11:33:21,164 - INFO - Decimated mesh has 17187 points and 33669 faces.
2024-11-07 11:33:21,165 - INFO - Current memory usage: 1196.18 MB
2024-11-07 11:33:21,172 - INFO - Adding Mask 4 mesh to visualization.
2024-11-07 11:33:21,283 - INFO - Initial mesh has 29646 points and 58376 faces.
2024-11-07 11:33:21,284 - INFO - Current memory usage: 1196.18 MB
2024-11-07 11:33:21,597 - INFO - Decimated mesh has 14878 points and 29187 faces.
2024-11-07 11:33:21,597 - INFO - Current memory usage: 1196.18 MB
2024-11-07 11:33:21,606 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:33:22,003 - INFO - Translator(prefix=None)
2024-11-07 11:33:22,086 - INFO - awaiting runner setup
2024-11-07 11:33:22,087 - INFO - awaiting site startup
2024-11-07 11:33:22,088 - INFO - Print WSLINK_READY_MSG
2024-11-07 11:33:22,089 - INFO - Schedule auto shutdown with timout 0
2024-11-07 11:33:22,089 - INFO - awaiting running future
2024-11-07 11:33:32,226 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:33:32,236 - INFO - Current memory usage: 1240.20 MB
2024-11-07 11:33:32,248 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-07 11:33:33,062 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 11:33:33,335 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 11:33:33,600 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 11:33:33,868 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 11:33:34,133 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-07 11:33:34,369 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-07 11:33:34,601 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-07 11:33:34,835 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-07 11:33:35,069 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-07 11:33:35,300 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-07 11:33:35,561 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-07 11:33:35,815 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-07 11:33:36,066 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-07 11:33:36,323 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-07 11:33:36,595 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-07 11:33:36,603 - INFO - Pipeline completed successfully.
2024-11-07 11:33:36,603 - INFO - Current memory usage: 1198.49 MB
2024-11-07 11:33:36,603 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 11:33:36,603 - INFO - Selected good cluster mask with index 1.
2024-11-07 11:33:36,603 - INFO - Removing eyes from the good cluster mask.
2024-11-07 11:33:36,604 - INFO - Starting eye detection using connected components analysis.
2024-11-07 11:33:36,718 - INFO - Number of connected components found: 29
2024-11-07 11:33:39,041 - INFO - Detected potential eye at centroid: (50.68417586036555, 113.81821175695703, 59.52198254569406) with Volume: 6073.0 and Sphericity: 0.88
2024-11-07 11:33:47,538 - INFO - Detected potential eye at centroid: (109.78938880825673, 112.71810998226093, 61.12707627801967) with Volume: 6201.0 and Sphericity: 0.88
2024-11-07 11:33:49,349 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-07 11:33:49,351 - INFO - Saved detected eyes coordinates at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_coords.json'.
2024-11-07 11:33:50,107 - INFO - Saved visualization image with threshold lines at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_visualization.jpg'.
2024-11-07 11:33:50,113 - INFO - Eyes have been removed from the CSF mask.
2024-11-07 11:33:50,113 - INFO - Detected eyes at centroids: [(50, 113, 59), (109, 112, 61)]
2024-11-07 11:33:52,321 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-07 11:33:52,321 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-07 11:33:52,587 - INFO - Small objects removed from the CSF mask. New mask has 46924 voxels.
2024-11-07 11:33:52,621 - INFO - Saving the good cluster mask as TIFF.
2024-11-07 11:33:52,683 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-07 11:33:52,684 - INFO - Calculating the volume of CSF in the MRI.
2024-11-07 11:33:52,750 - INFO - Calculated CSF Volume: 83.79513445977713 mm³
2024-11-07 11:33:52,750 - INFO - Total CSF Volume: 83.79513445977713 mm³
2024-11-07 11:33:52,751 - INFO - Final visualization of the Good CSF Mask.
2024-11-07 11:33:52,751 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-07 11:34:43,699 - INFO - Logging initiated.
2024-11-07 11:34:43,699 - INFO - Pipeline started.
2024-11-07 11:34:43,699 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-07 11:34:44,045 - INFO - Image loaded with shape (160, 790, 260).
2024-11-07 11:34:44,138 - INFO - Denoised image loaded.
2024-11-07 11:34:44,139 - INFO - Current memory usage: 550.98 MB
2024-11-07 11:34:44,183 - INFO - Starting intensity normalization.
2024-11-07 11:34:45,369 - INFO - Intensity normalization complete.
2024-11-07 11:34:45,369 - INFO - Current memory usage: 707.89 MB
2024-11-07 11:34:45,369 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-07 11:34:45,370 - INFO - Computing neighborhood statistics.
2024-11-07 11:34:45,739 - INFO - Neighborhood statistics computed.
2024-11-07 11:34:45,739 - INFO - Current memory usage: 666.01 MB
2024-11-07 11:34:45,739 - INFO - Computing z-axis value for each voxel.
2024-11-07 11:34:45,750 - INFO - Z-axis value for each voxel computed.
2024-11-07 11:34:45,751 - INFO - Current memory usage: 707.64 MB
2024-11-07 11:34:45,751 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 11:34:46,272 - INFO - Features shape: (10940800, 4)
2024-11-07 11:34:46,272 - INFO - Current memory usage: 958.17 MB
2024-11-07 11:34:46,273 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 11:34:49,942 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-07 11:34:52,508 - INFO - Clustering complete with spatial connectivity.
2024-11-07 11:34:52,508 - INFO - Current memory usage: 1575.02 MB
2024-11-07 11:34:52,549 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 11:34:52,549 - INFO - Current memory usage: 990.72 MB
2024-11-07 11:34:52,565 - INFO - Processing Cluster 0.
2024-11-07 11:34:52,589 - INFO - Cluster 0: Initial voxel count = 443642.
2024-11-07 11:35:03,946 - INFO - Cluster 0: Refined voxel count = 2348.
2024-11-07 11:35:03,997 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 11:35:04,048 - INFO - Cluster 0: Mean Intensity = 1.568230390548706
2024-11-07 11:35:04,048 - INFO - Processing Cluster 1.
2024-11-07 11:35:04,067 - INFO - Cluster 1: Initial voxel count = 226806.
2024-11-07 11:35:15,192 - INFO - Cluster 1: Refined voxel count = 60228.
2024-11-07 11:35:15,217 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 11:35:15,260 - INFO - Cluster 1: Mean Intensity = 8.951560020446777
2024-11-07 11:35:15,260 - INFO - Processing Cluster 2.
2024-11-07 11:35:15,279 - INFO - Cluster 2: Initial voxel count = 3153824.
2024-11-07 11:35:27,512 - INFO - Cluster 2: Refined voxel count = 1059156.
2024-11-07 11:35:27,538 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 11:35:27,610 - INFO - Cluster 2: Mean Intensity = 0.22388030588626862
2024-11-07 11:35:27,610 - INFO - Processing Cluster 3.
2024-11-07 11:35:27,627 - INFO - Cluster 3: Initial voxel count = 3728526.
2024-11-07 11:35:42,033 - INFO - Cluster 3: Refined voxel count = 3181249.
2024-11-07 11:35:42,058 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 11:35:42,126 - INFO - Cluster 3: Mean Intensity = -0.2163485884666443
2024-11-07 11:35:42,126 - INFO - Processing Cluster 4.
2024-11-07 11:35:42,146 - INFO - Cluster 4: Initial voxel count = 3388002.
2024-11-07 11:35:57,565 - INFO - Cluster 4: Refined voxel count = 2947164.
2024-11-07 11:35:57,603 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-07 11:35:57,671 - INFO - Cluster 4: Mean Intensity = -0.2614463269710541
2024-11-07 11:35:57,671 - INFO - CSF is identified as cluster 1.
2024-11-07 11:35:57,671 - INFO - Starting visualization with PyVista.
2024-11-07 11:35:57,999 - INFO - Adding Original MRI volume.
2024-11-07 11:35:58,327 - INFO - Adding Denoised MRI volume.
2024-11-07 11:35:58,586 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 11:35:58,692 - INFO - Initial mesh has 654 points and 1276 faces.
2024-11-07 11:35:58,693 - INFO - Current memory usage: 1077.68 MB
2024-11-07 11:35:58,700 - INFO - Decimated mesh has 335 points and 638 faces.
2024-11-07 11:35:58,700 - INFO - Current memory usage: 1077.96 MB
2024-11-07 11:35:58,709 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 11:35:58,818 - INFO - Initial mesh has 10481 points and 20878 faces.
2024-11-07 11:35:58,819 - INFO - Current memory usage: 1078.21 MB
2024-11-07 11:35:58,928 - INFO - Decimated mesh has 5261 points and 10438 faces.
2024-11-07 11:35:58,929 - INFO - Current memory usage: 1078.84 MB
2024-11-07 11:35:58,936 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 11:35:59,178 - INFO - Initial mesh has 97710 points and 195674 faces.
2024-11-07 11:35:59,179 - INFO - Current memory usage: 1100.97 MB
2024-11-07 11:36:00,436 - INFO - Decimated mesh has 48755 points and 97837 faces.
2024-11-07 11:36:00,437 - INFO - Current memory usage: 1178.45 MB
2024-11-07 11:36:00,448 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 11:36:00,575 - INFO - Initial mesh has 34233 points and 67338 faces.
2024-11-07 11:36:00,576 - INFO - Current memory usage: 1183.85 MB
2024-11-07 11:36:00,931 - INFO - Decimated mesh has 17187 points and 33669 faces.
2024-11-07 11:36:00,932 - INFO - Current memory usage: 1183.85 MB
2024-11-07 11:36:00,939 - INFO - Adding Mask 4 mesh to visualization.
2024-11-07 11:36:01,055 - INFO - Initial mesh has 29646 points and 58376 faces.
2024-11-07 11:36:01,055 - INFO - Current memory usage: 1183.85 MB
2024-11-07 11:36:01,415 - INFO - Decimated mesh has 14878 points and 29187 faces.
2024-11-07 11:36:01,415 - INFO - Current memory usage: 1183.85 MB
2024-11-07 11:36:01,424 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:36:01,820 - INFO - Translator(prefix=None)
2024-11-07 11:36:01,901 - INFO - awaiting runner setup
2024-11-07 11:36:01,902 - INFO - awaiting site startup
2024-11-07 11:36:01,903 - INFO - Print WSLINK_READY_MSG
2024-11-07 11:36:01,903 - INFO - Schedule auto shutdown with timout 0
2024-11-07 11:36:01,903 - INFO - awaiting running future
2024-11-07 11:36:14,949 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:36:14,957 - INFO - Current memory usage: 1227.53 MB
2024-11-07 11:36:14,967 - INFO - Selected slice indices for saving: [0, 79, 159]
2024-11-07 11:36:15,780 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 11:36:16,099 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 11:36:16,402 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 11:36:16,712 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 11:36:16,983 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-07 11:36:17,237 - INFO - Saved slice 79 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_0_overlay.png'.
2024-11-07 11:36:17,491 - INFO - Saved slice 79 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_1_overlay.png'.
2024-11-07 11:36:17,755 - INFO - Saved slice 79 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_2_overlay.png'.
2024-11-07 11:36:18,056 - INFO - Saved slice 79 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_3_overlay.png'.
2024-11-07 11:36:18,393 - INFO - Saved slice 79 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_79_cluster_4_overlay.png'.
2024-11-07 11:36:18,768 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-07 11:36:19,103 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-07 11:36:19,396 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-07 11:36:19,676 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-07 11:36:19,960 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-07 11:36:19,967 - INFO - Pipeline completed successfully.
2024-11-07 11:36:19,968 - INFO - Current memory usage: 1186.25 MB
2024-11-07 11:36:19,968 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 11:36:19,968 - INFO - Selected good cluster mask with index 1.
2024-11-07 11:36:19,968 - INFO - Removing eyes from the good cluster mask.
2024-11-07 11:36:19,968 - INFO - Starting eye detection using connected components analysis.
2024-11-07 11:36:20,084 - INFO - Number of connected components found: 29
2024-11-07 11:36:22,962 - INFO - Detected potential eye at centroid: (50.68417586036555, 113.81821175695703, 59.52198254569406) with Volume: 6073.0 and Sphericity: 0.88
2024-11-07 11:36:32,369 - INFO - Detected potential eye at centroid: (109.78938880825673, 112.71810998226093, 61.12707627801967) with Volume: 6201.0 and Sphericity: 0.88
2024-11-07 11:36:34,220 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-07 11:36:34,221 - INFO - Saved detected eyes coordinates at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_coords.json'.
2024-11-07 11:36:34,929 - INFO - Saved visualization image with threshold lines at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_visualization.jpg'.
2024-11-07 11:36:34,936 - INFO - Eyes have been removed from the CSF mask.
2024-11-07 11:36:34,936 - INFO - Detected eyes at centroids: [(50, 113, 59), (109, 112, 61)]
2024-11-07 11:36:37,448 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-07 11:36:37,448 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-07 11:36:37,710 - INFO - Small objects removed from the CSF mask. New mask has 46924 voxels.
2024-11-07 11:36:37,740 - INFO - Saving the good cluster mask as TIFF.
2024-11-07 11:36:37,776 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-07 11:36:37,776 - INFO - Calculating the volume of CSF in the MRI.
2024-11-07 11:36:37,852 - INFO - Calculated CSF Volume: 83.79513445977713 mm³
2024-11-07 11:36:37,855 - INFO - Total CSF Volume: 83.79513445977713 mm³
2024-11-07 11:36:37,855 - INFO - Final visualization of the Good CSF Mask.
2024-11-07 11:36:37,855 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-07 11:36:38,051 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-07 11:36:38,137 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-07 11:36:38,138 - INFO - Visualization process completed.
2024-11-07 11:36:38,139 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:36:38,139 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:36:38,139 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:36:38,139 - INFO - Final cleanup completed.
2024-11-07 11:36:38,140 - INFO - Current memory usage: 1115.11 MB
2024-11-07 11:40:45,753 - INFO - Logging initiated.
2024-11-07 11:40:45,753 - INFO - Pipeline started.
2024-11-07 11:40:45,753 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-07 11:40:46,293 - INFO - Image loaded with shape (144, 763, 260).
2024-11-07 11:40:46,503 - INFO - Denoised image loaded.
2024-11-07 11:40:46,504 - INFO - Current memory usage: 518.57 MB
2024-11-07 11:40:46,728 - INFO - Starting intensity normalization.
2024-11-07 11:40:47,529 - INFO - Intensity normalization complete.
2024-11-07 11:40:47,529 - INFO - Current memory usage: 654.92 MB
2024-11-07 11:40:47,537 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-07 11:40:47,537 - INFO - Computing neighborhood statistics.
2024-11-07 11:40:48,143 - INFO - Neighborhood statistics computed.
2024-11-07 11:40:48,144 - INFO - Current memory usage: 618.50 MB
2024-11-07 11:40:48,144 - INFO - Computing z-axis value for each voxel.
2024-11-07 11:40:48,173 - INFO - Z-axis value for each voxel computed.
2024-11-07 11:40:48,173 - INFO - Current memory usage: 654.75 MB
2024-11-07 11:40:48,173 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-07 11:40:48,653 - INFO - Features shape: (9509760, 4)
2024-11-07 11:40:48,653 - INFO - Current memory usage: 872.45 MB
2024-11-07 11:40:48,653 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-07 11:40:51,610 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-07 11:40:53,965 - INFO - Clustering complete with spatial connectivity.
2024-11-07 11:40:53,966 - INFO - Current memory usage: 1395.88 MB
2024-11-07 11:40:53,987 - INFO - Cluster labels reshaped to image dimensions.
2024-11-07 11:40:53,988 - INFO - Current memory usage: 888.00 MB
2024-11-07 11:40:54,005 - INFO - Processing Cluster 0.
2024-11-07 11:40:54,023 - INFO - Cluster 0: Initial voxel count = 4414194.
2024-11-07 11:41:04,276 - INFO - Cluster 0: Refined voxel count = 3285226.
2024-11-07 11:41:04,315 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-07 11:41:04,375 - INFO - Cluster 0: Mean Intensity = 0.03837166354060173
2024-11-07 11:41:04,375 - INFO - Processing Cluster 1.
2024-11-07 11:41:04,390 - INFO - Cluster 1: Initial voxel count = 197797.
2024-11-07 11:41:14,267 - INFO - Cluster 1: Refined voxel count = 123604.
2024-11-07 11:41:14,317 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-07 11:41:14,354 - INFO - Cluster 1: Mean Intensity = 9.419455528259277
2024-11-07 11:41:14,354 - INFO - Processing Cluster 2.
2024-11-07 11:41:14,371 - INFO - Cluster 2: Initial voxel count = 226584.
2024-11-07 11:41:24,838 - INFO - Cluster 2: Refined voxel count = 76.
2024-11-07 11:41:24,862 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-07 11:41:24,903 - INFO - Cluster 2: Mean Intensity = 2.5521597862243652
2024-11-07 11:41:24,903 - INFO - Processing Cluster 3.
2024-11-07 11:41:24,918 - INFO - Cluster 3: Initial voxel count = 4564004.
2024-11-07 11:41:34,179 - INFO - Cluster 3: Refined voxel count = 3850986.
2024-11-07 11:41:34,201 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-07 11:41:34,260 - INFO - Cluster 3: Mean Intensity = -0.17702420055866241
2024-11-07 11:41:34,260 - INFO - Processing Cluster 4.
2024-11-07 11:41:34,277 - INFO - Cluster 4: Initial voxel count = 107181.
2024-11-07 11:41:43,453 - INFO - Cluster 4: Refined voxel count = 0.
2024-11-07 11:41:43,454 - WARNING - Refined mask for Cluster 4 is empty.
2024-11-07 11:41:43,478 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-07 11:41:43,514 - INFO - Cluster 4: Mean Intensity = 6.990720748901367
2024-11-07 11:41:43,514 - INFO - CSF is identified as cluster 1.
2024-11-07 11:41:43,514 - INFO - Starting visualization with PyVista.
2024-11-07 11:41:43,883 - INFO - Adding Original MRI volume.
2024-11-07 11:41:44,123 - INFO - Adding Denoised MRI volume.
2024-11-07 11:41:44,285 - INFO - Adding Mask 0 mesh to visualization.
2024-11-07 11:41:44,591 - INFO - Initial mesh has 66814 points and 132778 faces.
2024-11-07 11:41:44,592 - INFO - Current memory usage: 982.20 MB
2024-11-07 11:41:45,350 - INFO - Decimated mesh has 33417 points and 66388 faces.
2024-11-07 11:41:45,350 - INFO - Current memory usage: 1048.42 MB
2024-11-07 11:41:45,359 - INFO - Adding Mask 1 mesh to visualization.
2024-11-07 11:41:45,438 - INFO - Initial mesh has 9536 points and 19040 faces.
2024-11-07 11:41:45,439 - INFO - Current memory usage: 1049.73 MB
2024-11-07 11:41:45,539 - INFO - Decimated mesh has 4776 points and 9520 faces.
2024-11-07 11:41:45,540 - INFO - Current memory usage: 1049.73 MB
2024-11-07 11:41:45,548 - INFO - Adding Mask 2 mesh to visualization.
2024-11-07 11:41:45,619 - INFO - Initial mesh has 16 points and 20 faces.
2024-11-07 11:41:45,619 - INFO - Current memory usage: 1050.10 MB
2024-11-07 11:41:45,620 - INFO - Decimated mesh has 8 points and 10 faces.
2024-11-07 11:41:45,621 - INFO - Current memory usage: 1050.10 MB
2024-11-07 11:41:45,629 - INFO - Adding Mask 3 mesh to visualization.
2024-11-07 11:41:45,748 - INFO - Initial mesh has 36303 points and 71524 faces.
2024-11-07 11:41:45,748 - INFO - Current memory usage: 1050.11 MB
2024-11-07 11:41:46,111 - INFO - Decimated mesh has 18232 points and 35762 faces.
2024-11-07 11:41:46,111 - INFO - Current memory usage: 1050.11 MB
2024-11-07 11:41:46,119 - INFO - Adding Mask 4 mesh to visualization.
2024-11-07 11:41:46,139 - WARNING - Mask 4 is empty. Skipping visualization.
2024-11-07 11:41:46,140 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:41:46,618 - INFO - Translator(prefix=None)
2024-11-07 11:41:46,726 - INFO - awaiting runner setup
2024-11-07 11:41:46,727 - INFO - awaiting site startup
2024-11-07 11:41:46,728 - INFO - Print WSLINK_READY_MSG
2024-11-07 11:41:46,729 - INFO - Schedule auto shutdown with timout 0
2024-11-07 11:41:46,729 - INFO - awaiting running future
2024-11-07 11:41:56,542 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-07 11:41:56,548 - INFO - Current memory usage: 1074.23 MB
2024-11-07 11:41:56,554 - INFO - Selected slice indices for saving: [0, 71, 143]
2024-11-07 11:41:57,384 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-07 11:41:57,637 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-07 11:41:57,881 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-07 11:41:58,132 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-07 11:41:58,376 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-07 11:41:58,613 - INFO - Saved slice 71 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_0_overlay.png'.
2024-11-07 11:41:58,849 - INFO - Saved slice 71 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_1_overlay.png'.
2024-11-07 11:41:59,084 - INFO - Saved slice 71 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_2_overlay.png'.
2024-11-07 11:41:59,364 - INFO - Saved slice 71 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_3_overlay.png'.
2024-11-07 11:41:59,604 - INFO - Saved slice 71 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_71_cluster_4_overlay.png'.
2024-11-07 11:41:59,852 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-07 11:42:00,111 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-07 11:42:00,364 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-07 11:42:00,611 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-07 11:42:00,864 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-07 11:42:00,872 - INFO - Pipeline completed successfully.
2024-11-07 11:42:00,873 - INFO - Current memory usage: 1043.15 MB
2024-11-07 11:42:00,873 - INFO - Selecting and refining the good mask based on density profile.
2024-11-07 11:42:00,873 - INFO - Selected good cluster mask with index 1.
2024-11-07 11:42:00,873 - INFO - Removing eyes from the good cluster mask.
2024-11-07 11:42:00,873 - INFO - Starting eye detection using connected components analysis.
2024-11-07 11:42:00,980 - INFO - Number of connected components found: 10
2024-11-07 11:42:01,661 - INFO - Detected potential eye at centroid: (40.87682301931415, 116.08100118249901, 63.87031927473394) with Volume: 5074.0 and Sphericity: 0.88
2024-11-07 11:42:07,341 - INFO - Detected potential eye at centroid: (101.01016175860639, 113.01804230609706, 61.506428867689756) with Volume: 4822.0 and Sphericity: 0.88
2024-11-07 11:42:07,626 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-07 11:42:07,628 - INFO - Saved detected eyes coordinates at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_coords.json'.
2024-11-07 11:42:08,337 - INFO - Saved visualization image with threshold lines at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_visualization.jpg'.
2024-11-07 11:42:08,342 - INFO - Eyes have been removed from the CSF mask.
2024-11-07 11:42:08,343 - INFO - Detected eyes at centroids: [(40, 116, 63), (101, 113, 61)]
2024-11-07 11:42:10,593 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-07 11:42:10,593 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-07 11:42:10,811 - INFO - Small objects removed from the CSF mask. New mask has 113280 voxels.
2024-11-07 11:42:10,836 - INFO - Saving the good cluster mask as TIFF.
2024-11-07 11:42:10,872 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-07 11:42:10,872 - INFO - Calculating the volume of CSF in the MRI.
2024-11-07 11:42:10,928 - INFO - Calculated CSF Volume: 279.01590900638155 mm³
2024-11-07 11:42:10,929 - INFO - Total CSF Volume: 279.01590900638155 mm³
2024-11-07 11:42:10,929 - INFO - Final visualization of the Good CSF Mask.
2024-11-07 11:42:10,929 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-07 11:42:11,098 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-07 11:42:11,175 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-07 11:42:11,176 - INFO - Visualization process completed.
2024-11-07 11:42:11,177 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:42:11,177 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:42:11,177 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-07 11:42:11,177 - INFO - Final cleanup completed.
2024-11-07 11:42:11,177 - INFO - Current memory usage: 1012.22 MB
2024-11-13 10:32:51,431 - INFO - Logging initiated.
2024-11-13 10:32:51,431 - INFO - Pipeline started.
2024-11-13 10:32:51,431 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-13 10:32:51,751 - INFO - Image loaded with shape (144, 763, 260).
2024-11-13 10:32:51,814 - INFO - Calculated CSF Volume: 17869553.923145205 mm³
2024-11-13 10:32:51,982 - INFO - Denoised image loaded.
2024-11-13 10:32:51,982 - INFO - Current memory usage: 543.68 MB
2024-11-13 10:32:52,107 - INFO - Starting intensity normalization.
2024-11-13 10:32:52,610 - INFO - Intensity normalization complete.
2024-11-13 10:32:52,611 - INFO - Current memory usage: 627.72 MB
2024-11-13 10:32:52,616 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-13 10:32:52,616 - INFO - Computing neighborhood statistics.
2024-11-13 10:32:52,909 - INFO - Neighborhood statistics computed.
2024-11-13 10:32:52,909 - INFO - Current memory usage: 591.05 MB
2024-11-13 10:32:52,909 - INFO - Computing z-axis value for each voxel.
2024-11-13 10:32:52,964 - INFO - Z-axis value for each voxel computed.
2024-11-13 10:32:52,964 - INFO - Current memory usage: 627.30 MB
2024-11-13 10:32:52,964 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-13 10:32:53,316 - INFO - Features shape: (9509760, 4)
2024-11-13 10:32:53,317 - INFO - Current memory usage: 828.37 MB
2024-11-13 10:32:53,317 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-13 10:32:56,578 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-13 10:33:04,549 - INFO - Clustering complete with spatial connectivity.
2024-11-13 10:33:04,552 - INFO - Current memory usage: 1308.10 MB
2024-11-13 10:33:04,739 - INFO - Cluster labels reshaped to image dimensions.
2024-11-13 10:33:04,740 - INFO - Current memory usage: 800.29 MB
2024-11-13 10:33:04,768 - INFO - Processing Cluster 0.
2024-11-13 10:33:04,793 - INFO - Cluster 0: Initial voxel count = 4414194.
2024-11-13 10:33:31,071 - INFO - Cluster 0: Refined voxel count = 3285226.
2024-11-13 10:33:31,087 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-13 10:33:31,193 - INFO - Cluster 0: Mean Intensity = 0.03837166354060173
2024-11-13 10:33:31,193 - INFO - Processing Cluster 1.
2024-11-13 10:33:31,205 - INFO - Cluster 1: Initial voxel count = 197797.
2024-11-13 10:33:48,670 - INFO - Cluster 1: Refined voxel count = 123604.
2024-11-13 10:33:48,707 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-13 10:33:48,828 - INFO - Cluster 1: Mean Intensity = 9.419455528259277
2024-11-13 10:33:48,829 - INFO - Processing Cluster 2.
2024-11-13 10:33:48,854 - INFO - Cluster 2: Initial voxel count = 226584.
2024-11-13 10:34:05,921 - INFO - Cluster 2: Refined voxel count = 76.
2024-11-13 10:34:05,949 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-13 10:34:06,011 - INFO - Cluster 2: Mean Intensity = 2.5521597862243652
2024-11-13 10:34:06,011 - INFO - Processing Cluster 3.
2024-11-13 10:34:06,030 - INFO - Cluster 3: Initial voxel count = 4564004.
2024-11-13 10:34:22,217 - INFO - Cluster 3: Refined voxel count = 3850986.
2024-11-13 10:34:22,240 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-13 10:34:22,314 - INFO - Cluster 3: Mean Intensity = -0.17702420055866241
2024-11-13 10:34:22,314 - INFO - Processing Cluster 4.
2024-11-13 10:34:22,336 - INFO - Cluster 4: Initial voxel count = 107181.
2024-11-13 10:34:38,993 - INFO - Cluster 4: Refined voxel count = 0.
2024-11-13 10:34:38,993 - WARNING - Refined mask for Cluster 4 is empty.
2024-11-13 10:34:39,020 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-13 10:34:39,067 - INFO - Cluster 4: Mean Intensity = 6.990720748901367
2024-11-13 10:34:39,069 - INFO - CSF is identified as cluster 1.
2024-11-13 10:34:39,069 - INFO - Starting visualization with PyVista.
2024-11-13 10:34:39,639 - INFO - Adding Original MRI volume.
2024-11-13 10:34:40,071 - INFO - Adding Denoised MRI volume.
2024-11-13 10:34:40,523 - INFO - Adding Mask 0 mesh to visualization.
2024-11-13 10:34:41,057 - INFO - Initial mesh has 66814 points and 132778 faces.
2024-11-13 10:34:41,058 - INFO - Current memory usage: 902.72 MB
2024-11-13 10:34:42,195 - INFO - Decimated mesh has 33417 points and 66388 faces.
2024-11-13 10:34:42,196 - INFO - Current memory usage: 966.13 MB
2024-11-13 10:34:42,209 - INFO - Adding Mask 1 mesh to visualization.
2024-11-13 10:34:42,390 - INFO - Initial mesh has 9536 points and 19040 faces.
2024-11-13 10:34:42,391 - INFO - Current memory usage: 969.37 MB
2024-11-13 10:34:42,539 - INFO - Decimated mesh has 4776 points and 9520 faces.
2024-11-13 10:34:42,540 - INFO - Current memory usage: 969.37 MB
2024-11-13 10:34:42,550 - INFO - Adding Mask 2 mesh to visualization.
2024-11-13 10:34:42,701 - INFO - Initial mesh has 16 points and 20 faces.
2024-11-13 10:34:42,701 - INFO - Current memory usage: 970.40 MB
2024-11-13 10:34:42,703 - INFO - Decimated mesh has 8 points and 10 faces.
2024-11-13 10:34:42,703 - INFO - Current memory usage: 970.40 MB
2024-11-13 10:34:42,715 - INFO - Adding Mask 3 mesh to visualization.
2024-11-13 10:34:42,916 - INFO - Initial mesh has 36303 points and 71524 faces.
2024-11-13 10:34:42,917 - INFO - Current memory usage: 970.41 MB
2024-11-13 10:34:43,459 - INFO - Decimated mesh has 18232 points and 35762 faces.
2024-11-13 10:34:43,459 - INFO - Current memory usage: 970.41 MB
2024-11-13 10:34:43,469 - INFO - Adding Mask 4 mesh to visualization.
2024-11-13 10:34:43,495 - WARNING - Mask 4 is empty. Skipping visualization.
2024-11-13 10:34:43,495 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-13 10:34:43,989 - INFO - Translator(prefix=None)
2024-11-13 10:34:44,124 - INFO - awaiting runner setup
2024-11-13 10:34:44,129 - INFO - awaiting site startup
2024-11-13 10:34:44,131 - INFO - Print WSLINK_READY_MSG
2024-11-13 10:34:44,132 - INFO - Schedule auto shutdown with timout 0
2024-11-13 10:34:44,133 - INFO - awaiting running future
2024-11-13 10:34:58,914 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-13 10:34:58,919 - INFO - Current memory usage: 1004.72 MB
2024-11-13 10:34:58,927 - INFO - Selected slice indices for saving: [0, 143]
2024-11-13 10:34:59,520 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-13 10:34:59,713 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-13 10:34:59,894 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-13 10:35:00,090 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-13 10:35:00,298 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-13 10:35:00,487 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-13 10:35:00,673 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-13 10:35:00,849 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-13 10:35:01,024 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-13 10:35:01,206 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-13 10:35:01,211 - INFO - Pipeline completed successfully.
2024-11-13 10:35:01,211 - INFO - Current memory usage: 977.20 MB
2024-11-13 10:35:01,211 - INFO - Selecting and refining the good mask based on density profile.
2024-11-13 10:35:01,211 - INFO - Selected good cluster mask with index 1.
2024-11-13 10:35:01,211 - INFO - Removing eyes from the good cluster mask.
2024-11-13 10:35:01,211 - INFO - Starting eye detection using connected components analysis.
2024-11-13 10:35:01,287 - INFO - Number of connected components found: 10
2024-11-13 10:35:01,688 - INFO - Detected potential eye at centroid: (40.87682301931415, 116.08100118249901, 63.87031927473394) with Volume: 5074.0 and Sphericity: 0.88
2024-11-13 10:35:06,157 - INFO - Detected potential eye at centroid: (101.01016175860639, 113.01804230609706, 61.506428867689756) with Volume: 4822.0 and Sphericity: 0.88
2024-11-13 10:35:06,367 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-13 10:35:06,368 - INFO - Saved detected eyes coordinates at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_coords.json'.
2024-11-13 10:35:06,988 - INFO - Saved visualization image with threshold lines at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_visualization.jpg'.
2024-11-13 10:35:07,000 - INFO - Eyes have been removed from the CSF mask.
2024-11-13 10:35:07,000 - INFO - Detected eyes at centroids: [(40, 116, 63), (101, 113, 61)]
2024-11-13 10:35:09,545 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-13 10:35:09,545 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-13 10:35:09,790 - INFO - Small objects removed from the CSF mask. New mask has 113280 voxels.
2024-11-13 10:35:09,810 - INFO - Saving the good cluster mask as TIFF.
2024-11-13 10:35:09,838 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-13 10:35:09,839 - INFO - Calculating the volume of CSF in the MRI.
2024-11-13 10:35:09,959 - INFO - Calculated CSF Volume: 279.01590900638155 mm³
2024-11-13 10:35:09,962 - INFO - Total CSF Volume: 279.01590900638155 mm³
2024-11-13 10:35:09,962 - INFO - Final visualization of the Good CSF Mask.
2024-11-13 10:35:09,962 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-13 10:35:10,114 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_1.html'.
2024-11-13 10:35:10,186 - INFO - Visualization successfully saved to 'good_cluster_1.html'.
2024-11-13 10:35:10,186 - INFO - Visualization process completed.
2024-11-13 10:35:10,187 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-13 10:35:10,187 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-13 10:35:10,187 - INFO - Final cleanup completed.
2024-11-13 10:35:10,188 - INFO - Current memory usage: 949.68 MB
2024-11-13 10:40:43,902 - INFO - Logging initiated.
2024-11-13 10:40:43,903 - INFO - Pipeline started.
2024-11-13 10:40:43,903 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-13 10:40:44,129 - INFO - Image loaded with shape (160, 790, 260).
2024-11-13 10:40:44,159 - INFO - Calculated CSF Volume: 18776833.84216471 mm³
2024-11-13 10:40:44,159 - INFO - Denoised image not found. Performing denoising.
2024-11-13 10:40:44,310 - INFO - Slice 0: Estimated noise sigma = 0.0022515759226074757
2024-11-13 10:40:44,580 - INFO - Slice 0: Denoising complete.
2024-11-13 10:40:44,583 - INFO - Slice 1: Estimated noise sigma = 0.002180297595394675
2024-11-13 10:40:44,845 - INFO - Slice 1: Denoising complete.
2024-11-13 10:40:44,848 - INFO - Slice 2: Estimated noise sigma = 0.002180297595394675
2024-11-13 10:40:45,197 - INFO - Slice 2: Denoising complete.
2024-11-13 10:40:45,200 - INFO - Slice 3: Estimated noise sigma = 0.0022515759226074757
2024-11-13 10:40:45,475 - INFO - Slice 3: Denoising complete.
2024-11-13 10:40:45,478 - INFO - Slice 4: Estimated noise sigma = 0.0021802969050042174
2024-11-13 10:40:45,755 - INFO - Slice 4: Denoising complete.
2024-11-13 10:40:45,758 - INFO - Slice 5: Estimated noise sigma = 0.0021672524951000544
2024-11-13 10:40:46,027 - INFO - Slice 5: Denoising complete.
2024-11-13 10:40:46,030 - INFO - Slice 6: Estimated noise sigma = 0.0022515759226074757
2024-11-13 10:40:46,300 - INFO - Slice 6: Denoising complete.
2024-11-13 10:40:46,303 - INFO - Slice 7: Estimated noise sigma = 0.0021802977679922894
2024-11-13 10:40:46,579 - INFO - Slice 7: Denoising complete.
2024-11-13 10:40:46,582 - INFO - Slice 8: Estimated noise sigma = 0.0021802977679922894
2024-11-13 10:40:46,851 - INFO - Slice 8: Denoising complete.
2024-11-13 10:40:46,854 - INFO - Slice 9: Estimated noise sigma = 0.0022776654328062595
2024-11-13 10:40:47,123 - INFO - Slice 9: Denoising complete.
2024-11-13 10:40:47,127 - INFO - Slice 10: Estimated noise sigma = 0.0022776650876110307
2024-11-13 10:40:47,397 - INFO - Slice 10: Denoising complete.
2024-11-13 10:40:47,400 - INFO - Slice 11: Estimated noise sigma = 0.002180297595394675
2024-11-13 10:40:47,669 - INFO - Slice 11: Denoising complete.
2024-11-13 10:40:47,672 - INFO - Slice 12: Estimated noise sigma = 0.002322854422417891
2024-11-13 10:40:47,939 - INFO - Slice 12: Denoising complete.
2024-11-13 10:40:47,942 - INFO - Slice 13: Estimated noise sigma = 0.002180297250199446
2024-11-13 10:40:48,213 - INFO - Slice 13: Denoising complete.
2024-11-13 10:40:48,216 - INFO - Slice 14: Estimated noise sigma = 0.0020829290675926327
2024-11-13 10:40:48,484 - INFO - Slice 14: Denoising complete.
2024-11-13 10:40:48,487 - INFO - Slice 15: Estimated noise sigma = 0.001985561230181048
2024-11-13 10:40:48,755 - INFO - Slice 15: Denoising complete.
2024-11-13 10:40:48,758 - INFO - Slice 16: Estimated noise sigma = 0.001985561230181048
2024-11-13 10:40:49,021 - INFO - Slice 16: Denoising complete.
2024-11-13 10:40:49,024 - INFO - Slice 17: Estimated noise sigma = 0.002011651603367904
2024-11-13 10:40:49,297 - INFO - Slice 17: Denoising complete.
2024-11-13 10:40:49,300 - INFO - Slice 18: Estimated noise sigma = 0.0020829294127878615
2024-11-13 10:40:49,570 - INFO - Slice 18: Denoising complete.
2024-11-13 10:40:49,574 - INFO - Slice 19: Estimated noise sigma = 0.0021281173668138064
2024-11-13 10:40:49,842 - INFO - Slice 19: Denoising complete.
2024-11-13 10:40:49,845 - INFO - Slice 20: Estimated noise sigma = 0.002180297595394675
2024-11-13 10:40:50,112 - INFO - Slice 20: Denoising complete.
2024-11-13 10:40:50,115 - INFO - Slice 21: Estimated noise sigma = 0.0022741699859192555
2024-11-13 10:40:50,380 - INFO - Slice 21: Denoising complete.
2024-11-13 10:40:50,383 - INFO - Slice 22: Estimated noise sigma = 0.002348940653262001
2024-11-13 10:40:50,645 - INFO - Slice 22: Denoising complete.
2024-11-13 10:40:50,648 - INFO - Slice 23: Estimated noise sigma = 0.0023489442778119036
2024-11-13 10:40:50,911 - INFO - Slice 23: Denoising complete.
2024-11-13 10:40:50,913 - INFO - Slice 24: Estimated noise sigma = 0.0024202226050247045
2024-11-13 10:40:51,178 - INFO - Slice 24: Denoising complete.
2024-11-13 10:40:51,182 - INFO - Slice 25: Estimated noise sigma = 0.0024151083651121614
2024-11-13 10:40:51,442 - INFO - Slice 25: Denoising complete.
2024-11-13 10:40:51,446 - INFO - Slice 26: Estimated noise sigma = 0.002472402488410344
2024-11-13 10:40:51,708 - INFO - Slice 26: Denoising complete.
2024-11-13 10:40:51,711 - INFO - Slice 27: Estimated noise sigma = 0.0024463122878211024
2024-11-13 10:40:51,967 - INFO - Slice 27: Denoising complete.
2024-11-13 10:40:51,970 - INFO - Slice 28: Estimated noise sigma = 0.0025436797800374583
2024-11-13 10:40:52,233 - INFO - Slice 28: Denoising complete.
2024-11-13 10:40:52,237 - INFO - Slice 29: Estimated noise sigma = 0.0026149600058240174
2024-11-13 10:40:52,500 - INFO - Slice 29: Denoising complete.
2024-11-13 10:40:52,504 - INFO - Slice 30: Estimated noise sigma = 0.002641048480437115
2024-11-13 10:40:52,766 - INFO - Slice 30: Denoising complete.
2024-11-13 10:40:52,769 - INFO - Slice 31: Estimated noise sigma = 0.0026410488256323437
2024-11-13 10:40:53,035 - INFO - Slice 31: Denoising complete.
2024-11-13 10:40:53,038 - INFO - Slice 32: Estimated noise sigma = 0.0027123266350523013
2024-11-13 10:40:53,300 - INFO - Slice 32: Denoising complete.
2024-11-13 10:40:53,302 - INFO - Slice 33: Estimated noise sigma = 0.0027384166630439284
2024-11-13 10:40:53,597 - INFO - Slice 33: Denoising complete.
2024-11-13 10:40:53,601 - INFO - Slice 34: Estimated noise sigma = 0.002764506173242712
2024-11-13 10:40:53,862 - INFO - Slice 34: Denoising complete.
2024-11-13 10:40:53,865 - INFO - Slice 35: Estimated noise sigma = 0.0028357850182483563
2024-11-13 10:40:54,129 - INFO - Slice 35: Denoising complete.
2024-11-13 10:40:54,132 - INFO - Slice 36: Estimated noise sigma = 0.002880973662664759
2024-11-13 10:40:54,390 - INFO - Slice 36: Denoising complete.
2024-11-13 10:40:54,393 - INFO - Slice 37: Estimated noise sigma = 0.002880973662664759
2024-11-13 10:40:54,653 - INFO - Slice 37: Denoising complete.
2024-11-13 10:40:54,656 - INFO - Slice 38: Estimated noise sigma = 0.002907063345461157
2024-11-13 10:40:54,913 - INFO - Slice 38: Denoising complete.
2024-11-13 10:40:54,916 - INFO - Slice 39: Estimated noise sigma = 0.0029522521624751738
2024-11-13 10:40:55,177 - INFO - Slice 39: Denoising complete.
2024-11-13 10:40:55,181 - INFO - Slice 40: Estimated noise sigma = 0.004600520027821765
2024-11-13 10:40:55,403 - INFO - Slice 40: Denoising complete.
2024-11-13 10:40:55,407 - INFO - Slice 41: Estimated noise sigma = 0.004723977375432133
2024-11-13 10:40:55,630 - INFO - Slice 41: Denoising complete.
2024-11-13 10:40:55,634 - INFO - Slice 42: Estimated noise sigma = 0.004671800426205939
2024-11-13 10:40:55,858 - INFO - Slice 42: Denoising complete.
2024-11-13 10:40:55,861 - INFO - Slice 43: Estimated noise sigma = 0.00462660919282532
2024-11-13 10:40:56,086 - INFO - Slice 43: Denoising complete.
2024-11-13 10:40:56,089 - INFO - Slice 44: Estimated noise sigma = 0.004626609883215778
2024-11-13 10:40:56,313 - INFO - Slice 44: Denoising complete.
2024-11-13 10:40:56,317 - INFO - Slice 45: Estimated noise sigma = 0.0046005203730169935
2024-11-13 10:40:56,542 - INFO - Slice 45: Denoising complete.
2024-11-13 10:40:56,545 - INFO - Slice 46: Estimated noise sigma = 0.004645709880421468
2024-11-13 10:40:56,768 - INFO - Slice 46: Denoising complete.
2024-11-13 10:40:56,772 - INFO - Slice 47: Estimated noise sigma = 0.004697887520038121
2024-11-13 10:40:56,998 - INFO - Slice 47: Denoising complete.
2024-11-13 10:40:57,001 - INFO - Slice 48: Estimated noise sigma = 0.004581420030616074
2024-11-13 10:40:57,226 - INFO - Slice 48: Denoising complete.
2024-11-13 10:40:57,229 - INFO - Slice 49: Estimated noise sigma = 0.004600521063407451
2024-11-13 10:40:57,451 - INFO - Slice 49: Denoising complete.
2024-11-13 10:40:57,455 - INFO - Slice 50: Estimated noise sigma = 0.004555331210807748
2024-11-13 10:40:57,682 - INFO - Slice 50: Denoising complete.
2024-11-13 10:40:57,686 - INFO - Slice 51: Estimated noise sigma = 0.004405783317412909
2024-11-13 10:40:57,911 - INFO - Slice 51: Denoising complete.
2024-11-13 10:40:57,915 - INFO - Slice 52: Estimated noise sigma = 0.0046266095380205485
2024-11-13 10:40:58,145 - INFO - Slice 52: Denoising complete.
2024-11-13 10:40:58,149 - INFO - Slice 53: Estimated noise sigma = 0.004529242045804193
2024-11-13 10:40:58,392 - INFO - Slice 53: Denoising complete.
2024-11-13 10:40:58,396 - INFO - Slice 54: Estimated noise sigma = 0.004723977030236905
2024-11-13 10:40:58,649 - INFO - Slice 54: Denoising complete.
2024-11-13 10:40:58,653 - INFO - Slice 55: Estimated noise sigma = 0.004769166537641379
2024-11-13 10:40:58,916 - INFO - Slice 55: Denoising complete.
2024-11-13 10:40:58,920 - INFO - Slice 56: Estimated noise sigma = 0.004795256047840163
2024-11-13 10:40:59,187 - INFO - Slice 56: Denoising complete.
2024-11-13 10:40:59,191 - INFO - Slice 57: Estimated noise sigma = 0.004769165847250921
2024-11-13 10:40:59,462 - INFO - Slice 57: Denoising complete.
2024-11-13 10:40:59,466 - INFO - Slice 58: Estimated noise sigma = 0.004840445210049409
2024-11-13 10:40:59,738 - INFO - Slice 58: Denoising complete.
2024-11-13 10:40:59,742 - INFO - Slice 59: Estimated noise sigma = 0.004795255357449705
2024-11-13 10:41:00,017 - INFO - Slice 59: Denoising complete.
2024-11-13 10:41:00,021 - INFO - Slice 60: Estimated noise sigma = 0.004840443829268493
2024-11-13 10:41:00,290 - INFO - Slice 60: Denoising complete.
2024-11-13 10:41:00,294 - INFO - Slice 61: Estimated noise sigma = 0.004963902902855006
2024-11-13 10:41:00,558 - INFO - Slice 61: Denoising complete.
2024-11-13 10:41:00,562 - INFO - Slice 62: Estimated noise sigma = 0.005009091374673794
2024-11-13 10:41:00,821 - INFO - Slice 62: Denoising complete.
2024-11-13 10:41:00,826 - INFO - Slice 63: Estimated noise sigma = 0.005042172469037044
2024-11-13 10:41:01,096 - INFO - Slice 63: Denoising complete.
2024-11-13 10:41:01,100 - INFO - Slice 64: Estimated noise sigma = 0.004970892415848099
2024-11-13 10:41:01,368 - INFO - Slice 64: Denoising complete.
2024-11-13 10:41:01,373 - INFO - Slice 65: Estimated noise sigma = 0.005158639613263861
2024-11-13 10:41:01,643 - INFO - Slice 65: Denoising complete.
2024-11-13 10:41:01,647 - INFO - Slice 66: Estimated noise sigma = 0.005210819324051887
2024-11-13 10:41:01,920 - INFO - Slice 66: Denoising complete.
2024-11-13 10:41:01,924 - INFO - Slice 67: Estimated noise sigma = 0.0050682595628692255
2024-11-13 10:41:02,195 - INFO - Slice 67: Denoising complete.
2024-11-13 10:41:02,199 - INFO - Slice 68: Estimated noise sigma = 0.0050160815780573445
2024-11-13 10:41:02,469 - INFO - Slice 68: Denoising complete.
2024-11-13 10:41:02,473 - INFO - Slice 69: Estimated noise sigma = 0.004963903248050234
2024-11-13 10:41:02,743 - INFO - Slice 69: Denoising complete.
2024-11-13 10:41:02,747 - INFO - Slice 70: Estimated noise sigma = 0.00522292808228834
2024-11-13 10:41:03,015 - INFO - Slice 70: Denoising complete.
2024-11-13 10:41:03,020 - INFO - Slice 71: Estimated noise sigma = 0.005229917940476662
2024-11-13 10:41:03,285 - INFO - Slice 71: Denoising complete.
2024-11-13 10:41:03,289 - INFO - Slice 72: Estimated noise sigma = 0.0051847294686578746
2024-11-13 10:41:03,551 - INFO - Slice 72: Denoising complete.
2024-11-13 10:41:03,555 - INFO - Slice 73: Estimated noise sigma = 0.0051777368489077215
2024-11-13 10:41:03,817 - INFO - Slice 73: Denoising complete.
2024-11-13 10:41:03,821 - INFO - Slice 74: Estimated noise sigma = 0.00515863995845909
2024-11-13 10:41:04,086 - INFO - Slice 74: Denoising complete.
2024-11-13 10:41:04,090 - INFO - Slice 75: Estimated noise sigma = 0.005275109173857281
2024-11-13 10:41:04,364 - INFO - Slice 75: Denoising complete.
2024-11-13 10:41:04,368 - INFO - Slice 76: Estimated noise sigma = 0.005256007450675446
2024-11-13 10:41:04,636 - INFO - Slice 76: Denoising complete.
2024-11-13 10:41:04,640 - INFO - Slice 77: Estimated noise sigma = 0.005113450105859387
2024-11-13 10:41:04,911 - INFO - Slice 77: Denoising complete.
2024-11-13 10:41:04,915 - INFO - Slice 78: Estimated noise sigma = 0.00491871374064576
2024-11-13 10:41:05,190 - INFO - Slice 78: Denoising complete.
2024-11-13 10:41:05,194 - INFO - Slice 79: Estimated noise sigma = 0.004795255702644934
2024-11-13 10:41:05,467 - INFO - Slice 79: Denoising complete.
2024-11-13 10:41:05,472 - INFO - Slice 80: Estimated noise sigma = 0.004802244870442798
2024-11-13 10:41:05,745 - INFO - Slice 80: Denoising complete.
2024-11-13 10:41:05,749 - INFO - Slice 81: Estimated noise sigma = 0.004795255702644934
2024-11-13 10:41:06,018 - INFO - Slice 81: Denoising complete.
2024-11-13 10:41:06,022 - INFO - Slice 82: Estimated noise sigma = 0.004847436449018646
2024-11-13 10:41:06,291 - INFO - Slice 82: Denoising complete.
2024-11-13 10:41:06,295 - INFO - Slice 83: Estimated noise sigma = 0.004814353973874481
2024-11-13 10:41:06,568 - INFO - Slice 83: Denoising complete.
2024-11-13 10:41:06,573 - INFO - Slice 84: Estimated noise sigma = 0.004873524578436515
2024-11-13 10:41:06,854 - INFO - Slice 84: Denoising complete.
2024-11-13 10:41:06,858 - INFO - Slice 85: Estimated noise sigma = 0.00476916619244615
2024-11-13 10:41:07,128 - INFO - Slice 85: Denoising complete.
2024-11-13 10:41:07,132 - INFO - Slice 86: Estimated noise sigma = 0.004769166537641379
2024-11-13 10:41:07,402 - INFO - Slice 86: Denoising complete.
2024-11-13 10:41:07,406 - INFO - Slice 87: Estimated noise sigma = 0.004776157776610616
2024-11-13 10:41:07,673 - INFO - Slice 87: Denoising complete.
2024-11-13 10:41:07,677 - INFO - Slice 88: Estimated noise sigma = 0.004795256393035392
2024-11-13 10:41:07,941 - INFO - Slice 88: Denoising complete.
2024-11-13 10:41:07,945 - INFO - Slice 89: Estimated noise sigma = 0.004769168954007981
2024-11-13 10:41:08,207 - INFO - Slice 89: Denoising complete.
2024-11-13 10:41:08,211 - INFO - Slice 90: Estimated noise sigma = 0.00472397841101782
2024-11-13 10:41:08,473 - INFO - Slice 90: Denoising complete.
2024-11-13 10:41:08,477 - INFO - Slice 91: Estimated noise sigma = 0.004697889246014265
2024-11-13 10:41:08,734 - INFO - Slice 91: Denoising complete.
2024-11-13 10:41:08,738 - INFO - Slice 92: Estimated noise sigma = 0.00476916619244615
2024-11-13 10:41:09,000 - INFO - Slice 92: Denoising complete.
2024-11-13 10:41:09,005 - INFO - Slice 93: Estimated noise sigma = 0.004795257083425849
2024-11-13 10:41:09,281 - INFO - Slice 93: Denoising complete.
2024-11-13 10:41:09,285 - INFO - Slice 94: Estimated noise sigma = 0.004944803250844544
2024-11-13 10:41:09,581 - INFO - Slice 94: Denoising complete.
2024-11-13 10:41:09,585 - INFO - Slice 95: Estimated noise sigma = 0.005158638577678175
2024-11-13 10:41:09,859 - INFO - Slice 95: Denoising complete.
2024-11-13 10:41:09,863 - INFO - Slice 96: Estimated noise sigma = 0.005301195577299005
2024-11-13 10:41:10,129 - INFO - Slice 96: Denoising complete.
2024-11-13 10:41:10,133 - INFO - Slice 97: Estimated noise sigma = 0.005398565485881963
2024-11-13 10:41:10,399 - INFO - Slice 97: Denoising complete.
2024-11-13 10:41:10,403 - INFO - Slice 98: Estimated noise sigma = 0.005450745196669988
2024-11-13 10:41:10,667 - INFO - Slice 98: Denoising complete.
2024-11-13 10:41:10,671 - INFO - Slice 99: Estimated noise sigma = 0.005229918976062349
2024-11-13 10:41:10,929 - INFO - Slice 99: Denoising complete.
2024-11-13 10:41:10,933 - INFO - Slice 100: Estimated noise sigma = 0.005301196267689463
2024-11-13 10:41:11,193 - INFO - Slice 100: Denoising complete.
2024-11-13 10:41:11,197 - INFO - Slice 101: Estimated noise sigma = 0.005379464798285815
2024-11-13 10:41:11,464 - INFO - Slice 101: Denoising complete.
2024-11-13 10:41:11,468 - INFO - Slice 102: Estimated noise sigma = 0.005353376323672717
2024-11-13 10:41:11,738 - INFO - Slice 102: Denoising complete.
2024-11-13 10:41:11,743 - INFO - Slice 103: Estimated noise sigma = 0.005276044652927376
2024-11-13 10:41:12,009 - INFO - Slice 103: Denoising complete.
2024-11-13 10:41:12,013 - INFO - Slice 104: Estimated noise sigma = 0.005327286123083475
2024-11-13 10:41:12,276 - INFO - Slice 104: Denoising complete.
2024-11-13 10:41:12,280 - INFO - Slice 105: Estimated noise sigma = 0.005275107102685908
2024-11-13 10:41:12,545 - INFO - Slice 105: Denoising complete.
2024-11-13 10:41:12,549 - INFO - Slice 106: Estimated noise sigma = 0.005158638922873404
2024-11-13 10:41:12,815 - INFO - Slice 106: Denoising complete.
2024-11-13 10:41:12,819 - INFO - Slice 107: Estimated noise sigma = 0.005087360940855832
2024-11-13 10:41:13,082 - INFO - Slice 107: Denoising complete.
2024-11-13 10:41:13,086 - INFO - Slice 108: Estimated noise sigma = 0.0051586403036543195
2024-11-13 10:41:13,352 - INFO - Slice 108: Denoising complete.
2024-11-13 10:41:13,356 - INFO - Slice 109: Estimated noise sigma = 0.005035182610848722
2024-11-13 10:41:13,620 - INFO - Slice 109: Denoising complete.
2024-11-13 10:41:13,624 - INFO - Slice 110: Estimated noise sigma = 0.005054280191687811
2024-11-13 10:41:13,885 - INFO - Slice 110: Denoising complete.
2024-11-13 10:41:13,889 - INFO - Slice 111: Estimated noise sigma = 0.004963900831683633
2024-11-13 10:41:14,163 - INFO - Slice 111: Denoising complete.
2024-11-13 10:41:14,167 - INFO - Slice 112: Estimated noise sigma = 0.004769167228031837
2024-11-13 10:41:14,436 - INFO - Slice 112: Denoising complete.
2024-11-13 10:41:14,440 - INFO - Slice 113: Estimated noise sigma = 0.004866534029857735
2024-11-13 10:41:14,709 - INFO - Slice 113: Denoising complete.
2024-11-13 10:41:14,713 - INFO - Slice 114: Estimated noise sigma = 0.004918716502207591
2024-11-13 10:41:14,986 - INFO - Slice 114: Denoising complete.
2024-11-13 10:41:14,990 - INFO - Slice 115: Estimated noise sigma = 0.004956912009080998
2024-11-13 10:41:15,256 - INFO - Slice 115: Denoising complete.
2024-11-13 10:41:15,260 - INFO - Slice 116: Estimated noise sigma = 0.004911723537262209
2024-11-13 10:41:15,526 - INFO - Slice 116: Denoising complete.
2024-11-13 10:41:15,530 - INFO - Slice 117: Estimated noise sigma = 0.004937814083046679
2024-11-13 10:41:15,791 - INFO - Slice 117: Denoising complete.
2024-11-13 10:41:15,795 - INFO - Slice 118: Estimated noise sigma = 0.0049899924130537895
2024-11-13 10:41:16,054 - INFO - Slice 118: Denoising complete.
2024-11-13 10:41:16,058 - INFO - Slice 119: Estimated noise sigma = 0.004892623885251747
2024-11-13 10:41:16,313 - INFO - Slice 119: Denoising complete.
2024-11-13 10:41:16,317 - INFO - Slice 120: Estimated noise sigma = 0.0029331545816360847
2024-11-13 10:41:16,627 - INFO - Slice 120: Denoising complete.
2024-11-13 10:41:16,631 - INFO - Slice 121: Estimated noise sigma = 0.0029783416726739576
2024-11-13 10:41:16,944 - INFO - Slice 121: Denoising complete.
2024-11-13 10:41:16,947 - INFO - Slice 122: Estimated noise sigma = 0.0029783420178691867
2024-11-13 10:41:17,252 - INFO - Slice 122: Denoising complete.
2024-11-13 10:41:17,256 - INFO - Slice 123: Estimated noise sigma = 0.0028357843278578984
2024-11-13 10:41:17,561 - INFO - Slice 123: Denoising complete.
2024-11-13 10:41:17,565 - INFO - Slice 124: Estimated noise sigma = 0.002828797921621865
2024-11-13 10:41:17,866 - INFO - Slice 124: Denoising complete.
2024-11-13 10:41:17,869 - INFO - Slice 125: Estimated noise sigma = 0.0028096948176591146
2024-11-13 10:41:18,175 - INFO - Slice 125: Denoising complete.
2024-11-13 10:41:18,179 - INFO - Slice 126: Estimated noise sigma = 0.0027836056526555596
2024-11-13 10:41:18,513 - INFO - Slice 126: Denoising complete.
2024-11-13 10:41:18,517 - INFO - Slice 127: Estimated noise sigma = 0.002757516660249619
2024-11-13 10:41:18,827 - INFO - Slice 127: Denoising complete.
2024-11-13 10:41:18,831 - INFO - Slice 128: Estimated noise sigma = 0.0026862378152439754
2024-11-13 10:41:19,145 - INFO - Slice 128: Denoising complete.
2024-11-13 10:41:19,148 - INFO - Slice 129: Estimated noise sigma = 0.002614958970238331
2024-11-13 10:41:19,459 - INFO - Slice 129: Denoising complete.
2024-11-13 10:41:19,463 - INFO - Slice 130: Estimated noise sigma = 0.002614958452445488
2024-11-13 10:41:19,766 - INFO - Slice 130: Denoising complete.
2024-11-13 10:41:19,769 - INFO - Slice 131: Estimated noise sigma = 0.0025888682518562466
2024-11-13 10:41:20,071 - INFO - Slice 131: Denoising complete.
2024-11-13 10:41:20,074 - INFO - Slice 132: Estimated noise sigma = 0.0024463122878211024
2024-11-13 10:41:20,376 - INFO - Slice 132: Denoising complete.
2024-11-13 10:41:20,379 - INFO - Slice 133: Estimated noise sigma = 0.002517590442436289
2024-11-13 10:41:20,686 - INFO - Slice 133: Denoising complete.
2024-11-13 10:41:20,689 - INFO - Slice 134: Estimated noise sigma = 0.0024463122878211024
2024-11-13 10:41:20,999 - INFO - Slice 134: Denoising complete.
2024-11-13 10:41:21,002 - INFO - Slice 135: Estimated noise sigma = 0.0024202227776223186
2024-11-13 10:41:21,310 - INFO - Slice 135: Denoising complete.
2024-11-13 10:41:21,314 - INFO - Slice 136: Estimated noise sigma = 0.002348944105214289
2024-11-13 10:41:21,622 - INFO - Slice 136: Denoising complete.
2024-11-13 10:41:21,626 - INFO - Slice 137: Estimated noise sigma = 0.002348943932616675
2024-11-13 10:41:21,938 - INFO - Slice 137: Denoising complete.
2024-11-13 10:41:21,941 - INFO - Slice 138: Estimated noise sigma = 0.002348943932616675
2024-11-13 10:41:22,253 - INFO - Slice 138: Denoising complete.
2024-11-13 10:41:22,256 - INFO - Slice 139: Estimated noise sigma = 0.002348943932616675
2024-11-13 10:41:22,570 - INFO - Slice 139: Denoising complete.
2024-11-13 10:41:22,574 - INFO - Slice 140: Estimated noise sigma = 0.0022515759226074757
2024-11-13 10:41:22,882 - INFO - Slice 140: Denoising complete.
2024-11-13 10:41:22,885 - INFO - Slice 141: Estimated noise sigma = 0.002154207912598277
2024-11-13 10:41:23,196 - INFO - Slice 141: Denoising complete.
2024-11-13 10:41:23,200 - INFO - Slice 142: Estimated noise sigma = 0.0020829294127878615
2024-11-13 10:41:23,533 - INFO - Slice 142: Denoising complete.
2024-11-13 10:41:23,536 - INFO - Slice 143: Estimated noise sigma = 0.002082928722397404
2024-11-13 10:41:23,859 - INFO - Slice 143: Denoising complete.
2024-11-13 10:41:23,863 - INFO - Slice 144: Estimated noise sigma = 0.0020568402477843064
2024-11-13 10:41:24,184 - INFO - Slice 144: Denoising complete.
2024-11-13 10:41:24,188 - INFO - Slice 145: Estimated noise sigma = 0.0020568399025890777
2024-11-13 10:41:24,504 - INFO - Slice 145: Denoising complete.
2024-11-13 10:41:24,507 - INFO - Slice 146: Estimated noise sigma = 0.001985561230181048
2024-11-13 10:41:24,822 - INFO - Slice 146: Denoising complete.
2024-11-13 10:41:24,825 - INFO - Slice 147: Estimated noise sigma = 0.0021185671956133467
2024-11-13 10:41:25,144 - INFO - Slice 147: Denoising complete.
2024-11-13 10:41:25,147 - INFO - Slice 148: Estimated noise sigma = 0.0024202227776223186
2024-11-13 10:41:25,462 - INFO - Slice 148: Denoising complete.
2024-11-13 10:41:25,466 - INFO - Slice 149: Estimated noise sigma = 0.0024463128056139457
2024-11-13 10:41:25,777 - INFO - Slice 149: Denoising complete.
2024-11-13 10:41:25,780 - INFO - Slice 150: Estimated noise sigma = 0.0024202231228175474
2024-11-13 10:41:26,091 - INFO - Slice 150: Denoising complete.
2024-11-13 10:41:26,094 - INFO - Slice 151: Estimated noise sigma = 0.0024202227776223186
2024-11-13 10:41:26,405 - INFO - Slice 151: Denoising complete.
2024-11-13 10:41:26,408 - INFO - Slice 152: Estimated noise sigma = 0.0023750337880106874
2024-11-13 10:41:26,723 - INFO - Slice 152: Denoising complete.
2024-11-13 10:41:26,727 - INFO - Slice 153: Estimated noise sigma = 0.0022515762678027044
2024-11-13 10:41:27,047 - INFO - Slice 153: Denoising complete.
2024-11-13 10:41:27,050 - INFO - Slice 154: Estimated noise sigma = 0.002303755288200272
2024-11-13 10:41:27,377 - INFO - Slice 154: Denoising complete.
2024-11-13 10:41:27,380 - INFO - Slice 155: Estimated noise sigma = 0.0024463119426258737
2024-11-13 10:41:27,699 - INFO - Slice 155: Denoising complete.
2024-11-13 10:41:27,702 - INFO - Slice 156: Estimated noise sigma = 0.002375033615413073
2024-11-13 10:41:28,042 - INFO - Slice 156: Denoising complete.
2024-11-13 10:41:28,046 - INFO - Slice 157: Estimated noise sigma = 0.0024463117700282595
2024-11-13 10:41:28,380 - INFO - Slice 157: Denoising complete.
2024-11-13 10:41:28,384 - INFO - Slice 158: Estimated noise sigma = 0.002348944105214289
2024-11-13 10:41:28,709 - INFO - Slice 158: Denoising complete.
2024-11-13 10:41:28,713 - INFO - Slice 159: Estimated noise sigma = 0.0022515759226074757
2024-11-13 10:41:29,032 - INFO - Slice 159: Denoising complete.
2024-11-13 10:41:29,033 - INFO - Saving image to 'mri_data/denoised_nl_1.tif'.
2024-11-13 10:41:29,203 - INFO - Image saved.
2024-11-13 10:41:29,206 - INFO - Current memory usage: 584.54 MB
2024-11-13 10:41:29,338 - INFO - Starting intensity normalization.
2024-11-13 10:41:29,888 - INFO - Intensity normalization complete.
2024-11-13 10:41:29,888 - INFO - Current memory usage: 710.13 MB
2024-11-13 10:41:29,894 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-13 10:41:29,894 - INFO - Computing neighborhood statistics.
2024-11-13 10:41:30,234 - INFO - Neighborhood statistics computed.
2024-11-13 10:41:30,234 - INFO - Current memory usage: 668.25 MB
2024-11-13 10:41:30,234 - INFO - Computing z-axis value for each voxel.
2024-11-13 10:41:30,257 - INFO - Z-axis value for each voxel computed.
2024-11-13 10:41:30,258 - INFO - Current memory usage: 709.87 MB
2024-11-13 10:41:30,258 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-13 10:41:30,659 - INFO - Features shape: (10940800, 4)
2024-11-13 10:41:30,659 - INFO - Current memory usage: 959.55 MB
2024-11-13 10:41:30,659 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-13 10:41:49,730 - INFO - Logging initiated.
2024-11-13 10:41:49,730 - INFO - Pipeline started.
2024-11-13 10:41:49,730 - INFO - Loading image from 'mri_data/csf.tif'.
2024-11-13 10:41:50,239 - INFO - Image loaded with shape (160, 790, 260).
2024-11-13 10:41:50,294 - INFO - Calculated CSF Volume: 18776833.84216471 mm³
2024-11-13 10:41:50,521 - INFO - Denoised image loaded.
2024-11-13 10:41:50,521 - INFO - Current memory usage: 582.71 MB
2024-11-13 10:41:50,697 - INFO - Starting intensity normalization.
2024-11-13 10:41:52,045 - INFO - Intensity normalization complete.
2024-11-13 10:41:52,045 - INFO - Current memory usage: 708.11 MB
2024-11-13 10:41:52,057 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2024-11-13 10:41:52,057 - INFO - Computing neighborhood statistics.
2024-11-13 10:41:52,551 - INFO - Neighborhood statistics computed.
2024-11-13 10:41:52,551 - INFO - Current memory usage: 666.22 MB
2024-11-13 10:41:52,551 - INFO - Computing z-axis value for each voxel.
2024-11-13 10:41:52,616 - INFO - Z-axis value for each voxel computed.
2024-11-13 10:41:52,617 - INFO - Current memory usage: 707.85 MB
2024-11-13 10:41:52,617 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-13 10:41:53,494 - INFO - Features shape: (10940800, 4)
2024-11-13 10:41:53,495 - INFO - Current memory usage: 958.38 MB
2024-11-13 10:41:53,495 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-13 10:41:56,469 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2024-11-13 10:41:59,483 - INFO - Clustering complete with spatial connectivity.
2024-11-13 10:41:59,483 - INFO - Current memory usage: 1594.42 MB
2024-11-13 10:41:59,527 - INFO - Cluster labels reshaped to image dimensions.
2024-11-13 10:41:59,527 - INFO - Current memory usage: 1010.12 MB
2024-11-13 10:41:59,545 - INFO - Processing Cluster 0.
2024-11-13 10:41:59,569 - INFO - Cluster 0: Initial voxel count = 443642.
2024-11-13 10:42:09,125 - INFO - Cluster 0: Refined voxel count = 2348.
2024-11-13 10:42:09,148 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-13 10:42:09,220 - INFO - Cluster 0: Mean Intensity = 1.568230390548706
2024-11-13 10:42:09,220 - INFO - Processing Cluster 1.
2024-11-13 10:42:09,242 - INFO - Cluster 1: Initial voxel count = 226806.
2024-11-13 10:42:17,107 - INFO - Cluster 1: Refined voxel count = 60228.
2024-11-13 10:42:17,127 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-13 10:42:17,191 - INFO - Cluster 1: Mean Intensity = 8.951560020446777
2024-11-13 10:42:17,191 - INFO - Processing Cluster 2.
2024-11-13 10:42:17,214 - INFO - Cluster 2: Initial voxel count = 3153824.
2024-11-13 10:42:25,304 - INFO - Cluster 2: Refined voxel count = 1059156.
2024-11-13 10:42:25,350 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-13 10:42:25,449 - INFO - Cluster 2: Mean Intensity = 0.22388030588626862
2024-11-13 10:42:25,450 - INFO - Processing Cluster 3.
2024-11-13 10:42:25,459 - INFO - Cluster 3: Initial voxel count = 3728526.
2024-11-13 10:42:33,544 - INFO - Cluster 3: Refined voxel count = 3181249.
2024-11-13 10:42:33,563 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-13 10:42:33,639 - INFO - Cluster 3: Mean Intensity = -0.2163485884666443
2024-11-13 10:42:33,640 - INFO - Processing Cluster 4.
2024-11-13 10:42:33,661 - INFO - Cluster 4: Initial voxel count = 3388002.
2024-11-13 10:42:41,697 - INFO - Cluster 4: Refined voxel count = 2947164.
2024-11-13 10:42:41,716 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-13 10:42:41,789 - INFO - Cluster 4: Mean Intensity = -0.2614463269710541
2024-11-13 10:42:41,789 - INFO - CSF is identified as cluster 1.
2024-11-13 10:42:41,789 - INFO - Starting visualization with PyVista.
2024-11-13 10:42:42,089 - INFO - Adding Original MRI volume.
2024-11-13 10:42:42,314 - INFO - Adding Denoised MRI volume.
2024-11-13 10:42:42,519 - INFO - Adding Mask 0 mesh to visualization.
2024-11-13 10:42:42,678 - INFO - Initial mesh has 654 points and 1276 faces.
2024-11-13 10:42:42,678 - INFO - Current memory usage: 1096.55 MB
2024-11-13 10:42:42,682 - INFO - Decimated mesh has 335 points and 638 faces.
2024-11-13 10:42:42,682 - INFO - Current memory usage: 1096.82 MB
2024-11-13 10:42:42,687 - INFO - Adding Mask 1 mesh to visualization.
2024-11-13 10:42:42,790 - INFO - Initial mesh has 10481 points and 20878 faces.
2024-11-13 10:42:42,790 - INFO - Current memory usage: 1096.97 MB
2024-11-13 10:42:42,859 - INFO - Decimated mesh has 5261 points and 10438 faces.
2024-11-13 10:42:42,860 - INFO - Current memory usage: 1097.59 MB
2024-11-13 10:42:42,864 - INFO - Adding Mask 2 mesh to visualization.
2024-11-13 10:42:43,024 - INFO - Initial mesh has 97710 points and 195674 faces.
2024-11-13 10:42:43,024 - INFO - Current memory usage: 1115.88 MB
2024-11-13 10:42:43,817 - INFO - Decimated mesh has 48755 points and 97837 faces.
2024-11-13 10:42:43,818 - INFO - Current memory usage: 1193.25 MB
2024-11-13 10:42:43,826 - INFO - Adding Mask 3 mesh to visualization.
2024-11-13 10:42:43,930 - INFO - Initial mesh has 34233 points and 67338 faces.
2024-11-13 10:42:43,930 - INFO - Current memory usage: 1202.25 MB
2024-11-13 10:42:44,132 - INFO - Decimated mesh has 17187 points and 33669 faces.
2024-11-13 10:42:44,132 - INFO - Current memory usage: 1202.25 MB
2024-11-13 10:42:44,137 - INFO - Adding Mask 4 mesh to visualization.
2024-11-13 10:42:44,212 - INFO - Initial mesh has 29646 points and 58376 faces.
2024-11-13 10:42:44,213 - INFO - Current memory usage: 1202.25 MB
2024-11-13 10:42:44,421 - INFO - Decimated mesh has 14878 points and 29187 faces.
2024-11-13 10:42:44,421 - INFO - Current memory usage: 1202.25 MB
2024-11-13 10:42:44,426 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-13 10:42:44,708 - INFO - Translator(prefix=None)
2024-11-13 10:42:44,777 - INFO - awaiting runner setup
2024-11-13 10:42:44,777 - INFO - awaiting site startup
2024-11-13 10:42:44,778 - INFO - Print WSLINK_READY_MSG
2024-11-13 10:42:44,778 - INFO - Schedule auto shutdown with timout 0
2024-11-13 10:42:44,778 - INFO - awaiting running future
2024-11-13 10:42:51,887 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-13 10:42:51,891 - INFO - Current memory usage: 1245.66 MB
2024-11-13 10:42:51,895 - INFO - Selected slice indices for saving: [0, 159]
2024-11-13 10:42:52,346 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-13 10:42:52,508 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-13 10:42:52,669 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-13 10:42:52,851 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-13 10:42:53,020 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-13 10:42:53,200 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_0_overlay.png'.
2024-11-13 10:42:53,379 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_1_overlay.png'.
2024-11-13 10:42:53,555 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_2_overlay.png'.
2024-11-13 10:42:53,741 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_3_overlay.png'.
2024-11-13 10:42:53,910 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_159_cluster_4_overlay.png'.
2024-11-13 10:42:53,914 - INFO - Pipeline completed successfully.
2024-11-13 10:42:53,915 - INFO - Current memory usage: 1201.07 MB
2024-11-13 10:42:53,915 - INFO - Selecting and refining the good mask based on density profile.
2024-11-13 10:42:53,915 - INFO - Selected good cluster mask with index 1.
2024-11-13 10:42:53,915 - INFO - Removing eyes from the good cluster mask.
2024-11-13 10:42:53,915 - INFO - Starting eye detection using connected components analysis.
2024-11-13 10:42:53,995 - INFO - Number of connected components found: 29
2024-11-13 10:42:55,502 - INFO - Detected potential eye at centroid: (50.68417586036555, 113.81821175695703, 59.52198254569406) with Volume: 6073.0 and Sphericity: 0.88
2024-11-13 10:43:00,706 - INFO - Detected potential eye at centroid: (109.78938880825673, 112.71810998226093, 61.12707627801967) with Volume: 6201.0 and Sphericity: 0.88
2024-11-13 10:43:01,791 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-13 10:43:01,792 - INFO - Saved detected eyes coordinates at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_coords.json'.
2024-11-13 10:43:02,237 - INFO - Saved visualization image with threshold lines at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_visualization.jpg'.
2024-11-13 10:43:02,242 - INFO - Eyes have been removed from the CSF mask.
2024-11-13 10:43:02,242 - INFO - Detected eyes at centroids: [(50, 113, 59), (109, 112, 61)]
2024-11-13 10:43:03,756 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-13 10:43:03,756 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-13 10:43:03,934 - INFO - Small objects removed from the CSF mask. New mask has 46924 voxels.
2024-11-13 10:43:03,952 - INFO - Saving the good cluster mask as TIFF.
2024-11-13 10:43:03,986 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-13 10:43:03,987 - INFO - Calculating the volume of CSF in the MRI.
2024-11-13 10:43:04,160 - INFO - Calculated CSF Volume: 83.79513445977713 mm³
2024-11-13 10:43:04,162 - INFO - Total CSF Volume: 83.79513445977713 mm³
2024-11-13 10:43:04,162 - INFO - Final visualization of the Good CSF Mask.
2024-11-13 10:43:04,162 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-13 10:43:04,278 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_sain.html'.
2024-11-13 10:43:04,350 - INFO - Visualization successfully saved to 'good_cluster_sain.html'.
2024-11-13 10:43:04,350 - INFO - Visualization process completed.
2024-11-13 10:43:04,352 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-13 10:43:04,352 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-13 10:43:04,352 - INFO - Final cleanup completed.
2024-11-13 10:43:04,353 - INFO - Current memory usage: 1213.09 MB
2024-11-13 10:44:42,155 - INFO - Logging initiated.
2024-11-13 10:44:42,155 - INFO - Pipeline started.
2024-11-13 10:44:42,155 - INFO - Loading image from 'mri_data/csf2.tif'.
2024-11-13 10:44:42,329 - INFO - Image loaded with shape (144, 763, 260).
2024-11-13 10:44:42,359 - INFO - Calculated CSF Volume: 17869553.923145205 mm³
2024-11-13 10:44:42,359 - INFO - Denoised image not found. Performing denoising.
2024-11-13 10:44:42,483 - INFO - Slice 0: Estimated noise sigma = 0.0017195463651570062
2024-11-13 10:44:42,741 - INFO - Slice 0: Denoising complete.
2024-11-13 10:44:42,744 - INFO - Slice 1: Estimated noise sigma = 0.001648268383139434
2024-11-13 10:44:43,001 - INFO - Slice 1: Denoising complete.
2024-11-13 10:44:43,004 - INFO - Slice 2: Estimated noise sigma = 0.0016221781825501928
2024-11-13 10:44:43,274 - INFO - Slice 2: Denoising complete.
2024-11-13 10:44:43,277 - INFO - Slice 3: Estimated noise sigma = 0.0017195465377546205
2024-11-13 10:44:43,539 - INFO - Slice 3: Denoising complete.
2024-11-13 10:44:43,542 - INFO - Slice 4: Estimated noise sigma = 0.0016221783551478072
2024-11-13 10:44:43,798 - INFO - Slice 4: Denoising complete.
2024-11-13 10:44:43,801 - INFO - Slice 5: Estimated noise sigma = 0.0016221783551478072
2024-11-13 10:44:44,055 - INFO - Slice 5: Denoising complete.
2024-11-13 10:44:44,058 - INFO - Slice 6: Estimated noise sigma = 0.0013561636627213796
2024-11-13 10:44:44,312 - INFO - Slice 6: Denoising complete.
2024-11-13 10:44:44,315 - INFO - Slice 7: Estimated noise sigma = 0.001161427470105367
2024-11-13 10:44:44,568 - INFO - Slice 7: Denoising complete.
2024-11-13 10:44:44,571 - INFO - Slice 8: Estimated noise sigma = 0.0011614272975077526
2024-11-13 10:44:44,827 - INFO - Slice 8: Denoising complete.
2024-11-13 10:44:44,830 - INFO - Slice 9: Estimated noise sigma = 0.0011544373530206237
2024-11-13 10:44:45,086 - INFO - Slice 9: Denoising complete.
2024-11-13 10:44:45,089 - INFO - Slice 10: Estimated noise sigma = 0.0011875172392005725
2024-11-13 10:44:45,343 - INFO - Slice 10: Denoising complete.
2024-11-13 10:44:45,346 - INFO - Slice 11: Estimated noise sigma = 0.0012848852492097715
2024-11-13 10:44:45,602 - INFO - Slice 11: Denoising complete.
2024-11-13 10:44:45,605 - INFO - Slice 12: Estimated noise sigma = 0.001258795825309795
2024-11-13 10:44:45,861 - INFO - Slice 12: Denoising complete.
2024-11-13 10:44:45,864 - INFO - Slice 13: Estimated noise sigma = 0.001356163403824958
2024-11-13 10:44:46,119 - INFO - Slice 13: Denoising complete.
2024-11-13 10:44:46,122 - INFO - Slice 14: Estimated noise sigma = 0.001356163403824958
2024-11-13 10:44:46,375 - INFO - Slice 14: Denoising complete.
2024-11-13 10:44:46,378 - INFO - Slice 15: Estimated noise sigma = 0.0013918032578218158
2024-11-13 10:44:46,631 - INFO - Slice 15: Denoising complete.
2024-11-13 10:44:46,634 - INFO - Slice 16: Estimated noise sigma = 0.0015248098273457648
2024-11-13 10:44:46,894 - INFO - Slice 16: Denoising complete.
2024-11-13 10:44:46,896 - INFO - Slice 17: Estimated noise sigma = 0.001550899855337392
2024-11-13 10:44:47,169 - INFO - Slice 17: Denoising complete.
2024-11-13 10:44:47,172 - INFO - Slice 18: Estimated noise sigma = 0.001550899855337392
2024-11-13 10:44:47,461 - INFO - Slice 18: Denoising complete.
2024-11-13 10:44:47,464 - INFO - Slice 19: Estimated noise sigma = 0.001680411927261216
2024-11-13 10:44:47,758 - INFO - Slice 19: Denoising complete.
2024-11-13 10:44:47,762 - INFO - Slice 20: Estimated noise sigma = 0.0016221783551478072
2024-11-13 10:44:48,060 - INFO - Slice 20: Denoising complete.
2024-11-13 10:44:48,063 - INFO - Slice 21: Estimated noise sigma = 0.0016221783551478072
2024-11-13 10:44:48,362 - INFO - Slice 21: Denoising complete.
2024-11-13 10:44:48,365 - INFO - Slice 22: Estimated noise sigma = 0.0017195465377546205
2024-11-13 10:44:48,662 - INFO - Slice 22: Denoising complete.
2024-11-13 10:44:48,666 - INFO - Slice 23: Estimated noise sigma = 0.00174563587535579
2024-11-13 10:44:48,964 - INFO - Slice 23: Denoising complete.
2024-11-13 10:44:48,967 - INFO - Slice 24: Estimated noise sigma = 0.001888192702379006
2024-11-13 10:44:49,260 - INFO - Slice 24: Denoising complete.
2024-11-13 10:44:49,263 - INFO - Slice 25: Estimated noise sigma = 0.001888193220171849
2024-11-13 10:44:49,554 - INFO - Slice 25: Denoising complete.
2024-11-13 10:44:49,557 - INFO - Slice 26: Estimated noise sigma = 0.0018134187556815866
2024-11-13 10:44:49,844 - INFO - Slice 26: Denoising complete.
2024-11-13 10:44:49,848 - INFO - Slice 27: Estimated noise sigma = 0.0018881930475742347
2024-11-13 10:44:50,137 - INFO - Slice 27: Denoising complete.
2024-11-13 10:44:50,141 - INFO - Slice 28: Estimated noise sigma = 0.001985561230181048
2024-11-13 10:44:50,430 - INFO - Slice 28: Denoising complete.
2024-11-13 10:44:50,433 - INFO - Slice 29: Estimated noise sigma = 0.001914283593358705
2024-11-13 10:44:50,724 - INFO - Slice 29: Denoising complete.
2024-11-13 10:44:50,727 - INFO - Slice 30: Estimated noise sigma = 0.001985561575376277
2024-11-13 10:44:51,026 - INFO - Slice 30: Denoising complete.
2024-11-13 10:44:51,029 - INFO - Slice 31: Estimated noise sigma = 0.0020829294127878615
2024-11-13 10:44:51,326 - INFO - Slice 31: Denoising complete.
2024-11-13 10:44:51,330 - INFO - Slice 32: Estimated noise sigma = 0.0021542084303911198
2024-11-13 10:44:51,628 - INFO - Slice 32: Denoising complete.
2024-11-13 10:44:51,632 - INFO - Slice 33: Estimated noise sigma = 0.002180297595394675
2024-11-13 10:44:51,928 - INFO - Slice 33: Denoising complete.
2024-11-13 10:44:51,931 - INFO - Slice 34: Estimated noise sigma = 0.0021802977679922894
2024-11-13 10:44:52,225 - INFO - Slice 34: Denoising complete.
2024-11-13 10:44:52,229 - INFO - Slice 35: Estimated noise sigma = 0.0026149586250431025
2024-11-13 10:44:52,513 - INFO - Slice 35: Denoising complete.
2024-11-13 10:44:52,517 - INFO - Slice 36: Estimated noise sigma = 0.0026149591428359454
2024-11-13 10:44:52,801 - INFO - Slice 36: Denoising complete.
2024-11-13 10:44:52,805 - INFO - Slice 37: Estimated noise sigma = 0.002491500414444662
2024-11-13 10:44:53,099 - INFO - Slice 37: Denoising complete.
2024-11-13 10:44:53,103 - INFO - Slice 38: Estimated noise sigma = 0.0024463131508091745
2024-11-13 10:44:53,392 - INFO - Slice 38: Denoising complete.
2024-11-13 10:44:53,395 - INFO - Slice 39: Estimated noise sigma = 0.0024463134960044032
2024-11-13 10:44:53,673 - INFO - Slice 39: Denoising complete.
2024-11-13 10:44:53,677 - INFO - Slice 40: Estimated noise sigma = 0.002543680470427916
2024-11-13 10:44:53,953 - INFO - Slice 40: Denoising complete.
2024-11-13 10:44:53,957 - INFO - Slice 41: Estimated noise sigma = 0.002712327670637988
2024-11-13 10:44:54,216 - INFO - Slice 41: Denoising complete.
2024-11-13 10:44:54,220 - INFO - Slice 42: Estimated noise sigma = 0.002783606170448403
2024-11-13 10:44:54,478 - INFO - Slice 42: Denoising complete.
2024-11-13 10:44:54,482 - INFO - Slice 43: Estimated noise sigma = 0.00286187452844714
2024-11-13 10:44:54,737 - INFO - Slice 43: Denoising complete.
2024-11-13 10:44:54,741 - INFO - Slice 44: Estimated noise sigma = 0.002880973662664759
2024-11-13 10:44:55,002 - INFO - Slice 44: Denoising complete.
2024-11-13 10:44:55,006 - INFO - Slice 45: Estimated noise sigma = 0.002907063000265928
2024-11-13 10:44:55,270 - INFO - Slice 45: Denoising complete.
2024-11-13 10:44:55,274 - INFO - Slice 46: Estimated noise sigma = 0.0029401478917766947
2024-11-13 10:44:55,537 - INFO - Slice 46: Denoising complete.
2024-11-13 10:44:55,541 - INFO - Slice 47: Estimated noise sigma = 0.002907063345461157
2024-11-13 10:44:55,804 - INFO - Slice 47: Denoising complete.
2024-11-13 10:44:55,808 - INFO - Slice 48: Estimated noise sigma = 0.002757515624663933
2024-11-13 10:44:56,074 - INFO - Slice 48: Denoising complete.
2024-11-13 10:44:56,077 - INFO - Slice 49: Estimated noise sigma = 0.0027123274980403733
2024-11-13 10:44:56,339 - INFO - Slice 49: Denoising complete.
2024-11-13 10:44:56,343 - INFO - Slice 50: Estimated noise sigma = 0.0027123254268690005
2024-11-13 10:44:56,606 - INFO - Slice 50: Denoising complete.
2024-11-13 10:44:56,610 - INFO - Slice 51: Estimated noise sigma = 0.00268623643446306
2024-11-13 10:44:56,872 - INFO - Slice 51: Denoising complete.
2024-11-13 10:44:56,875 - INFO - Slice 52: Estimated noise sigma = 0.002809694990256729
2024-11-13 10:44:57,134 - INFO - Slice 52: Denoising complete.
2024-11-13 10:44:57,138 - INFO - Slice 53: Estimated noise sigma = 0.0028357843278578984
2024-11-13 10:44:57,430 - INFO - Slice 53: Denoising complete.
2024-11-13 10:44:57,435 - INFO - Slice 54: Estimated noise sigma = 0.0028096955080495725
2024-11-13 10:44:57,702 - INFO - Slice 54: Denoising complete.
2024-11-13 10:44:57,706 - INFO - Slice 55: Estimated noise sigma = 0.0026149594880311745
2024-11-13 10:44:57,976 - INFO - Slice 55: Denoising complete.
2024-11-13 10:44:57,980 - INFO - Slice 56: Estimated noise sigma = 0.0026410488256323437
2024-11-13 10:44:58,261 - INFO - Slice 56: Denoising complete.
2024-11-13 10:44:58,265 - INFO - Slice 57: Estimated noise sigma = 0.002641048653034729
2024-11-13 10:44:58,536 - INFO - Slice 57: Denoising complete.
2024-11-13 10:44:58,540 - INFO - Slice 58: Estimated noise sigma = 0.002712326807649916
2024-11-13 10:44:58,806 - INFO - Slice 58: Denoising complete.
2024-11-13 10:44:58,810 - INFO - Slice 59: Estimated noise sigma = 0.002641048480437115
2024-11-13 10:44:59,085 - INFO - Slice 59: Denoising complete.
2024-11-13 10:44:59,089 - INFO - Slice 60: Estimated noise sigma = 0.002686237297451132
2024-11-13 10:44:59,363 - INFO - Slice 60: Denoising complete.
2024-11-13 10:44:59,367 - INFO - Slice 61: Estimated noise sigma = 0.002641048653034729
2024-11-13 10:44:59,634 - INFO - Slice 61: Denoising complete.
2024-11-13 10:44:59,638 - INFO - Slice 62: Estimated noise sigma = 0.0026410483078395004
2024-11-13 10:44:59,912 - INFO - Slice 62: Denoising complete.
2024-11-13 10:44:59,916 - INFO - Slice 63: Estimated noise sigma = 0.002712326807649916
2024-11-13 10:45:00,196 - INFO - Slice 63: Denoising complete.
2024-11-13 10:45:00,200 - INFO - Slice 64: Estimated noise sigma = 0.0026601479598499624
2024-11-13 10:45:00,481 - INFO - Slice 64: Denoising complete.
2024-11-13 10:45:00,485 - INFO - Slice 65: Estimated noise sigma = 0.002686236607060674
2024-11-13 10:45:00,768 - INFO - Slice 65: Denoising complete.
2024-11-13 10:45:00,772 - INFO - Slice 66: Estimated noise sigma = 0.0026862367796582887
2024-11-13 10:45:01,055 - INFO - Slice 66: Denoising complete.
2024-11-13 10:45:01,059 - INFO - Slice 67: Estimated noise sigma = 0.0027123242186856997
2024-11-13 10:45:01,338 - INFO - Slice 67: Denoising complete.
2024-11-13 10:45:01,342 - INFO - Slice 68: Estimated noise sigma = 0.0026862371248535175
2024-11-13 10:45:01,617 - INFO - Slice 68: Denoising complete.
2024-11-13 10:45:01,621 - INFO - Slice 69: Estimated noise sigma = 0.002738415972653471
2024-11-13 10:45:01,894 - INFO - Slice 69: Denoising complete.
2024-11-13 10:45:01,898 - INFO - Slice 70: Estimated noise sigma = 0.00271232698024753
2024-11-13 10:45:02,167 - INFO - Slice 70: Denoising complete.
2024-11-13 10:45:02,171 - INFO - Slice 71: Estimated noise sigma = 0.00271232698024753
2024-11-13 10:45:02,444 - INFO - Slice 71: Denoising complete.
2024-11-13 10:45:02,448 - INFO - Slice 72: Estimated noise sigma = 0.0027123266350523013
2024-11-13 10:45:02,714 - INFO - Slice 72: Denoising complete.
2024-11-13 10:45:02,718 - INFO - Slice 73: Estimated noise sigma = 0.00271232698024753
2024-11-13 10:45:02,979 - INFO - Slice 73: Denoising complete.
2024-11-13 10:45:02,983 - INFO - Slice 74: Estimated noise sigma = 0.0027123266350523013
2024-11-13 10:45:03,270 - INFO - Slice 74: Denoising complete.
2024-11-13 10:45:03,274 - INFO - Slice 75: Estimated noise sigma = 0.002712327325442759
2024-11-13 10:45:03,544 - INFO - Slice 75: Denoising complete.
2024-11-13 10:45:03,548 - INFO - Slice 76: Estimated noise sigma = 0.0026862371248535175
2024-11-13 10:45:03,815 - INFO - Slice 76: Denoising complete.
2024-11-13 10:45:03,819 - INFO - Slice 77: Estimated noise sigma = 0.00271232698024753
2024-11-13 10:45:04,086 - INFO - Slice 77: Denoising complete.
2024-11-13 10:45:04,089 - INFO - Slice 78: Estimated noise sigma = 0.0026862367796582887
2024-11-13 10:45:04,361 - INFO - Slice 78: Denoising complete.
2024-11-13 10:45:04,365 - INFO - Slice 79: Estimated noise sigma = 0.002712326807649916
2024-11-13 10:45:04,643 - INFO - Slice 79: Denoising complete.
2024-11-13 10:45:04,647 - INFO - Slice 80: Estimated noise sigma = 0.0026410488256323437
2024-11-13 10:45:04,922 - INFO - Slice 80: Denoising complete.
2024-11-13 10:45:04,925 - INFO - Slice 81: Estimated noise sigma = 0.0027123262898570725
2024-11-13 10:45:05,200 - INFO - Slice 81: Denoising complete.
2024-11-13 10:45:05,204 - INFO - Slice 82: Estimated noise sigma = 0.0028096955080495725
2024-11-13 10:45:05,512 - INFO - Slice 82: Denoising complete.
2024-11-13 10:45:05,516 - INFO - Slice 83: Estimated noise sigma = 0.0027836051348627167
2024-11-13 10:45:05,805 - INFO - Slice 83: Denoising complete.
2024-11-13 10:45:05,809 - INFO - Slice 84: Estimated noise sigma = 0.0027836059978507887
2024-11-13 10:45:06,115 - INFO - Slice 84: Denoising complete.
2024-11-13 10:45:06,119 - INFO - Slice 85: Estimated noise sigma = 0.002907063345461157
2024-11-13 10:45:06,401 - INFO - Slice 85: Denoising complete.
2024-11-13 10:45:06,406 - INFO - Slice 86: Estimated noise sigma = 0.002854890883772937
2024-11-13 10:45:06,680 - INFO - Slice 86: Denoising complete.
2024-11-13 10:45:06,684 - INFO - Slice 87: Estimated noise sigma = 0.00288097331746953
2024-11-13 10:45:06,954 - INFO - Slice 87: Denoising complete.
2024-11-13 10:45:06,959 - INFO - Slice 88: Estimated noise sigma = 0.0028096958532448013
2024-11-13 10:45:07,228 - INFO - Slice 88: Denoising complete.
2024-11-13 10:45:07,231 - INFO - Slice 89: Estimated noise sigma = 0.0028096958532448013
2024-11-13 10:45:07,497 - INFO - Slice 89: Denoising complete.
2024-11-13 10:45:07,501 - INFO - Slice 90: Estimated noise sigma = 0.0028096955080495725
2024-11-13 10:45:07,766 - INFO - Slice 90: Denoising complete.
2024-11-13 10:45:07,770 - INFO - Slice 91: Estimated noise sigma = 0.0027645075540236276
2024-11-13 10:45:08,037 - INFO - Slice 91: Denoising complete.
2024-11-13 10:45:08,041 - INFO - Slice 92: Estimated noise sigma = 0.0027836054800579454
2024-11-13 10:45:08,319 - INFO - Slice 92: Denoising complete.
2024-11-13 10:45:08,323 - INFO - Slice 93: Estimated noise sigma = 0.002907063690656386
2024-11-13 10:45:08,586 - INFO - Slice 93: Denoising complete.
2024-11-13 10:45:08,590 - INFO - Slice 94: Estimated noise sigma = 0.002880973662664759
2024-11-13 10:45:08,861 - INFO - Slice 94: Denoising complete.
2024-11-13 10:45:08,865 - INFO - Slice 95: Estimated noise sigma = 0.002790596891624797
2024-11-13 10:45:09,130 - INFO - Slice 95: Denoising complete.
2024-11-13 10:45:09,133 - INFO - Slice 96: Estimated noise sigma = 0.002809694990256729
2024-11-13 10:45:09,400 - INFO - Slice 96: Denoising complete.
2024-11-13 10:45:09,403 - INFO - Slice 97: Estimated noise sigma = 0.0027836054800579454
2024-11-13 10:45:09,668 - INFO - Slice 97: Denoising complete.
2024-11-13 10:45:09,672 - INFO - Slice 98: Estimated noise sigma = 0.002952252507670403
2024-11-13 10:45:09,934 - INFO - Slice 98: Denoising complete.
2024-11-13 10:45:09,938 - INFO - Slice 99: Estimated noise sigma = 0.0028809738352623734
2024-11-13 10:45:10,204 - INFO - Slice 99: Denoising complete.
2024-11-13 10:45:10,208 - INFO - Slice 100: Estimated noise sigma = 0.0029783416726739576
2024-11-13 10:45:10,476 - INFO - Slice 100: Denoising complete.
2024-11-13 10:45:10,480 - INFO - Slice 101: Estimated noise sigma = 0.0029783416726739576
2024-11-13 10:45:10,752 - INFO - Slice 101: Denoising complete.
2024-11-13 10:45:10,756 - INFO - Slice 102: Estimated noise sigma = 0.003030520693071525
2024-11-13 10:45:11,028 - INFO - Slice 102: Denoising complete.
2024-11-13 10:45:11,032 - INFO - Slice 103: Estimated noise sigma = 0.0029070640358516146
2024-11-13 10:45:11,304 - INFO - Slice 103: Denoising complete.
2024-11-13 10:45:11,308 - INFO - Slice 104: Estimated noise sigma = 0.0030044311828727414
2024-11-13 10:45:11,579 - INFO - Slice 104: Denoising complete.
2024-11-13 10:45:11,583 - INFO - Slice 105: Estimated noise sigma = 0.0029783427082596442
2024-11-13 10:45:11,853 - INFO - Slice 105: Denoising complete.
2024-11-13 10:45:11,857 - INFO - Slice 106: Estimated noise sigma = 0.0029783416726739576
2024-11-13 10:45:12,127 - INFO - Slice 106: Denoising complete.
2024-11-13 10:45:12,131 - INFO - Slice 107: Estimated noise sigma = 0.002926163342666848
2024-11-13 10:45:12,398 - INFO - Slice 107: Denoising complete.
2024-11-13 10:45:12,402 - INFO - Slice 108: Estimated noise sigma = 0.002839280810330589
2024-11-13 10:45:12,673 - INFO - Slice 108: Denoising complete.
2024-11-13 10:45:12,677 - INFO - Slice 109: Estimated noise sigma = 0.0028096948176591146
2024-11-13 10:45:12,949 - INFO - Slice 109: Denoising complete.
2024-11-13 10:45:12,952 - INFO - Slice 110: Estimated noise sigma = 0.0028096955080495725
2024-11-13 10:45:13,227 - INFO - Slice 110: Denoising complete.
2024-11-13 10:45:13,231 - INFO - Slice 111: Estimated noise sigma = 0.002835784673053127
2024-11-13 10:45:13,502 - INFO - Slice 111: Denoising complete.
2024-11-13 10:45:13,506 - INFO - Slice 112: Estimated noise sigma = 0.002738416490446314
2024-11-13 10:45:13,808 - INFO - Slice 112: Denoising complete.
2024-11-13 10:45:13,815 - INFO - Slice 113: Estimated noise sigma = 0.002783604962265102
2024-11-13 10:45:14,277 - INFO - Slice 113: Denoising complete.
2024-11-13 10:45:14,282 - INFO - Slice 114: Estimated noise sigma = 0.002712327325442759
2024-11-13 10:45:14,602 - INFO - Slice 114: Denoising complete.
2024-11-13 10:45:14,607 - INFO - Slice 115: Estimated noise sigma = 0.002472403006203187
2024-11-13 10:45:15,106 - INFO - Slice 115: Denoising complete.
2024-11-13 10:45:15,111 - INFO - Slice 116: Estimated noise sigma = 0.0024463122878211024
2024-11-13 10:45:15,453 - INFO - Slice 116: Denoising complete.
2024-11-13 10:45:15,458 - INFO - Slice 117: Estimated noise sigma = 0.002446312460418717
2024-11-13 10:45:15,784 - INFO - Slice 117: Denoising complete.
2024-11-13 10:45:15,788 - INFO - Slice 118: Estimated noise sigma = 0.002446312633016331
2024-11-13 10:45:16,093 - INFO - Slice 118: Denoising complete.
2024-11-13 10:45:16,096 - INFO - Slice 119: Estimated noise sigma = 0.002493379657270343
2024-11-13 10:45:16,382 - INFO - Slice 119: Denoising complete.
2024-11-13 10:45:16,386 - INFO - Slice 120: Estimated noise sigma = 0.002543680125232687
2024-11-13 10:45:16,663 - INFO - Slice 120: Denoising complete.
2024-11-13 10:45:16,666 - INFO - Slice 121: Estimated noise sigma = 0.0017195468829498493
2024-11-13 10:45:16,964 - INFO - Slice 121: Denoising complete.
2024-11-13 10:45:16,967 - INFO - Slice 122: Estimated noise sigma = 0.0017195465377546205
2024-11-13 10:45:17,260 - INFO - Slice 122: Denoising complete.
2024-11-13 10:45:17,263 - INFO - Slice 123: Estimated noise sigma = 0.0017195461925593918
2024-11-13 10:45:17,554 - INFO - Slice 123: Denoising complete.
2024-11-13 10:45:17,558 - INFO - Slice 124: Estimated noise sigma = 0.0016221785277454215
2024-11-13 10:45:17,847 - INFO - Slice 124: Denoising complete.
2024-11-13 10:45:17,850 - INFO - Slice 125: Estimated noise sigma = 0.0015769895381337901
2024-11-13 10:45:18,146 - INFO - Slice 125: Denoising complete.
2024-11-13 10:45:18,149 - INFO - Slice 126: Estimated noise sigma = 0.0016221783551478072
2024-11-13 10:45:18,449 - INFO - Slice 126: Denoising complete.
2024-11-13 10:45:18,452 - INFO - Slice 127: Estimated noise sigma = 0.001550899855337392
2024-11-13 10:45:18,754 - INFO - Slice 127: Denoising complete.
2024-11-13 10:45:18,758 - INFO - Slice 128: Estimated noise sigma = 0.00155089899234932
2024-11-13 10:45:19,094 - INFO - Slice 128: Denoising complete.
2024-11-13 10:45:19,097 - INFO - Slice 129: Estimated noise sigma = 0.0014535316727305786
2024-11-13 10:45:19,413 - INFO - Slice 129: Denoising complete.
2024-11-13 10:45:19,416 - INFO - Slice 130: Estimated noise sigma = 0.001427440609153265
2024-11-13 10:45:19,723 - INFO - Slice 130: Denoising complete.
2024-11-13 10:45:19,727 - INFO - Slice 131: Estimated noise sigma = 0.0013822516195416336
2024-11-13 10:45:20,029 - INFO - Slice 131: Denoising complete.
2024-11-13 10:45:20,033 - INFO - Slice 132: Estimated noise sigma = 0.0013561635764225723
2024-11-13 10:45:20,334 - INFO - Slice 132: Denoising complete.
2024-11-13 10:45:20,337 - INFO - Slice 133: Estimated noise sigma = 0.0013561633175261506
2024-11-13 10:45:20,634 - INFO - Slice 133: Denoising complete.
2024-11-13 10:45:20,638 - INFO - Slice 134: Estimated noise sigma = 0.001258795393815759
2024-11-13 10:45:20,940 - INFO - Slice 134: Denoising complete.
2024-11-13 10:45:20,943 - INFO - Slice 135: Estimated noise sigma = 0.001258795825309795
2024-11-13 10:45:21,244 - INFO - Slice 135: Denoising complete.
2024-11-13 10:45:21,247 - INFO - Slice 136: Estimated noise sigma = 0.001258795480114566
2024-11-13 10:45:21,547 - INFO - Slice 136: Denoising complete.
2024-11-13 10:45:21,550 - INFO - Slice 137: Estimated noise sigma = 0.0012587952212181445
2024-11-13 10:45:21,853 - INFO - Slice 137: Denoising complete.
2024-11-13 10:45:21,856 - INFO - Slice 138: Estimated noise sigma = 0.001258795393815759
2024-11-13 10:45:22,158 - INFO - Slice 138: Denoising complete.
2024-11-13 10:45:22,161 - INFO - Slice 139: Estimated noise sigma = 0.0014796201473436757
2024-11-13 10:45:22,464 - INFO - Slice 139: Denoising complete.
2024-11-13 10:45:22,467 - INFO - Slice 140: Estimated noise sigma = 0.0017195465377546205
2024-11-13 10:45:22,773 - INFO - Slice 140: Denoising complete.
2024-11-13 10:45:22,776 - INFO - Slice 141: Estimated noise sigma = 0.0018169148929590483
2024-11-13 10:45:23,086 - INFO - Slice 141: Denoising complete.
2024-11-13 10:45:23,089 - INFO - Slice 142: Estimated noise sigma = 0.0017456360479534043
2024-11-13 10:45:23,397 - INFO - Slice 142: Denoising complete.
2024-11-13 10:45:23,400 - INFO - Slice 143: Estimated noise sigma = 0.0018169150655566626
2024-11-13 10:45:23,702 - INFO - Slice 143: Denoising complete.
2024-11-13 10:45:23,702 - INFO - Saving image to 'mri_data/denoised_nl_2.tif'.
2024-11-13 10:45:23,807 - INFO - Image saved.
2024-11-13 10:45:23,809 - INFO - Current memory usage: 547.06 MB
2024-11-13 10:45:23,960 - INFO - Starting intensity normalization.
2024-11-13 10:45:24,430 - INFO - Intensity normalization complete.
2024-11-13 10:45:24,430 - INFO - Current memory usage: 656.27 MB
2024-11-13 10:45:24,433 - INFO - Using top third of the MRI data: new shape (144, 254, 260)
2024-11-13 10:45:24,433 - INFO - Computing neighborhood statistics.
2024-11-13 10:45:24,717 - INFO - Neighborhood statistics computed.
2024-11-13 10:45:24,717 - INFO - Current memory usage: 619.99 MB
2024-11-13 10:45:24,717 - INFO - Computing z-axis value for each voxel.
2024-11-13 10:45:24,725 - INFO - Z-axis value for each voxel computed.
2024-11-13 10:45:24,726 - INFO - Current memory usage: 656.24 MB
2024-11-13 10:45:24,726 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2024-11-13 10:45:25,032 - INFO - Features shape: (9509760, 4)
2024-11-13 10:45:25,032 - INFO - Current memory usage: 873.93 MB
2024-11-13 10:45:25,032 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2024-11-13 10:45:27,205 - INFO - Features shape after adding spatial connectivity: (9509760, 7)
2024-11-13 10:45:29,222 - INFO - Clustering complete with spatial connectivity.
2024-11-13 10:45:29,223 - INFO - Current memory usage: 1421.07 MB
2024-11-13 10:45:29,254 - INFO - Cluster labels reshaped to image dimensions.
2024-11-13 10:45:29,255 - INFO - Current memory usage: 913.19 MB
2024-11-13 10:45:29,265 - INFO - Processing Cluster 0.
2024-11-13 10:45:29,279 - INFO - Cluster 0: Initial voxel count = 4429796.
2024-11-13 10:45:36,447 - INFO - Cluster 0: Refined voxel count = 3304577.
2024-11-13 10:45:36,492 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2024-11-13 10:45:36,553 - INFO - Cluster 0: Mean Intensity = 0.03764890879392624
2024-11-13 10:45:36,553 - INFO - Processing Cluster 1.
2024-11-13 10:45:36,562 - INFO - Cluster 1: Initial voxel count = 197797.
2024-11-13 10:45:43,459 - INFO - Cluster 1: Refined voxel count = 123604.
2024-11-13 10:45:43,476 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2024-11-13 10:45:43,507 - INFO - Cluster 1: Mean Intensity = 9.419465065002441
2024-11-13 10:45:43,507 - INFO - Processing Cluster 2.
2024-11-13 10:45:43,521 - INFO - Cluster 2: Initial voxel count = 226604.
2024-11-13 10:45:50,448 - INFO - Cluster 2: Refined voxel count = 76.
2024-11-13 10:45:50,467 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2024-11-13 10:45:50,513 - INFO - Cluster 2: Mean Intensity = 2.5520005226135254
2024-11-13 10:45:50,513 - INFO - Processing Cluster 3.
2024-11-13 10:45:50,534 - INFO - Cluster 3: Initial voxel count = 4548380.
2024-11-13 10:45:57,483 - INFO - Cluster 3: Refined voxel count = 3838066.
2024-11-13 10:45:57,528 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2024-11-13 10:45:57,590 - INFO - Cluster 3: Mean Intensity = -0.17702600359916687
2024-11-13 10:45:57,590 - INFO - Processing Cluster 4.
2024-11-13 10:45:57,599 - INFO - Cluster 4: Initial voxel count = 107183.
2024-11-13 10:46:04,649 - INFO - Cluster 4: Refined voxel count = 0.
2024-11-13 10:46:04,649 - WARNING - Refined mask for Cluster 4 is empty.
2024-11-13 10:46:04,667 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2024-11-13 10:46:04,716 - INFO - Cluster 4: Mean Intensity = 6.990631103515625
2024-11-13 10:46:04,716 - INFO - CSF is identified as cluster 1.
2024-11-13 10:46:04,717 - INFO - Starting visualization with PyVista.
2024-11-13 10:46:04,959 - INFO - Adding Original MRI volume.
2024-11-13 10:46:05,147 - INFO - Adding Denoised MRI volume.
2024-11-13 10:46:05,292 - INFO - Adding Mask 0 mesh to visualization.
2024-11-13 10:46:05,544 - INFO - Initial mesh has 67093 points and 133324 faces.
2024-11-13 10:46:05,545 - INFO - Current memory usage: 1001.57 MB
2024-11-13 10:46:06,005 - INFO - Decimated mesh has 33569 points and 66662 faces.
2024-11-13 10:46:06,006 - INFO - Current memory usage: 1067.51 MB
2024-11-13 10:46:06,014 - INFO - Adding Mask 1 mesh to visualization.
2024-11-13 10:46:06,077 - INFO - Initial mesh has 9536 points and 19040 faces.
2024-11-13 10:46:06,077 - INFO - Current memory usage: 1068.98 MB
2024-11-13 10:46:06,147 - INFO - Decimated mesh has 4776 points and 9520 faces.
2024-11-13 10:46:06,147 - INFO - Current memory usage: 1068.98 MB
2024-11-13 10:46:06,152 - INFO - Adding Mask 2 mesh to visualization.
2024-11-13 10:46:06,211 - INFO - Initial mesh has 16 points and 20 faces.
2024-11-13 10:46:06,212 - INFO - Current memory usage: 1068.98 MB
2024-11-13 10:46:06,212 - INFO - Decimated mesh has 8 points and 10 faces.
2024-11-13 10:46:06,213 - INFO - Current memory usage: 1068.98 MB
2024-11-13 10:46:06,220 - INFO - Adding Mask 3 mesh to visualization.
2024-11-13 10:46:06,320 - INFO - Initial mesh has 36272 points and 71460 faces.
2024-11-13 10:46:06,320 - INFO - Current memory usage: 1068.98 MB
2024-11-13 10:46:06,548 - INFO - Decimated mesh has 18216 points and 35730 faces.
2024-11-13 10:46:06,549 - INFO - Current memory usage: 1068.98 MB
2024-11-13 10:46:06,554 - INFO - Adding Mask 4 mesh to visualization.
2024-11-13 10:46:06,568 - WARNING - Mask 4 is empty. Skipping visualization.
2024-11-13 10:46:06,568 - INFO - Exporting visualization to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-13 10:46:06,877 - INFO - Translator(prefix=None)
2024-11-13 10:46:06,955 - INFO - awaiting runner setup
2024-11-13 10:46:06,955 - INFO - awaiting site startup
2024-11-13 10:46:06,956 - INFO - Print WSLINK_READY_MSG
2024-11-13 10:46:06,956 - INFO - Schedule auto shutdown with timout 0
2024-11-13 10:46:06,956 - INFO - awaiting running future
2024-11-13 10:46:14,182 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/ALL_clusters.html'.
2024-11-13 10:46:14,185 - INFO - Current memory usage: 1099.09 MB
2024-11-13 10:46:14,190 - INFO - Selected slice indices for saving: [0, 143]
2024-11-13 10:46:14,630 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_0_overlay.png'.
2024-11-13 10:46:14,780 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_1_overlay.png'.
2024-11-13 10:46:14,931 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_2_overlay.png'.
2024-11-13 10:46:15,087 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_3_overlay.png'.
2024-11-13 10:46:15,277 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_0_cluster_4_overlay.png'.
2024-11-13 10:46:15,452 - INFO - Saved slice 143 overlay for Cluster 0 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_0_overlay.png'.
2024-11-13 10:46:15,635 - INFO - Saved slice 143 overlay for Cluster 1 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_1_overlay.png'.
2024-11-13 10:46:15,798 - INFO - Saved slice 143 overlay for Cluster 2 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_2_overlay.png'.
2024-11-13 10:46:15,980 - INFO - Saved slice 143 overlay for Cluster 3 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_3_overlay.png'.
2024-11-13 10:46:16,148 - INFO - Saved slice 143 overlay for Cluster 4 as '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/slices/slice_143_cluster_4_overlay.png'.
2024-11-13 10:46:16,153 - INFO - Pipeline completed successfully.
2024-11-13 10:46:16,153 - INFO - Current memory usage: 1067.17 MB
2024-11-13 10:46:16,153 - INFO - Selecting and refining the good mask based on density profile.
2024-11-13 10:46:16,153 - INFO - Selected good cluster mask with index 1.
2024-11-13 10:46:16,153 - INFO - Removing eyes from the good cluster mask.
2024-11-13 10:46:16,153 - INFO - Starting eye detection using connected components analysis.
2024-11-13 10:46:16,228 - INFO - Number of connected components found: 10
2024-11-13 10:46:16,605 - INFO - Detected potential eye at centroid: (40.87682301931415, 116.08100118249901, 63.87031927473394) with Volume: 5074.0 and Sphericity: 0.88
2024-11-13 10:46:20,365 - INFO - Detected potential eye at centroid: (101.01016175860639, 113.01804230609706, 61.506428867689756) with Volume: 4822.0 and Sphericity: 0.88
2024-11-13 10:46:20,582 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask.tif'.
2024-11-13 10:46:20,583 - INFO - Saved detected eyes coordinates at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_coords.json'.
2024-11-13 10:46:21,087 - INFO - Saved visualization image with threshold lines at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/detected_eyes_mask_visualization.jpg'.
2024-11-13 10:46:21,091 - INFO - Eyes have been removed from the CSF mask.
2024-11-13 10:46:21,091 - INFO - Detected eyes at centroids: [(40, 116, 63), (101, 113, 61)]
2024-11-13 10:46:22,780 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/plots/refined_csf_with_eyes_removed.png'.
2024-11-13 10:46:22,780 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2024-11-13 10:46:22,964 - INFO - Small objects removed from the CSF mask. New mask has 113280 voxels.
2024-11-13 10:46:22,980 - INFO - Saving the good cluster mask as TIFF.
2024-11-13 10:46:23,007 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_python/TP_3A/IRM_Cleaned/masks/good_csf_mask.tif'.
2024-11-13 10:46:23,008 - INFO - Calculating the volume of CSF in the MRI.
2024-11-13 10:46:23,131 - INFO - Calculated CSF Volume: 279.01608362972195 mm³
2024-11-13 10:46:23,132 - INFO - Total CSF Volume: 279.01608362972195 mm³
2024-11-13 10:46:23,133 - INFO - Final visualization of the Good CSF Mask.
2024-11-13 10:46:23,133 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2024-11-13 10:46:23,266 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_malade.html'.
2024-11-13 10:46:23,325 - INFO - Visualization successfully saved to 'good_cluster_malade.html'.
2024-11-13 10:46:23,325 - INFO - Visualization process completed.
2024-11-13 10:46:23,326 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-13 10:46:23,326 - WARNING - No refined mask found for cluster 0. Skipping.
2024-11-13 10:46:23,327 - INFO - Final cleanup completed.
2024-11-13 10:46:23,327 - INFO - Current memory usage: 1124.97 MB
2025-02-19 17:50:21,914 - INFO - Logging initiated.
2025-02-19 17:50:21,915 - INFO - Pipeline started.
2025-02-19 17:50:21,916 - INFO - Loading image from 'data/csf2.tif'.
2025-02-19 17:50:22,328 - INFO - Image loaded with shape (144, 763, 260).
2025-02-19 17:50:22,392 - INFO - Calculated CSF Volume: 17869553.923145205 mm³
2025-02-19 17:50:22,729 - INFO - Denoised image loaded.
2025-02-19 17:50:22,730 - INFO - Current memory usage: 559.57 MB
2025-02-19 17:50:22,912 - INFO - Starting intensity normalization.
2025-02-19 17:50:23,895 - INFO - Intensity normalization complete.
2025-02-19 17:50:23,895 - INFO - Current memory usage: 700.05 MB
2025-02-19 17:50:23,910 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2025-02-19 17:50:23,910 - INFO - Computing neighborhood statistics.
2025-02-19 17:50:24,472 - INFO - Neighborhood statistics computed.
2025-02-19 17:50:24,472 - INFO - Current memory usage: 658.39 MB
2025-02-19 17:50:24,473 - INFO - Computing z-axis value for each voxel.
2025-02-19 17:50:24,545 - INFO - Z-axis value for each voxel computed.
2025-02-19 17:50:24,546 - INFO - Current memory usage: 700.02 MB
2025-02-19 17:50:24,546 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2025-02-19 17:50:25,425 - INFO - Features shape: (10940800, 4)
2025-02-19 17:50:25,426 - INFO - Current memory usage: 949.81 MB
2025-02-19 17:50:25,426 - INFO - Plotting feature distributions.
2025-02-19 17:50:33,785 - INFO - Feature distributions plotted.
2025-02-19 17:50:33,850 - INFO - Analyzing enhanced feature distributions with a sampled subset.
2025-02-19 17:50:51,299 - INFO - Logging initiated.
2025-02-19 17:50:51,299 - INFO - Pipeline started.
2025-02-19 17:50:51,299 - INFO - Loading image from 'data/csf2.tif'.
2025-02-19 17:50:51,682 - INFO - Image loaded with shape (144, 763, 260).
2025-02-19 17:50:51,783 - INFO - Calculated CSF Volume: 17869553.923145205 mm³
2025-02-19 17:50:52,010 - INFO - Denoised image loaded.
2025-02-19 17:50:52,011 - INFO - Current memory usage: 561.70 MB
2025-02-19 17:50:52,153 - INFO - Starting intensity normalization.
2025-02-19 17:50:53,031 - INFO - Intensity normalization complete.
2025-02-19 17:50:53,031 - INFO - Current memory usage: 707.64 MB
2025-02-19 17:50:53,041 - INFO - Using top third of the MRI data: new shape (160, 263, 260)
2025-02-19 17:50:53,041 - INFO - Computing neighborhood statistics.
2025-02-19 17:50:53,534 - INFO - Neighborhood statistics computed.
2025-02-19 17:50:53,535 - INFO - Current memory usage: 665.76 MB
2025-02-19 17:50:53,535 - INFO - Computing z-axis value for each voxel.
2025-02-19 17:50:53,569 - INFO - Z-axis value for each voxel computed.
2025-02-19 17:50:53,569 - INFO - Current memory usage: 707.38 MB
2025-02-19 17:50:53,569 - INFO - Preparing features for K-Means clustering with spatial connectivity.
2025-02-19 17:50:54,083 - INFO - Features shape: (10940800, 4)
2025-02-19 17:50:54,084 - INFO - Current memory usage: 938.80 MB
2025-02-19 17:50:54,084 - INFO - Performing MiniBatch K-Means clustering with k=5, batch_size=10000, connectivity_weight=0.2.
2025-02-19 17:51:04,016 - INFO - Features shape after adding spatial connectivity: (10940800, 7)
2025-02-19 17:51:10,386 - INFO - Clustering complete with spatial connectivity.
2025-02-19 17:51:10,388 - INFO - Current memory usage: 1357.15 MB
2025-02-19 17:51:10,476 - INFO - Cluster labels reshaped to image dimensions.
2025-02-19 17:51:10,477 - INFO - Current memory usage: 772.85 MB
2025-02-19 17:51:10,503 - INFO - Processing Cluster 0.
2025-02-19 17:51:10,542 - INFO - Cluster 0: Initial voxel count = 544935.
2025-02-19 17:51:37,549 - INFO - Cluster 0: Refined voxel count = 10250.
2025-02-19 17:51:37,587 - INFO - Refined mask for Cluster 0 saved as 'csf_mask_class_0_refined_2.tif'.
2025-02-19 17:51:37,950 - INFO - Cluster 0: Mean Intensity = 1.4181171655654907
2025-02-19 17:51:37,951 - INFO - Processing Cluster 1.
2025-02-19 17:51:37,978 - INFO - Cluster 1: Initial voxel count = 229373.
2025-02-19 17:52:01,420 - INFO - Cluster 1: Refined voxel count = 61834.
2025-02-19 17:52:01,452 - INFO - Refined mask for Cluster 1 saved as 'csf_mask_class_1_refined_2.tif'.
2025-02-19 17:52:01,649 - INFO - Cluster 1: Mean Intensity = 8.865165710449219
2025-02-19 17:52:01,649 - INFO - Processing Cluster 2.
2025-02-19 17:52:01,673 - INFO - Cluster 2: Initial voxel count = 3216808.
2025-02-19 17:52:23,010 - INFO - Cluster 2: Refined voxel count = 379302.
2025-02-19 17:52:23,045 - INFO - Refined mask for Cluster 2 saved as 'csf_mask_class_2_refined_2.tif'.
2025-02-19 17:52:23,254 - INFO - Cluster 2: Mean Intensity = 0.20149455964565277
2025-02-19 17:52:23,254 - INFO - Processing Cluster 3.
2025-02-19 17:52:23,274 - INFO - Cluster 3: Initial voxel count = 3641452.
2025-02-19 17:52:43,159 - INFO - Cluster 3: Refined voxel count = 2722526.
2025-02-19 17:52:43,191 - INFO - Refined mask for Cluster 3 saved as 'csf_mask_class_3_refined_2.tif'.
2025-02-19 17:52:43,409 - INFO - Cluster 3: Mean Intensity = -0.22567543387413025
2025-02-19 17:52:43,409 - INFO - Processing Cluster 4.
2025-02-19 17:52:43,436 - INFO - Cluster 4: Initial voxel count = 3308232.
2025-02-19 17:53:03,105 - INFO - Cluster 4: Refined voxel count = 2699656.
2025-02-19 17:53:03,125 - INFO - Refined mask for Cluster 4 saved as 'csf_mask_class_4_refined_2.tif'.
2025-02-19 17:53:03,349 - INFO - Cluster 4: Mean Intensity = -0.2699243128299713
2025-02-19 17:53:03,349 - INFO - CSF is identified as cluster 1.
2025-02-19 17:53:03,349 - INFO - Starting visualization with PyVista.
2025-02-19 17:53:04,078 - INFO - Adding Original MRI volume.
2025-02-19 17:53:04,653 - INFO - Adding Denoised MRI volume.
2025-02-19 17:53:05,190 - INFO - Adding Mask 0 mesh to visualization.
2025-02-19 17:53:05,344 - INFO - Initial mesh has 2004 points and 3952 faces.
2025-02-19 17:53:05,345 - INFO - Current memory usage: 860.09 MB
2025-02-19 17:53:05,374 - INFO - Decimated mesh has 1016 points and 1976 faces.
2025-02-19 17:53:05,374 - INFO - Current memory usage: 860.89 MB
2025-02-19 17:53:05,388 - INFO - Adding Mask 1 mesh to visualization.
2025-02-19 17:53:05,556 - INFO - Initial mesh has 10735 points and 21406 faces.
2025-02-19 17:53:05,556 - INFO - Current memory usage: 860.81 MB
2025-02-19 17:53:05,705 - INFO - Decimated mesh has 5383 points and 10702 faces.
2025-02-19 17:53:05,706 - INFO - Current memory usage: 861.94 MB
2025-02-19 17:53:05,716 - INFO - Adding Mask 2 mesh to visualization.
2025-02-19 17:53:06,269 - INFO - Initial mesh has 54878 points and 109828 faces.
2025-02-19 17:53:06,270 - INFO - Current memory usage: 880.16 MB
2025-02-19 17:53:07,117 - INFO - Decimated mesh has 27409 points and 54914 faces.
2025-02-19 17:53:07,117 - INFO - Current memory usage: 915.79 MB
2025-02-19 17:53:07,128 - INFO - Adding Mask 3 mesh to visualization.
2025-02-19 17:53:07,330 - INFO - Initial mesh has 36838 points and 72646 faces.
2025-02-19 17:53:07,330 - INFO - Current memory usage: 915.89 MB
2025-02-19 17:53:07,897 - INFO - Decimated mesh has 18475 points and 36323 faces.
2025-02-19 17:53:07,898 - INFO - Current memory usage: 917.27 MB
2025-02-19 17:53:07,908 - INFO - Adding Mask 4 mesh to visualization.
2025-02-19 17:53:08,091 - INFO - Initial mesh has 27522 points and 54062 faces.
2025-02-19 17:53:08,092 - INFO - Current memory usage: 918.57 MB
2025-02-19 17:53:08,509 - INFO - Decimated mesh has 13815 points and 27030 faces.
2025-02-19 17:53:08,510 - INFO - Current memory usage: 918.57 MB
2025-02-19 17:53:08,523 - INFO - Exporting visualization to '/home/fred/Documents/TP_Lebret/IRM/ALL_clusters.html'.
2025-02-19 17:53:09,247 - INFO - Translator(prefix=None)
2025-02-19 17:53:09,371 - INFO - awaiting runner setup
2025-02-19 17:53:09,372 - INFO - awaiting site startup
2025-02-19 17:53:09,373 - INFO - Print WSLINK_READY_MSG
2025-02-19 17:53:09,373 - INFO - Schedule auto shutdown with timout 0
2025-02-19 17:53:09,373 - INFO - awaiting running future
2025-02-19 17:53:26,145 - INFO - Visualization successfully saved to '/home/fred/Documents/TP_Lebret/IRM/ALL_clusters.html'.
2025-02-19 17:53:26,208 - INFO - Current memory usage: 939.43 MB
2025-02-19 17:53:26,238 - INFO - Selected slice indices for saving: [0, 3, 6, 9, 12, 16, 19, 22, 25, 29, 32, 35, 38, 42, 45, 48, 51, 55, 58, 61, 64, 68, 71, 74, 77, 81, 84, 87, 90, 94, 97, 100, 103, 107, 110, 113, 116, 120, 123, 126, 129, 133, 136, 139, 142, 146, 149, 152, 155, 159]
2025-02-19 17:53:27,367 - INFO - Saved slice 0 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_0_cluster_0_overlay.png'.
2025-02-19 17:53:27,779 - INFO - Saved slice 0 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_0_cluster_1_overlay.png'.
2025-02-19 17:53:28,180 - INFO - Saved slice 0 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_0_cluster_2_overlay.png'.
2025-02-19 17:53:28,590 - INFO - Saved slice 0 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_0_cluster_3_overlay.png'.
2025-02-19 17:53:28,976 - INFO - Saved slice 0 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_0_cluster_4_overlay.png'.
2025-02-19 17:53:29,374 - INFO - Saved slice 3 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_3_cluster_0_overlay.png'.
2025-02-19 17:53:29,753 - INFO - Saved slice 3 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_3_cluster_1_overlay.png'.
2025-02-19 17:53:30,149 - INFO - Saved slice 3 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_3_cluster_2_overlay.png'.
2025-02-19 17:53:30,577 - INFO - Saved slice 3 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_3_cluster_3_overlay.png'.
2025-02-19 17:53:30,976 - INFO - Saved slice 3 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_3_cluster_4_overlay.png'.
2025-02-19 17:53:31,351 - INFO - Saved slice 6 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_6_cluster_0_overlay.png'.
2025-02-19 17:53:31,778 - INFO - Saved slice 6 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_6_cluster_1_overlay.png'.
2025-02-19 17:53:32,162 - INFO - Saved slice 6 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_6_cluster_2_overlay.png'.
2025-02-19 17:53:32,561 - INFO - Saved slice 6 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_6_cluster_3_overlay.png'.
2025-02-19 17:53:33,006 - INFO - Saved slice 6 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_6_cluster_4_overlay.png'.
2025-02-19 17:53:33,440 - INFO - Saved slice 9 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_9_cluster_0_overlay.png'.
2025-02-19 17:53:33,836 - INFO - Saved slice 9 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_9_cluster_1_overlay.png'.
2025-02-19 17:53:34,322 - INFO - Saved slice 9 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_9_cluster_2_overlay.png'.
2025-02-19 17:53:34,730 - INFO - Saved slice 9 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_9_cluster_3_overlay.png'.
2025-02-19 17:53:35,237 - INFO - Saved slice 9 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_9_cluster_4_overlay.png'.
2025-02-19 17:53:35,692 - INFO - Saved slice 12 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_12_cluster_0_overlay.png'.
2025-02-19 17:53:36,158 - INFO - Saved slice 12 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_12_cluster_1_overlay.png'.
2025-02-19 17:53:36,567 - INFO - Saved slice 12 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_12_cluster_2_overlay.png'.
2025-02-19 17:53:36,926 - INFO - Saved slice 12 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_12_cluster_3_overlay.png'.
2025-02-19 17:53:37,559 - INFO - Saved slice 12 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_12_cluster_4_overlay.png'.
2025-02-19 17:53:37,828 - INFO - Saved slice 16 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_16_cluster_0_overlay.png'.
2025-02-19 17:53:38,071 - INFO - Saved slice 16 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_16_cluster_1_overlay.png'.
2025-02-19 17:53:38,340 - INFO - Saved slice 16 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_16_cluster_2_overlay.png'.
2025-02-19 17:53:38,577 - INFO - Saved slice 16 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_16_cluster_3_overlay.png'.
2025-02-19 17:53:38,824 - INFO - Saved slice 16 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_16_cluster_4_overlay.png'.
2025-02-19 17:53:39,065 - INFO - Saved slice 19 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_19_cluster_0_overlay.png'.
2025-02-19 17:53:39,279 - INFO - Saved slice 19 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_19_cluster_1_overlay.png'.
2025-02-19 17:53:39,517 - INFO - Saved slice 19 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_19_cluster_2_overlay.png'.
2025-02-19 17:53:39,734 - INFO - Saved slice 19 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_19_cluster_3_overlay.png'.
2025-02-19 17:53:40,059 - INFO - Saved slice 19 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_19_cluster_4_overlay.png'.
2025-02-19 17:53:40,296 - INFO - Saved slice 22 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_22_cluster_0_overlay.png'.
2025-02-19 17:53:40,494 - INFO - Saved slice 22 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_22_cluster_1_overlay.png'.
2025-02-19 17:53:40,691 - INFO - Saved slice 22 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_22_cluster_2_overlay.png'.
2025-02-19 17:53:40,919 - INFO - Saved slice 22 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_22_cluster_3_overlay.png'.
2025-02-19 17:53:41,120 - INFO - Saved slice 22 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_22_cluster_4_overlay.png'.
2025-02-19 17:53:41,360 - INFO - Saved slice 25 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_25_cluster_0_overlay.png'.
2025-02-19 17:53:41,568 - INFO - Saved slice 25 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_25_cluster_1_overlay.png'.
2025-02-19 17:53:41,784 - INFO - Saved slice 25 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_25_cluster_2_overlay.png'.
2025-02-19 17:53:42,007 - INFO - Saved slice 25 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_25_cluster_3_overlay.png'.
2025-02-19 17:53:42,223 - INFO - Saved slice 25 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_25_cluster_4_overlay.png'.
2025-02-19 17:53:42,425 - INFO - Saved slice 29 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_29_cluster_0_overlay.png'.
2025-02-19 17:53:42,630 - INFO - Saved slice 29 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_29_cluster_1_overlay.png'.
2025-02-19 17:53:42,853 - INFO - Saved slice 29 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_29_cluster_2_overlay.png'.
2025-02-19 17:53:43,074 - INFO - Saved slice 29 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_29_cluster_3_overlay.png'.
2025-02-19 17:53:43,299 - INFO - Saved slice 29 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_29_cluster_4_overlay.png'.
2025-02-19 17:53:43,509 - INFO - Saved slice 32 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_32_cluster_0_overlay.png'.
2025-02-19 17:53:43,728 - INFO - Saved slice 32 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_32_cluster_1_overlay.png'.
2025-02-19 17:53:44,004 - INFO - Saved slice 32 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_32_cluster_2_overlay.png'.
2025-02-19 17:53:44,233 - INFO - Saved slice 32 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_32_cluster_3_overlay.png'.
2025-02-19 17:53:44,446 - INFO - Saved slice 32 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_32_cluster_4_overlay.png'.
2025-02-19 17:53:44,669 - INFO - Saved slice 35 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_35_cluster_0_overlay.png'.
2025-02-19 17:53:44,937 - INFO - Saved slice 35 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_35_cluster_1_overlay.png'.
2025-02-19 17:53:45,151 - INFO - Saved slice 35 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_35_cluster_2_overlay.png'.
2025-02-19 17:53:45,348 - INFO - Saved slice 35 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_35_cluster_3_overlay.png'.
2025-02-19 17:53:45,530 - INFO - Saved slice 35 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_35_cluster_4_overlay.png'.
2025-02-19 17:53:45,708 - INFO - Saved slice 38 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_38_cluster_0_overlay.png'.
2025-02-19 17:53:46,044 - INFO - Saved slice 38 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_38_cluster_1_overlay.png'.
2025-02-19 17:53:46,336 - INFO - Saved slice 38 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_38_cluster_2_overlay.png'.
2025-02-19 17:53:46,603 - INFO - Saved slice 38 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_38_cluster_3_overlay.png'.
2025-02-19 17:53:46,953 - INFO - Saved slice 38 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_38_cluster_4_overlay.png'.
2025-02-19 17:53:47,241 - INFO - Saved slice 42 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_42_cluster_0_overlay.png'.
2025-02-19 17:53:47,474 - INFO - Saved slice 42 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_42_cluster_1_overlay.png'.
2025-02-19 17:53:47,751 - INFO - Saved slice 42 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_42_cluster_2_overlay.png'.
2025-02-19 17:53:48,158 - INFO - Saved slice 42 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_42_cluster_3_overlay.png'.
2025-02-19 17:53:48,496 - INFO - Saved slice 42 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_42_cluster_4_overlay.png'.
2025-02-19 17:53:48,725 - INFO - Saved slice 45 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_45_cluster_0_overlay.png'.
2025-02-19 17:53:48,936 - INFO - Saved slice 45 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_45_cluster_1_overlay.png'.
2025-02-19 17:53:49,138 - INFO - Saved slice 45 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_45_cluster_2_overlay.png'.
2025-02-19 17:53:49,325 - INFO - Saved slice 45 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_45_cluster_3_overlay.png'.
2025-02-19 17:53:49,504 - INFO - Saved slice 45 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_45_cluster_4_overlay.png'.
2025-02-19 17:53:49,671 - INFO - Saved slice 48 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_48_cluster_0_overlay.png'.
2025-02-19 17:53:49,900 - INFO - Saved slice 48 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_48_cluster_1_overlay.png'.
2025-02-19 17:53:50,135 - INFO - Saved slice 48 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_48_cluster_2_overlay.png'.
2025-02-19 17:53:50,341 - INFO - Saved slice 48 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_48_cluster_3_overlay.png'.
2025-02-19 17:53:50,536 - INFO - Saved slice 48 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_48_cluster_4_overlay.png'.
2025-02-19 17:53:50,714 - INFO - Saved slice 51 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_51_cluster_0_overlay.png'.
2025-02-19 17:53:50,885 - INFO - Saved slice 51 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_51_cluster_1_overlay.png'.
2025-02-19 17:53:51,061 - INFO - Saved slice 51 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_51_cluster_2_overlay.png'.
2025-02-19 17:53:51,261 - INFO - Saved slice 51 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_51_cluster_3_overlay.png'.
2025-02-19 17:53:51,548 - INFO - Saved slice 51 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_51_cluster_4_overlay.png'.
2025-02-19 17:53:51,826 - INFO - Saved slice 55 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_55_cluster_0_overlay.png'.
2025-02-19 17:53:52,108 - INFO - Saved slice 55 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_55_cluster_1_overlay.png'.
2025-02-19 17:53:52,448 - INFO - Saved slice 55 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_55_cluster_2_overlay.png'.
2025-02-19 17:53:52,739 - INFO - Saved slice 55 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_55_cluster_3_overlay.png'.
2025-02-19 17:53:52,970 - INFO - Saved slice 55 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_55_cluster_4_overlay.png'.
2025-02-19 17:53:53,261 - INFO - Saved slice 58 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_58_cluster_0_overlay.png'.
2025-02-19 17:53:53,507 - INFO - Saved slice 58 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_58_cluster_1_overlay.png'.
2025-02-19 17:53:53,755 - INFO - Saved slice 58 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_58_cluster_2_overlay.png'.
2025-02-19 17:53:54,089 - INFO - Saved slice 58 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_58_cluster_3_overlay.png'.
2025-02-19 17:53:54,376 - INFO - Saved slice 58 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_58_cluster_4_overlay.png'.
2025-02-19 17:53:54,613 - INFO - Saved slice 61 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_61_cluster_0_overlay.png'.
2025-02-19 17:53:54,935 - INFO - Saved slice 61 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_61_cluster_1_overlay.png'.
2025-02-19 17:53:55,270 - INFO - Saved slice 61 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_61_cluster_2_overlay.png'.
2025-02-19 17:53:55,655 - INFO - Saved slice 61 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_61_cluster_3_overlay.png'.
2025-02-19 17:53:55,992 - INFO - Saved slice 61 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_61_cluster_4_overlay.png'.
2025-02-19 17:53:56,211 - INFO - Saved slice 64 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_64_cluster_0_overlay.png'.
2025-02-19 17:53:56,565 - INFO - Saved slice 64 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_64_cluster_1_overlay.png'.
2025-02-19 17:53:56,747 - INFO - Saved slice 64 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_64_cluster_2_overlay.png'.
2025-02-19 17:53:56,954 - INFO - Saved slice 64 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_64_cluster_3_overlay.png'.
2025-02-19 17:53:57,133 - INFO - Saved slice 64 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_64_cluster_4_overlay.png'.
2025-02-19 17:53:57,366 - INFO - Saved slice 68 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_68_cluster_0_overlay.png'.
2025-02-19 17:53:57,576 - INFO - Saved slice 68 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_68_cluster_1_overlay.png'.
2025-02-19 17:53:57,785 - INFO - Saved slice 68 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_68_cluster_2_overlay.png'.
2025-02-19 17:53:58,057 - INFO - Saved slice 68 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_68_cluster_3_overlay.png'.
2025-02-19 17:53:58,277 - INFO - Saved slice 68 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_68_cluster_4_overlay.png'.
2025-02-19 17:53:58,481 - INFO - Saved slice 71 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_71_cluster_0_overlay.png'.
2025-02-19 17:53:58,674 - INFO - Saved slice 71 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_71_cluster_1_overlay.png'.
2025-02-19 17:53:58,882 - INFO - Saved slice 71 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_71_cluster_2_overlay.png'.
2025-02-19 17:53:59,113 - INFO - Saved slice 71 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_71_cluster_3_overlay.png'.
2025-02-19 17:53:59,319 - INFO - Saved slice 71 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_71_cluster_4_overlay.png'.
2025-02-19 17:53:59,521 - INFO - Saved slice 74 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_74_cluster_0_overlay.png'.
2025-02-19 17:53:59,744 - INFO - Saved slice 74 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_74_cluster_1_overlay.png'.
2025-02-19 17:53:59,985 - INFO - Saved slice 74 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_74_cluster_2_overlay.png'.
2025-02-19 17:54:00,209 - INFO - Saved slice 74 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_74_cluster_3_overlay.png'.
2025-02-19 17:54:00,400 - INFO - Saved slice 74 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_74_cluster_4_overlay.png'.
2025-02-19 17:54:00,577 - INFO - Saved slice 77 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_77_cluster_0_overlay.png'.
2025-02-19 17:54:00,769 - INFO - Saved slice 77 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_77_cluster_1_overlay.png'.
2025-02-19 17:54:00,981 - INFO - Saved slice 77 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_77_cluster_2_overlay.png'.
2025-02-19 17:54:01,169 - INFO - Saved slice 77 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_77_cluster_3_overlay.png'.
2025-02-19 17:54:01,388 - INFO - Saved slice 77 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_77_cluster_4_overlay.png'.
2025-02-19 17:54:01,667 - INFO - Saved slice 81 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_81_cluster_0_overlay.png'.
2025-02-19 17:54:01,976 - INFO - Saved slice 81 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_81_cluster_1_overlay.png'.
2025-02-19 17:54:02,339 - INFO - Saved slice 81 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_81_cluster_2_overlay.png'.
2025-02-19 17:54:02,606 - INFO - Saved slice 81 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_81_cluster_3_overlay.png'.
2025-02-19 17:54:02,906 - INFO - Saved slice 81 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_81_cluster_4_overlay.png'.
2025-02-19 17:54:03,199 - INFO - Saved slice 84 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_84_cluster_0_overlay.png'.
2025-02-19 17:54:03,423 - INFO - Saved slice 84 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_84_cluster_1_overlay.png'.
2025-02-19 17:54:03,629 - INFO - Saved slice 84 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_84_cluster_2_overlay.png'.
2025-02-19 17:54:03,888 - INFO - Saved slice 84 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_84_cluster_3_overlay.png'.
2025-02-19 17:54:04,174 - INFO - Saved slice 84 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_84_cluster_4_overlay.png'.
2025-02-19 17:54:04,417 - INFO - Saved slice 87 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_87_cluster_0_overlay.png'.
2025-02-19 17:54:04,671 - INFO - Saved slice 87 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_87_cluster_1_overlay.png'.
2025-02-19 17:54:05,010 - INFO - Saved slice 87 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_87_cluster_2_overlay.png'.
2025-02-19 17:54:05,394 - INFO - Saved slice 87 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_87_cluster_3_overlay.png'.
2025-02-19 17:54:05,705 - INFO - Saved slice 87 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_87_cluster_4_overlay.png'.
2025-02-19 17:54:06,113 - INFO - Saved slice 90 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_90_cluster_0_overlay.png'.
2025-02-19 17:54:06,529 - INFO - Saved slice 90 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_90_cluster_1_overlay.png'.
2025-02-19 17:54:06,916 - INFO - Saved slice 90 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_90_cluster_2_overlay.png'.
2025-02-19 17:54:07,397 - INFO - Saved slice 90 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_90_cluster_3_overlay.png'.
2025-02-19 17:54:07,790 - INFO - Saved slice 90 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_90_cluster_4_overlay.png'.
2025-02-19 17:54:08,232 - INFO - Saved slice 94 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_94_cluster_0_overlay.png'.
2025-02-19 17:54:08,625 - INFO - Saved slice 94 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_94_cluster_1_overlay.png'.
2025-02-19 17:54:09,060 - INFO - Saved slice 94 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_94_cluster_2_overlay.png'.
2025-02-19 17:54:09,393 - INFO - Saved slice 94 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_94_cluster_3_overlay.png'.
2025-02-19 17:54:09,693 - INFO - Saved slice 94 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_94_cluster_4_overlay.png'.
2025-02-19 17:54:10,030 - INFO - Saved slice 97 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_97_cluster_0_overlay.png'.
2025-02-19 17:54:10,302 - INFO - Saved slice 97 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_97_cluster_1_overlay.png'.
2025-02-19 17:54:10,617 - INFO - Saved slice 97 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_97_cluster_2_overlay.png'.
2025-02-19 17:54:11,011 - INFO - Saved slice 97 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_97_cluster_3_overlay.png'.
2025-02-19 17:54:11,299 - INFO - Saved slice 97 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_97_cluster_4_overlay.png'.
2025-02-19 17:54:11,607 - INFO - Saved slice 100 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_100_cluster_0_overlay.png'.
2025-02-19 17:54:11,903 - INFO - Saved slice 100 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_100_cluster_1_overlay.png'.
2025-02-19 17:54:12,169 - INFO - Saved slice 100 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_100_cluster_2_overlay.png'.
2025-02-19 17:54:12,476 - INFO - Saved slice 100 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_100_cluster_3_overlay.png'.
2025-02-19 17:54:12,774 - INFO - Saved slice 100 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_100_cluster_4_overlay.png'.
2025-02-19 17:54:13,174 - INFO - Saved slice 103 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_103_cluster_0_overlay.png'.
2025-02-19 17:54:13,588 - INFO - Saved slice 103 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_103_cluster_1_overlay.png'.
2025-02-19 17:54:14,020 - INFO - Saved slice 103 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_103_cluster_2_overlay.png'.
2025-02-19 17:54:14,333 - INFO - Saved slice 103 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_103_cluster_3_overlay.png'.
2025-02-19 17:54:14,639 - INFO - Saved slice 103 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_103_cluster_4_overlay.png'.
2025-02-19 17:54:15,053 - INFO - Saved slice 107 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_107_cluster_0_overlay.png'.
2025-02-19 17:54:15,385 - INFO - Saved slice 107 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_107_cluster_1_overlay.png'.
2025-02-19 17:54:15,683 - INFO - Saved slice 107 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_107_cluster_2_overlay.png'.
2025-02-19 17:54:16,002 - INFO - Saved slice 107 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_107_cluster_3_overlay.png'.
2025-02-19 17:54:16,377 - INFO - Saved slice 107 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_107_cluster_4_overlay.png'.
2025-02-19 17:54:16,702 - INFO - Saved slice 110 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_110_cluster_0_overlay.png'.
2025-02-19 17:54:17,034 - INFO - Saved slice 110 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_110_cluster_1_overlay.png'.
2025-02-19 17:54:17,381 - INFO - Saved slice 110 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_110_cluster_2_overlay.png'.
2025-02-19 17:54:17,694 - INFO - Saved slice 110 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_110_cluster_3_overlay.png'.
2025-02-19 17:54:18,080 - INFO - Saved slice 110 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_110_cluster_4_overlay.png'.
2025-02-19 17:54:18,422 - INFO - Saved slice 113 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_113_cluster_0_overlay.png'.
2025-02-19 17:54:18,810 - INFO - Saved slice 113 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_113_cluster_1_overlay.png'.
2025-02-19 17:54:19,308 - INFO - Saved slice 113 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_113_cluster_2_overlay.png'.
2025-02-19 17:54:19,795 - INFO - Saved slice 113 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_113_cluster_3_overlay.png'.
2025-02-19 17:54:20,291 - INFO - Saved slice 113 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_113_cluster_4_overlay.png'.
2025-02-19 17:54:23,463 - INFO - Saved slice 116 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_116_cluster_0_overlay.png'.
2025-02-19 17:54:24,308 - INFO - Saved slice 116 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_116_cluster_1_overlay.png'.
2025-02-19 17:54:24,753 - INFO - Saved slice 116 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_116_cluster_2_overlay.png'.
2025-02-19 17:54:25,228 - INFO - Saved slice 116 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_116_cluster_3_overlay.png'.
2025-02-19 17:54:25,686 - INFO - Saved slice 116 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_116_cluster_4_overlay.png'.
2025-02-19 17:54:26,070 - INFO - Saved slice 120 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_120_cluster_0_overlay.png'.
2025-02-19 17:54:26,382 - INFO - Saved slice 120 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_120_cluster_1_overlay.png'.
2025-02-19 17:54:26,612 - INFO - Saved slice 120 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_120_cluster_2_overlay.png'.
2025-02-19 17:54:26,816 - INFO - Saved slice 120 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_120_cluster_3_overlay.png'.
2025-02-19 17:54:27,008 - INFO - Saved slice 120 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_120_cluster_4_overlay.png'.
2025-02-19 17:54:27,182 - INFO - Saved slice 123 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_123_cluster_0_overlay.png'.
2025-02-19 17:54:27,362 - INFO - Saved slice 123 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_123_cluster_1_overlay.png'.
2025-02-19 17:54:27,539 - INFO - Saved slice 123 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_123_cluster_2_overlay.png'.
2025-02-19 17:54:27,717 - INFO - Saved slice 123 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_123_cluster_3_overlay.png'.
2025-02-19 17:54:27,911 - INFO - Saved slice 123 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_123_cluster_4_overlay.png'.
2025-02-19 17:54:28,091 - INFO - Saved slice 126 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_126_cluster_0_overlay.png'.
2025-02-19 17:54:28,276 - INFO - Saved slice 126 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_126_cluster_1_overlay.png'.
2025-02-19 17:54:28,564 - INFO - Saved slice 126 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_126_cluster_2_overlay.png'.
2025-02-19 17:54:28,890 - INFO - Saved slice 126 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_126_cluster_3_overlay.png'.
2025-02-19 17:54:29,209 - INFO - Saved slice 126 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_126_cluster_4_overlay.png'.
2025-02-19 17:54:29,525 - INFO - Saved slice 129 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_129_cluster_0_overlay.png'.
2025-02-19 17:54:29,855 - INFO - Saved slice 129 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_129_cluster_1_overlay.png'.
2025-02-19 17:54:30,130 - INFO - Saved slice 129 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_129_cluster_2_overlay.png'.
2025-02-19 17:54:30,403 - INFO - Saved slice 129 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_129_cluster_3_overlay.png'.
2025-02-19 17:54:30,634 - INFO - Saved slice 129 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_129_cluster_4_overlay.png'.
2025-02-19 17:54:30,875 - INFO - Saved slice 133 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_133_cluster_0_overlay.png'.
2025-02-19 17:54:31,172 - INFO - Saved slice 133 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_133_cluster_1_overlay.png'.
2025-02-19 17:54:31,419 - INFO - Saved slice 133 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_133_cluster_2_overlay.png'.
2025-02-19 17:54:31,681 - INFO - Saved slice 133 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_133_cluster_3_overlay.png'.
2025-02-19 17:54:31,936 - INFO - Saved slice 133 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_133_cluster_4_overlay.png'.
2025-02-19 17:54:32,146 - INFO - Saved slice 136 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_136_cluster_0_overlay.png'.
2025-02-19 17:54:32,350 - INFO - Saved slice 136 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_136_cluster_1_overlay.png'.
2025-02-19 17:54:32,538 - INFO - Saved slice 136 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_136_cluster_2_overlay.png'.
2025-02-19 17:54:32,729 - INFO - Saved slice 136 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_136_cluster_3_overlay.png'.
2025-02-19 17:54:33,107 - INFO - Saved slice 136 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_136_cluster_4_overlay.png'.
2025-02-19 17:54:33,530 - INFO - Saved slice 139 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_139_cluster_0_overlay.png'.
2025-02-19 17:54:33,860 - INFO - Saved slice 139 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_139_cluster_1_overlay.png'.
2025-02-19 17:54:34,243 - INFO - Saved slice 139 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_139_cluster_2_overlay.png'.
2025-02-19 17:54:34,592 - INFO - Saved slice 139 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_139_cluster_3_overlay.png'.
2025-02-19 17:54:35,000 - INFO - Saved slice 139 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_139_cluster_4_overlay.png'.
2025-02-19 17:54:35,487 - INFO - Saved slice 142 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_142_cluster_0_overlay.png'.
2025-02-19 17:54:35,946 - INFO - Saved slice 142 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_142_cluster_1_overlay.png'.
2025-02-19 17:54:36,355 - INFO - Saved slice 142 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_142_cluster_2_overlay.png'.
2025-02-19 17:54:36,833 - INFO - Saved slice 142 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_142_cluster_3_overlay.png'.
2025-02-19 17:54:37,219 - INFO - Saved slice 142 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_142_cluster_4_overlay.png'.
2025-02-19 17:54:37,620 - INFO - Saved slice 146 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_146_cluster_0_overlay.png'.
2025-02-19 17:54:37,993 - INFO - Saved slice 146 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_146_cluster_1_overlay.png'.
2025-02-19 17:54:38,339 - INFO - Saved slice 146 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_146_cluster_2_overlay.png'.
2025-02-19 17:54:38,634 - INFO - Saved slice 146 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_146_cluster_3_overlay.png'.
2025-02-19 17:54:38,947 - INFO - Saved slice 146 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_146_cluster_4_overlay.png'.
2025-02-19 17:54:39,324 - INFO - Saved slice 149 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_149_cluster_0_overlay.png'.
2025-02-19 17:54:39,684 - INFO - Saved slice 149 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_149_cluster_1_overlay.png'.
2025-02-19 17:54:40,080 - INFO - Saved slice 149 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_149_cluster_2_overlay.png'.
2025-02-19 17:54:40,483 - INFO - Saved slice 149 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_149_cluster_3_overlay.png'.
2025-02-19 17:54:40,801 - INFO - Saved slice 149 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_149_cluster_4_overlay.png'.
2025-02-19 17:54:41,263 - INFO - Saved slice 152 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_152_cluster_0_overlay.png'.
2025-02-19 17:54:41,660 - INFO - Saved slice 152 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_152_cluster_1_overlay.png'.
2025-02-19 17:54:42,092 - INFO - Saved slice 152 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_152_cluster_2_overlay.png'.
2025-02-19 17:54:42,534 - INFO - Saved slice 152 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_152_cluster_3_overlay.png'.
2025-02-19 17:54:42,953 - INFO - Saved slice 152 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_152_cluster_4_overlay.png'.
2025-02-19 17:54:43,283 - INFO - Saved slice 155 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_155_cluster_0_overlay.png'.
2025-02-19 17:54:43,623 - INFO - Saved slice 155 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_155_cluster_1_overlay.png'.
2025-02-19 17:54:44,018 - INFO - Saved slice 155 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_155_cluster_2_overlay.png'.
2025-02-19 17:54:44,429 - INFO - Saved slice 155 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_155_cluster_3_overlay.png'.
2025-02-19 17:54:44,842 - INFO - Saved slice 155 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_155_cluster_4_overlay.png'.
2025-02-19 17:54:45,205 - INFO - Saved slice 159 overlay for Cluster 0 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_159_cluster_0_overlay.png'.
2025-02-19 17:54:45,568 - INFO - Saved slice 159 overlay for Cluster 1 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_159_cluster_1_overlay.png'.
2025-02-19 17:54:46,001 - INFO - Saved slice 159 overlay for Cluster 2 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_159_cluster_2_overlay.png'.
2025-02-19 17:54:46,424 - INFO - Saved slice 159 overlay for Cluster 3 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_159_cluster_3_overlay.png'.
2025-02-19 17:54:46,843 - INFO - Saved slice 159 overlay for Cluster 4 as '/home/fred/Documents/TP_Lebret/IRM/slices/slice_159_cluster_4_overlay.png'.
2025-02-19 17:54:46,856 - INFO - Pipeline completed successfully.
2025-02-19 17:54:46,859 - INFO - Current memory usage: 856.75 MB
2025-02-19 17:54:46,860 - INFO - Selecting and refining the good mask based on density profile.
2025-02-19 17:54:46,863 - INFO - Selected good cluster mask with index 1.
2025-02-19 17:54:46,863 - INFO - Removing eyes from the good cluster mask.
2025-02-19 17:54:46,864 - INFO - Starting eye detection using connected components analysis.
2025-02-19 17:54:47,109 - INFO - Number of connected components found: 28
2025-02-19 17:54:50,632 - INFO - Detected potential eye at centroid: (50.6707136997539, 113.82953240360952, 59.52173913043478) with Volume: 6095.0 and Sphericity: 0.88
2025-02-19 17:55:02,166 - INFO - Detected potential eye at centroid: (109.78648431214803, 112.71069991954948, 61.12566371681416) with Volume: 6215.0 and Sphericity: 0.88
2025-02-19 17:55:04,621 - INFO - Saved detected eyes mask at '/home/fred/Documents/TP_Lebret/IRM/masks/detected_eyes_mask.tif'.
2025-02-19 17:55:04,622 - INFO - Saved detected eyes coordinates at '/home/fred/Documents/TP_Lebret/IRM/masks/detected_eyes_mask_coords.json'.
2025-02-19 17:55:05,761 - INFO - Saved visualization image with threshold lines at '/home/fred/Documents/TP_Lebret/IRM/masks/detected_eyes_mask_visualization.jpg'.
2025-02-19 17:55:05,775 - INFO - Eyes have been removed from the CSF mask.
2025-02-19 17:55:05,775 - INFO - Detected eyes at centroids: [(50, 113, 59), (109, 112, 61)]
2025-02-19 17:55:09,356 - INFO - Saved overlaid refined CSF mask with eyes removed at '/home/fred/Documents/TP_Lebret/IRM/plots/refined_csf_with_eyes_removed.png'.
2025-02-19 17:55:09,356 - INFO - Starting removal of small objects from the CSF mask with minimum size 200 voxels.
2025-02-19 17:55:10,036 - INFO - Small objects removed from the CSF mask. New mask has 48466 voxels.
2025-02-19 17:55:10,072 - INFO - Saving the good cluster mask as TIFF.
2025-02-19 17:55:10,119 - INFO - Good cluster mask saved at '/home/fred/Documents/TP_Lebret/IRM/masks/good_csf_mask.tif'.
2025-02-19 17:55:10,119 - INFO - Calculating the volume of CSF in the MRI.
2025-02-19 17:55:10,412 - INFO - Calculated CSF Volume: 0.334101999742111 mm³
2025-02-19 17:55:10,420 - INFO - Total CSF Volume: 0.334101999742111 mm³
2025-02-19 17:55:10,420 - INFO - Final visualization of the Good CSF Mask.
2025-02-19 17:55:10,420 - INFO - Starting visualization of the Good CSF Mask with PyVista.
2025-02-19 17:55:10,788 - INFO - Exporting the Good CSF Mask visualization to 'good_cluster_malade.html'.
2025-02-19 17:55:10,902 - INFO - Visualization successfully saved to 'good_cluster_malade.html'.
2025-02-19 17:55:10,904 - INFO - Visualization process completed.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,906 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - WARNING - No refined mask found for cluster 0. Skipping.
2025-02-19 17:55:10,907 - INFO - Final cleanup completed.
2025-02-19 17:55:10,908 - INFO - Current memory usage: 858.60 MB
